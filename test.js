! function(a, b) {
    "object" == typeof module && "object" == typeof module.exports ? module.exports = a.document ? b(a, !0) : function(a) {
        if (!a.document) throw new Error("jQuery requires a window with a document");
        return b(a)
    } : b(a)
}("undefined" != typeof window ? window : this, function(a, b) {
    var c = [],
        d = c.slice,
        e = c.concat,
        f = c.push,
        g = c.indexOf,
        h = {},
        i = h.toString,
        j = h.hasOwnProperty,
        k = "".trim,
        l = {},
        m = "1.11.0",
        n = function(a, b) {
            return new n.fn.init(a, b)
        },
        o = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
        p = /^-ms-/,
        q = /-([\da-z])/gi,
        r = function(a, b) {
            return b.toUpperCase()
        };
    n.fn = n.prototype = {
        jquery: m,
        constructor: n,
        selector: "",
        length: 0,
        toArray: function() {
            return d.call(this)
        },
        get: function(a) {
            return null != a ? 0 > a ? this[a + this.length] : this[a] : d.call(this)
        },
        pushStack: function(a) {
            var b = n.merge(this.constructor(), a);
            return b.prevObject = this, b.context = this.context, b
        },
        each: function(a, b) {
            return n.each(this, a, b)
        },
        map: function(a) {
            return this.pushStack(n.map(this, function(b, c) {
                return a.call(b, c, b)
            }))
        },
        slice: function() {
            return this.pushStack(d.apply(this, arguments))
        },
        first: function() {
            return this.eq(0)
        },
        last: function() {
            return this.eq(-1)
        },
        eq: function(a) {
            var b = this.length,
                c = +a + (0 > a ? b : 0);
            return this.pushStack(c >= 0 && b > c ? [this[c]] : [])
        },
        end: function() {
            return this.prevObject || this.constructor(null)
        },
        push: f,
        sort: c.sort,
        splice: c.splice
    }, n.extend = n.fn.extend = function() {
        var a, b, c, d, e, f, g = arguments[0] || {},
            h = 1,
            i = arguments.length,
            j = !1;
        for ("boolean" == typeof g && (j = g, g = arguments[h] || {}, h++), "object" == typeof g || n.isFunction(g) || (g = {}), h === i && (g = this, h--); i > h; h++)
            if (null != (e = arguments[h]))
                for (d in e) a = g[d], c = e[d], g !== c && (j && c && (n.isPlainObject(c) || (b = n.isArray(c))) ? (b ? (b = !1, f = a && n.isArray(a) ? a : []) : f = a && n.isPlainObject(a) ? a : {}, g[d] = n.extend(j, f, c)) : void 0 !== c && (g[d] = c));
        return g
    }, n.extend({
        expando: "jQuery" + (m + Math.random()).replace(/\D/g, ""),
        isReady: !0,
        error: function(a) {
            throw new Error(a)
        },
        noop: function() {},
        isFunction: function(a) {
            return "function" === n.type(a)
        },
        isArray: Array.isArray || function(a) {
            return "array" === n.type(a)
        },
        isWindow: function(a) {
            return null != a && a == a.window
        },
        isNumeric: function(a) {
            return a - parseFloat(a) >= 0
        },
        isEmptyObject: function(a) {
            var b;
            for (b in a) return !1;
            return !0
        },
        isPlainObject: function(a) {
            var b;
            if (!a || "object" !== n.type(a) || a.nodeType || n.isWindow(a)) return !1;
            try {
                if (a.constructor && !j.call(a, "constructor") && !j.call(a.constructor.prototype, "isPrototypeOf")) return !1
            } catch (c) {
                return !1
            }
            if (l.ownLast)
                for (b in a) return j.call(a, b);
            for (b in a);
            return void 0 === b || j.call(a, b)
        },
        type: function(a) {
            return null == a ? a + "" : "object" == typeof a || "function" == typeof a ? h[i.call(a)] || "object" : typeof a
        },
        globalEval: function(b) {
            b && n.trim(b) && (a.execScript || function(b) {
                a.eval.call(a, b)
            })(b)
        },
        camelCase: function(a) {
            return a.replace(p, "ms-").replace(q, r)
        },
        nodeName: function(a, b) {
            return a.nodeName && a.nodeName.toLowerCase() === b.toLowerCase()
        },
        each: function(a, b, c) {
            var d, e = 0,
                f = a.length,
                g = s(a);
            if (c) {
                if (g) {
                    for (; f > e; e++)
                        if (d = b.apply(a[e], c), d === !1) break
                } else
                    for (e in a)
                        if (d = b.apply(a[e], c), d === !1) break
            } else if (g) {
                for (; f > e; e++)
                    if (d = b.call(a[e], e, a[e]), d === !1) break
            } else
                for (e in a)
                    if (d = b.call(a[e], e, a[e]), d === !1) break; return a
        },
        trim: k && !k.call("\ufeffÂ ") ? function(a) {
            return null == a ? "" : k.call(a)
        } : function(a) {
            return null == a ? "" : (a + "").replace(o, "")
        },
        makeArray: function(a, b) {
            var c = b || [];
            return null != a && (s(Object(a)) ? n.merge(c, "string" == typeof a ? [a] : a) : f.call(c, a)), c
        },
        inArray: function(a, b, c) {
            var d;
            if (b) {
                if (g) return g.call(b, a, c);
                for (d = b.length, c = c ? 0 > c ? Math.max(0, d + c) : c : 0; d > c; c++)
                    if (c in b && b[c] === a) return c
            }
            return -1
        },
        merge: function(a, b) {
            var c = +b.length,
                d = 0,
                e = a.length;
            while (c > d) a[e++] = b[d++];
            if (c !== c)
                while (void 0 !== b[d]) a[e++] = b[d++];
            return a.length = e, a
        },
        grep: function(a, b, c) {
            for (var d, e = [], f = 0, g = a.length, h = !c; g > f; f++) d = !b(a[f], f), d !== h && e.push(a[f]);
            return e
        },
        map: function(a, b, c) {
            var d, f = 0,
                g = a.length,
                h = s(a),
                i = [];
            if (h)
                for (; g > f; f++) d = b(a[f], f, c), null != d && i.push(d);
            else
                for (f in a) d = b(a[f], f, c), null != d && i.push(d);
            return e.apply([], i)
        },
        guid: 1,
        proxy: function(a, b) {
            var c, e, f;
            return "string" == typeof b && (f = a[b], b = a, a = f), n.isFunction(a) ? (c = d.call(arguments, 2), e = function() {
                return a.apply(b || this, c.concat(d.call(arguments)))
            }, e.guid = a.guid = a.guid || n.guid++, e) : void 0
        },
        now: function() {
            return +new Date
        },
        support: l
    }), n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(a, b) {
        h["[object " + b + "]"] = b.toLowerCase()
    });

    function s(a) {
        var b = a.length,
            c = n.type(a);
        return "function" === c || n.isWindow(a) ? !1 : 1 === a.nodeType && b ? !0 : "array" === c || 0 === b || "number" == typeof b && b > 0 && b - 1 in a
    }
    var t = function(a) {
        var b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s = "sizzle" + -new Date,
            t = a.document,
            u = 0,
            v = 0,
            w = eb(),
            x = eb(),
            y = eb(),
            z = function(a, b) {
                return a === b && (j = !0), 0
            },
            A = "undefined",
            B = 1 << 31,
            C = {}.hasOwnProperty,
            D = [],
            E = D.pop,
            F = D.push,
            G = D.push,
            H = D.slice,
            I = D.indexOf || function(a) {
                for (var b = 0, c = this.length; c > b; b++)
                    if (this[b] === a) return b;
                return -1
            },
            J = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
            K = "[\\x20\\t\\r\\n\\f]",
            L = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
            M = L.replace("w", "w#"),
            N = "\\[" + K + "*(" + L + ")" + K + "*(?:([*^$|!~]?=)" + K + "*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" + M + ")|)|)" + K + "*\\]",
            O = ":(" + L + ")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|" + N.replace(3, 8) + ")*)|.*)\\)|)",
            P = new RegExp("^" + K + "+|((?:^|[^\\\\])(?:\\\\.)*)" + K + "+$", "g"),
            Q = new RegExp("^" + K + "*," + K + "*"),
            R = new RegExp("^" + K + "*([>+~]|" + K + ")" + K + "*"),
            S = new RegExp("=" + K + "*([^\\]'\"]*?)" + K + "*\\]", "g"),
            T = new RegExp(O),
            U = new RegExp("^" + M + "$"),
            V = {
                ID: new RegExp("^#(" + L + ")"),
                CLASS: new RegExp("^\\.(" + L + ")"),
                TAG: new RegExp("^(" + L.replace("w", "w*") + ")"),
                ATTR: new RegExp("^" + N),
                PSEUDO: new RegExp("^" + O),
                CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + K + "*(even|odd|(([+-]|)(\\d*)n|)" + K + "*(?:([+-]|)" + K + "*(\\d+)|))" + K + "*\\)|)", "i"),
                bool: new RegExp("^(?:" + J + ")$", "i"),
                needsContext: new RegExp("^" + K + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + K + "*((?:-\\d)?\\d*)" + K + "*\\)|)(?=[^-]|$)", "i")
            },
            W = /^(?:input|select|textarea|button)$/i,
            X = /^h\d$/i,
            Y = /^[^{]+\{\s*\[native \w/,
            Z = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
            $ = /[+~]/,
            _ = /'|\\/g,
            ab = new RegExp("\\\\([\\da-f]{1,6}" + K + "?|(" + K + ")|.)", "ig"),
            bb = function(a, b, c) {
                var d = "0x" + b - 65536;
                return d !== d || c ? b : 0 > d ? String.fromCharCode(d + 65536) : String.fromCharCode(d >> 10 | 55296, 1023 & d | 56320)
            };
        try {
            G.apply(D = H.call(t.childNodes), t.childNodes), D[t.childNodes.length].nodeType
        } catch (cb) {
            G = {
                apply: D.length ? function(a, b) {
                    F.apply(a, H.call(b))
                } : function(a, b) {
                    var c = a.length,
                        d = 0;
                    while (a[c++] = b[d++]);
                    a.length = c - 1
                }
            }
        }

        function db(a, b, d, e) {
            var f, g, h, i, j, m, p, q, u, v;
            if ((b ? b.ownerDocument || b : t) !== l && k(b), b = b || l, d = d || [], !a || "string" != typeof a) return d;
            if (1 !== (i = b.nodeType) && 9 !== i) return [];
            if (n && !e) {
                if (f = Z.exec(a))
                    if (h = f[1]) {
                        if (9 === i) {
                            if (g = b.getElementById(h), !g || !g.parentNode) return d;
                            if (g.id === h) return d.push(g), d
                        } else if (b.ownerDocument && (g = b.ownerDocument.getElementById(h)) && r(b, g) && g.id === h) return d.push(g), d
                    } else {
                        if (f[2]) return G.apply(d, b.getElementsByTagName(a)), d;
                        if ((h = f[3]) && c.getElementsByClassName && b.getElementsByClassName) return G.apply(d, b.getElementsByClassName(h)), d
                    }
                if (c.qsa && (!o || !o.test(a))) {
                    if (q = p = s, u = b, v = 9 === i && a, 1 === i && "object" !== b.nodeName.toLowerCase()) {
                        m = ob(a), (p = b.getAttribute("id")) ? q = p.replace(_, "\\$&") : b.setAttribute("id", q), q = "[id='" + q + "'] ", j = m.length;
                        while (j--) m[j] = q + pb(m[j]);
                        u = $.test(a) && mb(b.parentNode) || b, v = m.join(",")
                    }
                    if (v) try {
                        return G.apply(d, u.querySelectorAll(v)), d
                    } catch (w) {} finally {
                        p || b.removeAttribute("id")
                    }
                }
            }
            return xb(a.replace(P, "$1"), b, d, e)
        }

        function eb() {
            var a = [];

            function b(c, e) {
                return a.push(c + " ") > d.cacheLength && delete b[a.shift()], b[c + " "] = e
            }
            return b
        }

        function fb(a) {
            return a[s] = !0, a
        }

        function gb(a) {
            var b = l.createElement("div");
            try {
                return !!a(b)
            } catch (c) {
                return !1
            } finally {
                b.parentNode && b.parentNode.removeChild(b), b = null
            }
        }

        function hb(a, b) {
            var c = a.split("|"),
                e = a.length;
            while (e--) d.attrHandle[c[e]] = b
        }

        function ib(a, b) {
            var c = b && a,
                d = c && 1 === a.nodeType && 1 === b.nodeType && (~b.sourceIndex || B) - (~a.sourceIndex || B);
            if (d) return d;
            if (c)
                while (c = c.nextSibling)
                    if (c === b) return -1;
            return a ? 1 : -1
        }

        function jb(a) {
            return function(b) {
                var c = b.nodeName.toLowerCase();
                return "input" === c && b.type === a
            }
        }

        function kb(a) {
            return function(b) {
                var c = b.nodeName.toLowerCase();
                return ("input" === c || "button" === c) && b.type === a
            }
        }

        function lb(a) {
            return fb(function(b) {
                return b = +b, fb(function(c, d) {
                    var e, f = a([], c.length, b),
                        g = f.length;
                    while (g--) c[e = f[g]] && (c[e] = !(d[e] = c[e]))
                })
            })
        }

        function mb(a) {
            return a && typeof a.getElementsByTagName !== A && a
        }
        c = db.support = {}, f = db.isXML = function(a) {
            var b = a && (a.ownerDocument || a).documentElement;
            return b ? "HTML" !== b.nodeName : !1
        }, k = db.setDocument = function(a) {
            var b, e = a ? a.ownerDocument || a : t,
                g = e.defaultView;
            return e !== l && 9 === e.nodeType && e.documentElement ? (l = e, m = e.documentElement, n = !f(e), g && g !== g.top && (g.addEventListener ? g.addEventListener("unload", function() {
                k()
            }, !1) : g.attachEvent && g.attachEvent("onunload", function() {
                k()
            })), c.attributes = gb(function(a) {
                return a.className = "i", !a.getAttribute("className")
            }), c.getElementsByTagName = gb(function(a) {
                return a.appendChild(e.createComment("")), !a.getElementsByTagName("*").length
            }), c.getElementsByClassName = Y.test(e.getElementsByClassName) && gb(function(a) {
                return a.innerHTML = "<div class='a'></div><div class='a i'></div>", a.firstChild.className = "i", 2 === a.getElementsByClassName("i").length
            }), c.getById = gb(function(a) {
                return m.appendChild(a).id = s, !e.getElementsByName || !e.getElementsByName(s).length
            }), c.getById ? (d.find.ID = function(a, b) {
                if (typeof b.getElementById !== A && n) {
                    var c = b.getElementById(a);
                    return c && c.parentNode ? [c] : []
                }
            }, d.filter.ID = function(a) {
                var b = a.replace(ab, bb);
                return function(a) {
                    return a.getAttribute("id") === b
                }
            }) : (delete d.find.ID, d.filter.ID = function(a) {
                var b = a.replace(ab, bb);
                return function(a) {
                    var c = typeof a.getAttributeNode !== A && a.getAttributeNode("id");
                    return c && c.value === b
                }
            }), d.find.TAG = c.getElementsByTagName ? function(a, b) {
                return typeof b.getElementsByTagName !== A ? b.getElementsByTagName(a) : void 0
            } : function(a, b) {
                var c, d = [],
                    e = 0,
                    f = b.getElementsByTagName(a);
                if ("*" === a) {
                    while (c = f[e++]) 1 === c.nodeType && d.push(c);
                    return d
                }
                return f
            }, d.find.CLASS = c.getElementsByClassName && function(a, b) {
                return typeof b.getElementsByClassName !== A && n ? b.getElementsByClassName(a) : void 0
            }, p = [], o = [], (c.qsa = Y.test(e.querySelectorAll)) && (gb(function(a) {
                a.innerHTML = "<select t=''><option selected=''></option></select>", a.querySelectorAll("[t^='']").length && o.push("[*^$]=" + K + "*(?:''|\"\")"), a.querySelectorAll("[selected]").length || o.push("\\[" + K + "*(?:value|" + J + ")"), a.querySelectorAll(":checked").length || o.push(":checked")
            }), gb(function(a) {
                var b = e.createElement("input");
                b.setAttribute("type", "hidden"), a.appendChild(b).setAttribute("name", "D"), a.querySelectorAll("[name=d]").length && o.push("name" + K + "*[*^$|!~]?="), a.querySelectorAll(":enabled").length || o.push(":enabled", ":disabled"), a.querySelectorAll("*,:x"), o.push(",.*:")
            })), (c.matchesSelector = Y.test(q = m.webkitMatchesSelector || m.mozMatchesSelector || m.oMatchesSelector || m.msMatchesSelector)) && gb(function(a) {
                c.disconnectedMatch = q.call(a, "div"), q.call(a, "[s!='']:x"), p.push("!=", O)
            }), o = o.length && new RegExp(o.join("|")), p = p.length && new RegExp(p.join("|")), b = Y.test(m.compareDocumentPosition), r = b || Y.test(m.contains) ? function(a, b) {
                var c = 9 === a.nodeType ? a.documentElement : a,
                    d = b && b.parentNode;
                return a === d || !(!d || 1 !== d.nodeType || !(c.contains ? c.contains(d) : a.compareDocumentPosition && 16 & a.compareDocumentPosition(d)))
            } : function(a, b) {
                if (b)
                    while (b = b.parentNode)
                        if (b === a) return !0;
                return !1
            }, z = b ? function(a, b) {
                if (a === b) return j = !0, 0;
                var d = !a.compareDocumentPosition - !b.compareDocumentPosition;
                return d ? d : (d = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1, 1 & d || !c.sortDetached && b.compareDocumentPosition(a) === d ? a === e || a.ownerDocument === t && r(t, a) ? -1 : b === e || b.ownerDocument === t && r(t, b) ? 1 : i ? I.call(i, a) - I.call(i, b) : 0 : 4 & d ? -1 : 1)
            } : function(a, b) {
                if (a === b) return j = !0, 0;
                var c, d = 0,
                    f = a.parentNode,
                    g = b.parentNode,
                    h = [a],
                    k = [b];
                if (!f || !g) return a === e ? -1 : b === e ? 1 : f ? -1 : g ? 1 : i ? I.call(i, a) - I.call(i, b) : 0;
                if (f === g) return ib(a, b);
                c = a;
                while (c = c.parentNode) h.unshift(c);
                c = b;
                while (c = c.parentNode) k.unshift(c);
                while (h[d] === k[d]) d++;
                return d ? ib(h[d], k[d]) : h[d] === t ? -1 : k[d] === t ? 1 : 0
            }, e) : l
        }, db.matches = function(a, b) {
            return db(a, null, null, b)
        }, db.matchesSelector = function(a, b) {
            if ((a.ownerDocument || a) !== l && k(a), b = b.replace(S, "='$1']"), !(!c.matchesSelector || !n || p && p.test(b) || o && o.test(b))) try {
                var d = q.call(a, b);
                if (d || c.disconnectedMatch || a.document && 11 !== a.document.nodeType) return d
            } catch (e) {}
            return db(b, l, null, [a]).length > 0
        }, db.contains = function(a, b) {
            return (a.ownerDocument || a) !== l && k(a), r(a, b)
        }, db.attr = function(a, b) {
            (a.ownerDocument || a) !== l && k(a);
            var e = d.attrHandle[b.toLowerCase()],
                f = e && C.call(d.attrHandle, b.toLowerCase()) ? e(a, b, !n) : void 0;
            return void 0 !== f ? f : c.attributes || !n ? a.getAttribute(b) : (f = a.getAttributeNode(b)) && f.specified ? f.value : null
        }, db.error = function(a) {
            throw new Error("Syntax error, unrecognized expression: " + a)
        }, db.uniqueSort = function(a) {
            var b, d = [],
                e = 0,
                f = 0;
            if (j = !c.detectDuplicates, i = !c.sortStable && a.slice(0), a.sort(z), j) {
                while (b = a[f++]) b === a[f] && (e = d.push(f));
                while (e--) a.splice(d[e], 1)
            }
            return i = null, a
        }, e = db.getText = function(a) {
            var b, c = "",
                d = 0,
                f = a.nodeType;
            if (f) {
                if (1 === f || 9 === f || 11 === f) {
                    if ("string" == typeof a.textContent) return a.textContent;
                    for (a = a.firstChild; a; a = a.nextSibling) c += e(a)
                } else if (3 === f || 4 === f) return a.nodeValue
            } else
                while (b = a[d++]) c += e(b);
            return c
        }, d = db.selectors = {
            cacheLength: 50,
            createPseudo: fb,
            match: V,
            attrHandle: {},
            find: {},
            relative: {
                ">": {
                    dir: "parentNode",
                    first: !0
                },
                " ": {
                    dir: "parentNode"
                },
                "+": {
                    dir: "previousSibling",
                    first: !0
                },
                "~": {
                    dir: "previousSibling"
                }
            },
            preFilter: {
                ATTR: function(a) {
                    return a[1] = a[1].replace(ab, bb), a[3] = (a[4] || a[5] || "").replace(ab, bb), "~=" === a[2] && (a[3] = " " + a[3] + " "), a.slice(0, 4)
                },
                CHILD: function(a) {
                    return a[1] = a[1].toLowerCase(), "nth" === a[1].slice(0, 3) ? (a[3] || db.error(a[0]), a[4] = +(a[4] ? a[5] + (a[6] || 1) : 2 * ("even" === a[3] || "odd" === a[3])), a[5] = +(a[7] + a[8] || "odd" === a[3])) : a[3] && db.error(a[0]), a
                },
                PSEUDO: function(a) {
                    var b, c = !a[5] && a[2];
                    return V.CHILD.test(a[0]) ? null : (a[3] && void 0 !== a[4] ? a[2] = a[4] : c && T.test(c) && (b = ob(c, !0)) && (b = c.indexOf(")", c.length - b) - c.length) && (a[0] = a[0].slice(0, b), a[2] = c.slice(0, b)), a.slice(0, 3))
                }
            },
            filter: {
                TAG: function(a) {
                    var b = a.replace(ab, bb).toLowerCase();
                    return "*" === a ? function() {
                        return !0
                    } : function(a) {
                        return a.nodeName && a.nodeName.toLowerCase() === b
                    }
                },
                CLASS: function(a) {
                    var b = w[a + " "];
                    return b || (b = new RegExp("(^|" + K + ")" + a + "(" + K + "|$)")) && w(a, function(a) {
                        return b.test("string" == typeof a.className && a.className || typeof a.getAttribute !== A && a.getAttribute("class") || "")
                    })
                },
                ATTR: function(a, b, c) {
                    return function(d) {
                        var e = db.attr(d, a);
                        return null == e ? "!=" === b : b ? (e += "", "=" === b ? e === c : "!=" === b ? e !== c : "^=" === b ? c && 0 === e.indexOf(c) : "*=" === b ? c && e.indexOf(c) > -1 : "$=" === b ? c && e.slice(-c.length) === c : "~=" === b ? (" " + e + " ").indexOf(c) > -1 : "|=" === b ? e === c || e.slice(0, c.length + 1) === c + "-" : !1) : !0
                    }
                },
                CHILD: function(a, b, c, d, e) {
                    var f = "nth" !== a.slice(0, 3),
                        g = "last" !== a.slice(-4),
                        h = "of-type" === b;
                    return 1 === d && 0 === e ? function(a) {
                        return !!a.parentNode
                    } : function(b, c, i) {
                        var j, k, l, m, n, o, p = f !== g ? "nextSibling" : "previousSibling",
                            q = b.parentNode,
                            r = h && b.nodeName.toLowerCase(),
                            t = !i && !h;
                        if (q) {
                            if (f) {
                                while (p) {
                                    l = b;
                                    while (l = l[p])
                                        if (h ? l.nodeName.toLowerCase() === r : 1 === l.nodeType) return !1;
                                    o = p = "only" === a && !o && "nextSibling"
                                }
                                return !0
                            }
                            if (o = [g ? q.firstChild : q.lastChild], g && t) {
                                k = q[s] || (q[s] = {}), j = k[a] || [], n = j[0] === u && j[1], m = j[0] === u && j[2], l = n && q.childNodes[n];
                                while (l = ++n && l && l[p] || (m = n = 0) || o.pop())
                                    if (1 === l.nodeType && ++m && l === b) {
                                        k[a] = [u, n, m];
                                        break
                                    }
                            } else if (t && (j = (b[s] || (b[s] = {}))[a]) && j[0] === u) m = j[1];
                            else
                                while (l = ++n && l && l[p] || (m = n = 0) || o.pop())
                                    if ((h ? l.nodeName.toLowerCase() === r : 1 === l.nodeType) && ++m && (t && ((l[s] || (l[s] = {}))[a] = [u, m]), l === b)) break; return m -= e, m === d || m % d === 0 && m / d >= 0
                        }
                    }
                },
                PSEUDO: function(a, b) {
                    var c, e = d.pseudos[a] || d.setFilters[a.toLowerCase()] || db.error("unsupported pseudo: " + a);
                    return e[s] ? e(b) : e.length > 1 ? (c = [a, a, "", b], d.setFilters.hasOwnProperty(a.toLowerCase()) ? fb(function(a, c) {
                        var d, f = e(a, b),
                            g = f.length;
                        while (g--) d = I.call(a, f[g]), a[d] = !(c[d] = f[g])
                    }) : function(a) {
                        return e(a, 0, c)
                    }) : e
                }
            },
            pseudos: {
                not: fb(function(a) {
                    var b = [],
                        c = [],
                        d = g(a.replace(P, "$1"));
                    return d[s] ? fb(function(a, b, c, e) {
                        var f, g = d(a, null, e, []),
                            h = a.length;
                        while (h--)(f = g[h]) && (a[h] = !(b[h] = f))
                    }) : function(a, e, f) {
                        return b[0] = a, d(b, null, f, c), !c.pop()
                    }
                }),
                has: fb(function(a) {
                    return function(b) {
                        return db(a, b).length > 0
                    }
                }),
                contains: fb(function(a) {
                    return function(b) {
                        return (b.textContent || b.innerText || e(b)).indexOf(a) > -1
                    }
                }),
                lang: fb(function(a) {
                    return U.test(a || "") || db.error("unsupported lang: " + a), a = a.replace(ab, bb).toLowerCase(),
                        function(b) {
                            var c;
                            do
                                if (c = n ? b.lang : b.getAttribute("xml:lang") || b.getAttribute("lang")) return c = c.toLowerCase(), c === a || 0 === c.indexOf(a + "-");
                            while ((b = b.parentNode) && 1 === b.nodeType);
                            return !1
                        }
                }),
                target: function(b) {
                    var c = a.location && a.location.hash;
                    return c && c.slice(1) === b.id
                },
                root: function(a) {
                    return a === m
                },
                focus: function(a) {
                    return a === l.activeElement && (!l.hasFocus || l.hasFocus()) && !!(a.type || a.href || ~a.tabIndex)
                },
                enabled: function(a) {
                    return a.disabled === !1
                },
                disabled: function(a) {
                    return a.disabled === !0
                },
                checked: function(a) {
                    var b = a.nodeName.toLowerCase();
                    return "input" === b && !!a.checked || "option" === b && !!a.selected
                },
                selected: function(a) {
                    return a.parentNode && a.parentNode.selectedIndex, a.selected === !0
                },
                empty: function(a) {
                    for (a = a.firstChild; a; a = a.nextSibling)
                        if (a.nodeType < 6) return !1;
                    return !0
                },
                parent: function(a) {
                    return !d.pseudos.empty(a)
                },
                header: function(a) {
                    return X.test(a.nodeName)
                },
                input: function(a) {
                    return W.test(a.nodeName)
                },
                button: function(a) {
                    var b = a.nodeName.toLowerCase();
                    return "input" === b && "button" === a.type || "button" === b
                },
                text: function(a) {
                    var b;
                    return "input" === a.nodeName.toLowerCase() && "text" === a.type && (null == (b = a.getAttribute("type")) || "text" === b.toLowerCase())
                },
                first: lb(function() {
                    return [0]
                }),
                last: lb(function(a, b) {
                    return [b - 1]
                }),
                eq: lb(function(a, b, c) {
                    return [0 > c ? c + b : c]
                }),
                even: lb(function(a, b) {
                    for (var c = 0; b > c; c += 2) a.push(c);
                    return a
                }),
                odd: lb(function(a, b) {
                    for (var c = 1; b > c; c += 2) a.push(c);
                    return a
                }),
                lt: lb(function(a, b, c) {
                    for (var d = 0 > c ? c + b : c; --d >= 0;) a.push(d);
                    return a
                }),
                gt: lb(function(a, b, c) {
                    for (var d = 0 > c ? c + b : c; ++d < b;) a.push(d);
                    return a
                })
            }
        }, d.pseudos.nth = d.pseudos.eq;
        for (b in {
                radio: !0,
                checkbox: !0,
                file: !0,
                password: !0,
                image: !0
            }) d.pseudos[b] = jb(b);
        for (b in {
                submit: !0,
                reset: !0
            }) d.pseudos[b] = kb(b);

        function nb() {}
        nb.prototype = d.filters = d.pseudos, d.setFilters = new nb;

        function ob(a, b) {
            var c, e, f, g, h, i, j, k = x[a + " "];
            if (k) return b ? 0 : k.slice(0);
            h = a, i = [], j = d.preFilter;
            while (h) {
                (!c || (e = Q.exec(h))) && (e && (h = h.slice(e[0].length) || h), i.push(f = [])), c = !1, (e = R.exec(h)) && (c = e.shift(), f.push({
                    value: c,
                    type: e[0].replace(P, " ")
                }), h = h.slice(c.length));
                for (g in d.filter) !(e = V[g].exec(h)) || j[g] && !(e = j[g](e)) || (c = e.shift(), f.push({
                    value: c,
                    type: g,
                    matches: e
                }), h = h.slice(c.length));
                if (!c) break
            }
            return b ? h.length : h ? db.error(a) : x(a, i).slice(0)
        }

        function pb(a) {
            for (var b = 0, c = a.length, d = ""; c > b; b++) d += a[b].value;
            return d
        }

        function qb(a, b, c) {
            var d = b.dir,
                e = c && "parentNode" === d,
                f = v++;
            return b.first ? function(b, c, f) {
                while (b = b[d])
                    if (1 === b.nodeType || e) return a(b, c, f)
            } : function(b, c, g) {
                var h, i, j = [u, f];
                if (g) {
                    while (b = b[d])
                        if ((1 === b.nodeType || e) && a(b, c, g)) return !0
                } else
                    while (b = b[d])
                        if (1 === b.nodeType || e) {
                            if (i = b[s] || (b[s] = {}), (h = i[d]) && h[0] === u && h[1] === f) return j[2] = h[2];
                            if (i[d] = j, j[2] = a(b, c, g)) return !0
                        }
            }
        }

        function rb(a) {
            return a.length > 1 ? function(b, c, d) {
                var e = a.length;
                while (e--)
                    if (!a[e](b, c, d)) return !1;
                return !0
            } : a[0]
        }

        function sb(a, b, c, d, e) {
            for (var f, g = [], h = 0, i = a.length, j = null != b; i > h; h++)(f = a[h]) && (!c || c(f, d, e)) && (g.push(f), j && b.push(h));
            return g
        }

        function tb(a, b, c, d, e, f) {
            return d && !d[s] && (d = tb(d)), e && !e[s] && (e = tb(e, f)), fb(function(f, g, h, i) {
                var j, k, l, m = [],
                    n = [],
                    o = g.length,
                    p = f || wb(b || "*", h.nodeType ? [h] : h, []),
                    q = !a || !f && b ? p : sb(p, m, a, h, i),
                    r = c ? e || (f ? a : o || d) ? [] : g : q;
                if (c && c(q, r, h, i), d) {
                    j = sb(r, n), d(j, [], h, i), k = j.length;
                    while (k--)(l = j[k]) && (r[n[k]] = !(q[n[k]] = l))
                }
                if (f) {
                    if (e || a) {
                        if (e) {
                            j = [], k = r.length;
                            while (k--)(l = r[k]) && j.push(q[k] = l);
                            e(null, r = [], j, i)
                        }
                        k = r.length;
                        while (k--)(l = r[k]) && (j = e ? I.call(f, l) : m[k]) > -1 && (f[j] = !(g[j] = l))
                    }
                } else r = sb(r === g ? r.splice(o, r.length) : r), e ? e(null, g, r, i) : G.apply(g, r)
            })
        }

        function ub(a) {
            for (var b, c, e, f = a.length, g = d.relative[a[0].type], i = g || d.relative[" "], j = g ? 1 : 0, k = qb(function(a) {
                    return a === b
                }, i, !0), l = qb(function(a) {
                    return I.call(b, a) > -1
                }, i, !0), m = [function(a, c, d) {
                    return !g && (d || c !== h) || ((b = c).nodeType ? k(a, c, d) : l(a, c, d))
                }]; f > j; j++)
                if (c = d.relative[a[j].type]) m = [qb(rb(m), c)];
                else {
                    if (c = d.filter[a[j].type].apply(null, a[j].matches), c[s]) {
                        for (e = ++j; f > e; e++)
                            if (d.relative[a[e].type]) break;
                        return tb(j > 1 && rb(m), j > 1 && pb(a.slice(0, j - 1).concat({
                            value: " " === a[j - 2].type ? "*" : ""
                        })).replace(P, "$1"), c, e > j && ub(a.slice(j, e)), f > e && ub(a = a.slice(e)), f > e && pb(a))
                    }
                    m.push(c)
                }
            return rb(m)
        }

        function vb(a, b) {
            var c = b.length > 0,
                e = a.length > 0,
                f = function(f, g, i, j, k) {
                    var m, n, o, p = 0,
                        q = "0",
                        r = f && [],
                        s = [],
                        t = h,
                        v = f || e && d.find.TAG("*", k),
                        w = u += null == t ? 1 : Math.random() || .1,
                        x = v.length;
                    for (k && (h = g !== l && g); q !== x && null != (m = v[q]); q++) {
                        if (e && m) {
                            n = 0;
                            while (o = a[n++])
                                if (o(m, g, i)) {
                                    j.push(m);
                                    break
                                }
                            k && (u = w)
                        }
                        c && ((m = !o && m) && p--, f && r.push(m))
                    }
                    if (p += q, c && q !== p) {
                        n = 0;
                        while (o = b[n++]) o(r, s, g, i);
                        if (f) {
                            if (p > 0)
                                while (q--) r[q] || s[q] || (s[q] = E.call(j));
                            s = sb(s)
                        }
                        G.apply(j, s), k && !f && s.length > 0 && p + b.length > 1 && db.uniqueSort(j)
                    }
                    return k && (u = w, h = t), r
                };
            return c ? fb(f) : f
        }
        g = db.compile = function(a, b) {
            var c, d = [],
                e = [],
                f = y[a + " "];
            if (!f) {
                b || (b = ob(a)), c = b.length;
                while (c--) f = ub(b[c]), f[s] ? d.push(f) : e.push(f);
                f = y(a, vb(e, d))
            }
            return f
        };

        function wb(a, b, c) {
            for (var d = 0, e = b.length; e > d; d++) db(a, b[d], c);
            return c
        }

        function xb(a, b, e, f) {
            var h, i, j, k, l, m = ob(a);
            if (!f && 1 === m.length) {
                if (i = m[0] = m[0].slice(0), i.length > 2 && "ID" === (j = i[0]).type && c.getById && 9 === b.nodeType && n && d.relative[i[1].type]) {
                    if (b = (d.find.ID(j.matches[0].replace(ab, bb), b) || [])[0], !b) return e;
                    a = a.slice(i.shift().value.length)
                }
                h = V.needsContext.test(a) ? 0 : i.length;
                while (h--) {
                    if (j = i[h], d.relative[k = j.type]) break;
                    if ((l = d.find[k]) && (f = l(j.matches[0].replace(ab, bb), $.test(i[0].type) && mb(b.parentNode) || b))) {
                        if (i.splice(h, 1), a = f.length && pb(i), !a) return G.apply(e, f), e;
                        break
                    }
                }
            }
            return g(a, m)(f, b, !n, e, $.test(a) && mb(b.parentNode) || b), e
        }
        return c.sortStable = s.split("").sort(z).join("") === s, c.detectDuplicates = !!j, k(), c.sortDetached = gb(function(a) {
            return 1 & a.compareDocumentPosition(l.createElement("div"))
        }), gb(function(a) {
            return a.innerHTML = "<a href='#'></a>", "#" === a.firstChild.getAttribute("href")
        }) || hb("type|href|height|width", function(a, b, c) {
            return c ? void 0 : a.getAttribute(b, "type" === b.toLowerCase() ? 1 : 2)
        }), c.attributes && gb(function(a) {
            return a.innerHTML = "<input/>", a.firstChild.setAttribute("value", ""), "" === a.firstChild.getAttribute("value")
        }) || hb("value", function(a, b, c) {
            return c || "input" !== a.nodeName.toLowerCase() ? void 0 : a.defaultValue
        }), gb(function(a) {
            return null == a.getAttribute("disabled")
        }) || hb(J, function(a, b, c) {
            var d;
            return c ? void 0 : a[b] === !0 ? b.toLowerCase() : (d = a.getAttributeNode(b)) && d.specified ? d.value : null
        }), db
    }(a);
    n.find = t, n.expr = t.selectors, n.expr[":"] = n.expr.pseudos, n.unique = t.uniqueSort, n.text = t.getText, n.isXMLDoc = t.isXML, n.contains = t.contains;
    var u = n.expr.match.needsContext,
        v = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
        w = /^.[^:#\[\.,]*$/;

    function x(a, b, c) {
        if (n.isFunction(b)) return n.grep(a, function(a, d) {
            return !!b.call(a, d, a) !== c
        });
        if (b.nodeType) return n.grep(a, function(a) {
            return a === b !== c
        });
        if ("string" == typeof b) {
            if (w.test(b)) return n.filter(b, a, c);
            b = n.filter(b, a)
        }
        return n.grep(a, function(a) {
            return n.inArray(a, b) >= 0 !== c
        })
    }
    n.filter = function(a, b, c) {
        var d = b[0];
        return c && (a = ":not(" + a + ")"), 1 === b.length && 1 === d.nodeType ? n.find.matchesSelector(d, a) ? [d] : [] : n.find.matches(a, n.grep(b, function(a) {
            return 1 === a.nodeType
        }))
    }, n.fn.extend({
        find: function(a) {
            var b, c = [],
                d = this,
                e = d.length;
            if ("string" != typeof a) return this.pushStack(n(a).filter(function() {
                for (b = 0; e > b; b++)
                    if (n.contains(d[b], this)) return !0
            }));
            for (b = 0; e > b; b++) n.find(a, d[b], c);
            return c = this.pushStack(e > 1 ? n.unique(c) : c), c.selector = this.selector ? this.selector + " " + a : a, c
        },
        filter: function(a) {
            return this.pushStack(x(this, a || [], !1))
        },
        not: function(a) {
            return this.pushStack(x(this, a || [], !0))
        },
        is: function(a) {
            return !!x(this, "string" == typeof a && u.test(a) ? n(a) : a || [], !1).length
        }
    });
    var y, z = a.document,
        A = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,
        B = n.fn.init = function(a, b) {
            var c, d;
            if (!a) return this;
            if ("string" == typeof a) {
                if (c = "<" === a.charAt(0) && ">" === a.charAt(a.length - 1) && a.length >= 3 ? [null, a, null] : A.exec(a), !c || !c[1] && b) return !b || b.jquery ? (b || y).find(a) : this.constructor(b).find(a);
                if (c[1]) {
                    if (b = b instanceof n ? b[0] : b, n.merge(this, n.parseHTML(c[1], b && b.nodeType ? b.ownerDocument || b : z, !0)), v.test(c[1]) && n.isPlainObject(b))
                        for (c in b) n.isFunction(this[c]) ? this[c](b[c]) : this.attr(c, b[c]);
                    return this
                }
                if (d = z.getElementById(c[2]), d && d.parentNode) {
                    if (d.id !== c[2]) return y.find(a);
                    this.length = 1, this[0] = d
                }
                return this.context = z, this.selector = a, this
            }
            return a.nodeType ? (this.context = this[0] = a, this.length = 1, this) : n.isFunction(a) ? "undefined" != typeof y.ready ? y.ready(a) : a(n) : (void 0 !== a.selector && (this.selector = a.selector, this.context = a.context), n.makeArray(a, this))
        };
    B.prototype = n.fn, y = n(z);
    var C = /^(?:parents|prev(?:Until|All))/,
        D = {
            children: !0,
            contents: !0,
            next: !0,
            prev: !0
        };
    n.extend({
        dir: function(a, b, c) {
            var d = [],
                e = a[b];
            while (e && 9 !== e.nodeType && (void 0 === c || 1 !== e.nodeType || !n(e).is(c))) 1 === e.nodeType && d.push(e), e = e[b];
            return d
        },
        sibling: function(a, b) {
            for (var c = []; a; a = a.nextSibling) 1 === a.nodeType && a !== b && c.push(a);
            return c
        }
    }), n.fn.extend({
        has: function(a) {
            var b, c = n(a, this),
                d = c.length;
            return this.filter(function() {
                for (b = 0; d > b; b++)
                    if (n.contains(this, c[b])) return !0
            })
        },
        closest: function(a, b) {
            for (var c, d = 0, e = this.length, f = [], g = u.test(a) || "string" != typeof a ? n(a, b || this.context) : 0; e > d; d++)
                for (c = this[d]; c && c !== b; c = c.parentNode)
                    if (c.nodeType < 11 && (g ? g.index(c) > -1 : 1 === c.nodeType && n.find.matchesSelector(c, a))) {
                        f.push(c);
                        break
                    }
            return this.pushStack(f.length > 1 ? n.unique(f) : f)
        },
        index: function(a) {
            return a ? "string" == typeof a ? n.inArray(this[0], n(a)) : n.inArray(a.jquery ? a[0] : a, this) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
        },
        add: function(a, b) {
            return this.pushStack(n.unique(n.merge(this.get(), n(a, b))))
        },
        addBack: function(a) {
            return this.add(null == a ? this.prevObject : this.prevObject.filter(a))
        }
    });

    function E(a, b) {
        do a = a[b]; while (a && 1 !== a.nodeType);
        return a
    }
    n.each({
        parent: function(a) {
            var b = a.parentNode;
            return b && 11 !== b.nodeType ? b : null
        },
        parents: function(a) {
            return n.dir(a, "parentNode")
        },
        parentsUntil: function(a, b, c) {
            return n.dir(a, "parentNode", c)
        },
        next: function(a) {
            return E(a, "nextSibling")
        },
        prev: function(a) {
            return E(a, "previousSibling")
        },
        nextAll: function(a) {
            return n.dir(a, "nextSibling")
        },
        prevAll: function(a) {
            return n.dir(a, "previousSibling")
        },
        nextUntil: function(a, b, c) {
            return n.dir(a, "nextSibling", c)
        },
        prevUntil: function(a, b, c) {
            return n.dir(a, "previousSibling", c)
        },
        siblings: function(a) {
            return n.sibling((a.parentNode || {}).firstChild, a)
        },
        children: function(a) {
            return n.sibling(a.firstChild)
        },
        contents: function(a) {
            return n.nodeName(a, "iframe") ? a.contentDocument || a.contentWindow.document : n.merge([], a.childNodes)
        }
    }, function(a, b) {
        n.fn[a] = function(c, d) {
            var e = n.map(this, b, c);
            return "Until" !== a.slice(-5) && (d = c), d && "string" == typeof d && (e = n.filter(d, e)), this.length > 1 && (D[a] || (e = n.unique(e)), C.test(a) && (e = e.reverse())), this.pushStack(e)
        }
    });
    var F = /\S+/g,
        G = {};

    function H(a) {
        var b = G[a] = {};
        return n.each(a.match(F) || [], function(a, c) {
            b[c] = !0
        }), b
    }
    n.Callbacks = function(a) {
        a = "string" == typeof a ? G[a] || H(a) : n.extend({}, a);
        var b, c, d, e, f, g, h = [],
            i = !a.once && [],
            j = function(l) {
                for (c = a.memory && l, d = !0, f = g || 0, g = 0, e = h.length, b = !0; h && e > f; f++)
                    if (h[f].apply(l[0], l[1]) === !1 && a.stopOnFalse) {
                        c = !1;
                        break
                    }
                b = !1, h && (i ? i.length && j(i.shift()) : c ? h = [] : k.disable())
            },
            k = {
                add: function() {
                    if (h) {
                        var d = h.length;
                        ! function f(b) {
                            n.each(b, function(b, c) {
                                var d = n.type(c);
                                "function" === d ? a.unique && k.has(c) || h.push(c) : c && c.length && "string" !== d && f(c)
                            })
                        }(arguments), b ? e = h.length : c && (g = d, j(c))
                    }
                    return this
                },
                remove: function() {
                    return h && n.each(arguments, function(a, c) {
                        var d;
                        while ((d = n.inArray(c, h, d)) > -1) h.splice(d, 1), b && (e >= d && e--, f >= d && f--)
                    }), this
                },
                has: function(a) {
                    return a ? n.inArray(a, h) > -1 : !(!h || !h.length)
                },
                empty: function() {
                    return h = [], e = 0, this
                },
                disable: function() {
                    return h = i = c = void 0, this
                },
                disabled: function() {
                    return !h
                },
                lock: function() {
                    return i = void 0, c || k.disable(), this
                },
                locked: function() {
                    return !i
                },
                fireWith: function(a, c) {
                    return !h || d && !i || (c = c || [], c = [a, c.slice ? c.slice() : c], b ? i.push(c) : j(c)), this
                },
                fire: function() {
                    return k.fireWith(this, arguments), this
                },
                fired: function() {
                    return !!d
                }
            };
        return k
    }, n.extend({
        Deferred: function(a) {
            var b = [
                    ["resolve", "done", n.Callbacks("once memory"), "resolved"],
                    ["reject", "fail", n.Callbacks("once memory"), "rejected"],
                    ["notify", "progress", n.Callbacks("memory")]
                ],
                c = "pending",
                d = {
                    state: function() {
                        return c
                    },
                    always: function() {
                        return e.done(arguments).fail(arguments), this
                    },
                    then: function() {
                        var a = arguments;
                        return n.Deferred(function(c) {
                            n.each(b, function(b, f) {
                                var g = n.isFunction(a[b]) && a[b];
                                e[f[1]](function() {
                                    var a = g && g.apply(this, arguments);
                                    a && n.isFunction(a.promise) ? a.promise().done(c.resolve).fail(c.reject).progress(c.notify) : c[f[0] + "With"](this === d ? c.promise() : this, g ? [a] : arguments)
                                })
                            }), a = null
                        }).promise()
                    },
                    promise: function(a) {
                        return null != a ? n.extend(a, d) : d
                    }
                },
                e = {};
            return d.pipe = d.then, n.each(b, function(a, f) {
                var g = f[2],
                    h = f[3];
                d[f[1]] = g.add, h && g.add(function() {
                    c = h
                }, b[1 ^ a][2].disable, b[2][2].lock), e[f[0]] = function() {
                    return e[f[0] + "With"](this === e ? d : this, arguments), this
                }, e[f[0] + "With"] = g.fireWith
            }), d.promise(e), a && a.call(e, e), e
        },
        when: function(a) {
            var b = 0,
                c = d.call(arguments),
                e = c.length,
                f = 1 !== e || a && n.isFunction(a.promise) ? e : 0,
                g = 1 === f ? a : n.Deferred(),
                h = function(a, b, c) {
                    return function(e) {
                        b[a] = this, c[a] = arguments.length > 1 ? d.call(arguments) : e, c === i ? g.notifyWith(b, c) : --f || g.resolveWith(b, c)
                    }
                },
                i, j, k;
            if (e > 1)
                for (i = new Array(e), j = new Array(e), k = new Array(e); e > b; b++) c[b] && n.isFunction(c[b].promise) ? c[b].promise().done(h(b, k, c)).fail(g.reject).progress(h(b, j, i)) : --f;
            return f || g.resolveWith(k, c), g.promise()
        }
    });
    var I;
    n.fn.ready = function(a) {
        return n.ready.promise().done(a), this
    }, n.extend({
        isReady: !1,
        readyWait: 1,
        holdReady: function(a) {
            a ? n.readyWait++ : n.ready(!0)
        },
        ready: function(a) {
            if (a === !0 ? !--n.readyWait : !n.isReady) {
                if (!z.body) return setTimeout(n.ready);
                n.isReady = !0, a !== !0 && --n.readyWait > 0 || (I.resolveWith(z, [n]), n.fn.trigger && n(z).trigger("ready").off("ready"))
            }
        }
    });

    function J() {
        z.addEventListener ? (z.removeEventListener("DOMContentLoaded", K, !1), a.removeEventListener("load", K, !1)) : (z.detachEvent("onreadystatechange", K), a.detachEvent("onload", K))
    }

    function K() {
        (z.addEventListener || "load" === event.type || "complete" === z.readyState) && (J(), n.ready())
    }
    n.ready.promise = function(b) {
        if (!I)
            if (I = n.Deferred(), "complete" === z.readyState) setTimeout(n.ready);
            else if (z.addEventListener) z.addEventListener("DOMContentLoaded", K, !1), a.addEventListener("load", K, !1);
        else {
            z.attachEvent("onreadystatechange", K), a.attachEvent("onload", K);
            var c = !1;
            try {
                c = null == a.frameElement && z.documentElement
            } catch (d) {}
            c && c.doScroll && ! function e() {
                if (!n.isReady) {
                    try {
                        c.doScroll("left")
                    } catch (a) {
                        return setTimeout(e, 50)
                    }
                    J(), n.ready()
                }
            }()
        }
        return I.promise(b)
    };
    var L = "undefined",
        M;
    for (M in n(l)) break;
    l.ownLast = "0" !== M, l.inlineBlockNeedsLayout = !1, n(function() {
            var a, b, c = z.getElementsByTagName("body")[0];
            c && (a = z.createElement("div"), a.style.cssText = "border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px", b = z.createElement("div"), c.appendChild(a).appendChild(b), typeof b.style.zoom !== L && (b.style.cssText = "border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1", (l.inlineBlockNeedsLayout = 3 === b.offsetWidth) && (c.style.zoom = 1)), c.removeChild(a), a = b = null)
        }),
        function() {
            var a = z.createElement("div");
            if (null == l.deleteExpando) {
                l.deleteExpando = !0;
                try {
                    delete a.test
                } catch (b) {
                    l.deleteExpando = !1
                }
            }
            a = null
        }(), n.acceptData = function(a) {
            var b = n.noData[(a.nodeName + " ").toLowerCase()],
                c = +a.nodeType || 1;
            return 1 !== c && 9 !== c ? !1 : !b || b !== !0 && a.getAttribute("classid") === b
        };
    var N = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
        O = /([A-Z])/g;

    function P(a, b, c) {
        if (void 0 === c && 1 === a.nodeType) {
            var d = "data-" + b.replace(O, "-$1").toLowerCase();
            if (c = a.getAttribute(d), "string" == typeof c) {
                try {
                    c = "true" === c ? !0 : "false" === c ? !1 : "null" === c ? null : +c + "" === c ? +c : N.test(c) ? n.parseJSON(c) : c
                } catch (e) {}
                n.data(a, b, c)
            } else c = void 0
        }
        return c
    }

    function Q(a) {
        var b;
        for (b in a)
            if (("data" !== b || !n.isEmptyObject(a[b])) && "toJSON" !== b) return !1;
        return !0
    }

    function R(a, b, d, e) {
        if (n.acceptData(a)) {
            var f, g, h = n.expando,
                i = a.nodeType,
                j = i ? n.cache : a,
                k = i ? a[h] : a[h] && h;
            if (k && j[k] && (e || j[k].data) || void 0 !== d || "string" != typeof b) return k || (k = i ? a[h] = c.pop() || n.guid++ : h),
                j[k] || (j[k] = i ? {} : {
                    toJSON: n.noop
                }), ("object" == typeof b || "function" == typeof b) && (e ? j[k] = n.extend(j[k], b) : j[k].data = n.extend(j[k].data, b)), g = j[k], e || (g.data || (g.data = {}), g = g.data), void 0 !== d && (g[n.camelCase(b)] = d), "string" == typeof b ? (f = g[b], null == f && (f = g[n.camelCase(b)])) : f = g, f
        }
    }

    function S(a, b, c) {
        if (n.acceptData(a)) {
            var d, e, f = a.nodeType,
                g = f ? n.cache : a,
                h = f ? a[n.expando] : n.expando;
            if (g[h]) {
                if (b && (d = c ? g[h] : g[h].data)) {
                    n.isArray(b) ? b = b.concat(n.map(b, n.camelCase)) : b in d ? b = [b] : (b = n.camelCase(b), b = b in d ? [b] : b.split(" ")), e = b.length;
                    while (e--) delete d[b[e]];
                    if (c ? !Q(d) : !n.isEmptyObject(d)) return
                }(c || (delete g[h].data, Q(g[h]))) && (f ? n.cleanData([a], !0) : l.deleteExpando || g != g.window ? delete g[h] : g[h] = null)
            }
        }
    }
    n.extend({
        cache: {},
        noData: {
            "applet ": !0,
            "embed ": !0,
            "object ": "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
        },
        hasData: function(a) {
            return a = a.nodeType ? n.cache[a[n.expando]] : a[n.expando], !!a && !Q(a)
        },
        data: function(a, b, c) {
            return R(a, b, c)
        },
        removeData: function(a, b) {
            return S(a, b)
        },
        _data: function(a, b, c) {
            return R(a, b, c, !0)
        },
        _removeData: function(a, b) {
            return S(a, b, !0)
        }
    }), n.fn.extend({
        data: function(a, b) {
            var c, d, e, f = this[0],
                g = f && f.attributes;
            if (void 0 === a) {
                if (this.length && (e = n.data(f), 1 === f.nodeType && !n._data(f, "parsedAttrs"))) {
                    c = g.length;
                    while (c--) d = g[c].name, 0 === d.indexOf("data-") && (d = n.camelCase(d.slice(5)), P(f, d, e[d]));
                    n._data(f, "parsedAttrs", !0)
                }
                return e
            }
            return "object" == typeof a ? this.each(function() {
                n.data(this, a)
            }) : arguments.length > 1 ? this.each(function() {
                n.data(this, a, b)
            }) : f ? P(f, a, n.data(f, a)) : void 0
        },
        removeData: function(a) {
            return this.each(function() {
                n.removeData(this, a)
            })
        }
    }), n.extend({
        queue: function(a, b, c) {
            var d;
            return a ? (b = (b || "fx") + "queue", d = n._data(a, b), c && (!d || n.isArray(c) ? d = n._data(a, b, n.makeArray(c)) : d.push(c)), d || []) : void 0
        },
        dequeue: function(a, b) {
            b = b || "fx";
            var c = n.queue(a, b),
                d = c.length,
                e = c.shift(),
                f = n._queueHooks(a, b),
                g = function() {
                    n.dequeue(a, b)
                };
            "inprogress" === e && (e = c.shift(), d--), e && ("fx" === b && c.unshift("inprogress"), delete f.stop, e.call(a, g, f)), !d && f && f.empty.fire()
        },
        _queueHooks: function(a, b) {
            var c = b + "queueHooks";
            return n._data(a, c) || n._data(a, c, {
                empty: n.Callbacks("once memory").add(function() {
                    n._removeData(a, b + "queue"), n._removeData(a, c)
                })
            })
        }
    }), n.fn.extend({
        queue: function(a, b) {
            var c = 2;
            return "string" != typeof a && (b = a, a = "fx", c--), arguments.length < c ? n.queue(this[0], a) : void 0 === b ? this : this.each(function() {
                var c = n.queue(this, a, b);
                n._queueHooks(this, a), "fx" === a && "inprogress" !== c[0] && n.dequeue(this, a)
            })
        },
        dequeue: function(a) {
            return this.each(function() {
                n.dequeue(this, a)
            })
        },
        clearQueue: function(a) {
            return this.queue(a || "fx", [])
        },
        promise: function(a, b) {
            var c, d = 1,
                e = n.Deferred(),
                f = this,
                g = this.length,
                h = function() {
                    --d || e.resolveWith(f, [f])
                };
            "string" != typeof a && (b = a, a = void 0), a = a || "fx";
            while (g--) c = n._data(f[g], a + "queueHooks"), c && c.empty && (d++, c.empty.add(h));
            return h(), e.promise(b)
        }
    });
    var T = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
        U = ["Top", "Right", "Bottom", "Left"],
        V = function(a, b) {
            return a = b || a, "none" === n.css(a, "display") || !n.contains(a.ownerDocument, a)
        },
        W = n.access = function(a, b, c, d, e, f, g) {
            var h = 0,
                i = a.length,
                j = null == c;
            if ("object" === n.type(c)) {
                e = !0;
                for (h in c) n.access(a, b, h, c[h], !0, f, g)
            } else if (void 0 !== d && (e = !0, n.isFunction(d) || (g = !0), j && (g ? (b.call(a, d), b = null) : (j = b, b = function(a, b, c) {
                    return j.call(n(a), c)
                })), b))
                for (; i > h; h++) b(a[h], c, g ? d : d.call(a[h], h, b(a[h], c)));
            return e ? a : j ? b.call(a) : i ? b(a[0], c) : f
        },
        X = /^(?:checkbox|radio)$/i;
    ! function() {
        var a = z.createDocumentFragment(),
            b = z.createElement("div"),
            c = z.createElement("input");
        if (b.setAttribute("className", "t"), b.innerHTML = "  <link/><table></table><a href='/a'>a</a>", l.leadingWhitespace = 3 === b.firstChild.nodeType, l.tbody = !b.getElementsByTagName("tbody").length, l.htmlSerialize = !!b.getElementsByTagName("link").length, l.html5Clone = "<:nav></:nav>" !== z.createElement("nav").cloneNode(!0).outerHTML, c.type = "checkbox", c.checked = !0, a.appendChild(c), l.appendChecked = c.checked, b.innerHTML = "<textarea>x</textarea>", l.noCloneChecked = !!b.cloneNode(!0).lastChild.defaultValue, a.appendChild(b), b.innerHTML = "<input type='radio' checked='checked' name='t'/>", l.checkClone = b.cloneNode(!0).cloneNode(!0).lastChild.checked, l.noCloneEvent = !0, b.attachEvent && (b.attachEvent("onclick", function() {
                l.noCloneEvent = !1
            }), b.cloneNode(!0).click()), null == l.deleteExpando) {
            l.deleteExpando = !0;
            try {
                delete b.test
            } catch (d) {
                l.deleteExpando = !1
            }
        }
        a = b = c = null
    }(),
    function() {
        var b, c, d = z.createElement("div");
        for (b in {
                submit: !0,
                change: !0,
                focusin: !0
            }) c = "on" + b, (l[b + "Bubbles"] = c in a) || (d.setAttribute(c, "t"), l[b + "Bubbles"] = d.attributes[c].expando === !1);
        d = null
    }();
    var Y = /^(?:input|select|textarea)$/i,
        Z = /^key/,
        $ = /^(?:mouse|contextmenu)|click/,
        _ = /^(?:focusinfocus|focusoutblur)$/,
        ab = /^([^.]*)(?:\.(.+)|)$/;

    function bb() {
        return !0
    }

    function cb() {
        return !1
    }

    function db() {
        try {
            return z.activeElement
        } catch (a) {}
    }
    n.event = {
        global: {},
        add: function(a, b, c, d, e) {
            var f, g, h, i, j, k, l, m, o, p, q, r = n._data(a);
            if (r) {
                c.handler && (i = c, c = i.handler, e = i.selector), c.guid || (c.guid = n.guid++), (g = r.events) || (g = r.events = {}), (k = r.handle) || (k = r.handle = function(a) {
                    return typeof n === L || a && n.event.triggered === a.type ? void 0 : n.event.dispatch.apply(k.elem, arguments)
                }, k.elem = a), b = (b || "").match(F) || [""], h = b.length;
                while (h--) f = ab.exec(b[h]) || [], o = q = f[1], p = (f[2] || "").split(".").sort(), o && (j = n.event.special[o] || {}, o = (e ? j.delegateType : j.bindType) || o, j = n.event.special[o] || {}, l = n.extend({
                    type: o,
                    origType: q,
                    data: d,
                    handler: c,
                    guid: c.guid,
                    selector: e,
                    needsContext: e && n.expr.match.needsContext.test(e),
                    namespace: p.join(".")
                }, i), (m = g[o]) || (m = g[o] = [], m.delegateCount = 0, j.setup && j.setup.call(a, d, p, k) !== !1 || (a.addEventListener ? a.addEventListener(o, k, !1) : a.attachEvent && a.attachEvent("on" + o, k))), j.add && (j.add.call(a, l), l.handler.guid || (l.handler.guid = c.guid)), e ? m.splice(m.delegateCount++, 0, l) : m.push(l), n.event.global[o] = !0);
                a = null
            }
        },
        remove: function(a, b, c, d, e) {
            var f, g, h, i, j, k, l, m, o, p, q, r = n.hasData(a) && n._data(a);
            if (r && (k = r.events)) {
                b = (b || "").match(F) || [""], j = b.length;
                while (j--)
                    if (h = ab.exec(b[j]) || [], o = q = h[1], p = (h[2] || "").split(".").sort(), o) {
                        l = n.event.special[o] || {}, o = (d ? l.delegateType : l.bindType) || o, m = k[o] || [], h = h[2] && new RegExp("(^|\\.)" + p.join("\\.(?:.*\\.|)") + "(\\.|$)"), i = f = m.length;
                        while (f--) g = m[f], !e && q !== g.origType || c && c.guid !== g.guid || h && !h.test(g.namespace) || d && d !== g.selector && ("**" !== d || !g.selector) || (m.splice(f, 1), g.selector && m.delegateCount--, l.remove && l.remove.call(a, g));
                        i && !m.length && (l.teardown && l.teardown.call(a, p, r.handle) !== !1 || n.removeEvent(a, o, r.handle), delete k[o])
                    } else
                        for (o in k) n.event.remove(a, o + b[j], c, d, !0);
                n.isEmptyObject(k) && (delete r.handle, n._removeData(a, "events"))
            }
        },
        trigger: function(b, c, d, e) {
            var f, g, h, i, k, l, m, o = [d || z],
                p = j.call(b, "type") ? b.type : b,
                q = j.call(b, "namespace") ? b.namespace.split(".") : [];
            if (h = l = d = d || z, 3 !== d.nodeType && 8 !== d.nodeType && !_.test(p + n.event.triggered) && (p.indexOf(".") >= 0 && (q = p.split("."), p = q.shift(), q.sort()), g = p.indexOf(":") < 0 && "on" + p, b = b[n.expando] ? b : new n.Event(p, "object" == typeof b && b), b.isTrigger = e ? 2 : 3, b.namespace = q.join("."), b.namespace_re = b.namespace ? new RegExp("(^|\\.)" + q.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, b.result = void 0, b.target || (b.target = d), c = null == c ? [b] : n.makeArray(c, [b]), k = n.event.special[p] || {}, e || !k.trigger || k.trigger.apply(d, c) !== !1)) {
                if (!e && !k.noBubble && !n.isWindow(d)) {
                    for (i = k.delegateType || p, _.test(i + p) || (h = h.parentNode); h; h = h.parentNode) o.push(h), l = h;
                    l === (d.ownerDocument || z) && o.push(l.defaultView || l.parentWindow || a)
                }
                m = 0;
                while ((h = o[m++]) && !b.isPropagationStopped()) b.type = m > 1 ? i : k.bindType || p, f = (n._data(h, "events") || {})[b.type] && n._data(h, "handle"), f && f.apply(h, c), f = g && h[g], f && f.apply && n.acceptData(h) && (b.result = f.apply(h, c), b.result === !1 && b.preventDefault());
                if (b.type = p, !e && !b.isDefaultPrevented() && (!k._default || k._default.apply(o.pop(), c) === !1) && n.acceptData(d) && g && d[p] && !n.isWindow(d)) {
                    l = d[g], l && (d[g] = null), n.event.triggered = p;
                    try {
                        d[p]()
                    } catch (r) {}
                    n.event.triggered = void 0, l && (d[g] = l)
                }
                return b.result
            }
        },
        dispatch: function(a) {
            a = n.event.fix(a);
            var b, c, e, f, g, h = [],
                i = d.call(arguments),
                j = (n._data(this, "events") || {})[a.type] || [],
                k = n.event.special[a.type] || {};
            if (i[0] = a, a.delegateTarget = this, !k.preDispatch || k.preDispatch.call(this, a) !== !1) {
                h = n.event.handlers.call(this, a, j), b = 0;
                while ((f = h[b++]) && !a.isPropagationStopped()) {
                    a.currentTarget = f.elem, g = 0;
                    while ((e = f.handlers[g++]) && !a.isImmediatePropagationStopped())(!a.namespace_re || a.namespace_re.test(e.namespace)) && (a.handleObj = e, a.data = e.data, c = ((n.event.special[e.origType] || {}).handle || e.handler).apply(f.elem, i), void 0 !== c && (a.result = c) === !1 && (a.preventDefault(), a.stopPropagation()))
                }
                return k.postDispatch && k.postDispatch.call(this, a), a.result
            }
        },
        handlers: function(a, b) {
            var c, d, e, f, g = [],
                h = b.delegateCount,
                i = a.target;
            if (h && i.nodeType && (!a.button || "click" !== a.type))
                for (; i != this; i = i.parentNode || this)
                    if (1 === i.nodeType && (i.disabled !== !0 || "click" !== a.type)) {
                        for (e = [], f = 0; h > f; f++) d = b[f], c = d.selector + " ", void 0 === e[c] && (e[c] = d.needsContext ? n(c, this).index(i) >= 0 : n.find(c, this, null, [i]).length), e[c] && e.push(d);
                        e.length && g.push({
                            elem: i,
                            handlers: e
                        })
                    }
            return h < b.length && g.push({
                elem: this,
                handlers: b.slice(h)
            }), g
        },
        fix: function(a) {
            if (a[n.expando]) return a;
            var b, c, d, e = a.type,
                f = a,
                g = this.fixHooks[e];
            g || (this.fixHooks[e] = g = $.test(e) ? this.mouseHooks : Z.test(e) ? this.keyHooks : {}), d = g.props ? this.props.concat(g.props) : this.props, a = new n.Event(f), b = d.length;
            while (b--) c = d[b], a[c] = f[c];
            return a.target || (a.target = f.srcElement || z), 3 === a.target.nodeType && (a.target = a.target.parentNode), a.metaKey = !!a.metaKey, g.filter ? g.filter(a, f) : a
        },
        props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        fixHooks: {},
        keyHooks: {
            props: "char charCode key keyCode".split(" "),
            filter: function(a, b) {
                return null == a.which && (a.which = null != b.charCode ? b.charCode : b.keyCode), a
            }
        },
        mouseHooks: {
            props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            filter: function(a, b) {
                var c, d, e, f = b.button,
                    g = b.fromElement;
                return null == a.pageX && null != b.clientX && (d = a.target.ownerDocument || z, e = d.documentElement, c = d.body, a.pageX = b.clientX + (e && e.scrollLeft || c && c.scrollLeft || 0) - (e && e.clientLeft || c && c.clientLeft || 0), a.pageY = b.clientY + (e && e.scrollTop || c && c.scrollTop || 0) - (e && e.clientTop || c && c.clientTop || 0)), !a.relatedTarget && g && (a.relatedTarget = g === a.target ? b.toElement : g), a.which || void 0 === f || (a.which = 1 & f ? 1 : 2 & f ? 3 : 4 & f ? 2 : 0), a
            }
        },
        special: {
            load: {
                noBubble: !0
            },
            focus: {
                trigger: function() {
                    if (this !== db() && this.focus) try {
                        return this.focus(), !1
                    } catch (a) {}
                },
                delegateType: "focusin"
            },
            blur: {
                trigger: function() {
                    return this === db() && this.blur ? (this.blur(), !1) : void 0
                },
                delegateType: "focusout"
            },
            click: {
                trigger: function() {
                    return n.nodeName(this, "input") && "checkbox" === this.type && this.click ? (this.click(), !1) : void 0
                },
                _default: function(a) {
                    return n.nodeName(a.target, "a")
                }
            },
            beforeunload: {
                postDispatch: function(a) {
                    void 0 !== a.result && (a.originalEvent.returnValue = a.result)
                }
            }
        },
        simulate: function(a, b, c, d) {
            var e = n.extend(new n.Event, c, {
                type: a,
                isSimulated: !0,
                originalEvent: {}
            });
            d ? n.event.trigger(e, null, b) : n.event.dispatch.call(b, e), e.isDefaultPrevented() && c.preventDefault()
        }
    }, n.removeEvent = z.removeEventListener ? function(a, b, c) {
        a.removeEventListener && a.removeEventListener(b, c, !1)
    } : function(a, b, c) {
        var d = "on" + b;
        a.detachEvent && (typeof a[d] === L && (a[d] = null), a.detachEvent(d, c))
    }, n.Event = function(a, b) {
        return this instanceof n.Event ? (a && a.type ? (this.originalEvent = a, this.type = a.type, this.isDefaultPrevented = a.defaultPrevented || void 0 === a.defaultPrevented && (a.returnValue === !1 || a.getPreventDefault && a.getPreventDefault()) ? bb : cb) : this.type = a, b && n.extend(this, b), this.timeStamp = a && a.timeStamp || n.now(), void(this[n.expando] = !0)) : new n.Event(a, b)
    }, n.Event.prototype = {
        isDefaultPrevented: cb,
        isPropagationStopped: cb,
        isImmediatePropagationStopped: cb,
        preventDefault: function() {
            var a = this.originalEvent;
            this.isDefaultPrevented = bb, a && (a.preventDefault ? a.preventDefault() : a.returnValue = !1)
        },
        stopPropagation: function() {
            var a = this.originalEvent;
            this.isPropagationStopped = bb, a && (a.stopPropagation && a.stopPropagation(), a.cancelBubble = !0)
        },
        stopImmediatePropagation: function() {
            this.isImmediatePropagationStopped = bb, this.stopPropagation()
        }
    }, n.each({
        mouseenter: "mouseover",
        mouseleave: "mouseout"
    }, function(a, b) {
        n.event.special[a] = {
            delegateType: b,
            bindType: b,
            handle: function(a) {
                var c, d = this,
                    e = a.relatedTarget,
                    f = a.handleObj;
                return (!e || e !== d && !n.contains(d, e)) && (a.type = f.origType, c = f.handler.apply(this, arguments), a.type = b), c
            }
        }
    }), l.submitBubbles || (n.event.special.submit = {
        setup: function() {
            return n.nodeName(this, "form") ? !1 : void n.event.add(this, "click._submit keypress._submit", function(a) {
                var b = a.target,
                    c = n.nodeName(b, "input") || n.nodeName(b, "button") ? b.form : void 0;
                c && !n._data(c, "submitBubbles") && (n.event.add(c, "submit._submit", function(a) {
                    a._submit_bubble = !0
                }), n._data(c, "submitBubbles", !0))
            })
        },
        postDispatch: function(a) {
            a._submit_bubble && (delete a._submit_bubble, this.parentNode && !a.isTrigger && n.event.simulate("submit", this.parentNode, a, !0))
        },
        teardown: function() {
            return n.nodeName(this, "form") ? !1 : void n.event.remove(this, "._submit")
        }
    }), l.changeBubbles || (n.event.special.change = {
        setup: function() {
            return Y.test(this.nodeName) ? (("checkbox" === this.type || "radio" === this.type) && (n.event.add(this, "propertychange._change", function(a) {
                "checked" === a.originalEvent.propertyName && (this._just_changed = !0)
            }), n.event.add(this, "click._change", function(a) {
                this._just_changed && !a.isTrigger && (this._just_changed = !1), n.event.simulate("change", this, a, !0)
            })), !1) : void n.event.add(this, "beforeactivate._change", function(a) {
                var b = a.target;
                Y.test(b.nodeName) && !n._data(b, "changeBubbles") && (n.event.add(b, "change._change", function(a) {
                    !this.parentNode || a.isSimulated || a.isTrigger || n.event.simulate("change", this.parentNode, a, !0)
                }), n._data(b, "changeBubbles", !0))
            })
        },
        handle: function(a) {
            var b = a.target;
            return this !== b || a.isSimulated || a.isTrigger || "radio" !== b.type && "checkbox" !== b.type ? a.handleObj.handler.apply(this, arguments) : void 0
        },
        teardown: function() {
            return n.event.remove(this, "._change"), !Y.test(this.nodeName)
        }
    }), l.focusinBubbles || n.each({
        focus: "focusin",
        blur: "focusout"
    }, function(a, b) {
        var c = function(a) {
            n.event.simulate(b, a.target, n.event.fix(a), !0)
        };
        n.event.special[b] = {
            setup: function() {
                var d = this.ownerDocument || this,
                    e = n._data(d, b);
                e || d.addEventListener(a, c, !0), n._data(d, b, (e || 0) + 1)
            },
            teardown: function() {
                var d = this.ownerDocument || this,
                    e = n._data(d, b) - 1;
                e ? n._data(d, b, e) : (d.removeEventListener(a, c, !0), n._removeData(d, b))
            }
        }
    }), n.fn.extend({
        on: function(a, b, c, d, e) {
            var f, g;
            if ("object" == typeof a) {
                "string" != typeof b && (c = c || b, b = void 0);
                for (f in a) this.on(f, b, c, a[f], e);
                return this
            }
            if (null == c && null == d ? (d = b, c = b = void 0) : null == d && ("string" == typeof b ? (d = c, c = void 0) : (d = c, c = b, b = void 0)), d === !1) d = cb;
            else if (!d) return this;
            return 1 === e && (g = d, d = function(a) {
                return n().off(a), g.apply(this, arguments)
            }, d.guid = g.guid || (g.guid = n.guid++)), this.each(function() {
                n.event.add(this, a, d, c, b)
            })
        },
        one: function(a, b, c, d) {
            return this.on(a, b, c, d, 1)
        },
        off: function(a, b, c) {
            var d, e;
            if (a && a.preventDefault && a.handleObj) return d = a.handleObj, n(a.delegateTarget).off(d.namespace ? d.origType + "." + d.namespace : d.origType, d.selector, d.handler), this;
            if ("object" == typeof a) {
                for (e in a) this.off(e, b, a[e]);
                return this
            }
            return (b === !1 || "function" == typeof b) && (c = b, b = void 0), c === !1 && (c = cb), this.each(function() {
                n.event.remove(this, a, c, b)
            })
        },
        trigger: function(a, b) {
            return this.each(function() {
                n.event.trigger(a, b, this)
            })
        },
        triggerHandler: function(a, b) {
            var c = this[0];
            return c ? n.event.trigger(a, b, c, !0) : void 0
        }
    });

    function eb(a) {
        var b = fb.split("|"),
            c = a.createDocumentFragment();
        if (c.createElement)
            while (b.length) c.createElement(b.pop());
        return c
    }
    var fb = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
        gb = / jQuery\d+="(?:null|\d+)"/g,
        hb = new RegExp("<(?:" + fb + ")[\\s/>]", "i"),
        ib = /^\s+/,
        jb = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
        kb = /<([\w:]+)/,
        lb = /<tbody/i,
        mb = /<|&#?\w+;/,
        nb = /<(?:script|style|link)/i,
        ob = /checked\s*(?:[^=]|=\s*.checked.)/i,
        pb = /^$|\/(?:java|ecma)script/i,
        qb = /^true\/(.*)/,
        rb = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,
        sb = {
            option: [1, "<select multiple='multiple'>", "</select>"],
            legend: [1, "<fieldset>", "</fieldset>"],
            area: [1, "<map>", "</map>"],
            param: [1, "<object>", "</object>"],
            thead: [1, "<table>", "</table>"],
            tr: [2, "<table><tbody>", "</tbody></table>"],
            col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
            td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
            _default: l.htmlSerialize ? [0, "", ""] : [1, "X<div>", "</div>"]
        },
        tb = eb(z),
        ub = tb.appendChild(z.createElement("div"));
    sb.optgroup = sb.option, sb.tbody = sb.tfoot = sb.colgroup = sb.caption = sb.thead, sb.th = sb.td;

    function vb(a, b) {
        var c, d, e = 0,
            f = typeof a.getElementsByTagName !== L ? a.getElementsByTagName(b || "*") : typeof a.querySelectorAll !== L ? a.querySelectorAll(b || "*") : void 0;
        if (!f)
            for (f = [], c = a.childNodes || a; null != (d = c[e]); e++) !b || n.nodeName(d, b) ? f.push(d) : n.merge(f, vb(d, b));
        return void 0 === b || b && n.nodeName(a, b) ? n.merge([a], f) : f
    }

    function wb(a) {
        X.test(a.type) && (a.defaultChecked = a.checked)
    }

    function xb(a, b) {
        return n.nodeName(a, "table") && n.nodeName(11 !== b.nodeType ? b : b.firstChild, "tr") ? a.getElementsByTagName("tbody")[0] || a.appendChild(a.ownerDocument.createElement("tbody")) : a
    }

    function yb(a) {
        return a.type = (null !== n.find.attr(a, "type")) + "/" + a.type, a
    }

    function zb(a) {
        var b = qb.exec(a.type);
        return b ? a.type = b[1] : a.removeAttribute("type"), a
    }

    function Ab(a, b) {
        for (var c, d = 0; null != (c = a[d]); d++) n._data(c, "globalEval", !b || n._data(b[d], "globalEval"))
    }

    function Bb(a, b) {
        if (1 === b.nodeType && n.hasData(a)) {
            var c, d, e, f = n._data(a),
                g = n._data(b, f),
                h = f.events;
            if (h) {
                delete g.handle, g.events = {};
                for (c in h)
                    for (d = 0, e = h[c].length; e > d; d++) n.event.add(b, c, h[c][d])
            }
            g.data && (g.data = n.extend({}, g.data))
        }
    }

    function Cb(a, b) {
        var c, d, e;
        if (1 === b.nodeType) {
            if (c = b.nodeName.toLowerCase(), !l.noCloneEvent && b[n.expando]) {
                e = n._data(b);
                for (d in e.events) n.removeEvent(b, d, e.handle);
                b.removeAttribute(n.expando)
            }
            "script" === c && b.text !== a.text ? (yb(b).text = a.text, zb(b)) : "object" === c ? (b.parentNode && (b.outerHTML = a.outerHTML), l.html5Clone && a.innerHTML && !n.trim(b.innerHTML) && (b.innerHTML = a.innerHTML)) : "input" === c && X.test(a.type) ? (b.defaultChecked = b.checked = a.checked, b.value !== a.value && (b.value = a.value)) : "option" === c ? b.defaultSelected = b.selected = a.defaultSelected : ("input" === c || "textarea" === c) && (b.defaultValue = a.defaultValue)
        }
    }
    n.extend({
        clone: function(a, b, c) {
            var d, e, f, g, h, i = n.contains(a.ownerDocument, a);
            if (l.html5Clone || n.isXMLDoc(a) || !hb.test("<" + a.nodeName + ">") ? f = a.cloneNode(!0) : (ub.innerHTML = a.outerHTML, ub.removeChild(f = ub.firstChild)), !(l.noCloneEvent && l.noCloneChecked || 1 !== a.nodeType && 11 !== a.nodeType || n.isXMLDoc(a)))
                for (d = vb(f), h = vb(a), g = 0; null != (e = h[g]); ++g) d[g] && Cb(e, d[g]);
            if (b)
                if (c)
                    for (h = h || vb(a), d = d || vb(f), g = 0; null != (e = h[g]); g++) Bb(e, d[g]);
                else Bb(a, f);
            return d = vb(f, "script"), d.length > 0 && Ab(d, !i && vb(a, "script")), d = h = e = null, f
        },
        buildFragment: function(a, b, c, d) {
            for (var e, f, g, h, i, j, k, m = a.length, o = eb(b), p = [], q = 0; m > q; q++)
                if (f = a[q], f || 0 === f)
                    if ("object" === n.type(f)) n.merge(p, f.nodeType ? [f] : f);
                    else if (mb.test(f)) {
                h = h || o.appendChild(b.createElement("div")), i = (kb.exec(f) || ["", ""])[1].toLowerCase(), k = sb[i] || sb._default, h.innerHTML = k[1] + f.replace(jb, "<$1></$2>") + k[2], e = k[0];
                while (e--) h = h.lastChild;
                if (!l.leadingWhitespace && ib.test(f) && p.push(b.createTextNode(ib.exec(f)[0])), !l.tbody) {
                    f = "table" !== i || lb.test(f) ? "<table>" !== k[1] || lb.test(f) ? 0 : h : h.firstChild, e = f && f.childNodes.length;
                    while (e--) n.nodeName(j = f.childNodes[e], "tbody") && !j.childNodes.length && f.removeChild(j)
                }
                n.merge(p, h.childNodes), h.textContent = "";
                while (h.firstChild) h.removeChild(h.firstChild);
                h = o.lastChild
            } else p.push(b.createTextNode(f));
            h && o.removeChild(h), l.appendChecked || n.grep(vb(p, "input"), wb), q = 0;
            while (f = p[q++])
                if ((!d || -1 === n.inArray(f, d)) && (g = n.contains(f.ownerDocument, f), h = vb(o.appendChild(f), "script"), g && Ab(h), c)) {
                    e = 0;
                    while (f = h[e++]) pb.test(f.type || "") && c.push(f)
                }
            return h = null, o
        },
        cleanData: function(a, b) {
            for (var d, e, f, g, h = 0, i = n.expando, j = n.cache, k = l.deleteExpando, m = n.event.special; null != (d = a[h]); h++)
                if ((b || n.acceptData(d)) && (f = d[i], g = f && j[f])) {
                    if (g.events)
                        for (e in g.events) m[e] ? n.event.remove(d, e) : n.removeEvent(d, e, g.handle);
                    j[f] && (delete j[f], k ? delete d[i] : typeof d.removeAttribute !== L ? d.removeAttribute(i) : d[i] = null, c.push(f))
                }
        }
    }), n.fn.extend({
        text: function(a) {
            return W(this, function(a) {
                return void 0 === a ? n.text(this) : this.empty().append((this[0] && this[0].ownerDocument || z).createTextNode(a))
            }, null, a, arguments.length)
        },
        append: function() {
            return this.domManip(arguments, function(a) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var b = xb(this, a);
                    b.appendChild(a)
                }
            })
        },
        prepend: function() {
            return this.domManip(arguments, function(a) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var b = xb(this, a);
                    b.insertBefore(a, b.firstChild)
                }
            })
        },
        before: function() {
            return this.domManip(arguments, function(a) {
                this.parentNode && this.parentNode.insertBefore(a, this)
            })
        },
        after: function() {
            return this.domManip(arguments, function(a) {
                this.parentNode && this.parentNode.insertBefore(a, this.nextSibling)
            })
        },
        remove: function(a, b) {
            for (var c, d = a ? n.filter(a, this) : this, e = 0; null != (c = d[e]); e++) b || 1 !== c.nodeType || n.cleanData(vb(c)), c.parentNode && (b && n.contains(c.ownerDocument, c) && Ab(vb(c, "script")), c.parentNode.removeChild(c));
            return this
        },
        empty: function() {
            for (var a, b = 0; null != (a = this[b]); b++) {
                1 === a.nodeType && n.cleanData(vb(a, !1));
                while (a.firstChild) a.removeChild(a.firstChild);
                a.options && n.nodeName(a, "select") && (a.options.length = 0)
            }
            return this
        },
        clone: function(a, b) {
            return a = null == a ? !1 : a, b = null == b ? a : b, this.map(function() {
                return n.clone(this, a, b)
            })
        },
        html: function(a) {
            return W(this, function(a) {
                var b = this[0] || {},
                    c = 0,
                    d = this.length;
                if (void 0 === a) return 1 === b.nodeType ? b.innerHTML.replace(gb, "") : void 0;
                if (!("string" != typeof a || nb.test(a) || !l.htmlSerialize && hb.test(a) || !l.leadingWhitespace && ib.test(a) || sb[(kb.exec(a) || ["", ""])[1].toLowerCase()])) {
                    a = a.replace(jb, "<$1></$2>");
                    try {
                        for (; d > c; c++) b = this[c] || {}, 1 === b.nodeType && (n.cleanData(vb(b, !1)), b.innerHTML = a);
                        b = 0
                    } catch (e) {}
                }
                b && this.empty().append(a)
            }, null, a, arguments.length)
        },
        replaceWith: function() {
            var a = arguments[0];
            return this.domManip(arguments, function(b) {
                a = this.parentNode, n.cleanData(vb(this)), a && a.replaceChild(b, this)
            }), a && (a.length || a.nodeType) ? this : this.remove()
        },
        detach: function(a) {
            return this.remove(a, !0)
        },
        domManip: function(a, b) {
            a = e.apply([], a);
            var c, d, f, g, h, i, j = 0,
                k = this.length,
                m = this,
                o = k - 1,
                p = a[0],
                q = n.isFunction(p);
            if (q || k > 1 && "string" == typeof p && !l.checkClone && ob.test(p)) return this.each(function(c) {
                var d = m.eq(c);
                q && (a[0] = p.call(this, c, d.html())), d.domManip(a, b)
            });
            if (k && (i = n.buildFragment(a, this[0].ownerDocument, !1, this), c = i.firstChild, 1 === i.childNodes.length && (i = c), c)) {
                for (g = n.map(vb(i, "script"), yb), f = g.length; k > j; j++) d = i, j !== o && (d = n.clone(d, !0, !0), f && n.merge(g, vb(d, "script"))), b.call(this[j], d, j);
                if (f)
                    for (h = g[g.length - 1].ownerDocument, n.map(g, zb), j = 0; f > j; j++) d = g[j], pb.test(d.type || "") && !n._data(d, "globalEval") && n.contains(h, d) && (d.src ? n._evalUrl && n._evalUrl(d.src) : n.globalEval((d.text || d.textContent || d.innerHTML || "").replace(rb, "")));
                i = c = null
            }
            return this
        }
    }), n.each({
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith"
    }, function(a, b) {
        n.fn[a] = function(a) {
            for (var c, d = 0, e = [], g = n(a), h = g.length - 1; h >= d; d++) c = d === h ? this : this.clone(!0), n(g[d])[b](c), f.apply(e, c.get());
            return this.pushStack(e)
        }
    });
    var Db, Eb = {};

    function Fb(b, c) {
        var d = n(c.createElement(b)).appendTo(c.body),
            e = a.getDefaultComputedStyle ? a.getDefaultComputedStyle(d[0]).display : n.css(d[0], "display");
        return d.detach(), e
    }

    function Gb(a) {
        var b = z,
            c = Eb[a];
        return c || (c = Fb(a, b), "none" !== c && c || (Db = (Db || n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement), b = (Db[0].contentWindow || Db[0].contentDocument).document, b.write(), b.close(), c = Fb(a, b), Db.detach()), Eb[a] = c), c
    }! function() {
        var a, b, c = z.createElement("div"),
            d = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";
        c.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", a = c.getElementsByTagName("a")[0], a.style.cssText = "float:left;opacity:.5", l.opacity = /^0.5/.test(a.style.opacity), l.cssFloat = !!a.style.cssFloat, c.style.backgroundClip = "content-box", c.cloneNode(!0).style.backgroundClip = "", l.clearCloneStyle = "content-box" === c.style.backgroundClip, a = c = null, l.shrinkWrapBlocks = function() {
            var a, c, e, f;
            if (null == b) {
                if (a = z.getElementsByTagName("body")[0], !a) return;
                f = "border:0;width:0;height:0;position:absolute;top:0;left:-9999px", c = z.createElement("div"), e = z.createElement("div"), a.appendChild(c).appendChild(e), b = !1, typeof e.style.zoom !== L && (e.style.cssText = d + ";width:1px;padding:1px;zoom:1", e.innerHTML = "<div></div>", e.firstChild.style.width = "5px", b = 3 !== e.offsetWidth), a.removeChild(c), a = c = e = null
            }
            return b
        }
    }();
    var Hb = /^margin/,
        Ib = new RegExp("^(" + T + ")(?!px)[a-z%]+$", "i"),
        Jb, Kb, Lb = /^(top|right|bottom|left)$/;
    a.getComputedStyle ? (Jb = function(a) {
        return a.ownerDocument.defaultView.getComputedStyle(a, null)
    }, Kb = function(a, b, c) {
        var d, e, f, g, h = a.style;
        return c = c || Jb(a), g = c ? c.getPropertyValue(b) || c[b] : void 0, c && ("" !== g || n.contains(a.ownerDocument, a) || (g = n.style(a, b)), Ib.test(g) && Hb.test(b) && (d = h.width, e = h.minWidth, f = h.maxWidth, h.minWidth = h.maxWidth = h.width = g, g = c.width, h.width = d, h.minWidth = e, h.maxWidth = f)), void 0 === g ? g : g + ""
    }) : z.documentElement.currentStyle && (Jb = function(a) {
        return a.currentStyle
    }, Kb = function(a, b, c) {
        var d, e, f, g, h = a.style;
        return c = c || Jb(a), g = c ? c[b] : void 0, null == g && h && h[b] && (g = h[b]), Ib.test(g) && !Lb.test(b) && (d = h.left, e = a.runtimeStyle, f = e && e.left, f && (e.left = a.currentStyle.left), h.left = "fontSize" === b ? "1em" : g, g = h.pixelLeft + "px", h.left = d, f && (e.left = f)), void 0 === g ? g : g + "" || "auto"
    });

    function Mb(a, b) {
        return {
            get: function() {
                var c = a();
                if (null != c) return c ? void delete this.get : (this.get = b).apply(this, arguments)
            }
        }
    }! function() {
        var b, c, d, e, f, g, h = z.createElement("div"),
            i = "border:0;width:0;height:0;position:absolute;top:0;left:-9999px",
            j = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";
        h.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", b = h.getElementsByTagName("a")[0], b.style.cssText = "float:left;opacity:.5", l.opacity = /^0.5/.test(b.style.opacity), l.cssFloat = !!b.style.cssFloat, h.style.backgroundClip = "content-box", h.cloneNode(!0).style.backgroundClip = "", l.clearCloneStyle = "content-box" === h.style.backgroundClip, b = h = null, n.extend(l, {
            reliableHiddenOffsets: function() {
                if (null != c) return c;
                var a, b, d, e = z.createElement("div"),
                    f = z.getElementsByTagName("body")[0];
                if (f) return e.setAttribute("className", "t"), e.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", a = z.createElement("div"), a.style.cssText = i, f.appendChild(a).appendChild(e), e.innerHTML = "<table><tr><td></td><td>t</td></tr></table>", b = e.getElementsByTagName("td"), b[0].style.cssText = "padding:0;margin:0;border:0;display:none", d = 0 === b[0].offsetHeight, b[0].style.display = "", b[1].style.display = "none", c = d && 0 === b[0].offsetHeight, f.removeChild(a), e = f = null, c
            },
            boxSizing: function() {
                return null == d && k(), d
            },
            boxSizingReliable: function() {
                return null == e && k(), e
            },
            pixelPosition: function() {
                return null == f && k(), f
            },
            reliableMarginRight: function() {
                var b, c, d, e;
                if (null == g && a.getComputedStyle) {
                    if (b = z.getElementsByTagName("body")[0], !b) return;
                    c = z.createElement("div"), d = z.createElement("div"), c.style.cssText = i, b.appendChild(c).appendChild(d), e = d.appendChild(z.createElement("div")), e.style.cssText = d.style.cssText = j, e.style.marginRight = e.style.width = "0", d.style.width = "1px", g = !parseFloat((a.getComputedStyle(e, null) || {}).marginRight), b.removeChild(c)
                }
                return g
            }
        });

        function k() {
            var b, c, h = z.getElementsByTagName("body")[0];
            h && (b = z.createElement("div"), c = z.createElement("div"), b.style.cssText = i, h.appendChild(b).appendChild(c), c.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%", n.swap(h, null != h.style.zoom ? {
                zoom: 1
            } : {}, function() {
                d = 4 === c.offsetWidth
            }), e = !0, f = !1, g = !0, a.getComputedStyle && (f = "1%" !== (a.getComputedStyle(c, null) || {}).top, e = "4px" === (a.getComputedStyle(c, null) || {
                width: "4px"
            }).width), h.removeChild(b), c = h = null)
        }
    }(), n.swap = function(a, b, c, d) {
        var e, f, g = {};
        for (f in b) g[f] = a.style[f], a.style[f] = b[f];
        e = c.apply(a, d || []);
        for (f in b) a.style[f] = g[f];
        return e
    };
    var Nb = /alpha\([^)]*\)/i,
        Ob = /opacity\s*=\s*([^)]*)/,
        Pb = /^(none|table(?!-c[ea]).+)/,
        Qb = new RegExp("^(" + T + ")(.*)$", "i"),
        Rb = new RegExp("^([+-])=(" + T + ")", "i"),
        Sb = {
            position: "absolute",
            visibility: "hidden",
            display: "block"
        },
        Tb = {
            letterSpacing: 0,
            fontWeight: 400
        },
        Ub = ["Webkit", "O", "Moz", "ms"];

    function Vb(a, b) {
        if (b in a) return b;
        var c = b.charAt(0).toUpperCase() + b.slice(1),
            d = b,
            e = Ub.length;
        while (e--)
            if (b = Ub[e] + c, b in a) return b;
        return d
    }

    function Wb(a, b) {
        for (var c, d, e, f = [], g = 0, h = a.length; h > g; g++) d = a[g], d.style && (f[g] = n._data(d, "olddisplay"), c = d.style.display, b ? (f[g] || "none" !== c || (d.style.display = ""), "" === d.style.display && V(d) && (f[g] = n._data(d, "olddisplay", Gb(d.nodeName)))) : f[g] || (e = V(d), (c && "none" !== c || !e) && n._data(d, "olddisplay", e ? c : n.css(d, "display"))));
        for (g = 0; h > g; g++) d = a[g], d.style && (b && "none" !== d.style.display && "" !== d.style.display || (d.style.display = b ? f[g] || "" : "none"));
        return a
    }

    function Xb(a, b, c) {
        var d = Qb.exec(b);
        return d ? Math.max(0, d[1] - (c || 0)) + (d[2] || "px") : b
    }

    function Yb(a, b, c, d, e) {
        for (var f = c === (d ? "border" : "content") ? 4 : "width" === b ? 1 : 0, g = 0; 4 > f; f += 2) "margin" === c && (g += n.css(a, c + U[f], !0, e)), d ? ("content" === c && (g -= n.css(a, "padding" + U[f], !0, e)), "margin" !== c && (g -= n.css(a, "border" + U[f] + "Width", !0, e))) : (g += n.css(a, "padding" + U[f], !0, e), "padding" !== c && (g += n.css(a, "border" + U[f] + "Width", !0, e)));
        return g
    }

    function Zb(a, b, c) {
        var d = !0,
            e = "width" === b ? a.offsetWidth : a.offsetHeight,
            f = Jb(a),
            g = l.boxSizing() && "border-box" === n.css(a, "boxSizing", !1, f);
        if (0 >= e || null == e) {
            if (e = Kb(a, b, f), (0 > e || null == e) && (e = a.style[b]), Ib.test(e)) return e;
            d = g && (l.boxSizingReliable() || e === a.style[b]), e = parseFloat(e) || 0
        }
        return e + Yb(a, b, c || (g ? "border" : "content"), d, f) + "px"
    }
    n.extend({
        cssHooks: {
            opacity: {
                get: function(a, b) {
                    if (b) {
                        var c = Kb(a, "opacity");
                        return "" === c ? "1" : c
                    }
                }
            }
        },
        cssNumber: {
            columnCount: !0,
            fillOpacity: !0,
            fontWeight: !0,
            lineHeight: !0,
            opacity: !0,
            order: !0,
            orphans: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0
        },
        cssProps: {
            "float": l.cssFloat ? "cssFloat" : "styleFloat"
        },
        style: function(a, b, c, d) {
            if (a && 3 !== a.nodeType && 8 !== a.nodeType && a.style) {
                var e, f, g, h = n.camelCase(b),
                    i = a.style;
                if (b = n.cssProps[h] || (n.cssProps[h] = Vb(i, h)), g = n.cssHooks[b] || n.cssHooks[h], void 0 === c) return g && "get" in g && void 0 !== (e = g.get(a, !1, d)) ? e : i[b];
                if (f = typeof c, "string" === f && (e = Rb.exec(c)) && (c = (e[1] + 1) * e[2] + parseFloat(n.css(a, b)), f = "number"), null != c && c === c && ("number" !== f || n.cssNumber[h] || (c += "px"), l.clearCloneStyle || "" !== c || 0 !== b.indexOf("background") || (i[b] = "inherit"), !(g && "set" in g && void 0 === (c = g.set(a, c, d))))) try {
                    i[b] = "", i[b] = c
                } catch (j) {}
            }
        },
        css: function(a, b, c, d) {
            var e, f, g, h = n.camelCase(b);
            return b = n.cssProps[h] || (n.cssProps[h] = Vb(a.style, h)), g = n.cssHooks[b] || n.cssHooks[h], g && "get" in g && (f = g.get(a, !0, c)), void 0 === f && (f = Kb(a, b, d)), "normal" === f && b in Tb && (f = Tb[b]), "" === c || c ? (e = parseFloat(f), c === !0 || n.isNumeric(e) ? e || 0 : f) : f
        }
    }), n.each(["height", "width"], function(a, b) {
        n.cssHooks[b] = {
            get: function(a, c, d) {
                return c ? 0 === a.offsetWidth && Pb.test(n.css(a, "display")) ? n.swap(a, Sb, function() {
                    return Zb(a, b, d)
                }) : Zb(a, b, d) : void 0
            },
            set: function(a, c, d) {
                var e = d && Jb(a);
                return Xb(a, c, d ? Yb(a, b, d, l.boxSizing() && "border-box" === n.css(a, "boxSizing", !1, e), e) : 0)
            }
        }
    }), l.opacity || (n.cssHooks.opacity = {
        get: function(a, b) {
            return Ob.test((b && a.currentStyle ? a.currentStyle.filter : a.style.filter) || "") ? .01 * parseFloat(RegExp.$1) + "" : b ? "1" : ""
        },
        set: function(a, b) {
            var c = a.style,
                d = a.currentStyle,
                e = n.isNumeric(b) ? "alpha(opacity=" + 100 * b + ")" : "",
                f = d && d.filter || c.filter || "";
            c.zoom = 1, (b >= 1 || "" === b) && "" === n.trim(f.replace(Nb, "")) && c.removeAttribute && (c.removeAttribute("filter"), "" === b || d && !d.filter) || (c.filter = Nb.test(f) ? f.replace(Nb, e) : f + " " + e)
        }
    }), n.cssHooks.marginRight = Mb(l.reliableMarginRight, function(a, b) {
        return b ? n.swap(a, {
            display: "inline-block"
        }, Kb, [a, "marginRight"]) : void 0
    }), n.each({
        margin: "",
        padding: "",
        border: "Width"
    }, function(a, b) {
        n.cssHooks[a + b] = {
            expand: function(c) {
                for (var d = 0, e = {}, f = "string" == typeof c ? c.split(" ") : [c]; 4 > d; d++) e[a + U[d] + b] = f[d] || f[d - 2] || f[0];
                return e
            }
        }, Hb.test(a) || (n.cssHooks[a + b].set = Xb)
    }), n.fn.extend({
        css: function(a, b) {
            return W(this, function(a, b, c) {
                var d, e, f = {},
                    g = 0;
                if (n.isArray(b)) {
                    for (d = Jb(a), e = b.length; e > g; g++) f[b[g]] = n.css(a, b[g], !1, d);
                    return f
                }
                return void 0 !== c ? n.style(a, b, c) : n.css(a, b)
            }, a, b, arguments.length > 1)
        },
        show: function() {
            return Wb(this, !0)
        },
        hide: function() {
            return Wb(this)
        },
        toggle: function(a) {
            return "boolean" == typeof a ? a ? this.show() : this.hide() : this.each(function() {
                V(this) ? n(this).show() : n(this).hide()
            })
        }
    });

    function $b(a, b, c, d, e) {
        return new $b.prototype.init(a, b, c, d, e)
    }
    n.Tween = $b, $b.prototype = {
        constructor: $b,
        init: function(a, b, c, d, e, f) {
            this.elem = a, this.prop = c, this.easing = e || "swing", this.options = b, this.start = this.now = this.cur(), this.end = d, this.unit = f || (n.cssNumber[c] ? "" : "px")
        },
        cur: function() {
            var a = $b.propHooks[this.prop];
            return a && a.get ? a.get(this) : $b.propHooks._default.get(this)
        },
        run: function(a) {
            var b, c = $b.propHooks[this.prop];
            return this.pos = b = this.options.duration ? n.easing[this.easing](a, this.options.duration * a, 0, 1, this.options.duration) : a, this.now = (this.end - this.start) * b + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), c && c.set ? c.set(this) : $b.propHooks._default.set(this), this
        }
    }, $b.prototype.init.prototype = $b.prototype, $b.propHooks = {
        _default: {
            get: function(a) {
                var b;
                return null == a.elem[a.prop] || a.elem.style && null != a.elem.style[a.prop] ? (b = n.css(a.elem, a.prop, ""), b && "auto" !== b ? b : 0) : a.elem[a.prop]
            },
            set: function(a) {
                n.fx.step[a.prop] ? n.fx.step[a.prop](a) : a.elem.style && (null != a.elem.style[n.cssProps[a.prop]] || n.cssHooks[a.prop]) ? n.style(a.elem, a.prop, a.now + a.unit) : a.elem[a.prop] = a.now
            }
        }
    }, $b.propHooks.scrollTop = $b.propHooks.scrollLeft = {
        set: function(a) {
            a.elem.nodeType && a.elem.parentNode && (a.elem[a.prop] = a.now)
        }
    }, n.easing = {
        linear: function(a) {
            return a
        },
        swing: function(a) {
            return .5 - Math.cos(a * Math.PI) / 2
        }
    }, n.fx = $b.prototype.init, n.fx.step = {};
    var _b, ac, bc = /^(?:toggle|show|hide)$/,
        cc = new RegExp("^(?:([+-])=|)(" + T + ")([a-z%]*)$", "i"),
        dc = /queueHooks$/,
        ec = [jc],
        fc = {
            "*": [function(a, b) {
                var c = this.createTween(a, b),
                    d = c.cur(),
                    e = cc.exec(b),
                    f = e && e[3] || (n.cssNumber[a] ? "" : "px"),
                    g = (n.cssNumber[a] || "px" !== f && +d) && cc.exec(n.css(c.elem, a)),
                    h = 1,
                    i = 20;
                if (g && g[3] !== f) {
                    f = f || g[3], e = e || [], g = +d || 1;
                    do h = h || ".5", g /= h, n.style(c.elem, a, g + f); while (h !== (h = c.cur() / d) && 1 !== h && --i)
                }
                return e && (g = c.start = +g || +d || 0, c.unit = f, c.end = e[1] ? g + (e[1] + 1) * e[2] : +e[2]), c
            }]
        };

    function gc() {
        return setTimeout(function() {
            _b = void 0
        }), _b = n.now()
    }

    function hc(a, b) {
        var c, d = {
                height: a
            },
            e = 0;
        for (b = b ? 1 : 0; 4 > e; e += 2 - b) c = U[e], d["margin" + c] = d["padding" + c] = a;
        return b && (d.opacity = d.width = a), d
    }

    function ic(a, b, c) {
        for (var d, e = (fc[b] || []).concat(fc["*"]), f = 0, g = e.length; g > f; f++)
            if (d = e[f].call(c, b, a)) return d
    }

    function jc(a, b, c) {
        var d, e, f, g, h, i, j, k, m = this,
            o = {},
            p = a.style,
            q = a.nodeType && V(a),
            r = n._data(a, "fxshow");
        c.queue || (h = n._queueHooks(a, "fx"), null == h.unqueued && (h.unqueued = 0, i = h.empty.fire, h.empty.fire = function() {
            h.unqueued || i()
        }), h.unqueued++, m.always(function() {
            m.always(function() {
                h.unqueued--, n.queue(a, "fx").length || h.empty.fire()
            })
        })), 1 === a.nodeType && ("height" in b || "width" in b) && (c.overflow = [p.overflow, p.overflowX, p.overflowY], j = n.css(a, "display"), k = Gb(a.nodeName), "none" === j && (j = k), "inline" === j && "none" === n.css(a, "float") && (l.inlineBlockNeedsLayout && "inline" !== k ? p.zoom = 1 : p.display = "inline-block")), c.overflow && (p.overflow = "hidden", l.shrinkWrapBlocks() || m.always(function() {
            p.overflow = c.overflow[0], p.overflowX = c.overflow[1], p.overflowY = c.overflow[2]
        }));
        for (d in b)
            if (e = b[d], bc.exec(e)) {
                if (delete b[d], f = f || "toggle" === e, e === (q ? "hide" : "show")) {
                    if ("show" !== e || !r || void 0 === r[d]) continue;
                    q = !0
                }
                o[d] = r && r[d] || n.style(a, d)
            }
        if (!n.isEmptyObject(o)) {
            r ? "hidden" in r && (q = r.hidden) : r = n._data(a, "fxshow", {}), f && (r.hidden = !q), q ? n(a).show() : m.done(function() {
                n(a).hide()
            }), m.done(function() {
                var b;
                n._removeData(a, "fxshow");
                for (b in o) n.style(a, b, o[b])
            });
            for (d in o) g = ic(q ? r[d] : 0, d, m), d in r || (r[d] = g.start, q && (g.end = g.start, g.start = "width" === d || "height" === d ? 1 : 0))
        }
    }

    function kc(a, b) {
        var c, d, e, f, g;
        for (c in a)
            if (d = n.camelCase(c), e = b[d], f = a[c], n.isArray(f) && (e = f[1], f = a[c] = f[0]), c !== d && (a[d] = f, delete a[c]), g = n.cssHooks[d], g && "expand" in g) {
                f = g.expand(f), delete a[d];
                for (c in f) c in a || (a[c] = f[c], b[c] = e)
            } else b[d] = e
    }

    function lc(a, b, c) {
        var d, e, f = 0,
            g = ec.length,
            h = n.Deferred().always(function() {
                delete i.elem
            }),
            i = function() {
                if (e) return !1;
                for (var b = _b || gc(), c = Math.max(0, j.startTime + j.duration - b), d = c / j.duration || 0, f = 1 - d, g = 0, i = j.tweens.length; i > g; g++) j.tweens[g].run(f);
                return h.notifyWith(a, [j, f, c]), 1 > f && i ? c : (h.resolveWith(a, [j]), !1)
            },
            j = h.promise({
                elem: a,
                props: n.extend({}, b),
                opts: n.extend(!0, {
                    specialEasing: {}
                }, c),
                originalProperties: b,
                originalOptions: c,
                startTime: _b || gc(),
                duration: c.duration,
                tweens: [],
                createTween: function(b, c) {
                    var d = n.Tween(a, j.opts, b, c, j.opts.specialEasing[b] || j.opts.easing);
                    return j.tweens.push(d), d
                },
                stop: function(b) {
                    var c = 0,
                        d = b ? j.tweens.length : 0;
                    if (e) return this;
                    for (e = !0; d > c; c++) j.tweens[c].run(1);
                    return b ? h.resolveWith(a, [j, b]) : h.rejectWith(a, [j, b]), this
                }
            }),
            k = j.props;
        for (kc(k, j.opts.specialEasing); g > f; f++)
            if (d = ec[f].call(j, a, k, j.opts)) return d;
        return n.map(k, ic, j), n.isFunction(j.opts.start) && j.opts.start.call(a, j), n.fx.timer(n.extend(i, {
            elem: a,
            anim: j,
            queue: j.opts.queue
        })), j.progress(j.opts.progress).done(j.opts.done, j.opts.complete).fail(j.opts.fail).always(j.opts.always)
    }
    n.Animation = n.extend(lc, {
            tweener: function(a, b) {
                n.isFunction(a) ? (b = a, a = ["*"]) : a = a.split(" ");
                for (var c, d = 0, e = a.length; e > d; d++) c = a[d], fc[c] = fc[c] || [], fc[c].unshift(b)
            },
            prefilter: function(a, b) {
                b ? ec.unshift(a) : ec.push(a)
            }
        }), n.speed = function(a, b, c) {
            var d = a && "object" == typeof a ? n.extend({}, a) : {
                complete: c || !c && b || n.isFunction(a) && a,
                duration: a,
                easing: c && b || b && !n.isFunction(b) && b
            };
            return d.duration = n.fx.off ? 0 : "number" == typeof d.duration ? d.duration : d.duration in n.fx.speeds ? n.fx.speeds[d.duration] : n.fx.speeds._default, (null == d.queue || d.queue === !0) && (d.queue = "fx"), d.old = d.complete, d.complete = function() {
                n.isFunction(d.old) && d.old.call(this), d.queue && n.dequeue(this, d.queue)
            }, d
        }, n.fn.extend({
            fadeTo: function(a, b, c, d) {
                return this.filter(V).css("opacity", 0).show().end().animate({
                    opacity: b
                }, a, c, d)
            },
            animate: function(a, b, c, d) {
                var e = n.isEmptyObject(a),
                    f = n.speed(b, c, d),
                    g = function() {
                        var b = lc(this, n.extend({}, a), f);
                        (e || n._data(this, "finish")) && b.stop(!0)
                    };
                return g.finish = g, e || f.queue === !1 ? this.each(g) : this.queue(f.queue, g)
            },
            stop: function(a, b, c) {
                var d = function(a) {
                    var b = a.stop;
                    delete a.stop, b(c)
                };
                return "string" != typeof a && (c = b, b = a, a = void 0), b && a !== !1 && this.queue(a || "fx", []), this.each(function() {
                    var b = !0,
                        e = null != a && a + "queueHooks",
                        f = n.timers,
                        g = n._data(this);
                    if (e) g[e] && g[e].stop && d(g[e]);
                    else
                        for (e in g) g[e] && g[e].stop && dc.test(e) && d(g[e]);
                    for (e = f.length; e--;) f[e].elem !== this || null != a && f[e].queue !== a || (f[e].anim.stop(c), b = !1, f.splice(e, 1));
                    (b || !c) && n.dequeue(this, a)
                })
            },
            finish: function(a) {
                return a !== !1 && (a = a || "fx"), this.each(function() {
                    var b, c = n._data(this),
                        d = c[a + "queue"],
                        e = c[a + "queueHooks"],
                        f = n.timers,
                        g = d ? d.length : 0;
                    for (c.finish = !0, n.queue(this, a, []), e && e.stop && e.stop.call(this, !0), b = f.length; b--;) f[b].elem === this && f[b].queue === a && (f[b].anim.stop(!0), f.splice(b, 1));
                    for (b = 0; g > b; b++) d[b] && d[b].finish && d[b].finish.call(this);
                    delete c.finish
                })
            }
        }), n.each(["toggle", "show", "hide"], function(a, b) {
            var c = n.fn[b];
            n.fn[b] = function(a, d, e) {
                return null == a || "boolean" == typeof a ? c.apply(this, arguments) : this.animate(hc(b, !0), a, d, e)
            }
        }), n.each({
            slideDown: hc("show"),
            slideUp: hc("hide"),
            slideToggle: hc("toggle"),
            fadeIn: {
                opacity: "show"
            },
            fadeOut: {
                opacity: "hide"
            },
            fadeToggle: {
                opacity: "toggle"
            }
        }, function(a, b) {
            n.fn[a] = function(a, c, d) {
                return this.animate(b, a, c, d)
            }
        }), n.timers = [], n.fx.tick = function() {
            var a, b = n.timers,
                c = 0;
            for (_b = n.now(); c < b.length; c++) a = b[c], a() || b[c] !== a || b.splice(c--, 1);
            b.length || n.fx.stop(), _b = void 0
        }, n.fx.timer = function(a) {
            n.timers.push(a), a() ? n.fx.start() : n.timers.pop()
        }, n.fx.interval = 13, n.fx.start = function() {
            ac || (ac = setInterval(n.fx.tick, n.fx.interval))
        }, n.fx.stop = function() {
            clearInterval(ac), ac = null
        }, n.fx.speeds = {
            slow: 600,
            fast: 200,
            _default: 400
        }, n.fn.delay = function(a, b) {
            return a = n.fx ? n.fx.speeds[a] || a : a, b = b || "fx", this.queue(b, function(b, c) {
                var d = setTimeout(b, a);
                c.stop = function() {
                    clearTimeout(d)
                }
            })
        },
        function() {
            var a, b, c, d, e = z.createElement("div");
            e.setAttribute("className", "t"), e.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", a = e.getElementsByTagName("a")[0], c = z.createElement("select"), d = c.appendChild(z.createElement("option")), b = e.getElementsByTagName("input")[0], a.style.cssText = "top:1px", l.getSetAttribute = "t" !== e.className, l.style = /top/.test(a.getAttribute("style")), l.hrefNormalized = "/a" === a.getAttribute("href"), l.checkOn = !!b.value, l.optSelected = d.selected, l.enctype = !!z.createElement("form").enctype, c.disabled = !0, l.optDisabled = !d.disabled, b = z.createElement("input"), b.setAttribute("value", ""), l.input = "" === b.getAttribute("value"), b.value = "t", b.setAttribute("type", "radio"), l.radioValue = "t" === b.value, a = b = c = d = e = null
        }();
    var mc = /\r/g;
    n.fn.extend({
        val: function(a) {
            var b, c, d, e = this[0]; {
                if (arguments.length) return d = n.isFunction(a), this.each(function(c) {
                    var e;
                    1 === this.nodeType && (e = d ? a.call(this, c, n(this).val()) : a, null == e ? e = "" : "number" == typeof e ? e += "" : n.isArray(e) && (e = n.map(e, function(a) {
                        return null == a ? "" : a + ""
                    })), b = n.valHooks[this.type] || n.valHooks[this.nodeName.toLowerCase()], b && "set" in b && void 0 !== b.set(this, e, "value") || (this.value = e))
                });
                if (e) return b = n.valHooks[e.type] || n.valHooks[e.nodeName.toLowerCase()], b && "get" in b && void 0 !== (c = b.get(e, "value")) ? c : (c = e.value, "string" == typeof c ? c.replace(mc, "") : null == c ? "" : c)
            }
        }
    }), n.extend({
        valHooks: {
            option: {
                get: function(a) {
                    var b = n.find.attr(a, "value");
                    return null != b ? b : n.text(a)
                }
            },
            select: {
                get: function(a) {
                    for (var b, c, d = a.options, e = a.selectedIndex, f = "select-one" === a.type || 0 > e, g = f ? null : [], h = f ? e + 1 : d.length, i = 0 > e ? h : f ? e : 0; h > i; i++)
                        if (c = d[i], !(!c.selected && i !== e || (l.optDisabled ? c.disabled : null !== c.getAttribute("disabled")) || c.parentNode.disabled && n.nodeName(c.parentNode, "optgroup"))) {
                            if (b = n(c).val(), f) return b;
                            g.push(b)
                        }
                    return g
                },
                set: function(a, b) {
                    var c, d, e = a.options,
                        f = n.makeArray(b),
                        g = e.length;
                    while (g--)
                        if (d = e[g], n.inArray(n.valHooks.option.get(d), f) >= 0) try {
                            d.selected = c = !0
                        } catch (h) {
                            d.scrollHeight
                        } else d.selected = !1;
                    return c || (a.selectedIndex = -1), e
                }
            }
        }
    }), n.each(["radio", "checkbox"], function() {
        n.valHooks[this] = {
            set: function(a, b) {
                return n.isArray(b) ? a.checked = n.inArray(n(a).val(), b) >= 0 : void 0
            }
        }, l.checkOn || (n.valHooks[this].get = function(a) {
            return null === a.getAttribute("value") ? "on" : a.value
        })
    });
    var nc, oc, pc = n.expr.attrHandle,
        qc = /^(?:checked|selected)$/i,
        rc = l.getSetAttribute,
        sc = l.input;
    n.fn.extend({
        attr: function(a, b) {
            return W(this, n.attr, a, b, arguments.length > 1)
        },
        removeAttr: function(a) {
            return this.each(function() {
                n.removeAttr(this, a)
            })
        }
    }), n.extend({
        attr: function(a, b, c) {
            var d, e, f = a.nodeType;
            if (a && 3 !== f && 8 !== f && 2 !== f) return typeof a.getAttribute === L ? n.prop(a, b, c) : (1 === f && n.isXMLDoc(a) || (b = b.toLowerCase(), d = n.attrHooks[b] || (n.expr.match.bool.test(b) ? oc : nc)), void 0 === c ? d && "get" in d && null !== (e = d.get(a, b)) ? e : (e = n.find.attr(a, b), null == e ? void 0 : e) : null !== c ? d && "set" in d && void 0 !== (e = d.set(a, c, b)) ? e : (a.setAttribute(b, c + ""), c) : void n.removeAttr(a, b))
        },
        removeAttr: function(a, b) {
            var c, d, e = 0,
                f = b && b.match(F);
            if (f && 1 === a.nodeType)
                while (c = f[e++]) d = n.propFix[c] || c, n.expr.match.bool.test(c) ? sc && rc || !qc.test(c) ? a[d] = !1 : a[n.camelCase("default-" + c)] = a[d] = !1 : n.attr(a, c, ""), a.removeAttribute(rc ? c : d)
        },
        attrHooks: {
            type: {
                set: function(a, b) {
                    if (!l.radioValue && "radio" === b && n.nodeName(a, "input")) {
                        var c = a.value;
                        return a.setAttribute("type", b), c && (a.value = c), b
                    }
                }
            }
        }
    }), oc = {
        set: function(a, b, c) {
            return b === !1 ? n.removeAttr(a, c) : sc && rc || !qc.test(c) ? a.setAttribute(!rc && n.propFix[c] || c, c) : a[n.camelCase("default-" + c)] = a[c] = !0, c
        }
    }, n.each(n.expr.match.bool.source.match(/\w+/g), function(a, b) {
        var c = pc[b] || n.find.attr;
        pc[b] = sc && rc || !qc.test(b) ? function(a, b, d) {
            var e, f;
            return d || (f = pc[b], pc[b] = e, e = null != c(a, b, d) ? b.toLowerCase() : null, pc[b] = f), e
        } : function(a, b, c) {
            return c ? void 0 : a[n.camelCase("default-" + b)] ? b.toLowerCase() : null
        }
    }), sc && rc || (n.attrHooks.value = {
        set: function(a, b, c) {
            return n.nodeName(a, "input") ? void(a.defaultValue = b) : nc && nc.set(a, b, c)
        }
    }), rc || (nc = {
        set: function(a, b, c) {
            var d = a.getAttributeNode(c);
            return d || a.setAttributeNode(d = a.ownerDocument.createAttribute(c)), d.value = b += "", "value" === c || b === a.getAttribute(c) ? b : void 0
        }
    }, pc.id = pc.name = pc.coords = function(a, b, c) {
        var d;
        return c ? void 0 : (d = a.getAttributeNode(b)) && "" !== d.value ? d.value : null
    }, n.valHooks.button = {
        get: function(a, b) {
            var c = a.getAttributeNode(b);
            return c && c.specified ? c.value : void 0
        },
        set: nc.set
    }, n.attrHooks.contenteditable = {
        set: function(a, b, c) {
            nc.set(a, "" === b ? !1 : b, c)
        }
    }, n.each(["width", "height"], function(a, b) {
        n.attrHooks[b] = {
            set: function(a, c) {
                return "" === c ? (a.setAttribute(b, "auto"), c) : void 0
            }
        }
    })), l.style || (n.attrHooks.style = {
        get: function(a) {
            return a.style.cssText || void 0
        },
        set: function(a, b) {
            return a.style.cssText = b + ""
        }
    });
    var tc = /^(?:input|select|textarea|button|object)$/i,
        uc = /^(?:a|area)$/i;
    n.fn.extend({
        prop: function(a, b) {
            return W(this, n.prop, a, b, arguments.length > 1)
        },
        removeProp: function(a) {
            return a = n.propFix[a] || a, this.each(function() {
                try {
                    this[a] = void 0, delete this[a]
                } catch (b) {}
            })
        }
    }), n.extend({
        propFix: {
            "for": "htmlFor",
            "class": "className"
        },
        prop: function(a, b, c) {
            var d, e, f, g = a.nodeType;
            if (a && 3 !== g && 8 !== g && 2 !== g) return f = 1 !== g || !n.isXMLDoc(a), f && (b = n.propFix[b] || b, e = n.propHooks[b]), void 0 !== c ? e && "set" in e && void 0 !== (d = e.set(a, c, b)) ? d : a[b] = c : e && "get" in e && null !== (d = e.get(a, b)) ? d : a[b]
        },
        propHooks: {
            tabIndex: {
                get: function(a) {
                    var b = n.find.attr(a, "tabindex");
                    return b ? parseInt(b, 10) : tc.test(a.nodeName) || uc.test(a.nodeName) && a.href ? 0 : -1
                }
            }
        }
    }), l.hrefNormalized || n.each(["href", "src"], function(a, b) {
        n.propHooks[b] = {
            get: function(a) {
                return a.getAttribute(b, 4)
            }
        }
    }), l.optSelected || (n.propHooks.selected = {
        get: function(a) {
            var b = a.parentNode;
            return b && (b.selectedIndex, b.parentNode && b.parentNode.selectedIndex), null
        }
    }), n.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function() {
        n.propFix[this.toLowerCase()] = this
    }), l.enctype || (n.propFix.enctype = "encoding");
    var vc = /[\t\r\n\f]/g;
    n.fn.extend({
        addClass: function(a) {
            var b, c, d, e, f, g, h = 0,
                i = this.length,
                j = "string" == typeof a && a;
            if (n.isFunction(a)) return this.each(function(b) {
                n(this).addClass(a.call(this, b, this.className))
            });
            if (j)
                for (b = (a || "").match(F) || []; i > h; h++)
                    if (c = this[h], d = 1 === c.nodeType && (c.className ? (" " + c.className + " ").replace(vc, " ") : " ")) {
                        f = 0;
                        while (e = b[f++]) d.indexOf(" " + e + " ") < 0 && (d += e + " ");
                        g = n.trim(d), c.className !== g && (c.className = g)
                    }
            return this
        },
        removeClass: function(a) {
            var b, c, d, e, f, g, h = 0,
                i = this.length,
                j = 0 === arguments.length || "string" == typeof a && a;
            if (n.isFunction(a)) return this.each(function(b) {
                n(this).removeClass(a.call(this, b, this.className))
            });
            if (j)
                for (b = (a || "").match(F) || []; i > h; h++)
                    if (c = this[h], d = 1 === c.nodeType && (c.className ? (" " + c.className + " ").replace(vc, " ") : "")) {
                        f = 0;
                        while (e = b[f++])
                            while (d.indexOf(" " + e + " ") >= 0) d = d.replace(" " + e + " ", " ");
                        g = a ? n.trim(d) : "", c.className !== g && (c.className = g)
                    }
            return this
        },
        toggleClass: function(a, b) {
            var c = typeof a;
            return "boolean" == typeof b && "string" === c ? b ? this.addClass(a) : this.removeClass(a) : this.each(n.isFunction(a) ? function(c) {
                n(this).toggleClass(a.call(this, c, this.className, b), b)
            } : function() {
                if ("string" === c) {
                    var b, d = 0,
                        e = n(this),
                        f = a.match(F) || [];
                    while (b = f[d++]) e.hasClass(b) ? e.removeClass(b) : e.addClass(b)
                } else(c === L || "boolean" === c) && (this.className && n._data(this, "__className__", this.className), this.className = this.className || a === !1 ? "" : n._data(this, "__className__") || "")
            })
        },
        hasClass: function(a) {
            for (var b = " " + a + " ", c = 0, d = this.length; d > c; c++)
                if (1 === this[c].nodeType && (" " + this[c].className + " ").replace(vc, " ").indexOf(b) >= 0) return !0;
            return !1
        }
    }), n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(a, b) {
        n.fn[b] = function(a, c) {
            return arguments.length > 0 ? this.on(b, null, a, c) : this.trigger(b)
        }
    }), n.fn.extend({
        hover: function(a, b) {
            return this.mouseenter(a).mouseleave(b || a)
        },
        bind: function(a, b, c) {
            return this.on(a, null, b, c)
        },
        unbind: function(a, b) {
            return this.off(a, null, b)
        },
        delegate: function(a, b, c, d) {
            return this.on(b, a, c, d)
        },
        undelegate: function(a, b, c) {
            return 1 === arguments.length ? this.off(a, "**") : this.off(b, a || "**", c)
        }
    });
    var wc = n.now(),
        xc = /\?/,
        yc = /(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;
    n.parseJSON = function(b) {
        if (a.JSON && a.JSON.parse) return a.JSON.parse(b + "");
        var c, d = null,
            e = n.trim(b + "");
        return e && !n.trim(e.replace(yc, function(a, b, e, f) {
            return c && b && (d = 0), 0 === d ? a : (c = e || b, d += !f - !e, "")
        })) ? Function("return " + e)() : n.error("Invalid JSON: " + b)
    }, n.parseXML = function(b) {
        var c, d;
        if (!b || "string" != typeof b) return null;
        try {
            a.DOMParser ? (d = new DOMParser, c = d.parseFromString(b, "text/xml")) : (c = new ActiveXObject("Microsoft.XMLDOM"), c.async = "false", c.loadXML(b))
        } catch (e) {
            c = void 0
        }
        return c && c.documentElement && !c.getElementsByTagName("parsererror").length || n.error("Invalid XML: " + b), c
    };
    var zc, Ac, Bc = /#.*$/,
        Cc = /([?&])_=[^&]*/,
        Dc = /^(.*?):[ \t]*([^\r\n]*)\r?$/gm,
        Ec = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
        Fc = /^(?:GET|HEAD)$/,
        Gc = /^\/\//,
        Hc = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,
        Ic = {},
        Jc = {},
        Kc = "*/".concat("*");
    try {
        Ac = location.href
    } catch (Lc) {
        Ac = z.createElement("a"), Ac.href = "", Ac = Ac.href
    }
    zc = Hc.exec(Ac.toLowerCase()) || [];

    function Mc(a) {
        return function(b, c) {
            "string" != typeof b && (c = b, b = "*");
            var d, e = 0,
                f = b.toLowerCase().match(F) || [];
            if (n.isFunction(c))
                while (d = f[e++]) "+" === d.charAt(0) ? (d = d.slice(1) || "*", (a[d] = a[d] || []).unshift(c)) : (a[d] = a[d] || []).push(c)
        }
    }

    function Nc(a, b, c, d) {
        var e = {},
            f = a === Jc;

        function g(h) {
            var i;
            return e[h] = !0, n.each(a[h] || [], function(a, h) {
                var j = h(b, c, d);
                return "string" != typeof j || f || e[j] ? f ? !(i = j) : void 0 : (b.dataTypes.unshift(j), g(j), !1)
            }), i
        }
        return g(b.dataTypes[0]) || !e["*"] && g("*")
    }

    function Oc(a, b) {
        var c, d, e = n.ajaxSettings.flatOptions || {};
        for (d in b) void 0 !== b[d] && ((e[d] ? a : c || (c = {}))[d] = b[d]);
        return c && n.extend(!0, a, c), a
    }

    function Pc(a, b, c) {
        var d, e, f, g, h = a.contents,
            i = a.dataTypes;
        while ("*" === i[0]) i.shift(), void 0 === e && (e = a.mimeType || b.getResponseHeader("Content-Type"));
        if (e)
            for (g in h)
                if (h[g] && h[g].test(e)) {
                    i.unshift(g);
                    break
                }
        if (i[0] in c) f = i[0];
        else {
            for (g in c) {
                if (!i[0] || a.converters[g + " " + i[0]]) {
                    f = g;
                    break
                }
                d || (d = g)
            }
            f = f || d
        }
        return f ? (f !== i[0] && i.unshift(f), c[f]) : void 0
    }

    function Qc(a, b, c, d) {
        var e, f, g, h, i, j = {},
            k = a.dataTypes.slice();
        if (k[1])
            for (g in a.converters) j[g.toLowerCase()] = a.converters[g];
        f = k.shift();
        while (f)
            if (a.responseFields[f] && (c[a.responseFields[f]] = b), !i && d && a.dataFilter && (b = a.dataFilter(b, a.dataType)), i = f, f = k.shift())
                if ("*" === f) f = i;
                else if ("*" !== i && i !== f) {
            if (g = j[i + " " + f] || j["* " + f], !g)
                for (e in j)
                    if (h = e.split(" "), h[1] === f && (g = j[i + " " + h[0]] || j["* " + h[0]])) {
                        g === !0 ? g = j[e] : j[e] !== !0 && (f = h[0], k.unshift(h[1]));
                        break
                    }
            if (g !== !0)
                if (g && a["throws"]) b = g(b);
                else try {
                    b = g(b)
                } catch (l) {
                    return {
                        state: "parsererror",
                        error: g ? l : "No conversion from " + i + " to " + f
                    }
                }
        }
        return {
            state: "success",
            data: b
        }
    }
    n.extend({
        active: 0,
        lastModified: {},
        etag: {},
        ajaxSettings: {
            url: Ac,
            type: "GET",
            isLocal: Ec.test(zc[1]),
            global: !0,
            processData: !0,
            async: !0,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            accepts: {
                "*": Kc,
                text: "text/plain",
                html: "text/html",
                xml: "application/xml, text/xml",
                json: "application/json, text/javascript"
            },
            contents: {
                xml: /xml/,
                html: /html/,
                json: /json/
            },
            responseFields: {
                xml: "responseXML",
                text: "responseText",
                json: "responseJSON"
            },
            converters: {
                "* text": String,
                "text html": !0,
                "text json": n.parseJSON,
                "text xml": n.parseXML
            },
            flatOptions: {
                url: !0,
                context: !0
            }
        },
        ajaxSetup: function(a, b) {
            return b ? Oc(Oc(a, n.ajaxSettings), b) : Oc(n.ajaxSettings, a)
        },
        ajaxPrefilter: Mc(Ic),
        ajaxTransport: Mc(Jc),
        ajax: function(a, b) {
            "object" == typeof a && (b = a, a = void 0), b = b || {};
            var c, d, e, f, g, h, i, j, k = n.ajaxSetup({}, b),
                l = k.context || k,
                m = k.context && (l.nodeType || l.jquery) ? n(l) : n.event,
                o = n.Deferred(),
                p = n.Callbacks("once memory"),
                q = k.statusCode || {},
                r = {},
                s = {},
                t = 0,
                u = "canceled",
                v = {
                    readyState: 0,
                    getResponseHeader: function(a) {
                        var b;
                        if (2 === t) {
                            if (!j) {
                                j = {};
                                while (b = Dc.exec(f)) j[b[1].toLowerCase()] = b[2]
                            }
                            b = j[a.toLowerCase()]
                        }
                        return null == b ? null : b
                    },
                    getAllResponseHeaders: function() {
                        return 2 === t ? f : null
                    },
                    setRequestHeader: function(a, b) {
                        var c = a.toLowerCase();
                        return t || (a = s[c] = s[c] || a, r[a] = b), this
                    },
                    overrideMimeType: function(a) {
                        return t || (k.mimeType = a), this
                    },
                    statusCode: function(a) {
                        var b;
                        if (a)
                            if (2 > t)
                                for (b in a) q[b] = [q[b], a[b]];
                            else v.always(a[v.status]);
                        return this
                    },
                    abort: function(a) {
                        var b = a || u;
                        return i && i.abort(b), x(0, b), this
                    }
                };
            if (o.promise(v).complete = p.add, v.success = v.done, v.error = v.fail, k.url = ((a || k.url || Ac) + "").replace(Bc, "").replace(Gc, zc[1] + "//"), k.type = b.method || b.type || k.method || k.type, k.dataTypes = n.trim(k.dataType || "*").toLowerCase().match(F) || [""], null == k.crossDomain && (c = Hc.exec(k.url.toLowerCase()), k.crossDomain = !(!c || c[1] === zc[1] && c[2] === zc[2] && (c[3] || ("http:" === c[1] ? "80" : "443")) === (zc[3] || ("http:" === zc[1] ? "80" : "443")))), k.data && k.processData && "string" != typeof k.data && (k.data = n.param(k.data, k.traditional)), Nc(Ic, k, b, v), 2 === t) return v;
            h = k.global, h && 0 === n.active++ && n.event.trigger("ajaxStart"), k.type = k.type.toUpperCase(), k.hasContent = !Fc.test(k.type), e = k.url, k.hasContent || (k.data && (e = k.url += (xc.test(e) ? "&" : "?") + k.data, delete k.data), k.cache === !1 && (k.url = Cc.test(e) ? e.replace(Cc, "$1_=" + wc++) : e + (xc.test(e) ? "&" : "?") + "_=" + wc++)), k.ifModified && (n.lastModified[e] && v.setRequestHeader("If-Modified-Since", n.lastModified[e]), n.etag[e] && v.setRequestHeader("If-None-Match", n.etag[e])), (k.data && k.hasContent && k.contentType !== !1 || b.contentType) && v.setRequestHeader("Content-Type", k.contentType), v.setRequestHeader("Accept", k.dataTypes[0] && k.accepts[k.dataTypes[0]] ? k.accepts[k.dataTypes[0]] + ("*" !== k.dataTypes[0] ? ", " + Kc + "; q=0.01" : "") : k.accepts["*"]);
            for (d in k.headers) v.setRequestHeader(d, k.headers[d]);
            if (k.beforeSend && (k.beforeSend.call(l, v, k) === !1 || 2 === t)) return v.abort();
            u = "abort";
            for (d in {
                    success: 1,
                    error: 1,
                    complete: 1
                }) v[d](k[d]);
            if (i = Nc(Jc, k, b, v)) {
                v.readyState = 1, h && m.trigger("ajaxSend", [v, k]), k.async && k.timeout > 0 && (g = setTimeout(function() {
                    v.abort("timeout")
                }, k.timeout));
                try {
                    t = 1, i.send(r, x)
                } catch (w) {
                    if (!(2 > t)) throw w;
                    x(-1, w)
                }
            } else x(-1, "No Transport");

            function x(a, b, c, d) {
                var j, r, s, u, w, x = b;
                2 !== t && (t = 2, g && clearTimeout(g), i = void 0, f = d || "", v.readyState = a > 0 ? 4 : 0, j = a >= 200 && 300 > a || 304 === a, c && (u = Pc(k, v, c)), u = Qc(k, u, v, j), j ? (k.ifModified && (w = v.getResponseHeader("Last-Modified"), w && (n.lastModified[e] = w), w = v.getResponseHeader("etag"), w && (n.etag[e] = w)), 204 === a || "HEAD" === k.type ? x = "nocontent" : 304 === a ? x = "notmodified" : (x = u.state, r = u.data, s = u.error, j = !s)) : (s = x, (a || !x) && (x = "error", 0 > a && (a = 0))), v.status = a, v.statusText = (b || x) + "", j ? o.resolveWith(l, [r, x, v]) : o.rejectWith(l, [v, x, s]), v.statusCode(q), q = void 0, h && m.trigger(j ? "ajaxSuccess" : "ajaxError", [v, k, j ? r : s]), p.fireWith(l, [v, x]), h && (m.trigger("ajaxComplete", [v, k]), --n.active || n.event.trigger("ajaxStop")))
            }
            return v
        },
        getJSON: function(a, b, c) {
            return n.get(a, b, c, "json")
        },
        getScript: function(a, b) {
            return n.get(a, void 0, b, "script")
        }
    }), n.each(["get", "post"], function(a, b) {
        n[b] = function(a, c, d, e) {
            return n.isFunction(c) && (e = e || d, d = c, c = void 0), n.ajax({
                url: a,
                type: b,
                dataType: e,
                data: c,
                success: d
            })
        }
    }), n.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function(a, b) {
        n.fn[b] = function(a) {
            return this.on(b, a)
        }
    }), n._evalUrl = function(a) {
        return n.ajax({
            url: a,
            type: "GET",
            dataType: "script",
            async: !1,
            global: !1,
            "throws": !0
        })
    }, n.fn.extend({
        wrapAll: function(a) {
            if (n.isFunction(a)) return this.each(function(b) {
                n(this).wrapAll(a.call(this, b))
            });
            if (this[0]) {
                var b = n(a, this[0].ownerDocument).eq(0).clone(!0);
                this[0].parentNode && b.insertBefore(this[0]), b.map(function() {
                    var a = this;
                    while (a.firstChild && 1 === a.firstChild.nodeType) a = a.firstChild;
                    return a
                }).append(this)
            }
            return this
        },
        wrapInner: function(a) {
            return this.each(n.isFunction(a) ? function(b) {
                n(this).wrapInner(a.call(this, b))
            } : function() {
                var b = n(this),
                    c = b.contents();
                c.length ? c.wrapAll(a) : b.append(a)
            })
        },
        wrap: function(a) {
            var b = n.isFunction(a);
            return this.each(function(c) {
                n(this).wrapAll(b ? a.call(this, c) : a)
            })
        },
        unwrap: function() {
            return this.parent().each(function() {
                n.nodeName(this, "body") || n(this).replaceWith(this.childNodes)
            }).end()
        }
    }), n.expr.filters.hidden = function(a) {
        return a.offsetWidth <= 0 && a.offsetHeight <= 0 || !l.reliableHiddenOffsets() && "none" === (a.style && a.style.display || n.css(a, "display"))
    }, n.expr.filters.visible = function(a) {
        return !n.expr.filters.hidden(a)
    };
    var Rc = /%20/g,
        Sc = /\[\]$/,
        Tc = /\r?\n/g,
        Uc = /^(?:submit|button|image|reset|file)$/i,
        Vc = /^(?:input|select|textarea|keygen)/i;

    function Wc(a, b, c, d) {
        var e;
        if (n.isArray(b)) n.each(b, function(b, e) {
            c || Sc.test(a) ? d(a, e) : Wc(a + "[" + ("object" == typeof e ? b : "") + "]", e, c, d)
        });
        else if (c || "object" !== n.type(b)) d(a, b);
        else
            for (e in b) Wc(a + "[" + e + "]", b[e], c, d)
    }
    n.param = function(a, b) {
        var c, d = [],
            e = function(a, b) {
                b = n.isFunction(b) ? b() : null == b ? "" : b, d[d.length] = encodeURIComponent(a) + "=" + encodeURIComponent(b)
            };
        if (void 0 === b && (b = n.ajaxSettings && n.ajaxSettings.traditional), n.isArray(a) || a.jquery && !n.isPlainObject(a)) n.each(a, function() {
            e(this.name, this.value)
        });
        else
            for (c in a) Wc(c, a[c], b, e);
        return d.join("&").replace(Rc, "+")
    }, n.fn.extend({
        serialize: function() {
            return n.param(this.serializeArray())
        },
        serializeArray: function() {
            return this.map(function() {
                var a = n.prop(this, "elements");
                return a ? n.makeArray(a) : this
            }).filter(function() {
                var a = this.type;
                return this.name && !n(this).is(":disabled") && Vc.test(this.nodeName) && !Uc.test(a) && (this.checked || !X.test(a))
            }).map(function(a, b) {
                var c = n(this).val();
                return null == c ? null : n.isArray(c) ? n.map(c, function(a) {
                    return {
                        name: b.name,
                        value: a.replace(Tc, "\r\n")
                    }
                }) : {
                    name: b.name,
                    value: c.replace(Tc, "\r\n")
                }
            }).get()
        }
    }), n.ajaxSettings.xhr = void 0 !== a.ActiveXObject ? function() {
        return !this.isLocal && /^(get|post|head|put|delete|options)$/i.test(this.type) && $c() || _c()
    } : $c;
    var Xc = 0,
        Yc = {},
        Zc = n.ajaxSettings.xhr();
    a.ActiveXObject && n(a).on("unload", function() {
        for (var a in Yc) Yc[a](void 0, !0)
    }), l.cors = !!Zc && "withCredentials" in Zc, Zc = l.ajax = !!Zc, Zc && n.ajaxTransport(function(a) {
        if (!a.crossDomain || l.cors) {
            var b;
            return {
                send: function(c, d) {
                    var e, f = a.xhr(),
                        g = ++Xc;
                    if (f.open(a.type, a.url, a.async, a.username, a.password), a.xhrFields)
                        for (e in a.xhrFields) f[e] = a.xhrFields[e];
                    a.mimeType && f.overrideMimeType && f.overrideMimeType(a.mimeType), a.crossDomain || c["X-Requested-With"] || (c["X-Requested-With"] = "XMLHttpRequest");
                    for (e in c) void 0 !== c[e] && f.setRequestHeader(e, c[e] + "");
                    f.send(a.hasContent && a.data || null), b = function(c, e) {
                        var h, i, j;
                        if (b && (e || 4 === f.readyState))
                            if (delete Yc[g], b = void 0, f.onreadystatechange = n.noop, e) 4 !== f.readyState && f.abort();
                            else {
                                j = {}, h = f.status, "string" == typeof f.responseText && (j.text = f.responseText);
                                try {
                                    i = f.statusText
                                } catch (k) {
                                    i = ""
                                }
                                h || !a.isLocal || a.crossDomain ? 1223 === h && (h = 204) : h = j.text ? 200 : 404
                            }
                        j && d(h, i, j, f.getAllResponseHeaders())
                    }, a.async ? 4 === f.readyState ? setTimeout(b) : f.onreadystatechange = Yc[g] = b : b()
                },
                abort: function() {
                    b && b(void 0, !0)
                }
            }
        }
    });

    function $c() {
        try {
            return new a.XMLHttpRequest
        } catch (b) {}
    }

    function _c() {
        try {
            return new a.ActiveXObject("Microsoft.XMLHTTP")
        } catch (b) {}
    }
    n.ajaxSetup({
        accepts: {
            script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
        },
        contents: {
            script: /(?:java|ecma)script/
        },
        converters: {
            "text script": function(a) {
                return n.globalEval(a), a
            }
        }
    }), n.ajaxPrefilter("script", function(a) {
        void 0 === a.cache && (a.cache = !1), a.crossDomain && (a.type = "GET", a.global = !1)
    }), n.ajaxTransport("script", function(a) {
        if (a.crossDomain) {
            var b, c = z.head || n("head")[0] || z.documentElement;
            return {
                send: function(d, e) {
                    b = z.createElement("script"), b.async = !0, a.scriptCharset && (b.charset = a.scriptCharset), b.src = a.url, b.onload = b.onreadystatechange = function(a, c) {
                        (c || !b.readyState || /loaded|complete/.test(b.readyState)) && (b.onload = b.onreadystatechange = null, b.parentNode && b.parentNode.removeChild(b), b = null, c || e(200, "success"))
                    }, c.insertBefore(b, c.firstChild)
                },
                abort: function() {
                    b && b.onload(void 0, !0)
                }
            }
        }
    });
    var ad = [],
        bd = /(=)\?(?=&|$)|\?\?/;
    n.ajaxSetup({
        jsonp: "callback",
        jsonpCallback: function() {
            var a = ad.pop() || n.expando + "_" + wc++;
            return this[a] = !0, a
        }
    }), n.ajaxPrefilter("json jsonp", function(b, c, d) {
        var e, f, g, h = b.jsonp !== !1 && (bd.test(b.url) ? "url" : "string" == typeof b.data && !(b.contentType || "").indexOf("application/x-www-form-urlencoded") && bd.test(b.data) && "data");
        return h || "jsonp" === b.dataTypes[0] ? (e = b.jsonpCallback = n.isFunction(b.jsonpCallback) ? b.jsonpCallback() : b.jsonpCallback, h ? b[h] = b[h].replace(bd, "$1" + e) : b.jsonp !== !1 && (b.url += (xc.test(b.url) ? "&" : "?") + b.jsonp + "=" + e), b.converters["script json"] = function() {
            return g || n.error(e + " was not called"), g[0]
        }, b.dataTypes[0] = "json", f = a[e], a[e] = function() {
            g = arguments
        }, d.always(function() {
            a[e] = f, b[e] && (b.jsonpCallback = c.jsonpCallback, ad.push(e)), g && n.isFunction(f) && f(g[0]), g = f = void 0
        }), "script") : void 0
    }), n.parseHTML = function(a, b, c) {
        if (!a || "string" != typeof a) return null;
        "boolean" == typeof b && (c = b, b = !1), b = b || z;
        var d = v.exec(a),
            e = !c && [];
        return d ? [b.createElement(d[1])] : (d = n.buildFragment([a], b, e), e && e.length && n(e).remove(), n.merge([], d.childNodes))
    };
    var cd = n.fn.load;
    n.fn.load = function(a, b, c) {
        if ("string" != typeof a && cd) return cd.apply(this, arguments);
        var d, e, f, g = this,
            h = a.indexOf(" ");
        return h >= 0 && (d = a.slice(h, a.length), a = a.slice(0, h)), n.isFunction(b) ? (c = b, b = void 0) : b && "object" == typeof b && (f = "POST"), g.length > 0 && n.ajax({
            url: a,
            type: f,
            dataType: "html",
            data: b
        }).done(function(a) {
            e = arguments, g.html(d ? n("<div>").append(n.parseHTML(a)).find(d) : a)
        }).complete(c && function(a, b) {
            g.each(c, e || [a.responseText, b, a])
        }), this
    }, n.expr.filters.animated = function(a) {
        return n.grep(n.timers, function(b) {
            return a === b.elem
        }).length
    };
    var dd = a.document.documentElement;

    function ed(a) {
        return n.isWindow(a) ? a : 9 === a.nodeType ? a.defaultView || a.parentWindow : !1
    }
    n.offset = {
        setOffset: function(a, b, c) {
            var d, e, f, g, h, i, j, k = n.css(a, "position"),
                l = n(a),
                m = {};
            "static" === k && (a.style.position = "relative"), h = l.offset(), f = n.css(a, "top"), i = n.css(a, "left"), j = ("absolute" === k || "fixed" === k) && n.inArray("auto", [f, i]) > -1, j ? (d = l.position(), g = d.top, e = d.left) : (g = parseFloat(f) || 0, e = parseFloat(i) || 0), n.isFunction(b) && (b = b.call(a, c, h)), null != b.top && (m.top = b.top - h.top + g), null != b.left && (m.left = b.left - h.left + e), "using" in b ? b.using.call(a, m) : l.css(m)
        }
    }, n.fn.extend({
        offset: function(a) {
            if (arguments.length) return void 0 === a ? this : this.each(function(b) {
                n.offset.setOffset(this, a, b)
            });
            var b, c, d = {
                    top: 0,
                    left: 0
                },
                e = this[0],
                f = e && e.ownerDocument;
            if (f) return b = f.documentElement, n.contains(b, e) ? (typeof e.getBoundingClientRect !== L && (d = e.getBoundingClientRect()), c = ed(f), {
                top: d.top + (c.pageYOffset || b.scrollTop) - (b.clientTop || 0),
                left: d.left + (c.pageXOffset || b.scrollLeft) - (b.clientLeft || 0)
            }) : d
        },
        position: function() {
            if (this[0]) {
                var a, b, c = {
                        top: 0,
                        left: 0
                    },
                    d = this[0];
                return "fixed" === n.css(d, "position") ? b = d.getBoundingClientRect() : (a = this.offsetParent(), b = this.offset(), n.nodeName(a[0], "html") || (c = a.offset()), c.top += n.css(a[0], "borderTopWidth", !0), c.left += n.css(a[0], "borderLeftWidth", !0)), {
                    top: b.top - c.top - n.css(d, "marginTop", !0),
                    left: b.left - c.left - n.css(d, "marginLeft", !0)
                }
            }
        },
        offsetParent: function() {
            return this.map(function() {
                var a = this.offsetParent || dd;
                while (a && !n.nodeName(a, "html") && "static" === n.css(a, "position")) a = a.offsetParent;
                return a || dd
            })
        }
    }), n.each({
        scrollLeft: "pageXOffset",
        scrollTop: "pageYOffset"
    }, function(a, b) {
        var c = /Y/.test(b);
        n.fn[a] = function(d) {
            return W(this, function(a, d, e) {
                var f = ed(a);
                return void 0 === e ? f ? b in f ? f[b] : f.document.documentElement[d] : a[d] : void(f ? f.scrollTo(c ? n(f).scrollLeft() : e, c ? e : n(f).scrollTop()) : a[d] = e)
            }, a, d, arguments.length, null)
        }
    }), n.each(["top", "left"], function(a, b) {
        n.cssHooks[b] = Mb(l.pixelPosition, function(a, c) {
            return c ? (c = Kb(a, b), Ib.test(c) ? n(a).position()[b] + "px" : c) : void 0
        })
    }), n.each({
        Height: "height",
        Width: "width"
    }, function(a, b) {
        n.each({
            padding: "inner" + a,
            content: b,
            "": "outer" + a
        }, function(c, d) {
            n.fn[d] = function(d, e) {
                var f = arguments.length && (c || "boolean" != typeof d),
                    g = c || (d === !0 || e === !0 ? "margin" : "border");
                return W(this, function(b, c, d) {
                    var e;
                    return n.isWindow(b) ? b.document.documentElement["client" + a] : 9 === b.nodeType ? (e = b.documentElement, Math.max(b.body["scroll" + a], e["scroll" + a], b.body["offset" + a], e["offset" + a], e["client" + a])) : void 0 === d ? n.css(b, c, g) : n.style(b, c, d, g)
                }, b, f ? d : void 0, f, null)
            }
        })
    }), n.fn.size = function() {
        return this.length
    }, n.fn.andSelf = n.fn.addBack, "function" == typeof define && define.amd && define("jquery", [], function() {
        return n
    });
    var fd = a.jQuery,
        gd = a.$;
    return n.noConflict = function(b) {
        return a.$ === n && (a.$ = gd), b && a.jQuery === n && (a.jQuery = fd), n
    }, typeof b === L && (a.jQuery = a.$ = n), n
});
(function(global) {
    "use strict";
    var DP = 20,
        RM = 1,
        MAX_DP = 1e6,
        MAX_POWER = 1e6,
        E_NEG = -7,
        E_POS = 21,
        P = {},
        isValid = /^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,
        Big;

    function bigFactory() {
        function Big(n) {
            var x = this;
            if (!(x instanceof Big)) {
                return n === void 0 ? bigFactory() : new Big(n)
            }
            if (n instanceof Big) {
                x.s = n.s;
                x.e = n.e;
                x.c = n.c.slice()
            } else {
                parse(x, n)
            }
            x.constructor = Big
        }
        Big.prototype = P;
        Big.DP = DP;
        Big.RM = RM;
        Big.E_NEG = E_NEG;
        Big.E_POS = E_POS;
        return Big
    }

    function format(x, dp, toE) {
        var Big = x.constructor,
            i = dp - (x = new Big(x)).e,
            c = x.c;
        if (c.length > ++dp) {
            rnd(x, i, Big.RM)
        }
        if (!c[0]) {
            ++i
        } else if (toE) {
            i = dp
        } else {
            c = x.c;
            i = x.e + i + 1
        }
        for (; c.length < i; c.push(0)) {}
        i = x.e;
        return toE === 1 || toE && (dp <= i || i <= Big.E_NEG) ? (x.s < 0 && c[0] ? "-" : "") + (c.length > 1 ? c[0] + "." + c.join("").slice(1) : c[0]) + (i < 0 ? "e" : "e+") + i : x.toString()
    }

    function parse(x, n) {
        var e, i, nL;
        if (n === 0 && 1 / n < 0) {
            n = "-0"
        } else if (!isValid.test(n += "")) {
            throwErr(NaN)
        }
        x.s = n.charAt(0) == "-" ? (n = n.slice(1), -1) : 1;
        if ((e = n.indexOf(".")) > -1) {
            n = n.replace(".", "")
        }
        if ((i = n.search(/e/i)) > 0) {
            if (e < 0) {
                e = i
            }
            e += +n.slice(i + 1);
            n = n.substring(0, i)
        } else if (e < 0) {
            e = n.length
        }
        for (i = 0; n.charAt(i) == "0"; i++) {}
        if (i == (nL = n.length)) {
            x.c = [x.e = 0]
        } else {
            for (; n.charAt(--nL) == "0";) {}
            x.e = e - i - 1;
            x.c = [];
            for (e = 0; i <= nL; x.c[e++] = +n.charAt(i++)) {}
        }
        return x
    }

    function rnd(x, dp, rm, more) {
        var u, xc = x.c,
            i = x.e + dp + 1;
        if (rm === 1) {
            more = xc[i] >= 5
        } else if (rm === 2) {
            more = xc[i] > 5 || xc[i] == 5 && (more || i < 0 || xc[i + 1] !== u || xc[i - 1] & 1)
        } else if (rm === 3) {
            more = more || xc[i] !== u || i < 0
        } else {
            more = false;
            if (rm !== 0) {
                throwErr("!Big.RM!")
            }
        }
        if (i < 1 || !xc[0]) {
            if (more) {
                x.e = -dp;
                x.c = [1]
            } else {
                x.c = [x.e = 0]
            }
        } else {
            xc.length = i--;
            if (more) {
                for (; ++xc[i] > 9;) {
                    xc[i] = 0;
                    if (!i--) {
                        ++x.e;
                        xc.unshift(1)
                    }
                }
            }
            for (i = xc.length; !xc[--i]; xc.pop()) {}
        }
        return x
    }

    function throwErr(message) {
        var err = new Error(message);
        err.name = "BigError";
        throw err
    }
    P.abs = function() {
        var x = new this.constructor(this);
        x.s = 1;
        return x
    };
    P.cmp = function(y) {
        var xNeg, x = this,
            xc = x.c,
            yc = (y = new x.constructor(y)).c,
            i = x.s,
            j = y.s,
            k = x.e,
            l = y.e;
        if (!xc[0] || !yc[0]) {
            return !xc[0] ? !yc[0] ? 0 : -j : i
        }
        if (i != j) {
            return i
        }
        xNeg = i < 0;
        if (k != l) {
            return k > l ^ xNeg ? 1 : -1
        }
        i = -1;
        j = (k = xc.length) < (l = yc.length) ? k : l;
        for (; ++i < j;) {
            if (xc[i] != yc[i]) {
                return xc[i] > yc[i] ^ xNeg ? 1 : -1
            }
        }
        return k == l ? 0 : k > l ^ xNeg ? 1 : -1
    };
    P.div = function(y) {
        var x = this,
            Big = x.constructor,
            dvd = x.c,
            dvs = (y = new Big(y)).c,
            s = x.s == y.s ? 1 : -1,
            dp = Big.DP;
        if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {
            throwErr("!Big.DP!")
        }
        if (!dvd[0] || !dvs[0]) {
            if (dvd[0] == dvs[0]) {
                throwErr(NaN)
            }
            if (!dvs[0]) {
                throwErr(s / 0)
            }
            return new Big(s * 0)
        }
        var dvsL, dvsT, next, cmp, remI, u, dvsZ = dvs.slice(),
            dvdI = dvsL = dvs.length,
            dvdL = dvd.length,
            rem = dvd.slice(0, dvsL),
            remL = rem.length,
            q = y,
            qc = q.c = [],
            qi = 0,
            digits = dp + (q.e = x.e - y.e) + 1;
        q.s = s;
        s = digits < 0 ? 0 : digits;
        dvsZ.unshift(0);
        for (; remL++ < dvsL; rem.push(0)) {}
        do {
            for (next = 0; next < 10; next++) {
                if (dvsL != (remL = rem.length)) {
                    cmp = dvsL > remL ? 1 : -1
                } else {
                    for (remI = -1, cmp = 0; ++remI < dvsL;) {
                        if (dvs[remI] != rem[remI]) {
                            cmp = dvs[remI] > rem[remI] ? 1 : -1;
                            break
                        }
                    }
                }
                if (cmp < 0) {
                    for (dvsT = remL == dvsL ? dvs : dvsZ; remL;) {
                        if (rem[--remL] < dvsT[remL]) {
                            remI = remL;
                            for (; remI && !rem[--remI]; rem[remI] = 9) {}--rem[remI];
                            rem[remL] += 10
                        }
                        rem[remL] -= dvsT[remL]
                    }
                    for (; !rem[0]; rem.shift()) {}
                } else {
                    break
                }
            }
            qc[qi++] = cmp ? next : ++next;
            if (rem[0] && cmp) {
                rem[remL] = dvd[dvdI] || 0
            } else {
                rem = [dvd[dvdI]]
            }
        } while ((dvdI++ < dvdL || rem[0] !== u) && s--);
        if (!qc[0] && qi != 1) {
            qc.shift();
            q.e--
        }
        if (qi > digits) {
            rnd(q, dp, Big.RM, rem[0] !== u)
        }
        return q
    };
    P.eq = function(y) {
        return !this.cmp(y)
    };
    P.gt = function(y) {
        return this.cmp(y) > 0
    };
    P.gte = function(y) {
        return this.cmp(y) > -1
    };
    P.lt = function(y) {
        return this.cmp(y) < 0
    };
    P.lte = function(y) {
        return this.cmp(y) < 1
    };
    P.sub = P.minus = function(y) {
        var i, j, t, xLTy, x = this,
            Big = x.constructor,
            a = x.s,
            b = (y = new Big(y)).s;
        if (a != b) {
            y.s = -b;
            return x.plus(y)
        }
        var xc = x.c.slice(),
            xe = x.e,
            yc = y.c,
            ye = y.e;
        if (!xc[0] || !yc[0]) {
            return yc[0] ? (y.s = -b, y) : new Big(xc[0] ? x : 0)
        }
        if (a = xe - ye) {
            if (xLTy = a < 0) {
                a = -a;
                t = xc
            } else {
                ye = xe;
                t = yc
            }
            t.reverse();
            for (b = a; b--; t.push(0)) {}
            t.reverse()
        } else {
            j = ((xLTy = xc.length < yc.length) ? xc : yc).length;
            for (a = b = 0; b < j; b++) {
                if (xc[b] != yc[b]) {
                    xLTy = xc[b] < yc[b];
                    break
                }
            }
        }
        if (xLTy) {
            t = xc;
            xc = yc;
            yc = t;
            y.s = -y.s
        }
        if ((b = (j = yc.length) - (i = xc.length)) > 0) {
            for (; b--; xc[i++] = 0) {}
        }
        for (b = i; j > a;) {
            if (xc[--j] < yc[j]) {
                for (i = j; i && !xc[--i]; xc[i] = 9) {}--xc[i];
                xc[j] += 10
            }
            xc[j] -= yc[j]
        }
        for (; xc[--b] === 0; xc.pop()) {}
        for (; xc[0] === 0;) {
            xc.shift();
            --ye
        }
        if (!xc[0]) {
            y.s = 1;
            xc = [ye = 0]
        }
        y.c = xc;
        y.e = ye;
        return y
    };
    P.mod = function(y) {
        var yGTx, x = this,
            Big = x.constructor,
            a = x.s,
            b = (y = new Big(y)).s;
        if (!y.c[0]) {
            throwErr(NaN)
        }
        x.s = y.s = 1;
        yGTx = y.cmp(x) == 1;
        x.s = a;
        y.s = b;
        if (yGTx) {
            return new Big(x)
        }
        a = Big.DP;
        b = Big.RM;
        Big.DP = Big.RM = 0;
        x = x.div(y);
        Big.DP = a;
        Big.RM = b;
        return this.minus(x.times(y))
    };
    P.add = P.plus = function(y) {
        var t, x = this,
            Big = x.constructor,
            a = x.s,
            b = (y = new Big(y)).s;
        if (a != b) {
            y.s = -b;
            return x.minus(y)
        }
        var xe = x.e,
            xc = x.c,
            ye = y.e,
            yc = y.c;
        if (!xc[0] || !yc[0]) {
            return yc[0] ? y : new Big(xc[0] ? x : a * 0)
        }
        xc = xc.slice();
        if (a = xe - ye) {
            if (a > 0) {
                ye = xe;
                t = yc
            } else {
                a = -a;
                t = xc
            }
            t.reverse();
            for (; a--; t.push(0)) {}
            t.reverse()
        }
        if (xc.length - yc.length < 0) {
            t = yc;
            yc = xc;
            xc = t
        }
        a = yc.length;
        for (b = 0; a;) {
            b = (xc[--a] = xc[a] + yc[a] + b) / 10 | 0;
            xc[a] %= 10
        }
        if (b) {
            xc.unshift(b);
            ++ye
        }
        for (a = xc.length; xc[--a] === 0; xc.pop()) {}
        y.c = xc;
        y.e = ye;
        return y
    };
    P.pow = function(n) {
        var x = this,
            one = new x.constructor(1),
            y = one,
            isNeg = n < 0;
        if (n !== ~~n || n < -MAX_POWER || n > MAX_POWER) {
            throwErr("!pow!")
        }
        n = isNeg ? -n : n;
        for (;;) {
            if (n & 1) {
                y = y.times(x)
            }
            n >>= 1;
            if (!n) {
                break
            }
            x = x.times(x)
        }
        return isNeg ? one.div(y) : y
    };
    P.round = function(dp, rm) {
        var x = this,
            Big = x.constructor;
        if (dp == null) {
            dp = 0
        } else if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {
            throwErr("!round!")
        }
        rnd(x = new Big(x), dp, rm == null ? Big.RM : rm);
        return x
    };
    P.sqrt = function() {
        var estimate, r, approx, x = this,
            Big = x.constructor,
            xc = x.c,
            i = x.s,
            e = x.e,
            half = new Big("0.5");
        if (!xc[0]) {
            return new Big(x)
        }
        if (i < 0) {
            throwErr(NaN)
        }
        i = Math.sqrt(x.toString());
        if (i === 0 || i === 1 / 0) {
            estimate = xc.join("");
            if (!(estimate.length + e & 1)) {
                estimate += "0"
            }
            r = new Big(Math.sqrt(estimate).toString());
            r.e = ((e + 1) / 2 | 0) - (e < 0 || e & 1)
        } else {
            r = new Big(i.toString())
        }
        i = r.e + (Big.DP += 4);
        do {
            approx = r;
            r = half.times(approx.plus(x.div(approx)))
        } while (approx.c.slice(0, i).join("") !== r.c.slice(0, i).join(""));
        rnd(r, Big.DP -= 4, Big.RM);
        return r
    };
    P.mul = P.times = function(y) {
        var c, x = this,
            Big = x.constructor,
            xc = x.c,
            yc = (y = new Big(y)).c,
            a = xc.length,
            b = yc.length,
            i = x.e,
            j = y.e;
        y.s = x.s == y.s ? 1 : -1;
        if (!xc[0] || !yc[0]) {
            return new Big(y.s * 0)
        }
        y.e = i + j;
        if (a < b) {
            c = xc;
            xc = yc;
            yc = c;
            j = a;
            a = b;
            b = j
        }
        for (c = new Array(j = a + b); j--; c[j] = 0) {}
        for (i = b; i--;) {
            b = 0;
            for (j = a + i; j > i;) {
                b = c[j] + yc[i] * xc[j - i - 1] + b;
                c[j--] = b % 10;
                b = b / 10 | 0
            }
            c[j] = (c[j] + b) % 10
        }
        if (b) {
            ++y.e
        }
        if (!c[0]) {
            c.shift()
        }
        for (i = c.length; !c[--i]; c.pop()) {}
        y.c = c;
        return y
    };
    P.toString = P.valueOf = P.toJSON = function() {
        var x = this,
            Big = x.constructor,
            e = x.e,
            str = x.c.join(""),
            strL = str.length;
        if (e <= Big.E_NEG || e >= Big.E_POS) {
            str = str.charAt(0) + (strL > 1 ? "." + str.slice(1) : "") + (e < 0 ? "e" : "e+") + e
        } else if (e < 0) {
            for (; ++e; str = "0" + str) {}
            str = "0." + str
        } else if (e > 0) {
            if (++e > strL) {
                for (e -= strL; e--; str += "0") {}
            } else if (e < strL) {
                str = str.slice(0, e) + "." + str.slice(e)
            }
        } else if (strL > 1) {
            str = str.charAt(0) + "." + str.slice(1)
        }
        return x.s < 0 && x.c[0] ? "-" + str : str
    };
    P.toExponential = function(dp) {
        if (dp == null) {
            dp = this.c.length - 1
        } else if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {
            throwErr("!toExp!")
        }
        return format(this, dp, 1)
    };
    P.toFixed = function(dp) {
        var str, x = this,
            Big = x.constructor,
            neg = Big.E_NEG,
            pos = Big.E_POS;
        Big.E_NEG = -(Big.E_POS = 1 / 0);
        if (dp == null) {
            str = x.toString()
        } else if (dp === ~~dp && dp >= 0 && dp <= MAX_DP) {
            str = format(x, x.e + dp);
            if (x.s < 0 && x.c[0] && str.indexOf("-") < 0) {
                str = "-" + str
            }
        }
        Big.E_NEG = neg;
        Big.E_POS = pos;
        if (!str) {
            throwErr("!toFix!")
        }
        return str
    };
    P.toPrecision = function(sd) {
        if (sd == null) {
            return this.toString()
        } else if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {
            throwErr("!toPre!")
        }
        return format(this, sd - 1, 2)
    };
    Big = bigFactory();
    if (typeof define === "function" && define.amd) {
        define(function() {
            return Big
        })
    } else if (typeof module !== "undefined" && module.exports) {
        module.exports = Big
    } else {
        global.Big = Big
    }
})(this);
! function(t) {
    if ("object" == typeof exports && "undefined" != typeof module) module.exports = t();
    else if ("function" == typeof define && define.amd) define([], t);
    else {
        var e;
        "undefined" != typeof window ? e = window : "undefined" != typeof global ? e = global : "undefined" != typeof self && (e = self), e.Promise = t()
    }
}(function() {
    var t, e, n;
    return function r(t, e, n) {
        function i(s, a) {
            if (!e[s]) {
                if (!t[s]) {
                    var c = "function" == typeof _dereq_ && _dereq_;
                    if (!a && c) return c(s, !0);
                    if (o) return o(s, !0);
                    var u = new Error("Cannot find module '" + s + "'");
                    throw u.code = "MODULE_NOT_FOUND", u
                }
                var l = e[s] = {
                    exports: {}
                };
                t[s][0].call(l.exports, function(e) {
                    var n = t[s][1][e];
                    return i(n ? n : e)
                }, l, l.exports, r, t, e, n)
            }
            return e[s].exports
        }
        for (var o = "function" == typeof _dereq_ && _dereq_, s = 0; s < n.length; s++) i(n[s]);
        return i
    }({
        1: [function(t, e, n) {
            "use strict";
            e.exports = function(t) {
                function e(t) {
                    var e = new n(t),
                        r = e.promise();
                    return e.setHowMany(1), e.setUnwrap(), e.init(), r
                }
                var n = t._SomePromiseArray;
                t.any = function(t) {
                    return e(t)
                }, t.prototype.any = function() {
                    return e(this)
                }
            }
        }, {}],
        2: [function(t, e, n) {
            "use strict";

            function r() {
                this._isTickUsed = !1, this._lateQueue = new l(16), this._normalQueue = new l(16), this._haveDrainedQueues = !1, this._trampolineEnabled = !0;
                var t = this;
                this.drainQueues = function() {
                    t._drainQueues()
                }, this._schedule = u
            }

            function i(t, e, n) {
                this._lateQueue.push(t, e, n), this._queueTick()
            }

            function o(t, e, n) {
                this._normalQueue.push(t, e, n), this._queueTick()
            }

            function s(t) {
                this._normalQueue._pushOne(t), this._queueTick()
            }
            var a;
            try {
                throw new Error
            } catch (c) {
                a = c
            }
            var u = t("./schedule"),
                l = t("./queue"),
                p = t("./util");
            r.prototype.enableTrampoline = function() {
                this._trampolineEnabled = !0
            }, r.prototype.disableTrampolineIfNecessary = function() {
                p.hasDevTools && (this._trampolineEnabled = !1)
            }, r.prototype.haveItemsQueued = function() {
                return this._isTickUsed || this._haveDrainedQueues
            }, r.prototype.fatalError = function(t, e) {
                e ? (process.stderr.write("Fatal " + (t instanceof Error ? t.stack : t)), process.exit(2)) : this.throwLater(t)
            }, r.prototype.throwLater = function(t, e) {
                if (1 === arguments.length && (e = t, t = function() {
                        throw e
                    }), "undefined" != typeof setTimeout) setTimeout(function() {
                    t(e)
                }, 0);
                else try {
                    this._schedule(function() {
                        t(e)
                    })
                } catch (n) {
                    throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")
                }
            }, p.hasDevTools ? (r.prototype.invokeLater = function(t, e, n) {
                this._trampolineEnabled ? i.call(this, t, e, n) : this._schedule(function() {
                    setTimeout(function() {
                        t.call(e, n)
                    }, 100)
                })
            }, r.prototype.invoke = function(t, e, n) {
                this._trampolineEnabled ? o.call(this, t, e, n) : this._schedule(function() {
                    t.call(e, n)
                })
            }, r.prototype.settlePromises = function(t) {
                this._trampolineEnabled ? s.call(this, t) : this._schedule(function() {
                    t._settlePromises()
                })
            }) : (r.prototype.invokeLater = i, r.prototype.invoke = o, r.prototype.settlePromises = s), r.prototype.invokeFirst = function(t, e, n) {
                this._normalQueue.unshift(t, e, n), this._queueTick()
            }, r.prototype._drainQueue = function(t) {
                for (; t.length() > 0;) {
                    var e = t.shift();
                    if ("function" == typeof e) {
                        var n = t.shift(),
                            r = t.shift();
                        e.call(n, r)
                    } else e._settlePromises()
                }
            }, r.prototype._drainQueues = function() {
                this._drainQueue(this._normalQueue), this._reset(), this._haveDrainedQueues = !0, this._drainQueue(this._lateQueue)
            }, r.prototype._queueTick = function() {
                this._isTickUsed || (this._isTickUsed = !0, this._schedule(this.drainQueues))
            }, r.prototype._reset = function() {
                this._isTickUsed = !1
            }, e.exports = r, e.exports.firstLineError = a
        }, {
            "./queue": 26,
            "./schedule": 29,
            "./util": 36
        }],
        3: [function(t, e, n) {
            "use strict";
            e.exports = function(t, e, n, r) {
                var i = !1,
                    o = function(t, e) {
                        this._reject(e)
                    },
                    s = function(t, e) {
                        e.promiseRejectionQueued = !0, e.bindingPromise._then(o, o, null, this, t)
                    },
                    a = function(t, e) {
                        0 === (50397184 & this._bitField) && this._resolveCallback(e.target)
                    },
                    c = function(t, e) {
                        e.promiseRejectionQueued || this._reject(t)
                    };
                t.prototype.bind = function(o) {
                    i || (i = !0, t.prototype._propagateFrom = r.propagateFromFunction(), t.prototype._boundValue = r.boundValueFunction());
                    var u = n(o),
                        l = new t(e);
                    l._propagateFrom(this, 1);
                    var p = this._target();
                    if (l._setBoundTo(u), u instanceof t) {
                        var h = {
                            promiseRejectionQueued: !1,
                            promise: l,
                            target: p,
                            bindingPromise: u
                        };
                        p._then(e, s, void 0, l, h), u._then(a, c, void 0, l, h), l._setOnCancel(u)
                    } else l._resolveCallback(p);
                    return l
                }, t.prototype._setBoundTo = function(t) {
                    void 0 !== t ? (this._bitField = 2097152 | this._bitField, this._boundTo = t) : this._bitField = -2097153 & this._bitField
                }, t.prototype._isBound = function() {
                    return 2097152 === (2097152 & this._bitField)
                }, t.bind = function(e, n) {
                    return t.resolve(n).bind(e)
                }
            }
        }, {}],
        4: [function(t, e, n) {
            "use strict";

            function r() {
                try {
                    Promise === o && (Promise = i)
                } catch (t) {}
                return o
            }
            var i;
            "undefined" != typeof Promise && (i = Promise);
            var o = t("./promise")();
            o.noConflict = r, e.exports = o
        }, {
            "./promise": 22
        }],
        5: [function(t, e, n) {
            "use strict";
            var r = Object.create;
            if (r) {
                var i = r(null),
                    o = r(null);
                i[" size"] = o[" size"] = 0
            }
            e.exports = function(e) {
                function n(t, n) {
                    var r;
                    if (null != t && (r = t[n]), "function" != typeof r) {
                        var i = "Object " + a.classString(t) + " has no method '" + a.toString(n) + "'";
                        throw new e.TypeError(i)
                    }
                    return r
                }

                function r(t) {
                    var e = this.pop(),
                        r = n(t, e);
                    return r.apply(t, this)
                }

                function i(t) {
                    return t[this]
                }

                function o(t) {
                    var e = +this;
                    return 0 > e && (e = Math.max(0, e + t.length)), t[e]
                }
                var s, a = t("./util"),
                    c = a.canEvaluate;
                a.isIdentifier;
                e.prototype.call = function(t) {
                    var e = [].slice.call(arguments, 1);
                    return e.push(t), this._then(r, void 0, void 0, e, void 0)
                }, e.prototype.get = function(t) {
                    var e, n = "number" == typeof t;
                    if (n) e = o;
                    else if (c) {
                        var r = s(t);
                        e = null !== r ? r : i
                    } else e = i;
                    return this._then(e, void 0, void 0, t, void 0)
                }
            }
        }, {
            "./util": 36
        }],
        6: [function(t, e, n) {
            "use strict";
            e.exports = function(e, n, r, i) {
                var o = t("./util"),
                    s = o.tryCatch,
                    a = o.errorObj,
                    c = e._async;
                e.prototype["break"] = e.prototype.cancel = function() {
                    if (!i.cancellation()) return this._warn("cancellation is disabled");
                    for (var t = this, e = t; t.isCancellable();) {
                        if (!t._cancelBy(e)) {
                            e._isFollowing() ? e._followee().cancel() : e._cancelBranched();
                            break
                        }
                        var n = t._cancellationParent;
                        if (null == n || !n.isCancellable()) {
                            t._isFollowing() ? t._followee().cancel() : t._cancelBranched();
                            break
                        }
                        t._isFollowing() && t._followee().cancel(), e = t, t = n
                    }
                }, e.prototype._branchHasCancelled = function() {
                    this._branchesRemainingToCancel--
                }, e.prototype._enoughBranchesHaveCancelled = function() {
                    return void 0 === this._branchesRemainingToCancel || this._branchesRemainingToCancel <= 0
                }, e.prototype._cancelBy = function(t) {
                    return t === this ? (this._branchesRemainingToCancel = 0, this._invokeOnCancel(), !0) : (this._branchHasCancelled(), this._enoughBranchesHaveCancelled() ? (this._invokeOnCancel(), !0) : !1)
                }, e.prototype._cancelBranched = function() {
                    this._enoughBranchesHaveCancelled() && this._cancel()
                }, e.prototype._cancel = function() {
                    this.isCancellable() && (this._setCancelled(), c.invoke(this._cancelPromises, this, void 0))
                }, e.prototype._cancelPromises = function() {
                    this._length() > 0 && this._settlePromises()
                }, e.prototype._unsetOnCancel = function() {
                    this._onCancelField = void 0
                }, e.prototype.isCancellable = function() {
                    return this.isPending() && !this.isCancelled()
                }, e.prototype._doInvokeOnCancel = function(t, e) {
                    if (o.isArray(t))
                        for (var n = 0; n < t.length; ++n) this._doInvokeOnCancel(t[n], e);
                    else if (void 0 !== t)
                        if ("function" == typeof t) {
                            if (!e) {
                                var r = s(t).call(this._boundValue());
                                r === a && (this._attachExtraTrace(r.e), c.throwLater(r.e))
                            }
                        } else t._resultCancelled(this)
                }, e.prototype._invokeOnCancel = function() {
                    var t = this._onCancel();
                    this._unsetOnCancel(), c.invoke(this._doInvokeOnCancel, this, t)
                }, e.prototype._invokeInternalOnCancel = function() {
                    this.isCancellable() && (this._doInvokeOnCancel(this._onCancel(), !0), this._unsetOnCancel())
                }, e.prototype._resultCancelled = function() {
                    this.cancel()
                }
            }
        }, {
            "./util": 36
        }],
        7: [function(t, e, n) {
            "use strict";
            e.exports = function(e) {
                function n(t, n, a) {
                    return function(c) {
                        var u = a._boundValue();
                        t: for (var l = 0; l < t.length; ++l) {
                            var p = t[l];
                            if (p === Error || null != p && p.prototype instanceof Error) {
                                if (c instanceof p) return o(n).call(u, c)
                            } else if ("function" == typeof p) {
                                var h = o(p).call(u, c);
                                if (h === s) return h;
                                if (h) return o(n).call(u, c)
                            } else if (r.isObject(c)) {
                                for (var f = i(p), _ = 0; _ < f.length; ++_) {
                                    var d = f[_];
                                    if (p[d] != c[d]) continue t
                                }
                                return o(n).call(u, c)
                            }
                        }
                        return e
                    }
                }
                var r = t("./util"),
                    i = t("./es5").keys,
                    o = r.tryCatch,
                    s = r.errorObj;
                return n
            }
        }, {
            "./es5": 13,
            "./util": 36
        }],
        8: [function(t, e, n) {
            "use strict";
            e.exports = function(t) {
                function e() {
                    this._trace = new e.CapturedTrace(r())
                }

                function n() {
                    return i ? new e : void 0
                }

                function r() {
                    var t = o.length - 1;
                    return t >= 0 ? o[t] : void 0
                }
                var i = !1,
                    o = [];
                return t.prototype._promiseCreated = function() {}, t.prototype._pushContext = function() {}, t.prototype._popContext = function() {
                    return null
                }, t._peekContext = t.prototype._peekContext = function() {}, e.prototype._pushContext = function() {
                    void 0 !== this._trace && (this._trace._promiseCreated = null, o.push(this._trace))
                }, e.prototype._popContext = function() {
                    if (void 0 !== this._trace) {
                        var t = o.pop(),
                            e = t._promiseCreated;
                        return t._promiseCreated = null, e
                    }
                    return null
                }, e.CapturedTrace = null, e.create = n, e.deactivateLongStackTraces = function() {}, e.activateLongStackTraces = function() {
                    var n = t.prototype._pushContext,
                        o = t.prototype._popContext,
                        s = t._peekContext,
                        a = t.prototype._peekContext,
                        c = t.prototype._promiseCreated;
                    e.deactivateLongStackTraces = function() {
                        t.prototype._pushContext = n, t.prototype._popContext = o, t._peekContext = s, t.prototype._peekContext = a, t.prototype._promiseCreated = c, i = !1
                    }, i = !0, t.prototype._pushContext = e.prototype._pushContext, t.prototype._popContext = e.prototype._popContext, t._peekContext = t.prototype._peekContext = r, t.prototype._promiseCreated = function() {
                        var t = this._peekContext();
                        t && null == t._promiseCreated && (t._promiseCreated = this)
                    }
                }, e
            }
        }, {}],
        9: [function(t, e, n) {
            "use strict";
            e.exports = function(e, n) {
                function r(t, e, n) {
                    var r = this;
                    try {
                        t(e, n, function(t) {
                            if ("function" != typeof t) throw new TypeError("onCancel must be a function, got: " + I.toString(t));
                            r._attachCancellationCallback(t)
                        })
                    } catch (i) {
                        return i
                    }
                }

                function i(t) {
                    if (!this.isCancellable()) return this;
                    var e = this._onCancel();
                    void 0 !== e ? I.isArray(e) ? e.push(t) : this._setOnCancel([e, t]) : this._setOnCancel(t)
                }

                function o() {
                    return this._onCancelField
                }

                function s(t) {
                    this._onCancelField = t
                }

                function a() {
                    this._cancellationParent = void 0, this._onCancelField = void 0
                }

                function c(t, e) {
                    if (0 !== (1 & e)) {
                        this._cancellationParent = t;
                        var n = t._branchesRemainingToCancel;
                        void 0 === n && (n = 0), t._branchesRemainingToCancel = n + 1
                    }
                    0 !== (2 & e) && t._isBound() && this._setBoundTo(t._boundTo)
                }

                function u(t, e) {
                    0 !== (2 & e) && t._isBound() && this._setBoundTo(t._boundTo)
                }

                function l() {
                    var t = this._boundTo;
                    return void 0 !== t && t instanceof e ? t.isFulfilled() ? t.value() : void 0 : t
                }

                function p() {
                    this._trace = new R(this._peekContext())
                }

                function h(t, e) {
                    if (L(t)) {
                        var n = this._trace;
                        if (void 0 !== n && e && (n = n._parent), void 0 !== n) n.attachExtraTrace(t);
                        else if (!t.__stackCleaned__) {
                            var r = w(t);
                            I.notEnumerableProp(t, "stack", r.message + "\n" + r.stack.join("\n")), I.notEnumerableProp(t, "__stackCleaned__", !0)
                        }
                    }
                }

                function f(t, e, n, r, i) {
                    if (void 0 === t && null !== e && $) {
                        if (void 0 !== i && i._returnedNonUndefined()) return;
                        n && (n += " ");
                        var o = "a promise was created in a " + n + "handler but was not returned from it";
                        r._warn(o, !0, e)
                    }
                }

                function _(t, e) {
                    var n = t + " is deprecated and will be removed in a future version.";
                    return e && (n += " Use " + e + " instead."), d(n)
                }

                function d(t, n, r) {
                    if (Z.warnings) {
                        var i, o = new V(t);
                        if (n) r._attachExtraTrace(o);
                        else if (Z.longStackTraces && (i = e._peekContext())) i.attachExtraTrace(o);
                        else {
                            var s = w(o);
                            o.stack = s.message + "\n" + s.stack.join("\n")
                        }
                        C(o, "", !0)
                    }
                }

                function v(t, e) {
                    for (var n = 0; n < e.length - 1; ++n) e[n].push("From previous event:"), e[n] = e[n].join("\n");
                    return n < e.length && (e[n] = e[n].join("\n")), t + "\n" + e.join("\n")
                }

                function y(t) {
                    for (var e = 0; e < t.length; ++e)(0 === t[e].length || e + 1 < t.length && t[e][0] === t[e + 1][0]) && (t.splice(e, 1), e--)
                }

                function g(t) {
                    for (var e = t[0], n = 1; n < t.length; ++n) {
                        for (var r = t[n], i = e.length - 1, o = e[i], s = -1, a = r.length - 1; a >= 0; --a)
                            if (r[a] === o) {
                                s = a;
                                break
                            }
                        for (var a = s; a >= 0; --a) {
                            var c = r[a];
                            if (e[i] !== c) break;
                            e.pop(), i--
                        }
                        e = r
                    }
                }

                function m(t) {
                    for (var e = [], n = 0; n < t.length; ++n) {
                        var r = t[n],
                            i = "    (No stack trace)" === r || N.test(r),
                            o = i && X(r);
                        i && !o && (B && " " !== r.charAt(0) && (r = "    " + r), e.push(r))
                    }
                    return e
                }

                function b(t) {
                    for (var e = t.stack.replace(/\s+$/g, "").split("\n"), n = 0; n < e.length; ++n) {
                        var r = e[n];
                        if ("    (No stack trace)" === r || N.test(r)) break
                    }
                    return n > 0 && (e = e.slice(n)), e
                }

                function w(t) {
                    var e = t.stack,
                        n = t.toString();
                    return e = "string" == typeof e && e.length > 0 ? b(t) : ["    (No stack trace)"], {
                        message: n,
                        stack: m(e)
                    }
                }

                function C(t, e, n) {
                    if ("undefined" != typeof console) {
                        var r;
                        if (I.isObject(t)) {
                            var i = t.stack;
                            r = e + U(i, t)
                        } else r = e + String(t);
                        "function" == typeof S ? S(r, n) : ("function" == typeof console.log || "object" == typeof console.log) && console.log(r)
                    }
                }

                function j(t, e, n, r) {
                    var i = !1;
                    try {
                        "function" == typeof e && (i = !0, "rejectionHandled" === t ? e(r) : e(n, r))
                    } catch (o) {
                        D.throwLater(o)
                    }
                    var s = !1;
                    try {
                        s = Y(t, n, r)
                    } catch (o) {
                        s = !0, D.throwLater(o)
                    }
                    var a = !1;
                    if (K) try {
                        a = K(t.toLowerCase(), {
                            reason: n,
                            promise: r
                        })
                    } catch (o) {
                        a = !0, D.throwLater(o)
                    }
                    s || i || a || "unhandledRejection" !== t || C(n, "Unhandled rejection ")
                }

                function k(t) {
                    var e;
                    if ("function" == typeof t) e = "[function " + (t.name || "anonymous") + "]";
                    else {
                        e = t && "function" == typeof t.toString ? t.toString() : I.toString(t);
                        var n = /\[object [a-zA-Z0-9$_]+\]/;
                        if (n.test(e)) try {
                            var r = JSON.stringify(t);
                            e = r
                        } catch (i) {}
                        0 === e.length && (e = "(empty array)")
                    }
                    return "(<" + F(e) + ">, no stack trace)"
                }

                function F(t) {
                    var e = 41;
                    return t.length < e ? t : t.substr(0, e - 3) + "..."
                }

                function E() {
                    return "function" == typeof J
                }

                function x(t) {
                    var e = t.match(W);
                    return e ? {
                        fileName: e[1],
                        line: parseInt(e[2], 10)
                    } : void 0
                }

                function T(t, e) {
                    if (E()) {
                        for (var n, r, i = t.stack.split("\n"), o = e.stack.split("\n"), s = -1, a = -1, c = 0; c < i.length; ++c) {
                            var u = x(i[c]);
                            if (u) {
                                n = u.fileName, s = u.line;
                                break
                            }
                        }
                        for (var c = 0; c < o.length; ++c) {
                            var u = x(o[c]);
                            if (u) {
                                r = u.fileName, a = u.line;
                                break
                            }
                        }
                        0 > s || 0 > a || !n || !r || n !== r || s >= a || (X = function(t) {
                            if (H.test(t)) return !0;
                            var e = x(t);
                            return e && e.fileName === n && s <= e.line && e.line <= a ? !0 : !1
                        })
                    }
                }

                function R(t) {
                    this._parent = t, this._promisesCreated = 0;
                    var e = this._length = 1 + (void 0 === t ? 0 : t._length);
                    J(this, R), e > 32 && this.uncycle()
                }
                var P, O, S, A = e._getDomain,
                    D = e._async,
                    V = t("./errors").Warning,
                    I = t("./util"),
                    L = I.canAttachTrace,
                    H = /[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,
                    N = null,
                    U = null,
                    B = !1,
                    M = !(0 == I.env("BLUEBIRD_DEBUG") || !I.env("BLUEBIRD_DEBUG") && "development" !== I.env("NODE_ENV")),
                    q = !(0 == I.env("BLUEBIRD_WARNINGS") || !M && !I.env("BLUEBIRD_WARNINGS")),
                    Q = !(0 == I.env("BLUEBIRD_LONG_STACK_TRACES") || !M && !I.env("BLUEBIRD_LONG_STACK_TRACES")),
                    $ = 0 != I.env("BLUEBIRD_W_FORGOTTEN_RETURN") && (q || !!I.env("BLUEBIRD_W_FORGOTTEN_RETURN"));
                e.prototype.suppressUnhandledRejections = function() {
                    var t = this._target();
                    t._bitField = -1048577 & t._bitField | 524288
                }, e.prototype._ensurePossibleRejectionHandled = function() {
                    0 === (524288 & this._bitField) && (this._setRejectionIsUnhandled(), D.invokeLater(this._notifyUnhandledRejection, this, void 0))
                }, e.prototype._notifyUnhandledRejectionIsHandled = function() {
                    j("rejectionHandled", P, void 0, this)
                }, e.prototype._setReturnedNonUndefined = function() {
                    this._bitField = 268435456 | this._bitField
                }, e.prototype._returnedNonUndefined = function() {
                    return 0 !== (268435456 & this._bitField)
                }, e.prototype._notifyUnhandledRejection = function() {
                    if (this._isRejectionUnhandled()) {
                        var t = this._settledValue();
                        this._setUnhandledRejectionIsNotified(), j("unhandledRejection", O, t, this)
                    }
                }, e.prototype._setUnhandledRejectionIsNotified = function() {
                    this._bitField = 262144 | this._bitField
                }, e.prototype._unsetUnhandledRejectionIsNotified = function() {
                    this._bitField = -262145 & this._bitField
                }, e.prototype._isUnhandledRejectionNotified = function() {
                    return (262144 & this._bitField) > 0
                }, e.prototype._setRejectionIsUnhandled = function() {
                    this._bitField = 1048576 | this._bitField
                }, e.prototype._unsetRejectionIsUnhandled = function() {
                    this._bitField = -1048577 & this._bitField, this._isUnhandledRejectionNotified() && (this._unsetUnhandledRejectionIsNotified(), this._notifyUnhandledRejectionIsHandled())
                }, e.prototype._isRejectionUnhandled = function() {
                    return (1048576 & this._bitField) > 0
                }, e.prototype._warn = function(t, e, n) {
                    return d(t, e, n || this)
                }, e.onPossiblyUnhandledRejection = function(t) {
                    var e = A();
                    O = "function" == typeof t ? null === e ? t : e.bind(t) : void 0
                }, e.onUnhandledRejectionHandled = function(t) {
                    var e = A();
                    P = "function" == typeof t ? null === e ? t : e.bind(t) : void 0
                };
                var z = function() {};
                e.longStackTraces = function() {
                    if (D.haveItemsQueued() && !Z.longStackTraces) throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");
                    if (!Z.longStackTraces && E()) {
                        var t = e.prototype._captureStackTrace,
                            r = e.prototype._attachExtraTrace;
                        Z.longStackTraces = !0, z = function() {
                            if (D.haveItemsQueued() && !Z.longStackTraces) throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");
                            e.prototype._captureStackTrace = t, e.prototype._attachExtraTrace = r, n.deactivateLongStackTraces(), D.enableTrampoline(), Z.longStackTraces = !1
                        }, e.prototype._captureStackTrace = p, e.prototype._attachExtraTrace = h, n.activateLongStackTraces(), D.disableTrampolineIfNecessary()
                    }
                }, e.hasLongStackTraces = function() {
                    return Z.longStackTraces && E()
                }, e.config = function(t) {
                    if (t = Object(t), "longStackTraces" in t && (t.longStackTraces ? e.longStackTraces() : !t.longStackTraces && e.hasLongStackTraces() && z()), "warnings" in t) {
                        var n = t.warnings;
                        Z.warnings = !!n, $ = Z.warnings, I.isObject(n) && "wForgottenReturn" in n && ($ = !!n.wForgottenReturn)
                    }
                    if ("cancellation" in t && t.cancellation && !Z.cancellation) {
                        if (D.haveItemsQueued()) throw new Error("cannot enable cancellation after promises are in use");
                        e.prototype._clearCancellationData = a, e.prototype._propagateFrom = c, e.prototype._onCancel = o, e.prototype._setOnCancel = s, e.prototype._attachCancellationCallback = i, e.prototype._execute = r, G = c, Z.cancellation = !0
                    }
                }, e.prototype._execute = function(t, e, n) {
                    try {
                        t(e, n)
                    } catch (r) {
                        return r
                    }
                }, e.prototype._onCancel = function() {}, e.prototype._setOnCancel = function(t) {}, e.prototype._attachCancellationCallback = function(t) {}, e.prototype._captureStackTrace = function() {}, e.prototype._attachExtraTrace = function() {}, e.prototype._clearCancellationData = function() {}, e.prototype._propagateFrom = function(t, e) {};
                var G = u,
                    X = function() {
                        return !1
                    },
                    W = /[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;
                I.inherits(R, Error), n.CapturedTrace = R, R.prototype.uncycle = function() {
                    var t = this._length;
                    if (!(2 > t)) {
                        for (var e = [], n = {}, r = 0, i = this; void 0 !== i; ++r) e.push(i), i = i._parent;
                        t = this._length = r;
                        for (var r = t - 1; r >= 0; --r) {
                            var o = e[r].stack;
                            void 0 === n[o] && (n[o] = r)
                        }
                        for (var r = 0; t > r; ++r) {
                            var s = e[r].stack,
                                a = n[s];
                            if (void 0 !== a && a !== r) {
                                a > 0 && (e[a - 1]._parent = void 0, e[a - 1]._length = 1), e[r]._parent = void 0, e[r]._length = 1;
                                var c = r > 0 ? e[r - 1] : this;
                                t - 1 > a ? (c._parent = e[a + 1], c._parent.uncycle(), c._length = c._parent._length + 1) : (c._parent = void 0, c._length = 1);
                                for (var u = c._length + 1, l = r - 2; l >= 0; --l) e[l]._length = u, u++;
                                return
                            }
                        }
                    }
                }, R.prototype.attachExtraTrace = function(t) {
                    if (!t.__stackCleaned__) {
                        this.uncycle();
                        for (var e = w(t), n = e.message, r = [e.stack], i = this; void 0 !== i;) r.push(m(i.stack.split("\n"))), i = i._parent;
                        g(r), y(r), I.notEnumerableProp(t, "stack", v(n, r)), I.notEnumerableProp(t, "__stackCleaned__", !0)
                    }
                };
                var K, J = function() {
                        var t = /^\s*at\s*/,
                            e = function(t, e) {
                                return "string" == typeof t ? t : void 0 !== e.name && void 0 !== e.message ? e.toString() : k(e)
                            };
                        if ("number" == typeof Error.stackTraceLimit && "function" == typeof Error.captureStackTrace) {
                            Error.stackTraceLimit += 6, N = t, U = e;
                            var n = Error.captureStackTrace;
                            return X = function(t) {
                                    return H.test(t)
                                },
                                function(t, e) {
                                    Error.stackTraceLimit += 6, n(t, e), Error.stackTraceLimit -= 6
                                }
                        }
                        var r = new Error;
                        if ("string" == typeof r.stack && r.stack.split("\n")[0].indexOf("stackDetection@") >= 0) return N = /@/, U = e, B = !0,
                            function(t) {
                                t.stack = (new Error).stack
                            };
                        var i;
                        try {
                            throw new Error
                        } catch (o) {
                            i = "stack" in o
                        }
                        return "stack" in r || !i || "number" != typeof Error.stackTraceLimit ? (U = function(t, e) {
                            return "string" == typeof t ? t : "object" != typeof e && "function" != typeof e || void 0 === e.name || void 0 === e.message ? k(e) : e.toString()
                        }, null) : (N = t, U = e, function(t) {
                            Error.stackTraceLimit += 6;
                            try {
                                throw new Error
                            } catch (e) {
                                t.stack = e.stack
                            }
                            Error.stackTraceLimit -= 6
                        })
                    }([]),
                    Y = function() {
                        if (I.isNode) return function(t, e, n) {
                            return "rejectionHandled" === t ? process.emit(t, n) : process.emit(t, e, n)
                        };
                        var t = "undefined" != typeof self ? self : "undefined" != typeof window ? window : "undefined" != typeof global ? global : void 0 !== this ? this : null;
                        if (!t) return function() {
                            return !1
                        };
                        try {
                            var e = document.createEvent("CustomEvent");
                            e.initCustomEvent("testingtheevent", !1, !0, {}), t.dispatchEvent(e), K = function(e, n) {
                                var r = document.createEvent("CustomEvent");
                                return r.initCustomEvent(e, !1, !0, n), !t.dispatchEvent(r)
                            }
                        } catch (n) {}
                        var r = {};
                        return r.unhandledRejection = "onunhandledRejection".toLowerCase(), r.rejectionHandled = "onrejectionHandled".toLowerCase(),
                            function(e, n, i) {
                                var o = r[e],
                                    s = t[o];
                                return s ? ("rejectionHandled" === e ? s.call(t, i) : s.call(t, n, i), !0) : !1
                            }
                    }();
                "undefined" != typeof console && "undefined" != typeof console.warn && (S = function(t) {
                    console.warn(t)
                }, I.isNode && process.stderr.isTTY ? S = function(t, e) {
                    var n = e ? "[33m" : "[31m";
                    console.warn(n + t + "[0m\n")
                } : I.isNode || "string" != typeof(new Error).stack || (S = function(t, e) {
                    console.warn("%c" + t, e ? "color: darkorange" : "color: red")
                }));
                var Z = {
                    warnings: q,
                    longStackTraces: !1,
                    cancellation: !1
                };
                return Q && e.longStackTraces(), {
                    longStackTraces: function() {
                        return Z.longStackTraces
                    },
                    warnings: function() {
                        return Z.warnings
                    },
                    cancellation: function() {
                        return Z.cancellation
                    },
                    propagateFromFunction: function() {
                        return G
                    },
                    boundValueFunction: function() {
                        return l
                    },
                    checkForgottenReturns: f,
                    setBounds: T,
                    warn: d,
                    deprecated: _,
                    CapturedTrace: R
                }
            }
        }, {
            "./errors": 12,
            "./util": 36
        }],
        10: [function(t, e, n) {
            "use strict";
            e.exports = function(t) {
                function e() {
                    return this.value
                }

                function n() {
                    throw this.reason
                }
                t.prototype["return"] = t.prototype.thenReturn = function(n) {
                    return n instanceof t && n.suppressUnhandledRejections(), this._then(e, void 0, void 0, {
                        value: n
                    }, void 0)
                }, t.prototype["throw"] = t.prototype.thenThrow = function(t) {
                    return this._then(n, void 0, void 0, {
                        reason: t
                    }, void 0)
                }, t.prototype.catchThrow = function(t) {
                    if (arguments.length <= 1) return this._then(void 0, n, void 0, {
                        reason: t
                    }, void 0);
                    var e = arguments[1],
                        r = function() {
                            throw e
                        };
                    return this.caught(t, r)
                }, t.prototype.catchReturn = function(n) {
                    if (arguments.length <= 1) return n instanceof t && n.suppressUnhandledRejections(), this._then(void 0, e, void 0, {
                        value: n
                    }, void 0);
                    var r = arguments[1];
                    r instanceof t && r.suppressUnhandledRejections();
                    var i = function() {
                        return r
                    };
                    return this.caught(n, i)
                }
            }
        }, {}],
        11: [function(t, e, n) {
            "use strict";
            e.exports = function(t, e) {
                function n() {
                    return o(this)
                }

                function r(t, n) {
                    return i(t, n, e, e)
                }
                var i = t.reduce,
                    o = t.all;
                t.prototype.each = function(t) {
                    return this.mapSeries(t)._then(n, void 0, void 0, this, void 0)
                }, t.prototype.mapSeries = function(t) {
                    return i(this, t, e, e)
                }, t.each = function(t, e) {
                    return r(t, e)._then(n, void 0, void 0, t, void 0)
                }, t.mapSeries = r
            }
        }, {}],
        12: [function(t, e, n) {
            "use strict";

            function r(t, e) {
                function n(r) {
                    return this instanceof n ? (p(this, "message", "string" == typeof r ? r : e), p(this, "name", t), void(Error.captureStackTrace ? Error.captureStackTrace(this, this.constructor) : Error.call(this))) : new n(r)
                }
                return l(n, Error), n
            }

            function i(t) {
                return this instanceof i ? (p(this, "name", "OperationalError"), p(this, "message", t), this.cause = t, this.isOperational = !0, void(t instanceof Error ? (p(this, "message", t.message), p(this, "stack", t.stack)) : Error.captureStackTrace && Error.captureStackTrace(this, this.constructor))) : new i(t)
            }
            var o, s, a = t("./es5"),
                c = a.freeze,
                u = t("./util"),
                l = u.inherits,
                p = u.notEnumerableProp,
                h = r("Warning", "warning"),
                f = r("CancellationError", "cancellation error"),
                _ = r("TimeoutError", "timeout error"),
                d = r("AggregateError", "aggregate error");
            try {
                o = TypeError, s = RangeError
            } catch (v) {
                o = r("TypeError", "type error"), s = r("RangeError", "range error")
            }
            for (var y = "join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "), g = 0; g < y.length; ++g) "function" == typeof Array.prototype[y[g]] && (d.prototype[y[g]] = Array.prototype[y[g]]);
            a.defineProperty(d.prototype, "length", {
                value: 0,
                configurable: !1,
                writable: !0,
                enumerable: !0
            }), d.prototype.isOperational = !0;
            var m = 0;
            d.prototype.toString = function() {
                var t = Array(4 * m + 1).join(" "),
                    e = "\n" + t + "AggregateError of:\n";
                m++, t = Array(4 * m + 1).join(" ");
                for (var n = 0; n < this.length; ++n) {
                    for (var r = this[n] === this ? "[Circular AggregateError]" : this[n] + "", i = r.split("\n"), o = 0; o < i.length; ++o) i[o] = t + i[o];
                    r = i.join("\n"), e += r + "\n"
                }
                return m--, e
            }, l(i, Error);
            var b = Error.__BluebirdErrorTypes__;
            b || (b = c({
                CancellationError: f,
                TimeoutError: _,
                OperationalError: i,
                RejectionError: i,
                AggregateError: d
            }), p(Error, "__BluebirdErrorTypes__", b)), e.exports = {
                Error: Error,
                TypeError: o,
                RangeError: s,
                CancellationError: b.CancellationError,
                OperationalError: b.OperationalError,
                TimeoutError: b.TimeoutError,
                AggregateError: b.AggregateError,
                Warning: h
            }
        }, {
            "./es5": 13,
            "./util": 36
        }],
        13: [function(t, e, n) {
            var r = function() {
                "use strict";
                return void 0 === this
            }();
            if (r) e.exports = {
                freeze: Object.freeze,
                defineProperty: Object.defineProperty,
                getDescriptor: Object.getOwnPropertyDescriptor,
                keys: Object.keys,
                names: Object.getOwnPropertyNames,
                getPrototypeOf: Object.getPrototypeOf,
                isArray: Array.isArray,
                isES5: r,
                propertyIsWritable: function(t, e) {
                    var n = Object.getOwnPropertyDescriptor(t, e);
                    return !(n && !n.writable && !n.set)
                }
            };
            else {
                var i = {}.hasOwnProperty,
                    o = {}.toString,
                    s = {}.constructor.prototype,
                    a = function(t) {
                        var e = [];
                        for (var n in t) i.call(t, n) && e.push(n);
                        return e
                    },
                    c = function(t, e) {
                        return {
                            value: t[e]
                        }
                    },
                    u = function(t, e, n) {
                        return t[e] = n.value, t
                    },
                    l = function(t) {
                        return t
                    },
                    p = function(t) {
                        try {
                            return Object(t).constructor.prototype
                        } catch (e) {
                            return s
                        }
                    },
                    h = function(t) {
                        try {
                            return "[object Array]" === o.call(t)
                        } catch (e) {
                            return !1
                        }
                    };
                e.exports = {
                    isArray: h,
                    keys: a,
                    names: a,
                    defineProperty: u,
                    getDescriptor: c,
                    freeze: l,
                    getPrototypeOf: p,
                    isES5: r,
                    propertyIsWritable: function() {
                        return !0
                    }
                }
            }
        }, {}],
        14: [function(t, e, n) {
            "use strict";
            e.exports = function(t, e) {
                var n = t.map;
                t.prototype.filter = function(t, r) {
                    return n(this, t, r, e)
                }, t.filter = function(t, r, i) {
                    return n(t, r, i, e)
                }
            }
        }, {}],
        15: [function(t, e, n) {
            "use strict";
            e.exports = function(e, n) {
                function r(t) {
                    this.finallyHandler = t
                }

                function i(t, e) {
                    return null != t.cancelPromise ? (arguments.length > 1 ? t.cancelPromise._reject(e) : t.cancelPromise._cancel(), t.cancelPromise = null, !0) : !1
                }

                function o() {
                    return a.call(this, this.promise._target()._settledValue())
                }

                function s(t) {
                    return i(this, t) ? void 0 : (l.e = t, l)
                }

                function a(t) {
                    var a = this.promise,
                        c = this.handler;
                    if (!this.called) {
                        this.called = !0;
                        var p = 0 === this.type ? c.call(a._boundValue()) : c.call(a._boundValue(), t);
                        if (void 0 !== p) {
                            a._setReturnedNonUndefined();
                            var h = n(p, a);
                            if (h instanceof e) {
                                if (null != this.cancelPromise) {
                                    if (h.isCancelled()) {
                                        var f = new u("late cancellation observer");
                                        return a._attachExtraTrace(f), l.e = f, l
                                    }
                                    h.isPending() && h._attachCancellationCallback(new r(this))
                                }
                                return h._then(o, s, void 0, this, void 0)
                            }
                        }
                    }
                    return a.isRejected() ? (i(this), l.e = t, l) : (i(this), t)
                }
                var c = t("./util"),
                    u = e.CancellationError,
                    l = c.errorObj;
                return r.prototype._resultCancelled = function() {
                    i(this.finallyHandler)
                }, e.prototype._passThrough = function(t, e, n, r) {
                    return "function" != typeof t ? this.then() : this._then(n, r, void 0, {
                        promise: this,
                        handler: t,
                        called: !1,
                        cancelPromise: null,
                        type: e
                    }, void 0)
                }, e.prototype.lastly = e.prototype["finally"] = function(t) {
                    return this._passThrough(t, 0, a, a)
                }, e.prototype.tap = function(t) {
                    return this._passThrough(t, 1, a)
                }, a
            }
        }, {
            "./util": 36
        }],
        16: [function(t, e, n) {
            "use strict";
            e.exports = function(e, n, r, i, o, s) {
                function a(t, n, r) {
                    for (var o = 0; o < n.length; ++o) {
                        r._pushContext();
                        var s = f(n[o])(t);
                        if (r._popContext(), s === h) {
                            r._pushContext();
                            var a = e.reject(h.e);
                            return r._popContext(), a
                        }
                        var c = i(s, r);
                        if (c instanceof e) return c
                    }
                    return null
                }

                function c(t, n, i, o) {
                    var s = this._promise = new e(r);
                    s._captureStackTrace(), s._setOnCancel(this), this._stack = o, this._generatorFunction = t, this._receiver = n, this._generator = void 0, this._yieldHandlers = "function" == typeof i ? [i].concat(_) : _, this._yieldedPromise = null
                }
                var u = t("./errors"),
                    l = u.TypeError,
                    p = t("./util"),
                    h = p.errorObj,
                    f = p.tryCatch,
                    _ = [];
                p.inherits(c, o), c.prototype._isResolved = function() {
                    return null === this._promise
                }, c.prototype._cleanup = function() {
                    this._promise = this._generator = null
                }, c.prototype._promiseCancelled = function() {
                    if (!this._isResolved()) {
                        var t, n = "undefined" != typeof this._generator["return"];
                        if (n) this._promise._pushContext(), t = f(this._generator["return"]).call(this._generator, void 0), this._promise._popContext();
                        else {
                            var r = new e.CancellationError("generator .return() sentinel");
                            e.coroutine.returnSentinel = r, this._promise._attachExtraTrace(r), this._promise._pushContext(), t = f(this._generator["throw"]).call(this._generator, r), this._promise._popContext(), t === h && t.e === r && (t = null)
                        }
                        var i = this._promise;
                        this._cleanup(), t === h ? i._rejectCallback(t.e, !1) : i.cancel()
                    }
                }, c.prototype._promiseFulfilled = function(t) {
                    this._yieldedPromise = null, this._promise._pushContext();
                    var e = f(this._generator.next).call(this._generator, t);
                    this._promise._popContext(), this._continue(e)
                }, c.prototype._promiseRejected = function(t) {
                    this._yieldedPromise = null, this._promise._attachExtraTrace(t), this._promise._pushContext();
                    var e = f(this._generator["throw"]).call(this._generator, t);
                    this._promise._popContext(), this._continue(e)
                }, c.prototype._resultCancelled = function() {
                    if (this._yieldedPromise instanceof e) {
                        var t = this._yieldedPromise;
                        this._yieldedPromise = null, t.cancel()
                    }
                }, c.prototype.promise = function() {
                    return this._promise
                }, c.prototype._run = function() {
                    this._generator = this._generatorFunction.call(this._receiver), this._receiver = this._generatorFunction = void 0, this._promiseFulfilled(void 0)
                }, c.prototype._continue = function(t) {
                    var n = this._promise;
                    if (t === h) return this._cleanup(), n._rejectCallback(t.e, !1);
                    var r = t.value;
                    if (t.done === !0) return this._cleanup(), n._resolveCallback(r);
                    var o = i(r, this._promise);
                    if (!(o instanceof e) && (o = a(o, this._yieldHandlers, this._promise), null === o)) return void this._promiseRejected(new l("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s", r) + "From coroutine:\n" + this._stack.split("\n").slice(1, -7).join("\n")));
                    o = o._target();
                    var s = o._bitField;
                    0 === (50397184 & s) ? (this._yieldedPromise = o, o._proxy(this, null)) : 0 !== (33554432 & s) ? this._promiseFulfilled(o._value()) : 0 !== (16777216 & s) ? this._promiseRejected(o._reason()) : this._promiseCancelled()
                }, e.coroutine = function(t, e) {
                    if ("function" != typeof t) throw new l("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");
                    var n = Object(e).yieldHandler,
                        r = c,
                        i = (new Error).stack;
                    return function() {
                        var e = t.apply(this, arguments),
                            o = new r(void 0, void 0, n, i),
                            s = o.promise();
                        return o._generator = e, o._promiseFulfilled(void 0), s
                    }
                }, e.coroutine.addYieldHandler = function(t) {
                    if ("function" != typeof t) throw new l("expecting a function but got " + p.classString(t));
                    _.push(t)
                }, e.spawn = function(t) {
                    if (s.deprecated("Promise.spawn()", "Promise.coroutine()"), "function" != typeof t) return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");
                    var r = new c(t, this),
                        i = r.promise();
                    return r._run(e.spawn), i
                }
            }
        }, {
            "./errors": 12,
            "./util": 36
        }],
        17: [function(t, e, n) {
            "use strict";
            e.exports = function(e, n, r, i) {
                var o = t("./util");
                o.canEvaluate, o.tryCatch, o.errorObj;
                e.join = function() {
                    var t, e = arguments.length - 1;
                    if (e > 0 && "function" == typeof arguments[e]) {
                        t = arguments[e];
                        var r
                    }
                    var i = [].slice.call(arguments);
                    t && i.pop();
                    var r = new n(i).promise();
                    return void 0 !== t ? r.spread(t) : r
                }
            }
        }, {
            "./util": 36
        }],
        18: [function(t, e, n) {
            "use strict";
            e.exports = function(e, n, r, i, o, s) {
                function a(t, e, n, r) {
                    this.constructor$(t), this._promise._captureStackTrace();
                    var i = u();
                    this._callback = null === i ? e : i.bind(e), this._preservedValues = r === o ? new Array(this.length()) : null, this._limit = n, this._inFlight = 0, this._queue = n >= 1 ? [] : f, this._init$(void 0, -2)
                }

                function c(t, e, n, i) {
                    if ("function" != typeof e) return r("expecting a function but got " + l.classString(e));
                    var o = "object" == typeof n && null !== n ? n.concurrency : 0;
                    return o = "number" == typeof o && isFinite(o) && o >= 1 ? o : 0, new a(t, e, o, i).promise()
                }
                var u = e._getDomain,
                    l = t("./util"),
                    p = l.tryCatch,
                    h = l.errorObj,
                    f = [];
                l.inherits(a, n), a.prototype._init = function() {}, a.prototype._promiseFulfilled = function(t, n) {
                    var r = this._values,
                        o = this.length(),
                        a = this._preservedValues,
                        c = this._limit;
                    if (0 > n) {
                        if (n = -1 * n - 1, r[n] = t, c >= 1 && (this._inFlight--, this._drainQueue(), this._isResolved())) return !0
                    } else {
                        if (c >= 1 && this._inFlight >= c) return r[n] = t, this._queue.push(n), !1;
                        null !== a && (a[n] = t);
                        var u = this._promise,
                            l = this._callback,
                            f = u._boundValue();
                        u._pushContext();
                        var _ = p(l).call(f, t, n, o),
                            d = u._popContext();
                        if (s.checkForgottenReturns(_, d, null !== a ? "Promise.filter" : "Promise.map", u), _ === h) return this._reject(_.e), !0;
                        var v = i(_, this._promise);
                        if (v instanceof e) {
                            v = v._target();
                            var y = v._bitField;
                            if (0 === (50397184 & y)) return c >= 1 && this._inFlight++, r[n] = v, v._proxy(this, -1 * (n + 1)), !1;
                            if (0 === (33554432 & y)) return 0 !== (16777216 & y) ? (this._reject(v._reason()), !0) : (this._cancel(), !0);
                            _ = v._value()
                        }
                        r[n] = _
                    }
                    var g = ++this._totalResolved;
                    return g >= o ? (null !== a ? this._filter(r, a) : this._resolve(r), !0) : !1
                }, a.prototype._drainQueue = function() {
                    for (var t = this._queue, e = this._limit, n = this._values; t.length > 0 && this._inFlight < e;) {
                        if (this._isResolved()) return;
                        var r = t.pop();
                        this._promiseFulfilled(n[r], r)
                    }
                }, a.prototype._filter = function(t, e) {
                    for (var n = e.length, r = new Array(n), i = 0, o = 0; n > o; ++o) t[o] && (r[i++] = e[o]);
                    r.length = i, this._resolve(r)
                }, a.prototype.preservedValues = function() {
                    return this._preservedValues
                }, e.prototype.map = function(t, e) {
                    return c(this, t, e, null)
                }, e.map = function(t, e, n, r) {
                    return c(t, e, n, r)
                }
            }
        }, {
            "./util": 36
        }],
        19: [function(t, e, n) {
            "use strict";
            e.exports = function(e, n, r, i, o) {
                var s = t("./util"),
                    a = s.tryCatch;
                e.method = function(t) {
                    if ("function" != typeof t) throw new e.TypeError("expecting a function but got " + s.classString(t));
                    return function() {
                        var r = new e(n);
                        r._captureStackTrace(), r._pushContext();
                        var i = a(t).apply(this, arguments),
                            s = r._popContext();
                        return o.checkForgottenReturns(i, s, "Promise.method", r), r._resolveFromSyncValue(i), r
                    }
                }, e.attempt = e["try"] = function(t) {
                    if ("function" != typeof t) return i("expecting a function but got " + s.classString(t));
                    var r = new e(n);
                    r._captureStackTrace(), r._pushContext();
                    var c;
                    if (arguments.length > 1) {
                        o.deprecated("calling Promise.try with more than 1 argument");
                        var u = arguments[1],
                            l = arguments[2];
                        c = s.isArray(u) ? a(t).apply(l, u) : a(t).call(l, u)
                    } else c = a(t)();
                    var p = r._popContext();
                    return o.checkForgottenReturns(c, p, "Promise.try", r), r._resolveFromSyncValue(c), r
                }, e.prototype._resolveFromSyncValue = function(t) {
                    t === s.errorObj ? this._rejectCallback(t.e, !1) : this._resolveCallback(t, !0)
                }
            }
        }, {
            "./util": 36
        }],
        20: [function(t, e, n) {
            "use strict";

            function r(t) {
                return t instanceof Error && l.getPrototypeOf(t) === Error.prototype
            }

            function i(t) {
                var e;
                if (r(t)) {
                    e = new u(t), e.name = t.name, e.message = t.message, e.stack = t.stack;
                    for (var n = l.keys(t), i = 0; i < n.length; ++i) {
                        var o = n[i];
                        p.test(o) || (e[o] = t[o])
                    }
                    return e
                }
                return s.markAsOriginatingFromRejection(t), t
            }

            function o(t, e) {
                return function(n, r) {
                    if (null !== t) {
                        if (n) {
                            var o = i(a(n));
                            t._attachExtraTrace(o), t._reject(o)
                        } else if (e) {
                            var s = [].slice.call(arguments, 1);
                            t._fulfill(s)
                        } else t._fulfill(r);
                        t = null
                    }
                }
            }
            var s = t("./util"),
                a = s.maybeWrapAsError,
                c = t("./errors"),
                u = c.OperationalError,
                l = t("./es5"),
                p = /^(?:name|message|stack|cause)$/;
            e.exports = o
        }, {
            "./errors": 12,
            "./es5": 13,
            "./util": 36
        }],
        21: [function(t, e, n) {
            "use strict";
            e.exports = function(e) {
                function n(t, e) {
                    var n = this;
                    if (!o.isArray(t)) return r.call(n, t, e);
                    var i = a(e).apply(n._boundValue(), [null].concat(t));
                    i === c && s.throwLater(i.e)
                }

                function r(t, e) {
                    var n = this,
                        r = n._boundValue(),
                        i = void 0 === t ? a(e).call(r, null) : a(e).call(r, null, t);
                    i === c && s.throwLater(i.e)
                }

                function i(t, e) {
                    var n = this;
                    if (!t) {
                        var r = new Error(t + "");
                        r.cause = t, t = r
                    }
                    var i = a(e).call(n._boundValue(), t);
                    i === c && s.throwLater(i.e)
                }
                var o = t("./util"),
                    s = e._async,
                    a = o.tryCatch,
                    c = o.errorObj;
                e.prototype.asCallback = e.prototype.nodeify = function(t, e) {
                    if ("function" == typeof t) {
                        var o = r;
                        void 0 !== e && Object(e).spread && (o = n), this._then(o, i, void 0, this, t)
                    }
                    return this
                }
            }
        }, {
            "./util": 36
        }],
        22: [function(t, e, n) {
            "use strict";
            e.exports = function() {
                function e() {}

                function n(t, e) {
                    if ("function" != typeof e) throw new y("expecting a function but got " + h.classString(e));
                    if (t.constructor !== r) throw new y("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")
                }

                function r(t) {
                    this._bitField = 0, this._fulfillmentHandler0 = void 0, this._rejectionHandler0 = void 0, this._promise0 = void 0, this._receiver0 = void 0, t !== m && (n(this, t), this._resolveFromExecutor(t)), this._promiseCreated()
                }

                function i(t) {
                    this.promise._resolveCallback(t)
                }

                function o(t) {
                    this.promise._rejectCallback(t, !1)
                }

                function s(t) {
                    var e = new r(m);
                    e._fulfillmentHandler0 = t, e._rejectionHandler0 = t, e._promise0 = t, e._receiver0 = t
                }
                var a, c = function() {
                        return new y("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")
                    },
                    u = function() {
                        return new r.PromiseInspection(this._target())
                    },
                    l = function(t) {
                        return r.reject(new y(t))
                    },
                    p = {},
                    h = t("./util");
                a = h.isNode ? function() {
                    var t = process.domain;
                    return void 0 === t && (t = null), t
                } : function() {
                    return null
                }, h.notEnumerableProp(r, "_getDomain", a);
                var f = t("./es5"),
                    _ = t("./async"),
                    d = new _;
                f.defineProperty(r, "_async", {
                    value: d
                });
                var v = t("./errors"),
                    y = r.TypeError = v.TypeError;
                r.RangeError = v.RangeError;
                var g = r.CancellationError = v.CancellationError;
                r.TimeoutError = v.TimeoutError, r.OperationalError = v.OperationalError, r.RejectionError = v.OperationalError, r.AggregateError = v.AggregateError;
                var m = function() {},
                    b = {},
                    w = {},
                    C = t("./thenables")(r, m),
                    j = t("./promise_array")(r, m, C, l, e),
                    k = t("./context")(r),
                    F = k.create,
                    E = t("./debuggability")(r, k),
                    x = (E.CapturedTrace, t("./finally")(r, C)),
                    T = t("./catch_filter")(w),
                    R = t("./nodeback"),
                    P = h.errorObj,
                    O = h.tryCatch;
                return r.prototype.toString = function() {
                    return "[object Promise]"
                }, r.prototype.caught = r.prototype["catch"] = function(t) {
                    var e = arguments.length;
                    if (e > 1) {
                        var n, r = new Array(e - 1),
                            i = 0;
                        for (n = 0; e - 1 > n; ++n) {
                            var o = arguments[n];
                            if (!h.isObject(o)) return l("expecting an object but got " + h.classString(o));
                            r[i++] = o
                        }
                        return r.length = i, t = arguments[n], this.then(void 0, T(r, t, this))
                    }
                    return this.then(void 0, t)
                }, r.prototype.reflect = function() {
                    return this._then(u, u, void 0, this, void 0)
                }, r.prototype.then = function(t, e) {
                    if (E.warnings() && arguments.length > 0 && "function" != typeof t && "function" != typeof e) {
                        var n = ".then() only accepts functions but was passed: " + h.classString(t);
                        arguments.length > 1 && (n += ", " + h.classString(e)), this._warn(n)
                    }
                    return this._then(t, e, void 0, void 0, void 0)
                }, r.prototype.done = function(t, e) {
                    var n = this._then(t, e, void 0, void 0, void 0);
                    n._setIsFinal()
                }, r.prototype.spread = function(t) {
                    return "function" != typeof t ? l("expecting a function but got " + h.classString(t)) : this.all()._then(t, void 0, void 0, b, void 0)
                }, r.prototype.toJSON = function() {
                    var t = {
                        isFulfilled: !1,
                        isRejected: !1,
                        fulfillmentValue: void 0,
                        rejectionReason: void 0
                    };
                    return this.isFulfilled() ? (t.fulfillmentValue = this.value(), t.isFulfilled = !0) : this.isRejected() && (t.rejectionReason = this.reason(), t.isRejected = !0), t
                }, r.prototype.all = function() {
                    return arguments.length > 0 && this._warn(".all() was passed arguments but it does not take any"), new j(this).promise()
                }, r.prototype.error = function(t) {
                    return this.caught(h.originatesFromRejection, t)
                }, r.is = function(t) {
                    return t instanceof r
                }, r.fromNode = r.fromCallback = function(t) {
                    var e = new r(m),
                        n = arguments.length > 1 ? !!Object(arguments[1]).multiArgs : !1,
                        i = O(t)(R(e, n));
                    return i === P && e._rejectCallback(i.e, !0), e._isFateSealed() || e._setAsyncGuaranteed(), e
                }, r.all = function(t) {
                    return new j(t).promise()
                }, r.cast = function(t) {
                    var e = C(t);
                    return e instanceof r || (e = new r(m), e._captureStackTrace(), e._setFulfilled(), e._rejectionHandler0 = t), e
                }, r.resolve = r.fulfilled = r.cast, r.reject = r.rejected = function(t) {
                    var e = new r(m);
                    return e._captureStackTrace(), e._rejectCallback(t, !0), e
                }, r.setScheduler = function(t) {
                    if ("function" != typeof t) throw new y("expecting a function but got " + h.classString(t));
                    var e = d._schedule;
                    return d._schedule = t, e
                }, r.prototype._then = function(t, e, n, i, o) {
                    var s = void 0 !== o,
                        c = s ? o : new r(m),
                        u = this._target(),
                        l = u._bitField;
                    s || (c._propagateFrom(this, 3), c._captureStackTrace(), void 0 === i && 0 !== (2097152 & this._bitField) && (i = 0 !== (50397184 & l) ? this._boundValue() : u === this ? void 0 : this._boundTo));
                    var p = a();
                    if (0 !== (50397184 & l)) {
                        var h, f, _ = u._settlePromiseCtx;
                        0 !== (33554432 & l) ? (f = u._rejectionHandler0, h = t) : 0 !== (16777216 & l) ? (f = u._fulfillmentHandler0, h = e, u._unsetRejectionIsUnhandled()) : (_ = u._settlePromiseLateCancellationObserver, f = new g("late cancellation observer"), u._attachExtraTrace(f), h = e), d.invoke(_, u, {
                            handler: null === p ? h : "function" == typeof h && p.bind(h),
                            promise: c,
                            receiver: i,
                            value: f
                        })
                    } else u._addCallbacks(t, e, c, i, p);
                    return c
                }, r.prototype._length = function() {
                    return 65535 & this._bitField
                }, r.prototype._isFateSealed = function() {
                    return 0 !== (117506048 & this._bitField)
                }, r.prototype._isFollowing = function() {
                    return 67108864 === (67108864 & this._bitField)
                }, r.prototype._setLength = function(t) {
                    this._bitField = -65536 & this._bitField | 65535 & t
                }, r.prototype._setFulfilled = function() {
                    this._bitField = 33554432 | this._bitField
                }, r.prototype._setRejected = function() {
                    this._bitField = 16777216 | this._bitField
                }, r.prototype._setFollowing = function() {
                    this._bitField = 67108864 | this._bitField
                }, r.prototype._setIsFinal = function() {
                    this._bitField = 4194304 | this._bitField
                }, r.prototype._isFinal = function() {
                    return (4194304 & this._bitField) > 0
                }, r.prototype._unsetCancelled = function() {
                    this._bitField = -65537 & this._bitField
                }, r.prototype._setCancelled = function() {
                    this._bitField = 65536 | this._bitField
                }, r.prototype._setAsyncGuaranteed = function() {
                    this._bitField = 134217728 | this._bitField
                }, r.prototype._receiverAt = function(t) {
                    var e = 0 === t ? this._receiver0 : this[4 * t - 4 + 3];
                    return e === p ? void 0 : void 0 === e && this._isBound() ? this._boundValue() : e
                }, r.prototype._promiseAt = function(t) {
                    return this[4 * t - 4 + 2]
                }, r.prototype._fulfillmentHandlerAt = function(t) {
                    return this[4 * t - 4 + 0]
                }, r.prototype._rejectionHandlerAt = function(t) {
                    return this[4 * t - 4 + 1]
                }, r.prototype._boundValue = function() {}, r.prototype._migrateCallback0 = function(t) {
                    var e = (t._bitField, t._fulfillmentHandler0),
                        n = t._rejectionHandler0,
                        r = t._promise0,
                        i = t._receiverAt(0);
                    void 0 === i && (i = p), this._addCallbacks(e, n, r, i, null)
                }, r.prototype._migrateCallbackAt = function(t, e) {
                    var n = t._fulfillmentHandlerAt(e),
                        r = t._rejectionHandlerAt(e),
                        i = t._promiseAt(e),
                        o = t._receiverAt(e);
                    void 0 === o && (o = p), this._addCallbacks(n, r, i, o, null)
                }, r.prototype._addCallbacks = function(t, e, n, r, i) {
                    var o = this._length();
                    if (o >= 65531 && (o = 0, this._setLength(0)), 0 === o) this._promise0 = n, this._receiver0 = r, "function" == typeof t && (this._fulfillmentHandler0 = null === i ? t : i.bind(t)), "function" == typeof e && (this._rejectionHandler0 = null === i ? e : i.bind(e));
                    else {
                        var s = 4 * o - 4;
                        this[s + 2] = n, this[s + 3] = r, "function" == typeof t && (this[s + 0] = null === i ? t : i.bind(t)), "function" == typeof e && (this[s + 1] = null === i ? e : i.bind(e))
                    }
                    return this._setLength(o + 1), o
                }, r.prototype._proxy = function(t, e) {
                    this._addCallbacks(void 0, void 0, e, t, null)
                }, r.prototype._resolveCallback = function(t, e) {
                    if (0 === (117506048 & this._bitField)) {
                        if (t === this) return this._rejectCallback(c(), !1);
                        var n = C(t, this);
                        if (!(n instanceof r)) return this._fulfill(t);
                        e && this._propagateFrom(n, 2);
                        var i = n._target(),
                            o = i._bitField;
                        if (0 === (50397184 & o)) {
                            var s = this._length();
                            s > 0 && i._migrateCallback0(this);
                            for (var a = 1; s > a; ++a) i._migrateCallbackAt(this, a);
                            this._setFollowing(), this._setLength(0), this._setFollowee(i)
                        } else if (0 !== (33554432 & o)) this._fulfill(i._value());
                        else if (0 !== (16777216 & o)) this._reject(i._reason());
                        else {
                            var u = new g("late cancellation observer");
                            i._attachExtraTrace(u), this._reject(u)
                        }
                    }
                }, r.prototype._rejectCallback = function(t, e, n) {
                    var r = h.ensureErrorObject(t),
                        i = r === t;
                    if (!i && !n && E.warnings()) {
                        var o = "a promise was rejected with a non-error: " + h.classString(t);
                        this._warn(o, !0)
                    }
                    this._attachExtraTrace(r, e ? i : !1), this._reject(t)
                }, r.prototype._resolveFromExecutor = function(t) {
                    var e = this;
                    this._captureStackTrace(), this._pushContext();
                    var n = !0,
                        r = this._execute(t, function(t) {
                            e._resolveCallback(t)
                        }, function(t) {
                            e._rejectCallback(t, n)
                        });
                    n = !1, this._popContext(), void 0 !== r && e._rejectCallback(r, !0)
                }, r.prototype._settlePromiseFromHandler = function(t, e, n, r) {
                    var i = r._bitField;
                    if (0 === (65536 & i)) {
                        r._pushContext();
                        var o;
                        e === b ? n && "number" == typeof n.length ? o = O(t).apply(this._boundValue(), n) : (o = P, o.e = new y("cannot .spread() a non-array: " + h.classString(n))) : o = O(t).call(e, n);
                        var s = r._popContext();
                        if (i = r._bitField, 0 === (65536 & i))
                            if (o === w) r._reject(n);
                            else if (o === P || o === r) {
                            var a = o === r ? c() : o.e;
                            r._rejectCallback(a, !1)
                        } else E.checkForgottenReturns(o, s, "", r, this), r._resolveCallback(o)
                    }
                }, r.prototype._target = function() {
                    for (var t = this; t._isFollowing();) t = t._followee();
                    return t
                }, r.prototype._followee = function() {
                    return this._rejectionHandler0
                }, r.prototype._setFollowee = function(t) {
                    this._rejectionHandler0 = t
                }, r.prototype._settlePromise = function(t, n, i, o) {
                    var s = t instanceof r,
                        a = this._bitField,
                        c = 0 !== (134217728 & a);
                    0 !== (65536 & a) ? (s && t._invokeInternalOnCancel(), n === x ? (i.cancelPromise = t, O(n).call(i, o) === P && t._reject(P.e)) : n === u ? t._fulfill(u.call(i)) : i instanceof e ? i._promiseCancelled(t) : s || t instanceof j ? t._cancel() : i.cancel()) : "function" == typeof n ? s ? (c && t._setAsyncGuaranteed(), this._settlePromiseFromHandler(n, i, o, t)) : n.call(i, o, t) : i instanceof e ? i._isResolved() || (0 !== (33554432 & a) ? i._promiseFulfilled(o, t) : i._promiseRejected(o, t)) : s && (c && t._setAsyncGuaranteed(), 0 !== (33554432 & a) ? t._fulfill(o) : t._reject(o))
                }, r.prototype._settlePromiseLateCancellationObserver = function(t) {
                    var e = t.handler,
                        n = t.promise,
                        i = t.receiver,
                        o = t.value;
                    "function" == typeof e ? n instanceof r ? this._settlePromiseFromHandler(e, i, o, n) : e.call(i, o, n) : n instanceof r && n._reject(o)
                }, r.prototype._settlePromiseCtx = function(t) {
                    this._settlePromise(t.promise, t.handler, t.receiver, t.value)
                }, r.prototype._settlePromise0 = function(t, e, n) {
                    var r = this._promise0,
                        i = this._receiverAt(0);
                    this._promise0 = void 0, this._receiver0 = void 0, this._settlePromise(r, t, i, e)
                }, r.prototype._clearCallbackDataAtIndex = function(t) {
                    var e = 4 * t - 4;
                    this[e + 2] = this[e + 3] = this[e + 0] = this[e + 1] = void 0
                }, r.prototype._fulfill = function(t) {
                    var e = this._bitField;
                    if (!((117506048 & e) >>> 16)) {
                        if (t === this) {
                            var n = c();
                            return this._attachExtraTrace(n), this._reject(n)
                        }
                        this._setFulfilled(), this._rejectionHandler0 = t, (65535 & e) > 0 && (0 !== (134217728 & e) ? this._settlePromises() : d.settlePromises(this))
                    }
                }, r.prototype._reject = function(t) {
                    var e = this._bitField;
                    if (!((117506048 & e) >>> 16)) return this._setRejected(), this._fulfillmentHandler0 = t, this._isFinal() ? d.fatalError(t, h.isNode) : void((65535 & e) > 0 ? 0 !== (134217728 & e) ? this._settlePromises() : d.settlePromises(this) : this._ensurePossibleRejectionHandled())
                }, r.prototype._fulfillPromises = function(t, e) {
                    for (var n = 1; t > n; n++) {
                        var r = this._fulfillmentHandlerAt(n),
                            i = this._promiseAt(n),
                            o = this._receiverAt(n);
                        this._clearCallbackDataAtIndex(n), this._settlePromise(i, r, o, e)
                    }
                }, r.prototype._rejectPromises = function(t, e) {
                    for (var n = 1; t > n; n++) {
                        var r = this._rejectionHandlerAt(n),
                            i = this._promiseAt(n),
                            o = this._receiverAt(n);
                        this._clearCallbackDataAtIndex(n), this._settlePromise(i, r, o, e)
                    }
                }, r.prototype._settlePromises = function() {
                    var t = this._bitField,
                        e = 65535 & t;
                    if (e > 0) {
                        if (0 !== (16842752 & t)) {
                            var n = this._fulfillmentHandler0;
                            this._settlePromise0(this._rejectionHandler0, n, t), this._rejectPromises(e, n)
                        } else {
                            var r = this._rejectionHandler0;
                            this._settlePromise0(this._fulfillmentHandler0, r, t), this._fulfillPromises(e, r)
                        }
                        this._setLength(0)
                    }
                    this._clearCancellationData()
                }, r.prototype._settledValue = function() {
                    var t = this._bitField;
                    return 0 !== (33554432 & t) ? this._rejectionHandler0 : 0 !== (16777216 & t) ? this._fulfillmentHandler0 : void 0
                }, r.defer = r.pending = function() {
                    E.deprecated("Promise.defer", "new Promise");
                    var t = new r(m);
                    return {
                        promise: t,
                        resolve: i,
                        reject: o
                    }
                }, h.notEnumerableProp(r, "_makeSelfResolutionError", c), t("./method")(r, m, C, l, E), t("./bind")(r, m, C, E), t("./cancel")(r, j, l, E), t("./direct_resolve")(r), t("./synchronous_inspection")(r), t("./join")(r, j, C, m, E), r.Promise = r, t("./map.js")(r, j, l, C, m, E), t("./using.js")(r, l, C, F, m, E), t("./timers.js")(r, m), t("./generators.js")(r, l, m, C, e, E), t("./nodeify.js")(r), t("./call_get.js")(r), t("./props.js")(r, j, C, l), t("./race.js")(r, m, C, l), t("./reduce.js")(r, j, l, C, m, E), t("./settle.js")(r, j, E), t("./some.js")(r, j, l), t("./promisify.js")(r, m), t("./any.js")(r), t("./each.js")(r, m), t("./filter.js")(r, m), h.toFastProperties(r), h.toFastProperties(r.prototype), s({
                    a: 1
                }), s({
                    b: 2
                }), s({
                    c: 3
                }), s(1), s(function() {}), s(void 0), s(!1), s(new r(m)), E.setBounds(_.firstLineError, h.lastLineError), r
            }
        }, {
            "./any.js": 1,
            "./async": 2,
            "./bind": 3,
            "./call_get.js": 5,
            "./cancel": 6,
            "./catch_filter": 7,
            "./context": 8,
            "./debuggability": 9,
            "./direct_resolve": 10,
            "./each.js": 11,
            "./errors": 12,
            "./es5": 13,
            "./filter.js": 14,
            "./finally": 15,
            "./generators.js": 16,
            "./join": 17,
            "./map.js": 18,
            "./method": 19,
            "./nodeback": 20,
            "./nodeify.js": 21,
            "./promise_array": 23,
            "./promisify.js": 24,
            "./props.js": 25,
            "./race.js": 27,
            "./reduce.js": 28,
            "./settle.js": 30,
            "./some.js": 31,
            "./synchronous_inspection": 32,
            "./thenables": 33,
            "./timers.js": 34,
            "./using.js": 35,
            "./util": 36
        }],
        23: [function(t, e, n) {
            "use strict";
            e.exports = function(e, n, r, i, o) {
                function s(t) {
                    switch (t) {
                        case -2:
                            return [];
                        case -3:
                            return {}
                    }
                }

                function a(t) {
                    var r = this._promise = new e(n);
                    t instanceof e && r._propagateFrom(t, 3), r._setOnCancel(this), this._values = t, this._length = 0, this._totalResolved = 0, this._init(void 0, -2)
                }
                var c = t("./util");
                c.isArray;
                return c.inherits(a, o), a.prototype.length = function() {
                    return this._length
                }, a.prototype.promise = function() {
                    return this._promise
                }, a.prototype._init = function u(t, n) {
                    var o = r(this._values, this._promise);
                    if (o instanceof e) {
                        o = o._target();
                        var a = o._bitField;
                        if (this._values = o, 0 === (50397184 & a)) return this._promise._setAsyncGuaranteed(), o._then(u, this._reject, void 0, this, n);
                        if (0 === (33554432 & a)) return 0 !== (16777216 & a) ? this._reject(o._reason()) : this._cancel();
                        o = o._value()
                    }
                    if (o = c.asArray(o), null === o) {
                        var l = i("expecting an array or an iterable object but got " + c.classString(o)).reason();
                        return void this._promise._rejectCallback(l, !1)
                    }
                    return 0 === o.length ? void(-5 === n ? this._resolveEmptyArray() : this._resolve(s(n))) : void this._iterate(o)
                }, a.prototype._iterate = function(t) {
                    var n = this.getActualLength(t.length);
                    this._length = n, this._values = this.shouldCopyValues() ? new Array(n) : this._values;
                    for (var i = this._promise, o = !1, s = null, a = 0; n > a; ++a) {
                        var c = r(t[a], i);
                        c instanceof e ? (c = c._target(), s = c._bitField) : s = null, o ? null !== s && c.suppressUnhandledRejections() : null !== s ? 0 === (50397184 & s) ? (c._proxy(this, a), this._values[a] = c) : o = 0 !== (33554432 & s) ? this._promiseFulfilled(c._value(), a) : 0 !== (16777216 & s) ? this._promiseRejected(c._reason(), a) : this._promiseCancelled(a) : o = this._promiseFulfilled(c, a)
                    }
                    o || i._setAsyncGuaranteed()
                }, a.prototype._isResolved = function() {
                    return null === this._values
                }, a.prototype._resolve = function(t) {
                    this._values = null, this._promise._fulfill(t)
                }, a.prototype._cancel = function() {
                    !this._isResolved() && this._promise.isCancellable() && (this._values = null, this._promise._cancel())
                }, a.prototype._reject = function(t) {
                    this._values = null, this._promise._rejectCallback(t, !1)
                }, a.prototype._promiseFulfilled = function(t, e) {
                    this._values[e] = t;
                    var n = ++this._totalResolved;
                    return n >= this._length ? (this._resolve(this._values), !0) : !1
                }, a.prototype._promiseCancelled = function() {
                    return this._cancel(), !0
                }, a.prototype._promiseRejected = function(t) {
                    return this._totalResolved++, this._reject(t), !0
                }, a.prototype._resultCancelled = function() {
                    if (!this._isResolved()) {
                        var t = this._values;
                        if (this._cancel(), t instanceof e) t.cancel();
                        else
                            for (var n = 0; n < t.length; ++n) t[n] instanceof e && t[n].cancel()
                    }
                }, a.prototype.shouldCopyValues = function() {
                    return !0
                }, a.prototype.getActualLength = function(t) {
                    return t
                }, a
            }
        }, {
            "./util": 36
        }],
        24: [function(t, e, n) {
            "use strict";
            e.exports = function(e, n) {
                function r(t) {
                    return !C.test(t)
                }

                function i(t) {
                    try {
                        return t.__isPromisified__ === !0
                    } catch (e) {
                        return !1
                    }
                }

                function o(t, e, n) {
                    var r = f.getDataPropertyOrDefault(t, e + n, b);
                    return r ? i(r) : !1
                }

                function s(t, e, n) {
                    for (var r = 0; r < t.length; r += 2) {
                        var i = t[r];
                        if (n.test(i))
                            for (var o = i.replace(n, ""), s = 0; s < t.length; s += 2)
                                if (t[s] === o) throw new g("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s", e))
                    }
                }

                function a(t, e, n, r) {
                    for (var a = f.inheritedDataKeys(t), c = [], u = 0; u < a.length; ++u) {
                        var l = a[u],
                            p = t[l],
                            h = r === j ? !0 : j(l, p, t);
                        "function" != typeof p || i(p) || o(t, l, e) || !r(l, p, t, h) || c.push(l, p)
                    }
                    return s(c, e, n), c
                }

                function c(t, r, i, o, s, a) {
                    function c() {
                        var i = r;
                        r === h && (i = this);
                        var o = new e(n);
                        o._captureStackTrace();
                        var s = "string" == typeof l && this !== u ? this[l] : t,
                            c = _(o, a);
                        try {
                            s.apply(i, d(arguments, c))
                        } catch (p) {
                            o._rejectCallback(v(p), !0, !0)
                        }
                        return o._isFateSealed() || o._setAsyncGuaranteed(), o
                    }
                    var u = function() {
                            return this
                        }(),
                        l = t;
                    return "string" == typeof l && (t = o), f.notEnumerableProp(c, "__isPromisified__", !0), c
                }

                function u(t, e, n, r, i) {
                    for (var o = new RegExp(k(e) + "$"), s = a(t, e, o, n), c = 0, u = s.length; u > c; c += 2) {
                        var l = s[c],
                            p = s[c + 1],
                            _ = l + e;
                        if (r === F) t[_] = F(l, h, l, p, e, i);
                        else {
                            var d = r(p, function() {
                                return F(l, h, l, p, e, i)
                            });
                            f.notEnumerableProp(d, "__isPromisified__", !0), t[_] = d
                        }
                    }
                    return f.toFastProperties(t), t
                }

                function l(t, e, n) {
                    return F(t, e, void 0, t, null, n)
                }
                var p, h = {},
                    f = t("./util"),
                    _ = t("./nodeback"),
                    d = f.withAppended,
                    v = f.maybeWrapAsError,
                    y = f.canEvaluate,
                    g = t("./errors").TypeError,
                    m = "Async",
                    b = {
                        __isPromisified__: !0
                    },
                    w = ["arity", "length", "name", "arguments", "caller", "callee", "prototype", "__isPromisified__"],
                    C = new RegExp("^(?:" + w.join("|") + ")$"),
                    j = function(t) {
                        return f.isIdentifier(t) && "_" !== t.charAt(0) && "constructor" !== t
                    },
                    k = function(t) {
                        return t.replace(/([$])/, "\\$")
                    },
                    F = y ? p : c;
                e.promisify = function(t, e) {
                    if ("function" != typeof t) throw new g("expecting a function but got " + f.classString(t));
                    if (i(t)) return t;
                    e = Object(e);
                    var n = void 0 === e.context ? h : e.context,
                        o = !!e.multiArgs,
                        s = l(t, n, o);
                    return f.copyDescriptors(t, s, r), s
                }, e.promisifyAll = function(t, e) {
                    if ("function" != typeof t && "object" != typeof t) throw new g("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");
                    e = Object(e);
                    var n = !!e.multiArgs,
                        r = e.suffix;
                    "string" != typeof r && (r = m);
                    var i = e.filter;
                    "function" != typeof i && (i = j);
                    var o = e.promisifier;
                    if ("function" != typeof o && (o = F), !f.isIdentifier(r)) throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");
                    for (var s = f.inheritedDataKeys(t), a = 0; a < s.length; ++a) {
                        var c = t[s[a]];
                        "constructor" !== s[a] && f.isClass(c) && (u(c.prototype, r, i, o, n), u(c, r, i, o, n))
                    }
                    return u(t, r, i, o, n)
                }
            }
        }, {
            "./errors": 12,
            "./nodeback": 20,
            "./util": 36
        }],
        25: [function(t, e, n) {
            "use strict";
            e.exports = function(e, n, r, i) {
                function o(t) {
                    var e, n = !1;
                    if (void 0 !== a && t instanceof a) e = p(t), n = !0;
                    else {
                        var r = l.keys(t),
                            i = r.length;
                        e = new Array(2 * i);
                        for (var o = 0; i > o; ++o) {
                            var s = r[o];
                            e[o] = t[s], e[o + i] = s
                        }
                    }
                    this.constructor$(e), this._isMap = n, this._init$(void 0, -3)
                }

                function s(t) {
                    var n, s = r(t);
                    return u(s) ? (n = s instanceof e ? s._then(e.props, void 0, void 0, void 0, void 0) : new o(s).promise(), s instanceof e && n._propagateFrom(s, 2), n) : i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")
                }
                var a, c = t("./util"),
                    u = c.isObject,
                    l = t("./es5");
                "function" == typeof Map && (a = Map);
                var p = function() {
                        function t(t, r) {
                            this[e] = t, this[e + n] = r, e++
                        }
                        var e = 0,
                            n = 0;
                        return function(r) {
                            n = r.size, e = 0;
                            var i = new Array(2 * r.size);
                            return r.forEach(t, i), i
                        }
                    }(),
                    h = function(t) {
                        for (var e = new a, n = t.length / 2 | 0, r = 0; n > r; ++r) {
                            var i = t[n + r],
                                o = t[r];
                            e.set(i, o)
                        }
                        return e
                    };
                c.inherits(o, n), o.prototype._init = function() {}, o.prototype._promiseFulfilled = function(t, e) {
                    this._values[e] = t;
                    var n = ++this._totalResolved;
                    if (n >= this._length) {
                        var r;
                        if (this._isMap) r = h(this._values);
                        else {
                            r = {};
                            for (var i = this.length(), o = 0, s = this.length(); s > o; ++o) r[this._values[o + i]] = this._values[o]
                        }
                        return this._resolve(r), !0
                    }
                    return !1
                }, o.prototype.shouldCopyValues = function() {
                    return !1
                }, o.prototype.getActualLength = function(t) {
                    return t >> 1
                }, e.prototype.props = function() {
                    return s(this)
                }, e.props = function(t) {
                    return s(t)
                }
            }
        }, {
            "./es5": 13,
            "./util": 36
        }],
        26: [function(t, e, n) {
            "use strict";

            function r(t, e, n, r, i) {
                for (var o = 0; i > o; ++o) n[o + r] = t[o + e], t[o + e] = void 0
            }

            function i(t) {
                this._capacity = t, this._length = 0, this._front = 0
            }
            i.prototype._willBeOverCapacity = function(t) {
                return this._capacity < t
            }, i.prototype._pushOne = function(t) {
                var e = this.length();
                this._checkCapacity(e + 1);
                var n = this._front + e & this._capacity - 1;
                this[n] = t, this._length = e + 1
            }, i.prototype._unshiftOne = function(t) {
                var e = this._capacity;
                this._checkCapacity(this.length() + 1);
                var n = this._front,
                    r = (n - 1 & e - 1 ^ e) - e;
                this[r] = t, this._front = r, this._length = this.length() + 1
            }, i.prototype.unshift = function(t, e, n) {
                this._unshiftOne(n), this._unshiftOne(e), this._unshiftOne(t)
            }, i.prototype.push = function(t, e, n) {
                var r = this.length() + 3;
                if (this._willBeOverCapacity(r)) return this._pushOne(t), this._pushOne(e), void this._pushOne(n);
                var i = this._front + r - 3;
                this._checkCapacity(r);
                var o = this._capacity - 1;
                this[i + 0 & o] = t, this[i + 1 & o] = e, this[i + 2 & o] = n, this._length = r
            }, i.prototype.shift = function() {
                var t = this._front,
                    e = this[t];
                return this[t] = void 0, this._front = t + 1 & this._capacity - 1, this._length--, e
            }, i.prototype.length = function() {
                return this._length
            }, i.prototype._checkCapacity = function(t) {
                this._capacity < t && this._resizeTo(this._capacity << 1)
            }, i.prototype._resizeTo = function(t) {
                var e = this._capacity;
                this._capacity = t;
                var n = this._front,
                    i = this._length,
                    o = n + i & e - 1;
                r(this, 0, this, e, o)
            }, e.exports = i
        }, {}],
        27: [function(t, e, n) {
            "use strict";
            e.exports = function(e, n, r, i) {
                function o(t, o) {
                    var c = r(t);
                    if (c instanceof e) return a(c);
                    if (t = s.asArray(t), null === t) return i("expecting an array or an iterable object but got " + s.classString(t));
                    var u = new e(n);
                    void 0 !== o && u._propagateFrom(o, 3);
                    for (var l = u._fulfill, p = u._reject, h = 0, f = t.length; f > h; ++h) {
                        var _ = t[h];
                        (void 0 !== _ || h in t) && e.cast(_)._then(l, p, void 0, u, null)
                    }
                    return u
                }
                var s = t("./util"),
                    a = function(t) {
                        return t.then(function(e) {
                            return o(e, t)
                        })
                    };
                e.race = function(t) {
                    return o(t, void 0)
                }, e.prototype.race = function() {
                    return o(this, void 0)
                }
            }
        }, {
            "./util": 36
        }],
        28: [function(t, e, n) {
            "use strict";
            e.exports = function(e, n, r, i, o, s) {
                function a(t, n, r, i) {
                    this.constructor$(t);
                    var s = h();
                    this._fn = null === s ? n : s.bind(n), void 0 !== r && (r = e.resolve(r), r._attachCancellationCallback(this)), this._initialValue = r, this._currentCancellable = null, this._eachValues = i === o ? [] : void 0, this._promise._captureStackTrace(), this._init$(void 0, -5)
                }

                function c(t, e) {
                    this.isFulfilled() ? e._resolve(t) : e._reject(t)
                }

                function u(t, e, n, i) {
                    if ("function" != typeof e) return r("expecting a function but got " + f.classString(e));
                    var o = new a(t, e, n, i);
                    return o.promise()
                }

                function l(t) {
                    this.accum = t, this.array._gotAccum(t);
                    var n = i(this.value, this.array._promise);
                    return n instanceof e ? (this.array._currentCancellable = n, n._then(p, void 0, void 0, this, void 0)) : p.call(this, n)
                }

                function p(t) {
                    var n = this.array,
                        r = n._promise,
                        i = _(n._fn);
                    r._pushContext();
                    var o;
                    o = void 0 !== n._eachValues ? i.call(r._boundValue(), t, this.index, this.length) : i.call(r._boundValue(), this.accum, t, this.index, this.length), o instanceof e && (n._currentCancellable = o);
                    var a = r._popContext();
                    return s.checkForgottenReturns(o, a, void 0 !== n._eachValues ? "Promise.each" : "Promise.reduce", r), o
                }
                var h = e._getDomain,
                    f = t("./util"),
                    _ = f.tryCatch;
                f.inherits(a, n), a.prototype._gotAccum = function(t) {
                    void 0 !== this._eachValues && t !== o && this._eachValues.push(t)
                }, a.prototype._eachComplete = function(t) {
                    return this._eachValues.push(t), this._eachValues
                }, a.prototype._init = function() {}, a.prototype._resolveEmptyArray = function() {
                    this._resolve(void 0 !== this._eachValues ? this._eachValues : this._initialValue)
                }, a.prototype.shouldCopyValues = function() {
                    return !1
                }, a.prototype._resolve = function(t) {
                    this._promise._resolveCallback(t), this._values = null
                }, a.prototype._resultCancelled = function(t) {
                    return t === this._initialValue ? this._cancel() : void(this._isResolved() || (this._resultCancelled$(), this._currentCancellable instanceof e && this._currentCancellable.cancel(), this._initialValue instanceof e && this._initialValue.cancel()))
                }, a.prototype._iterate = function(t) {
                    this._values = t;
                    var n, r, i = t.length;
                    if (void 0 !== this._initialValue ? (n = this._initialValue, r = 0) : (n = e.resolve(t[0]), r = 1), this._currentCancellable = n, !n.isRejected())
                        for (; i > r; ++r) {
                            var o = {
                                accum: null,
                                value: t[r],
                                index: r,
                                length: i,
                                array: this
                            };
                            n = n._then(l, void 0, void 0, o, void 0)
                        }
                    void 0 !== this._eachValues && (n = n._then(this._eachComplete, void 0, void 0, this, void 0)), n._then(c, c, void 0, n, this)
                }, e.prototype.reduce = function(t, e) {
                    return u(this, t, e, null)
                }, e.reduce = function(t, e, n, r) {
                    return u(t, e, n, r)
                }
            }
        }, {
            "./util": 36
        }],
        29: [function(t, e, n) {
            "use strict";
            var r, i = t("./util"),
                o = function() {
                    throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")
                };
            if (i.isNode && "undefined" == typeof MutationObserver) {
                var s = global.setImmediate,
                    a = process.nextTick;
                r = i.isRecentNode ? function(t) {
                    s.call(global, t)
                } : function(t) {
                    a.call(process, t)
                }
            } else r = "undefined" == typeof MutationObserver || "undefined" != typeof window && window.navigator && window.navigator.standalone ? "undefined" != typeof setImmediate ? function(t) {
                setImmediate(t)
            } : "undefined" != typeof setTimeout ? function(t) {
                setTimeout(t, 0)
            } : o : function() {
                var t = document.createElement("div"),
                    e = {
                        attributes: !0
                    },
                    n = !1,
                    r = document.createElement("div"),
                    i = new MutationObserver(function() {
                        t.classList.toggle("foo"), n = !1
                    });
                i.observe(r, e);
                var o = function() {
                    n || (n = !0, r.classList.toggle("foo"))
                };
                return function(n) {
                    var r = new MutationObserver(function() {
                        r.disconnect(), n()
                    });
                    r.observe(t, e), o()
                }
            }();
            e.exports = r
        }, {
            "./util": 36
        }],
        30: [function(t, e, n) {
            "use strict";
            e.exports = function(e, n, r) {
                function i(t) {
                    this.constructor$(t)
                }
                var o = e.PromiseInspection,
                    s = t("./util");
                s.inherits(i, n), i.prototype._promiseResolved = function(t, e) {
                    this._values[t] = e;
                    var n = ++this._totalResolved;
                    return n >= this._length ? (this._resolve(this._values), !0) : !1
                }, i.prototype._promiseFulfilled = function(t, e) {
                    var n = new o;
                    return n._bitField = 33554432, n._settledValueField = t, this._promiseResolved(e, n)
                }, i.prototype._promiseRejected = function(t, e) {
                    var n = new o;
                    return n._bitField = 16777216, n._settledValueField = t, this._promiseResolved(e, n)
                }, e.settle = function(t) {
                    return r.deprecated(".settle()", ".reflect()"), new i(t).promise()
                }, e.prototype.settle = function() {
                    return e.settle(this)
                }
            }
        }, {
            "./util": 36
        }],
        31: [function(t, e, n) {
            "use strict";
            e.exports = function(e, n, r) {
                function i(t) {
                    this.constructor$(t), this._howMany = 0, this._unwrap = !1, this._initialized = !1
                }

                function o(t, e) {
                    if ((0 | e) !== e || 0 > e) return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");
                    var n = new i(t),
                        o = n.promise();
                    return n.setHowMany(e), n.init(), o
                }
                var s = t("./util"),
                    a = t("./errors").RangeError,
                    c = t("./errors").AggregateError,
                    u = s.isArray,
                    l = {};
                s.inherits(i, n), i.prototype._init = function() {
                    if (this._initialized) {
                        if (0 === this._howMany) return void this._resolve([]);
                        this._init$(void 0, -5);
                        var t = u(this._values);
                        !this._isResolved() && t && this._howMany > this._canPossiblyFulfill() && this._reject(this._getRangeError(this.length()))
                    }
                }, i.prototype.init = function() {
                    this._initialized = !0, this._init()
                }, i.prototype.setUnwrap = function() {
                    this._unwrap = !0
                }, i.prototype.howMany = function() {
                    return this._howMany
                }, i.prototype.setHowMany = function(t) {
                    this._howMany = t
                }, i.prototype._promiseFulfilled = function(t) {
                    return this._addFulfilled(t), this._fulfilled() === this.howMany() ? (this._values.length = this.howMany(), 1 === this.howMany() && this._unwrap ? this._resolve(this._values[0]) : this._resolve(this._values), !0) : !1
                }, i.prototype._promiseRejected = function(t) {
                    return this._addRejected(t), this._checkOutcome()
                }, i.prototype._promiseCancelled = function() {
                    return this._values instanceof e || null == this._values ? this._cancel() : (this._addRejected(l), this._checkOutcome())
                }, i.prototype._checkOutcome = function() {
                    if (this.howMany() > this._canPossiblyFulfill()) {
                        for (var t = new c, e = this.length(); e < this._values.length; ++e) this._values[e] !== l && t.push(this._values[e]);
                        return t.length > 0 ? this._reject(t) : this._cancel(), !0
                    }
                    return !1
                }, i.prototype._fulfilled = function() {
                    return this._totalResolved
                }, i.prototype._rejected = function() {
                    return this._values.length - this.length()
                }, i.prototype._addRejected = function(t) {
                    this._values.push(t)
                }, i.prototype._addFulfilled = function(t) {
                    this._values[this._totalResolved++] = t
                }, i.prototype._canPossiblyFulfill = function() {
                    return this.length() - this._rejected()
                }, i.prototype._getRangeError = function(t) {
                    var e = "Input array must contain at least " + this._howMany + " items but contains only " + t + " items";
                    return new a(e)
                }, i.prototype._resolveEmptyArray = function() {
                    this._reject(this._getRangeError(0))
                }, e.some = function(t, e) {
                    return o(t, e)
                }, e.prototype.some = function(t) {
                    return o(this, t)
                }, e._SomePromiseArray = i
            }
        }, {
            "./errors": 12,
            "./util": 36
        }],
        32: [function(t, e, n) {
            "use strict";
            e.exports = function(t) {
                function e(t) {
                    void 0 !== t ? (t = t._target(), this._bitField = t._bitField, this._settledValueField = t._isFateSealed() ? t._settledValue() : void 0) : (this._bitField = 0, this._settledValueField = void 0)
                }
                e.prototype._settledValue = function() {
                    return this._settledValueField
                };
                var n = e.prototype.value = function() {
                        if (!this.isFulfilled()) throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");
                        return this._settledValue()
                    },
                    r = e.prototype.error = e.prototype.reason = function() {
                        if (!this.isRejected()) throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");
                        return this._settledValue()
                    },
                    i = e.prototype.isFulfilled = function() {
                        return 0 !== (33554432 & this._bitField)
                    },
                    o = e.prototype.isRejected = function() {
                        return 0 !== (16777216 & this._bitField)
                    },
                    s = e.prototype.isPending = function() {
                        return 0 === (50397184 & this._bitField)
                    },
                    a = e.prototype.isResolved = function() {
                        return 0 !== (50331648 & this._bitField)
                    };
                e.prototype.isCancelled = t.prototype._isCancelled = function() {
                    return 65536 === (65536 & this._bitField)
                }, t.prototype.isCancelled = function() {
                    return this._target()._isCancelled()
                }, t.prototype.isPending = function() {
                    return s.call(this._target())
                }, t.prototype.isRejected = function() {
                    return o.call(this._target())
                }, t.prototype.isFulfilled = function() {
                    return i.call(this._target())
                }, t.prototype.isResolved = function() {
                    return a.call(this._target())
                }, t.prototype.value = function() {
                    return n.call(this._target())
                }, t.prototype.reason = function() {
                    var t = this._target();
                    return t._unsetRejectionIsUnhandled(), r.call(t)
                }, t.prototype._value = function() {
                    return this._settledValue()
                }, t.prototype._reason = function() {
                    return this._unsetRejectionIsUnhandled(), this._settledValue()
                }, t.PromiseInspection = e
            }
        }, {}],
        33: [function(t, e, n) {
            "use strict";
            e.exports = function(e, n) {
                function r(t, r) {
                    if (l(t)) {
                        if (t instanceof e) return t;
                        var i = o(t);
                        if (i === u) {
                            r && r._pushContext();
                            var c = e.reject(i.e);
                            return r && r._popContext(), c
                        }
                        if ("function" == typeof i) {
                            if (s(t)) {
                                var c = new e(n);
                                return t._then(c._fulfill, c._reject, void 0, c, null), c
                            }
                            return a(t, i, r)
                        }
                    }
                    return t
                }

                function i(t) {
                    return t.then
                }

                function o(t) {
                    try {
                        return i(t)
                    } catch (e) {
                        return u.e = e, u
                    }
                }

                function s(t) {
                    return p.call(t, "_promise0")
                }

                function a(t, r, i) {
                    function o(t) {
                        a && (a._resolveCallback(t), a = null)
                    }

                    function s(t) {
                        a && (a._rejectCallback(t, p, !0), a = null)
                    }
                    var a = new e(n),
                        l = a;
                    i && i._pushContext(), a._captureStackTrace(), i && i._popContext();
                    var p = !0,
                        h = c.tryCatch(r).call(t, o, s);
                    return p = !1, a && h === u && (a._rejectCallback(h.e, !0, !0), a = null), l
                }
                var c = t("./util"),
                    u = c.errorObj,
                    l = c.isObject,
                    p = {}.hasOwnProperty;
                return r
            }
        }, {
            "./util": 36
        }],
        34: [function(t, e, n) {
            "use strict";
            e.exports = function(e, n) {
                function r(t) {
                    var e = this;
                    return e instanceof Number && (e = +e), clearTimeout(e), t
                }

                function i(t) {
                    var e = this;
                    throw e instanceof Number && (e = +e), clearTimeout(e), t
                }
                var o = t("./util"),
                    s = e.TimeoutError,
                    a = function(t, e, n) {
                        if (t.isPending()) {
                            var r;
                            r = "string" != typeof e ? e instanceof Error ? e : new s("operation timed out") : new s(e), o.markAsOriginatingFromRejection(r), t._attachExtraTrace(r), t._reject(r), n.cancel()
                        }
                    },
                    c = function(t) {
                        return u(+this).thenReturn(t)
                    },
                    u = e.delay = function(t, r) {
                        var i;
                        return void 0 !== r ? i = e.resolve(r)._then(c, null, null, t, void 0) : (i = new e(n), setTimeout(function() {
                            i._fulfill()
                        }, +t)), i._setAsyncGuaranteed(), i
                    };
                e.prototype.delay = function(t) {
                    return u(t, this)
                }, e.prototype.timeout = function(t, e) {
                    t = +t;
                    var n = this.then(),
                        o = n.then(),
                        s = setTimeout(function() {
                            a(o, e, n)
                        }, t);
                    return o._then(r, i, void 0, s, void 0)
                }
            }
        }, {
            "./util": 36
        }],
        35: [function(t, e, n) {
            "use strict";
            e.exports = function(e, n, r, i, o, s) {
                function a(t) {
                    setTimeout(function() {
                        throw t
                    }, 0)
                }

                function c(t) {
                    var e = r(t);
                    return e !== t && "function" == typeof t._isDisposable && "function" == typeof t._getDisposer && t._isDisposable() && e._setDisposable(t._getDisposer()), e
                }

                function u(t, n) {
                    function i() {
                        if (s >= u) return l._fulfill();
                        var o = c(t[s++]);
                        if (o instanceof e && o._isDisposable()) {
                            try {
                                o = r(o._getDisposer().tryDispose(n), t.promise)
                            } catch (p) {
                                return a(p)
                            }
                            if (o instanceof e) return o._then(i, a, null, null, null)
                        }
                        i()
                    }
                    var s = 0,
                        u = t.length,
                        l = new e(o);
                    return i(), l
                }

                function l(t, e, n) {
                    this._data = t, this._promise = e, this._context = n
                }

                function p(t, e, n) {
                    this.constructor$(t, e, n)
                }

                function h(t) {
                    return l.isDisposer(t) ? (this.resources[this.index]._setDisposable(t), t.promise()) : t
                }

                function f(t) {
                    this.length = t, this.promise = null, this[t - 1] = null
                }
                var _ = t("./util"),
                    d = t("./errors").TypeError,
                    v = t("./util").inherits,
                    y = _.errorObj,
                    g = _.tryCatch;
                l.prototype.data = function() {
                    return this._data
                }, l.prototype.promise = function() {
                    return this._promise
                }, l.prototype.resource = function() {
                    return this.promise().isFulfilled() ? this.promise().value() : null
                }, l.prototype.tryDispose = function(t) {
                    var e = this.resource(),
                        n = this._context;
                    void 0 !== n && n._pushContext();
                    var r = null !== e ? this.doDispose(e, t) : null;
                    return void 0 !== n && n._popContext(), this._promise._unsetDisposable(), this._data = null, r
                }, l.isDisposer = function(t) {
                    return null != t && "function" == typeof t.resource && "function" == typeof t.tryDispose
                }, v(p, l), p.prototype.doDispose = function(t, e) {
                    var n = this.data();
                    return n.call(t, t, e)
                }, f.prototype._resultCancelled = function() {
                    for (var t = this.length, n = 0; t > n; ++n) {
                        var r = this[n];
                        r instanceof e && r.cancel()
                    }
                }, e.using = function() {
                    var t = arguments.length;
                    if (2 > t) return n("you must pass at least 2 arguments to Promise.using");
                    var i = arguments[t - 1];
                    if ("function" != typeof i) return n("expecting a function but got " + _.classString(i));
                    var o, a = !0;
                    2 === t && Array.isArray(arguments[0]) ? (o = arguments[0], t = o.length, a = !1) : (o = arguments, t--);
                    for (var c = new f(t), p = 0; t > p; ++p) {
                        var d = o[p];
                        if (l.isDisposer(d)) {
                            var v = d;
                            d = d.promise(), d._setDisposable(v)
                        } else {
                            var m = r(d);
                            m instanceof e && (d = m._then(h, null, null, {
                                resources: c,
                                index: p
                            }, void 0))
                        }
                        c[p] = d
                    }
                    for (var b = new Array(c.length), p = 0; p < b.length; ++p) b[p] = e.resolve(c[p]).reflect();
                    var w = e.all(b).then(function(t) {
                            for (var e = 0; e < t.length; ++e) {
                                var n = t[e];
                                if (n.isRejected()) return y.e = n.error(), y;
                                if (!n.isFulfilled()) return void w.cancel();
                                t[e] = n.value()
                            }
                            C._pushContext(), i = g(i);
                            var r = a ? i.apply(void 0, t) : i(t),
                                o = C._popContext();
                            return s.checkForgottenReturns(r, o, "Promise.using", C), r
                        }),
                        C = w.lastly(function() {
                            var t = new e.PromiseInspection(w);
                            return u(c, t)
                        });
                    return c.promise = C, C._setOnCancel(c), C
                }, e.prototype._setDisposable = function(t) {
                    this._bitField = 131072 | this._bitField, this._disposer = t
                }, e.prototype._isDisposable = function() {
                    return (131072 & this._bitField) > 0
                }, e.prototype._getDisposer = function() {
                    return this._disposer
                }, e.prototype._unsetDisposable = function() {
                    this._bitField = -131073 & this._bitField, this._disposer = void 0
                }, e.prototype.disposer = function(t) {
                    if ("function" == typeof t) return new p(t, this, i());
                    throw new d
                }
            }
        }, {
            "./errors": 12,
            "./util": 36
        }],
        36: [function(t, e, n) {
            "use strict";

            function r() {
                try {
                    var t = E;
                    return E = null, t.apply(this, arguments)
                } catch (e) {
                    return F.e = e, F
                }
            }

            function i(t) {
                return E = t, r
            }

            function o(t) {
                return null == t || t === !0 || t === !1 || "string" == typeof t || "number" == typeof t
            }

            function s(t) {
                return "function" == typeof t || "object" == typeof t && null !== t
            }

            function a(t) {
                return o(t) ? new Error(v(t)) : t
            }

            function c(t, e) {
                var n, r = t.length,
                    i = new Array(r + 1);
                for (n = 0; r > n; ++n) i[n] = t[n];
                return i[n] = e, i
            }

            function u(t, e, n) {
                if (!j.isES5) return {}.hasOwnProperty.call(t, e) ? t[e] : void 0;
                var r = Object.getOwnPropertyDescriptor(t, e);
                return null != r ? null == r.get && null == r.set ? r.value : n : void 0
            }

            function l(t, e, n) {
                if (o(t)) return t;
                var r = {
                    value: n,
                    configurable: !0,
                    enumerable: !1,
                    writable: !0
                };
                return j.defineProperty(t, e, r), t
            }

            function p(t) {
                throw t
            }

            function h(t) {
                try {
                    if ("function" == typeof t) {
                        var e = j.names(t.prototype),
                            n = j.isES5 && e.length > 1,
                            r = e.length > 0 && !(1 === e.length && "constructor" === e[0]),
                            i = R.test(t + "") && j.names(t).length > 0;
                        if (n || r || i) return !0
                    }
                    return !1
                } catch (o) {
                    return !1
                }
            }

            function f(t) {
                function e() {}
                e.prototype = t;
                for (var n = 8; n--;) new e;
                return t
            }

            function _(t) {
                return P.test(t)
            }

            function d(t, e, n) {
                for (var r = new Array(t), i = 0; t > i; ++i) r[i] = e + i + n;
                return r
            }

            function v(t) {
                try {
                    return t + ""
                } catch (e) {
                    return "[no string representation]"
                }
            }

            function y(t) {
                try {
                    l(t, "isOperational", !0)
                } catch (e) {}
            }

            function g(t) {
                return null == t ? !1 : t instanceof Error.__BluebirdErrorTypes__.OperationalError || t.isOperational === !0
            }

            function m(t) {
                return t instanceof Error && j.propertyIsWritable(t, "stack")
            }

            function b(t) {
                return {}.toString.call(t)
            }

            function w(t, e, n) {
                for (var r = j.names(t), i = 0; i < r.length; ++i) {
                    var o = r[i];
                    if (n(o)) try {
                        j.defineProperty(e, o, j.getDescriptor(t, o))
                    } catch (s) {}
                }
            }

            function C(t, e) {
                return D ? process.env[t] : e
            }
            var j = t("./es5"),
                k = "undefined" == typeof navigator,
                F = {
                    e: {}
                },
                E, x = function(t, e) {
                    function n() {
                        this.constructor = t, this.constructor$ = e;
                        for (var n in e.prototype) r.call(e.prototype, n) && "$" !== n.charAt(n.length - 1) && (this[n + "$"] = e.prototype[n])
                    }
                    var r = {}.hasOwnProperty;
                    return n.prototype = e.prototype, t.prototype = new n, t.prototype
                },
                T = function() {
                    var t = [Array.prototype, Object.prototype, Function.prototype],
                        e = function(e) {
                            for (var n = 0; n < t.length; ++n)
                                if (t[n] === e) return !0;
                            return !1
                        };
                    if (j.isES5) {
                        var n = Object.getOwnPropertyNames;
                        return function(t) {
                            for (var r = [], i = Object.create(null); null != t && !e(t);) {
                                var o;
                                try {
                                    o = n(t)
                                } catch (s) {
                                    return r
                                }
                                for (var a = 0; a < o.length; ++a) {
                                    var c = o[a];
                                    if (!i[c]) {
                                        i[c] = !0;
                                        var u = Object.getOwnPropertyDescriptor(t, c);
                                        null != u && null == u.get && null == u.set && r.push(c)
                                    }
                                }
                                t = j.getPrototypeOf(t)
                            }
                            return r
                        }
                    }
                    var r = {}.hasOwnProperty;
                    return function(n) {
                        if (e(n)) return [];
                        var i = [];
                        t: for (var o in n)
                            if (r.call(n, o)) i.push(o);
                            else {
                                for (var s = 0; s < t.length; ++s)
                                    if (r.call(t[s], o)) continue t;
                                i.push(o)
                            }
                        return i
                    }
                }(),
                R = /this\s*\.\s*\S+\s*=/,
                P = /^[a-z$_][a-z$_0-9]*$/i,
                O = function() {
                    return "stack" in new Error ? function(t) {
                        return m(t) ? t : new Error(v(t))
                    } : function(t) {
                        if (m(t)) return t;
                        try {
                            throw new Error(v(t))
                        } catch (e) {
                            return e
                        }
                    }
                }(),
                S = function(t) {
                    return j.isArray(t) ? t : null
                };
            if ("undefined" != typeof Symbol && Symbol.iterator) {
                var A = "function" == typeof Array.from ? function(t) {
                    return Array.from(t)
                } : function(t) {
                    for (var e, n = [], r = t[Symbol.iterator](); !(e = r.next()).done;) n.push(e.value);
                    return n
                };
                S = function(t) {
                    return j.isArray(t) ? t : null != t && "function" == typeof t[Symbol.iterator] ? A(t) : null
                }
            }
            var D = "undefined" != typeof process && "[object process]" === b(process).toLowerCase(),
                V = {
                    isClass: h,
                    isIdentifier: _,
                    inheritedDataKeys: T,
                    getDataPropertyOrDefault: u,
                    thrower: p,
                    isArray: j.isArray,
                    asArray: S,
                    notEnumerableProp: l,
                    isPrimitive: o,
                    isObject: s,
                    canEvaluate: k,
                    errorObj: F,
                    tryCatch: i,
                    inherits: x,
                    withAppended: c,
                    maybeWrapAsError: a,
                    toFastProperties: f,
                    filledRange: d,
                    toString: v,
                    canAttachTrace: m,
                    ensureErrorObject: O,
                    originatesFromRejection: g,
                    markAsOriginatingFromRejection: y,
                    classString: b,
                    copyDescriptors: w,
                    hasDevTools: "undefined" != typeof chrome && chrome && "function" == typeof chrome.loadTimes,
                    isNode: D,
                    env: C
                };
            V.isRecentNode = V.isNode && function() {
                var t = process.versions.node.split(".").map(Number);
                return 0 === t[0] && t[1] > 10 || t[0] > 0
            }(), V.isNode && V.toFastProperties(process);
            try {
                throw new Error
            } catch (I) {
                V.lastLineError = I
            }
            e.exports = V
        }, {
            "./es5": 13
        }]
    }, {}, [4])(4)
}), "undefined" != typeof window && null !== window ? window.P = window.Promise : "undefined" != typeof self && null !== self && (self.P = self.Promise);

function countUp(target, startVal, endVal, decimals, duration, options) {
    var lastTime = 0;
    var vendors = ["webkit", "moz", "ms"];
    for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
        window.requestAnimationFrame = window[vendors[x] + "RequestAnimationFrame"];
        window.cancelAnimationFrame = window[vendors[x] + "CancelAnimationFrame"] || window[vendors[x] + "CancelRequestAnimationFrame"]
    }
    if (!window.requestAnimationFrame) {
        window.requestAnimationFrame = function(callback, element) {
            var currTime = (new Date).getTime();
            var timeToCall = Math.max(0, 16 - (currTime - lastTime));
            var id = window.setTimeout(function() {
                callback(currTime + timeToCall)
            }, timeToCall);
            lastTime = currTime + timeToCall;
            return id
        }
    }
    if (!window.cancelAnimationFrame) {
        window.cancelAnimationFrame = function(id) {
            clearTimeout(id)
        }
    }
    this.options = options || {
        useEasing: true,
        useGrouping: true,
        separator: ",",
        decimal: "."
    };
    if (this.options.separator == "") this.options.useGrouping = false;
    var self = this;
    this.d = typeof target === "string" ? document.getElementById(target) : target;
    this.startVal = Number(startVal);
    this.endVal = Number(endVal);
    this.countDown = this.startVal > this.endVal ? true : false;
    this.startTime = null;
    this.timestamp = null;
    this.remaining = null;
    this.frameVal = this.startVal;
    this.rAF = null;
    this.decimals = Math.max(0, decimals || 0);
    this.dec = Math.pow(10, this.decimals);
    this.duration = duration * 1e3 || 2e3;
    this.version = function() {
        return "1.1.2"
    };
    this.easeOutExpo = function(t, b, c, d) {
        return c * (-Math.pow(2, -10 * t / d) + 1) * 1024 / 1023 + b
    };
    this.count = function(timestamp) {
        if (self.startTime === null) self.startTime = timestamp;
        self.timestamp = timestamp;
        var progress = timestamp - self.startTime;
        self.remaining = self.duration - progress;
        if (self.options.useEasing) {
            if (self.countDown) {
                var i = self.easeOutExpo(progress, 0, self.startVal - self.endVal, self.duration);
                self.frameVal = self.startVal - i
            } else {
                self.frameVal = self.easeOutExpo(progress, self.startVal, self.endVal - self.startVal, self.duration)
            }
        } else {
            if (self.countDown) {
                var i = (self.startVal - self.endVal) * (progress / self.duration);
                self.frameVal = self.startVal - i
            } else {
                self.frameVal = self.startVal + (self.endVal - self.startVal) * (progress / self.duration)
            }
        }
        self.frameVal = Math.round(self.frameVal * self.dec) / self.dec;
        if (self.countDown) {
            self.frameVal = self.frameVal < self.endVal ? self.endVal : self.frameVal
        } else {
            self.frameVal = self.frameVal > self.endVal ? self.endVal : self.frameVal
        }
        self.d.innerHTML = self.formatNumber(self.frameVal.toFixed(self.decimals));
        if (progress < self.duration) {
            self.rAF = requestAnimationFrame(self.count)
        } else {
            if (self.callback != null) self.callback()
        }
    };
    this.start = function(callback) {
        self.callback = callback;
        if (!isNaN(self.endVal) && !isNaN(self.startVal)) {
            self.rAF = requestAnimationFrame(self.count)
        } else {
            console.log("countUp error: startVal or endVal is not a number");
            self.d.innerHTML = "--"
        }
        return false
    };
    this.stop = function() {
        cancelAnimationFrame(self.rAF)
    };
    this.reset = function() {
        self.startTime = null;
        self.startVal = startVal;
        cancelAnimationFrame(self.rAF);
        self.d.innerHTML = self.formatNumber(self.startVal.toFixed(self.decimals))
    };
    this.resume = function() {
        self.startTime = null;
        self.duration = self.remaining;
        self.startVal = self.frameVal;
        requestAnimationFrame(self.count)
    };
    this.formatNumber = function(nStr) {
        nStr += "";
        if (this.options.fixedWidthFontFix && nStr.substr(-1, 1) === "1") nStr = nStr.substr(0, nStr.length - 1) + "2";
        var x, x1, x2, rgx;
        x = nStr.split(".");
        x1 = x[0];
        x2 = x.length > 1 ? self.options.decimal + x[1] : "";
        rgx = /(\d+)(\d{3})/;
        if (self.options.useGrouping) {
            while (rgx.test(x1)) {
                x1 = x1.replace(rgx, "$1" + self.options.separator + "$2")
            }
        }
        return x1 + x2
    };
    self.d.innerHTML = self.formatNumber(self.startVal.toFixed(self.decimals))
}! function(t, e, n) {
    function i(t) {
        return !t || "loaded" == t || "complete" == t || "uninitialized" == t
    }

    function r(t, n, r, o, s, l) {
        var c, u, d = e.createElement("script");
        o = o || p.errorTimeout, d.src = t;
        for (u in r) d.setAttribute(u, r[u]);
        n = l ? a : n || v, d.onreadystatechange = d.onload = function() {
            !c && i(d.readyState) && (c = 1, n(), d.onload = d.onreadystatechange = null)
        }, h(function() {
            c || (c = 1, n(1))
        }, o), M(), s ? d.onload() : f.parentNode.insertBefore(d, f)
    }

    function o(t, n, i, r, o, s) {
        var l, c = e.createElement("link");
        r = r || p.errorTimeout, n = s ? a : n || v, c.href = t, c.rel = "stylesheet", c.type = "text/css";
        for (l in i) c.setAttribute(l, i[l]);
        o || (M(), f.parentNode.insertBefore(c, f), h(n, 0))
    }

    function a() {
        var t = g.shift();
        y = 1, t ? t.t ? h(function() {
            ("c" == t.t ? p.injectCss : p.injectJs)(t.s, 0, t.a, t.x, t.e, 1)
        }, 0) : (t(), a()) : y = 0
    }

    function s(t, n, r, o, s, l, c) {
        function u(e) {
            if (!m && i(d.readyState) && (b.r = m = 1, !y && a(), e)) {
                "img" != t && h(function() {
                    x.removeChild(d)
                }, 50);
                for (var r in D[n]) D[n].hasOwnProperty(r) && D[n][r].onload();
                d.onload = d.onreadystatechange = null
            }
        }
        c = c || p.errorTimeout;
        var d = e.createElement(t),
            m = 0,
            v = 0,
            b = {
                t: r,
                s: n,
                e: s,
                a: l,
                x: c
            };
        1 === D[n] && (v = 1, D[n] = []), "object" == t ? (d.data = n, d.setAttribute("type", "text/css")) : (d.src = n, d.type = t), d.width = d.height = "0", d.onerror = d.onload = d.onreadystatechange = function() {
            u.call(this, v)
        }, g.splice(o, 0, b), "img" != t && (v || 2 === D[n] ? (M(), x.insertBefore(d, w ? null : f), h(u, c)) : D[n].push(d))
    }

    function l(t, e, n, i, r) {
        return y = 0, e = e || "j", _(t) ? s("c" == e ? E : k, t, e, this.i++, n, i, r) : (g.splice(this.i++, 0, t), 1 == g.length && a()), this
    }

    function c() {
        var t = p;
        return t.loader = {
            load: l,
            i: 0
        }, t
    }
    var u, p, d = e.documentElement,
        h = t.setTimeout,
        f = e.getElementsByTagName("script")[0],
        m = {}.toString,
        g = [],
        y = 0,
        v = function() {},
        b = "MozAppearance" in d.style,
        w = b && !!e.createRange().compareNode,
        x = w ? d : f.parentNode,
        T = t.opera && "[object Opera]" == m.call(t.opera),
        S = !!e.attachEvent && !T,
        P = "webkitAppearance" in d.style && !("async" in e.createElement("script")),
        k = b ? "object" : S || P ? "script" : "img",
        E = S ? "script" : P ? "img" : k,
        A = Array.isArray || function(t) {
            return "[object Array]" == m.call(t)
        },
        C = function(t) {
            return Object(t) === t
        },
        _ = function(t) {
            return "string" == typeof t
        },
        O = function(t) {
            return "[object Function]" == m.call(t)
        },
        M = function() {
            f && f.parentNode || (f = e.getElementsByTagName("script")[0])
        },
        $ = [],
        D = {},
        I = {
            timeout: function(t, e) {
                return e.length && (t.timeout = e[0]), t
            }
        };
    p = function(t) {
        function e(t) {
            var e, n, i, r = t.split("!"),
                o = $.length,
                a = r.pop(),
                s = r.length,
                l = {
                    url: a,
                    origUrl: a,
                    prefixes: r
                };
            for (n = 0; s > n; n++) i = r[n].split("="), e = I[i.shift()], e && (l = e(l, i));
            for (n = 0; o > n; n++) l = $[n](l);
            return l
        }

        function i(t) {
            var e = t.split("?")[0];
            return e.substr(e.lastIndexOf(".") + 1)
        }

        function r(t, r, o, a, s) {
            var l = e(t),
                u = l.autoCallback;
            i(l.url);
            if (!l.bypass) return r && (r = O(r) ? r : r[t] || r[a] || r[t.split("/").pop().split("?")[0]]), l.instead ? l.instead(t, r, o, a, s) : (D[l.url] && l.reexecute !== !0 ? l.noexec = !0 : D[l.url] = 1, t && o.load(l.url, l.forceCSS || !l.forceJS && "css" == i(l.url) ? "c" : n, l.noexec, l.attrs, l.timeout), (O(r) || O(u)) && o.load(function() {
                c(), r && r(l.origUrl, s, a), u && u(l.origUrl, s, a), D[l.url] = 2
            }), void 0)
        }

        function o(t, e) {
            function n(t, n) {
                if ("" === t || t) {
                    if (_(t)) n || (c = function() {
                        var t = [].slice.call(arguments);
                        u.apply(this, t), p()
                    }), r(t, c, e, 0, a);
                    else if (C(t)) {
                        i = function() {
                            var e, n = 0;
                            for (e in t) t.hasOwnProperty(e) && n++;
                            return n
                        }();
                        for (o in t) t.hasOwnProperty(o) && (n || --i || (O(c) ? c = function() {
                            var t = [].slice.call(arguments);
                            u.apply(this, t), p()
                        } : c[o] = function(t) {
                            return function() {
                                var e = [].slice.call(arguments);
                                t && t.apply(this, e), p()
                            }
                        }(u[o])), r(t[o], c, e, o, a))
                    }
                } else !n && p()
            }
            var i, o, a = !!t.test,
                s = a ? t.yep : t.nope,
                l = t.load || t.both,
                c = t.callback || v,
                u = c,
                p = t.complete || v;
            n(s, !!l || !!t.complete), l && n(l), !l && !!t.complete && n("")
        }
        var a, s, l = this.yepnope.loader;
        if (_(t)) r(t, 0, l, 0);
        else if (A(t))
            for (a = 0; a < t.length; a++) s = t[a], _(s) ? r(s, 0, l, 0) : A(s) ? p(s) : C(s) && o(s, l);
        else C(t) && o(t, l)
    }, p.addPrefix = function(t, e) {
        I[t] = e
    }, p.addFilter = function(t) {
        $.push(t)
    }, p.errorTimeout = 1e4, null == e.readyState && e.addEventListener && (e.readyState = "loading", e.addEventListener("DOMContentLoaded", u = function() {
        e.removeEventListener("DOMContentLoaded", u, 0), e.readyState = "complete"
    }, 0)), t.yepnope = c(), t.yepnope.executeStack = a, t.yepnope.injectJs = r, t.yepnope.injectCss = o
}(this, document), "function" != typeof Array.prototype.forEach && (Array.prototype.forEach = function(t) {
    for (var e = 0; e < this.length; e++) t.apply(this, [this[e], e, this])
}), "function" != typeof String.prototype.trim && (String.prototype.trim = function() {
    return this.replace(/^\s+|\s+$/g, "")
});
var aBootcompsLoaded = [];
window.AdobeEdge = window.AdobeEdge || {},
    function(t) {
        "use strict";

        function e(t) {
            return "[object Array]" === Object.prototype.toString.call(t)
        }

        function n(t) {
            return "function" == typeof t
        }

        function i(t) {
            return null !== t && t === t.window
        }

        function r(t) {
            return null != t && t.nodeType == t.DOCUMENT_NODE
        }

        function o(t) {
            return !isNaN(parseFloat(t)) && isFinite(t)
        }

        function a(t) {
            var n = t.length;
            return i(t) ? !1 : 1 === t.nodeType && n ? !0 : e(t) || "function" != typeof t && (0 === n || "number" == typeof n && n > 0 && n - 1 in t)
        }

        function s(t, e) {
            var n;
            for (n = 0; t && n < t.length; n++) e[e.length++] = t[n]
        }

        function l(t, n) {
            var i, r;
            if (e(t))
                for (r = t.length, i = 0; r > i; i++) n(i, t[i]);
            else
                for (i in t) t.hasOwnProperty(i) && n(i, t[i])
        }

        function c(t, e) {
            for (var n = [];
                (t = t[e]) && 9 !== t.nodeType;) 1 === t.nodeType && n.push(t);
            return n
        }

        function u(t) {
            var e, n;
            return Ot[t] || (e = document.createElement(t), document.body.appendChild(e), n = getComputedStyle(e, "").getPropertyValue("display"), e.parentNode.removeChild(e), "none" == n && (n = "block"), Ot[t] = n), Ot[t]
        }

        function p(t) {
            var e, n, i = mt.style;
            for (n = 0; n < t.length; n++)
                if (e = t[n], void 0 !== i[e]) return !0;
            return !1
        }

        function d() {
            mt.style.cssText = "background-color:rgba(150,255,150,.5)";
            var t = "" + mt.style.backgroundColor;
            return 0 == t.indexOf("rgba") ? !0 : !1
        }

        function h(t) {
            if (t = "" + t, !_t.rgba && 0 == t.indexOf("rgba")) {
                var e = t.lastIndexOf(",");
                e > 0 && (t = "rgb(" + t.substring(5, e) + ")")
            }
            return t
        }

        function f() {
            var t = document.createElement("audio"),
                e = {};
            return t.canPlayType && (e.m4a = !!t.canPlayType('audio/mp4; codecs="mp4a.40.2"').replace(/no/, ""), e.aac = e.m4a, e.mp3 = !!t.canPlayType("audio/mpeg;").replace(/no/, ""), e.wav = !!t.canPlayType('audio/wav; codecs="1"').replace(/no/, ""), e.ogg = !!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/, ""), e.oga = e.ogg), e
        }

        function m() {
            var t = document.createElement("video"),
                e = {};
            return t.canPlayType && (e.webm = !!t.canPlayType("video/webm").replace(/no/, ""), e.mp4 = !!t.canPlayType("video/mp4;").replace(/no/, ""), e.ogv = !!t.canPlayType('video/ogg; codecs="theora, vorbis"').replace(/no/, ""), e.ogg = !!t.canPlayType('video/ogg; codecs="theora, vorbis"').replace(/no/, "")), e
        }

        function g() {
            if (!window.CustomEvent) return !1;
            try {
                return void 0 !== new CustomEvent("testCustomEvent", !1, !1)
            } catch (t) {}
            return !1
        }

        function y() {
            return /Opera/.test(navigator.userAgent)
        }

        function v() {
            var t = navigator.userAgent,
                e = "webkitAppearance" in document.documentElement.style;
            return e && (/iPad/.test(t) || /iPod/.test(t) || /iPhone/.test(t))
        }

        function b(t, e, n, i) {
            if (AdobeEdge.isIOS) return void 0;
            var r, o;
            for (r = 0; r < e.length; r++)
                if (o = e[r].split("."), o = o[o.length - 1].toLowerCase(), AdobeEdge.supported[t][o]) {
                    var a = !1;
                    return a = null === i || "" == i ? "auto" == ("audio" == t ? n.opts.gAudioPreloadPreference : n.opts.gVideoPreloadPreference) : "auto" == i, a && j(t, n._getFullURL(e[r]), n), n._getFullURL(e[r])
                }
            return void 0
        }

        function w(t) {
            var e;
            return l(t, function(t, n) {
                null !== n && (e = !0)
            }), !e
        }

        function x(t, e) {
            return l(e, function(e, n) {
                t[e] = n
            }), t
        }

        function T(t) {
            var n = {};
            return n.num = parseFloat(t), n.units = String(t).match(/[a-zA-Z%]+$/), e(n.units) && (n.units = n.units[0]), n
        }

        function S(t) {
            return t.replace(/^-ms-/, "ms-").replace(/-([a-z]|[0-9])/gi, function(t, e) {
                return String(e).toUpperCase()
            })
        }

        function P(t) {
            var e = document.createElement("div"),
                n = (At.exec(t) || ["", ""])[1].toLowerCase(),
                i = Et[n] || Et._default;
            e.innerHTML = i[1] + t.replace(Ct, "<$1></$2>") + i[2];
            for (var r = i[0]; r--;) e = e.lastChild;
            return e
        }

        function k(t) {
            var e;
            if (AdobeEdge.Notifier.call(this), this.length = 0, !t) return this;
            if (t instanceof k) return t;
            if ("string" == typeof t) t = t.trim(), /^#([\w\-]+)$/.test(t) ? (e = gt.getElementById(t.substring(1)), e && (this[this.length++] = e)) : /<|&#?\w+;/.test(t) ? this[this.length++] = P(t) : s(gt.querySelectorAll(t), this);
            else {
                if (a(t)) return s(t, this);
                t.nodeType ? this[this.length++] = t : Pt.call(this, t)
            }
            return this
        }

        function E(t) {
            return new k(t)
        }

        function A(t) {
            return t.parent().hasClass("center-wrapper")
        }

        function C(t) {
            A(t) || t.wrap("<div class='flow-wrapper' style='width:1px'><div class='center-wrapper'></div></div>")
        }

        function _(t, e, n, i, r, o) {
            function a() {
                var r, a, s, l, c, u, p, d = A(t),
                    h = d ? t.parent().parent().parent() : t.parent(),
                    f = h.width(),
                    m = h.height(),
                    g = t.width(),
                    y = t.height(),
                    v = E(window).height(),
                    b = 1,
                    w = "0",
                    x = "0",
                    T = "body" === h[0].nodeName.toLowerCase();
                T && (m = v), o || (m = E(window).height(), f = E(window).width()), r = Math.round(f), a = Math.round(m), s = r / g, l = a / y, "both" === e ? b = Math.min(s, l) : "height" === e ? b = l : "width" === e && (b = s), void 0 !== i && (b = Math.min(b, i / g)), void 0 !== n && (b = Math.max(b, n / g)), u = w + " " + x, t.css("-o-transform-origin", u), t.css("-ms-transform-origin", u), t.css("-webkit-transform-origin", u), t.css("-moz-transform-origin", u), t.css("-o-transform-origin", u), t.css("transform-origin", u), c = "scale(" + b + ")", t.css("-o-transform", c), t.css("-ms-transform", c), t.css("-webkit-transform", c), t.css("-moz-transform", c), t.css("-o-transform", c), t.css("transform", c), (!T || d) && t.parent().height(Math.round(y * b)).width(Math.round(g * b)), d && (p = t.parent().parent(), p.height(Math.round(y * b + t.offset().top - p.offset().top)))
            }
            r ? E.data(t[0], "alreadyWrapped") || (E.data(t[0], "alreadyWrapped", !0), E(window).bind("resize", function() {
                a()
            }), et(function() {
                a()
            })) : A(t) || (C(t), E(window).bind("resize", function() {
                a()
            }), a())
        }

        function O(t, e) {
            var n = E(t);
            A(n) && (n = n.parent()), ("both" === e || "horizontal" === e) && (n.css("position", "absolute"), n.css("margin-left", "auto"), n.css("margin-right", "auto"), n.css("left", "0"), n.css("right", "0")), ("both" === e || "vertical" === e) && (n.css("position", "absolute"), n.css("margin-top", "auto"), n.css("margin-bottom", "auto"), n.css("top", "0"), n.css("bottom", "0"))
        }

        function M() {
            var t = this.notifier = {};
            t.obs = [], t.lvl = 0
        }

        function $(t, e, n) {
            if (e) {
                n || (n = {}), n.methodName = e;
                var i, r, o, a, s = t.notifier,
                    l = s.obs;
                for (s.lvl++, i = 0; i < l.length; i++) r = l[i], o = r && !r.deleted ? r.o : void 0, o && ("function" == typeof o ? o(e, t, n) : o[e] && o[e](t, n));
                if (s.lvl--, 0 === s.lvl)
                    for (a = l.length, i = a - 1; i >= 0; i--) l[i].deleted && l.splice(i, 1)
            }
        }

        function D(t, e, n) {
            return n ? t.setAttribute(e, n) : t.removeAttribute(e)
        }

        function I(t, e, n) {
            var i, r, o, a, s = n ? "" : " ",
                l = n ? "undefined" == typeof e || "string" == typeof e && e : "string" == typeof e && e,
                c = /\S+/g,
                u = /[\t\r\n\f]/g;
            l && (i = (e || "").match(c) || [], t.each(function(t, l) {
                if (r = 1 === l.nodeType && (l.className ? (" " + l.className + " ").replace(u, " ") : s)) {
                    for (a = 0; o = i[a++];)
                        if (n)
                            for (; r.indexOf(" " + o + " ") >= 0;) r = r.replace(" " + o + " ", " ");
                        else r.indexOf(" " + o + " ") < 0 && (r += o + " ");
                    n ? l.className = e ? r.trim() : "" : l.className = r.trim()
                }
            }))
        }

        function F(t, e) {
            var n, i = /^[\w-]*$/,
                o = "#" == e[0],
                a = !o && "." == e[0],
                s = o || a ? e.slice(1) : e,
                l = i.test(s);
            return r(t) && l && o ? (n = t.getElementById(s)) ? [n] : [] : 1 !== t.nodeType && 9 !== t.nodeType ? [] : Array.prototype.slice.call(l && !o ? a ? t.getElementsByClassName(s) : t.getElementsByTagName(e) : t.querySelectorAll(e))
        }

        function V(t, e) {
            e = e.replace(/=#\]/g, '="#"]');
            var n, i, r = It.exec(e);
            if (r && r[2] in Dt && (n = Dt[r[2]], i = r[3], e = r[1], i)) {
                var o = Number(i);
                i = isNaN(o) ? i.replace(/^["']|["']$/g, "") : o
            }
            if (!e) return !n || n.call(t, null, i) === t;
            if (!e || !t || 1 !== t.nodeType) return !1;
            var a = t.webkitMatchesSelector || t.mozMatchesSelector || t.oMatchesSelector || t.matchesSelector;
            if (a) return a.call(t, e);
            var r, s = t.parentNode,
                l = !s;
            return l && (s = tempParent).appendChild(t), r = ~F(s, e).indexOf(t), l && tempParent.removeChild(t), r
        }

        function N(t) {
            return t = E(t), !(!t.width() && !t.height()) && "none" !== t.css("display")
        }

        function L(t, e, i, r) {
            return n(e) ? e.call(t, i, r) : e
        }

        function j(t, e, n) {
            function i(t) {
                n._l[e] = null, w(n._l) && $(n, "assetsLoaded", {
                    inst: t.target
                })
            }
            if (!AdobeEdge.supported.addEventListener) return e;
            if (n && "string" == typeof e && !n._l[e]) switch (t) {
                case "image":
                    var r = new Image;
                    r.addEventListener("error", i), r.addEventListener("load", i), r.src = e, n._l[e] = r;
                    break;
                case "audio":
                    var o = new Audio;
                    o.addEventListener("error", i), o.addEventListener("canplaythrough", i), o.src = e, n._l[e] = o;
                    break;
                case "video":
                    var a = document.createElement("video");
                    a.addEventListener("error", i), a.addEventListener("canplaythrough", i), a.src = e, n._l[e] = a
            }
        }

        function R(t, e) {
            var n = x({
                name: t,
                conf: e,
                apply: function(t, e) {
                    1 === this.conf.a ? t.attr(this.name, e) : (1 === this.conf.cb && (t.css("-webkit-" + this.name, e), t.css("-ms-" + this.name, e), t.css("-moz-" + this.name, e), t.css("-o-" + this.name, e)), t.css(this.name, e))
                },
                units: function(t) {
                    var e;
                    return "auto" !== t && this.conf.u && ("string" == typeof t && (e = T(t)), e && e.units || (t += this.conf.u)), t
                },
                prep: function(t, e, n, i, r, o, a) {
                    var s;
                    return void 0 !== i && e[n] ? (void 0 === e[n][i] && o && (i = o), void 0 !== r && e[n][i] ? s = e[n][i][r] : (s = e[n][i], void 0 === s && (s = this.conf.d))) : s = e[n], void 0 !== s && (s = this.units(s), 1 === this.conf.p && j(e.type, a._getFullURL(s), a), this.conf.t && (s = this.conf.t.replace("@@0", s))), s
                },
                render: function(t, e, n) {
                    var i, r = this.conf.f || this.name;
                    void 0 === e[r] || void 0 !== this.conf.o && this.conf.o !== e.tag || void 0 !== this.conf.e && this.conf.e === e.tag || (i = this.prep(t, e, r, this.conf.i, this.conf.j, this.conf.ii, n), null !== i && void 0 !== i && this.apply(t, i, e, n))
                }
            }, R.prototype);
            return R.splitUnits = T, e.x && (n = x(n, e.x)), n
        }

        function z(t) {
            l(t, function(t, e) {
                vt[t] = new R(t, e)
            })
        }

        function Y(t, e, n, i, r, o, a, s) {
            var t, c = n.tag || "div",
                u = E(document.createElement(c)),
                p = u[0];
            if (AdobeEdge.$.data(p, "domDef", n), u.attr("id", n.id), u.css("position", "absolute"), u.css("margin", "0px"), e && n.symbolName && e._applyBaseStyles(u, n.symbolName), l(vt, function(e, i) {
                    i.render(u, n, t)
                }), u.css("-webkit-tap-highlight-color", "rgba(0, 0, 0, 0)"), e) {
                var d = e.ele ? e.ele.id : "";
                e.register(p, n, d)
            }
            u.addClass(u.attr("id") + "_id"), s || $(AdobeEdge, "beginEle", {
                sym: e,
                ele: p,
                defn: {
                    dom: n,
                    style: i
                }
            }), o && u.addClass(o);
            var h = document.getElementById(p.id);
            if (h) {
                var f = E(h).parent();
                f && f[0] == r && r.removeChild(h)
            }
            if (r.children && a >= 0 && a < r.children.length ? r.insertBefore(p, r.children[a]) : r.appendChild(p), AdobeEdge.$.data(p, "originalId", n.id), AdobeEdge.$.data(p, "symParent", e), e) {
                var m = p.style.webkitTransform;
                e.gpuAccelerate && p.style && ("undefined" == typeof m || "" === m || "none" === m) ? window.edge_authoring_mode && "BODY" === p.nodeName || (p.style.webkitTransform = "translateZ(0)") : !p.style.zIndex && window.edge_authoring_mode && (p.style.zIndex = 0)
            }
            return e && (s || $(e, "newEle", {
                ele: p,
                defn: n
            })), u
        }

        function X(t) {
            t.t && (t.t = t.t.toLowerCase(), t.type = t.t), t.cs && (t.className = t.cs);
            for (var e in Vt) null != t[e] && (t[Vt[e]] = t[e], t[e] = null);
            for (t.rect || (t.rect = []); t.rect.length < 4;) t.rect[t.rect.length] = 0;
            t.transform && (t.transform.length < 1 && (t.transform[0] = [0, 0, 0]), t.transform.length < 2 && (t.transform[1] = [0, 0, 0]), t.transform.length < 3 && (t.transform[2] = [0, 0, 0]), t.transform.length < 4 && (t.transform[3] = [1, 1, 1])), t.children && (t.c = t.children, l(t.children, function(t, e) {
                X(e)
            }))
        }

        function U(t, e, n, i, r, o, a) {
            (r || e || e.id) && (r = r || E("." + e.id)[0], l(n, function(n, s) {
                var l = Y(t, e, s, i, r, o, a++),
                    c = {
                        sym: e,
                        ele: l[0],
                        defn: s
                    };
                s.c && U(t, e, s.c, void 0, l[0], o, 0), $(AdobeEdge, "endEle", c)
            }))
        }

        function Z(t, e, n, i, r) {
            return M.call(this), n._s.push(this), x(this, {
                name: e,
                composition: n,
                data: t,
                prnt: i,
                tl: [],
                variables: r || {}
            }), $(n, "newSymbol", {
                symbol: this,
                parent: i
            }), this
        }

        function B(t) {
            return bt[t]
        }

        function H(t, e) {
            if (e && t.ci)
                for (var n = 0; n < t.ci.length; ++n) {
                    var i = t.ci[n];
                    i && H(i, e)
                }
            var r = t._getTimeline() ? t._getTimeline().getState() : {
                playing: void 0
            };
            void 0 == t.autoPlay || t.autoPlay ? void 0 == r.playing && t.play(0) : void 0 == r.playing && t.stop(-1, !1)
        }

        function W(t, e) {
            var n, i;
            for (n in e)
                if (e.hasOwnProperty(n)) {
                    var r = e[n];
                    if (r.typeName = n, r.v && (r.version = r.v), r.mv && (r.minimumCompatibleVersion = r.mv), r.b && (r.build = r.b), r.bS && (r.baseState = r.bS), r.iS && (r.initialState = r.iS), null != r.gpu && (r.gpuAccelerate = r.gpu), null != r.rI && (r.resizeInstances = r.rI), r.cn && (r.content = r.cn), r.content) {
                        var o = r.content;
                        if (null != o.sI && (o.symbolInstances = r.content.sI), o.symbolInstances)
                            for (var a = 0; a < o.symbolInstances.length; a++) {
                                var s = o.symbolInstances[a];
                                null != s.sN && (s.symbolName = s.sN), null != s.a && (s.autoPlay = s.a), null != s.x && (s.variables = s.x)
                            }
                    }
                    l(r.content.dom, function(t, e) {
                        X(e)
                    });
                    var c;
                    for (c in r.content.style) r.content.style.hasOwnProperty(c) && X(r.content.style[c]);
                    r.cg && (r.centerStage = r.cg), r.stf && (r.scaleToFit = r.stf), r.x && (r.variables = r.x), r.tt && (r.timeline = r.tt);
                    var u = r.timeline;
                    if (null != u) {
                        null != u.d && (u.duration = u.d), null != u.a && (u.autoPlay = u.a), u.l && (u.labels = u.l);
                        for (var i = 0; i < u.data.length; i++) u.data[i] && u.data[i][8] && u.data[i][8].vt && (u.data[i][8].valueTemplate = u.data[i][8].vt), u.data[i] && u.data[i][1] && "tr" === u.data[i][1] && (u.data[i][1] = Vt.tr)
                    }
                }
            t.sym = e
        }

        function q(e, n) {
            return M.call(this), this.$ = E, x(this, {
                id: e,
                opts: x(n || {}, wt),
                _urlRegExp: new RegExp("^(?:[a-z]+:)?//", "i"),
                _l: {},
                _d: {},
                _s: [],
                loaded: function(t, e, n) {
                    this._d[t] = null, w(this._d) && this.ready()
                },
                load: function(t, e) {
                    e || (this._d[t] = !0);
                    var n = this;
                    yepnope({
                        load: this._getFullURL(t),
                        callback: function(i, r, o) {
                            e ? e(t, r, o) : n.loaded(t, r, o)
                        }
                    })
                },
                define: function(t, e, n, i, r, o) {
                    W(this, e), this.fnt = n, this.res = r, this.fx = o, st(e), this.registerFonts(n);
                    var a = this;
                    i && i.length > 0 && i.forEach(function(t) {
                        a.load(t)
                    })
                },
                _getFullURL: function(t) {
                    return this._urlRegExp.test(t) ? t : (this.opts.htmlRoot || "") + t
                },
                definePreloader: function(t) {
                    this.preloaderDOM = t
                },
                defineDownLevelStage: function(t) {
                    this.downLevelStageDOM = t
                },
                getStage: function() {
                    return this.stage
                },
                registerFonts: function(e) {
                    if (e) {
                        var n, i, r, o, a, s, l, c, u, p, d, h, f;
                        t.fonts = t.fonts || {};
                        for (l in e)
                            if (e.hasOwnProperty(l) && !t.fonts[l] && (c = e[l], c && "" !== c)) {
                                a = !1;
                                for (u in t.fonts) t.fonts.hasOwnProperty(u) && t.fonts[u] === c && (a = !0);
                                if (!a)
                                    if (t.fonts[l] = c, n = c.indexOf("//use.typekit.com/"), 0 > n && (n = c.indexOf("//use.typekit.net/")), 0 > n && (n = c.indexOf("//use.edgefonts.net/"), s = n > 0, window._adobewebfontsappname_ = "Animate"), n > 0) i = c.indexOf('"', n + 1), i > 0 && (f = c.substring(n, i), s && "file:" === window.location.protocol && (f = "http:" + f), r = document.createElement("script"), r.src = this._getFullURL(f), r.type = "text/javascript", document.getElementsByTagName("head")[0].appendChild(r), s || (o = function() {
                                        try {
                                            window.Typekit.load()
                                        } catch (t) {
                                            window.setTimeout(o, 100)
                                        }
                                    }, window.setTimeout(o, 100)));
                                    else if (c.indexOf("<script") < 0 && c.indexOf("<link") < 0) E("head").append(document.createTextNode(c));
                                else if (c.indexOf("<script") < 0) E("head").append(c);
                                else if (p = c.indexOf(">"), d = c.indexOf("</script>"), p > 0 && d > 0) {
                                    h = c.substring(p + 1, d);
                                    try {
                                        window.eval(h)
                                    } catch (m) {}
                                }
                            }
                    }
                },
                getSymbols: function(t) {
                    if (!t) return this._s;
                    var e = [];
                    return l(this._s, function(n, i) {
                        i.name === t && e.push(i)
                    }), e
                },
                rC: function(t) {
                    return t
                },
                rR: function(t) {
                    this.stage && J(this.stage, t)
                },
                ready: function() {
                    var e = this;
                    AdobeEdge.ready(function() {
                        if (e.preloaderDOM && e.preloaderDOM.script) {
                            var i = e.preloaderDOM.script.loading,
                                r = new Function("e", i),
                                o = {
                                    event: "done",
                                    progress: 1,
                                    reason: "complete"
                                };
                            r(o)
                        }
                        yt.AdobeEdge && yt.AdobeEdge.bootstrapLoading && (n = n || {}, n.bootstrapLoading = !0), window.edge_authoring_mode || (n && n.framework$ && (t.$ = n.framework$), window.jQuery && (t.$ = window.jQuery)), AdobeEdge.addTouchSupport(), e.bindingFn && e.bindingFn(t.$);
                        var a, s = e.stage = new Z(e.sym, "stage", e),
                            l = "." + e.id,
                            c = E(l);
                        if (c[0] || (c = E("body").addClass(l)), s.init(c[0], "edgeLoad-" + e.id), s._applyBaseStyles(c, "stage"), c.css("position", "relative"), !window.edge_authoring_mode || n.sym) {
                            var u = s.data.stage;
                            if (!u || "height" !== u.scaleToFit && "width" !== u.scaleToFit && "both" !== u.scaleToFit || C(E(l)), !u || "vertical" !== u.centerStage && "horizontal" !== u.centerStage && "both" !== u.centerStage || O(s.ele, u.centerStage), "height" === u.scaleToFit || "width" === u.scaleToFit || "both" === u.scaleToFit) {
                                var p, d, h = u.content.style["${stage}"] || u.content.style["${Stage}"],
                                    f = /px|^0$/;
                                h && h.sizeRange && (p = h.sizeRange[0], p = f.test(p) ? parseInt(p, 10) : void 0, d = h.sizeRange[1], d = f.test(d) ? parseInt(d, 10) : void 0), _(s.$("stage"), u.scaleToFit, p, d, !0, e.opts.bScaleToParent)
                            }
                        }
                        a = function() {
                            if (e.launchCalled || e.opts.bootstrapLoading && !t.doPlayWhenReady) return void t.readyAndWaiting.push(a);
                            e.launchCalled = !0, E(".edgePreload-" + e.id).css("display", "none"), E(".edgeLoad-" + e.id).removeClass("edgeLoad-" + e.id), aBootcompsLoaded.push(e.id);
                            for (var n = window.AdobeEdge.bootstrapListeners.length, i = 0; n > i; i++) try {
                                window.AdobeEdge.bootstrapListeners[i](e.id)
                            } catch (r) {
                                console.log("bootstrap error " + r)
                            }
                            var o = E.Event("compositionReady");
                            o.compId = e.id, E(document).trigger(o), e.readyCalled = !0, window.edge_authoring_mode ? s.stopAll(0) : H(s, !0)
                        }, w(e._l) ? a() : e.addObserver({
                            assetsLoaded: function(t, e) {
                                a()
                            }
                        })
                    })
                },
                getCompId: function() {
                    return this.id
                }
            }), this
        }

        function G(t) {
            return l(bt, function(e, n) {
                t = Math.min(n.rC(t), t)
            }), t
        }

        function Q(t, e) {
            l(bt, function(n, i) {
                var r = i[e];
                r && r.call(i, t)
            })
        }

        function J(t, e) {
            if (t.ci)
                for (var n = 0; n < t.ci.length; ++n) {
                    var i = t.ci[n];
                    i && J(i, e)
                }
            t && t._getTimeline().tick(e)
        }

        function K() {
            var t, e = 17;
            ht || (t = yt.requestAnimationFrame || yt.webkitRequestAnimationFrame || yt.mozRequestAnimationFrame || yt.msRequestAnimationFrame || yt.oRequestAnimationFrame || function(t) {
                yt.setTimeout(t, e)
            }, ht = function() {
                var e = 0;
                e = G(e), Q(e, "rP"), Q(e, "rR"), Q(e, "rA"), t.call(yt, ht)
            }, t.call(yt, ht))
        }

        function tt(t) {
            t({
                event: "begin"
            })
        }

        function et(t) {
            if (ft || "complete" === gt.readyState) t();
            else if (gt.addEventListener) {
                var e = !1;
                gt.addEventListener("DOMContentLoaded", function(n) {
                    ft = !0, e || (t(), e = !0)
                }, !1), gt.onreadystatechange = function() {
                    "complete" == document.readyState && (ft = !0), gt.onreadystatechange = null, e || (t(), e = !0)
                }
            } else gt.attachEvent && gt.attachEvent("onreadystatechange", function(e) {
                ft = !0, t(e)
            })
        }

        function nt(t, e, n, i, r, o) {
            var a = bt[t];
            a.define(o, e, n, i, r)
        }

        function it(t) {
            return t && "string" == typeof t && (t.indexOf("%") > 0 || t.indexOf("em") > 0 || "auto" === t || "null" === t) ? !1 : !0
        }

        function rt(t) {
            if (!t) return 0;
            if ("number" == typeof t) return t;
            var e = t.indexOf("px").val;
            return e > 0 ? (val = t.substring(0, e), parseFloat(val)) : parseFloat(t)
        }

        function ot(t) {
            var e, n, i, r, o = {},
                a = {},
                s = {},
                l = {};
            if (t.timeline)
                for (i = t.timeline, e = 0; e < i.data.length; e++) r = i.data[e], r && ("left" == r[1] || "top" == r[1]) && it(r[7]) && (l[r[5]] = !0);
            if (t.content && t.content.dom && at(t.content.dom, s, l, o, a), t.timeline)
                for (i = t.timeline, e = 0; e < i.data.length; e++) r = i.data[e], r && ("left" == r[1] || "top" == r[1]) && it(r[7]) && s[r[5]] && ("left" === r[1] ? n = "translateX" : "top" === r[1] && (n = "translateY"), r[1] = n)
        }

        function at(t, e, n, i, r) {
            var o, a, s;
            for (o = 0; o < t.length; o++) a = t[o], s = "${" + a.id + "}", n[s] && (e[s] = !0, a.rect || (a.rect = a.r, a.r = void 0, a.rect || (a.rect = [0, 0, 0, 0])), a.rect && (a.transform || (a.transform = a.tf, a.tf = void 0, a.transform || (a.transform = [])), a.transform[0] || (a.transform[0] = [0, 0]), it(a.rect[0]) && (a.transform[0][0] = rt(a.rect[0]), i[s] = a.transform[0][0], a.rect[0] = "0px"), it(a.rect[1]) && (a.transform[0][1] = rt(a.rect[1]), r[s] = a.transform[0][1], a.rect[1] = "0px"))), a.children ? at(a.children, e, n, i, r) : a.c && at(a.c, e, n, i, r)
        }

        function st(t) {
            if (!window.edge_authoring_mode)
                for (var e in t) t.hasOwnProperty(e) && ot(t[e])
        }

        function lt(t, e) {
            bt[t].bindingFn = e
        }

        function ct(t, e, n, i, r) {
            function o(t, e) {
                var i = /px|^0$/,
                    r = e.scaleToFit,
                    o = e.centerStage,
                    a = e.minW,
                    s = e.maxW,
                    l = e.width,
                    c = e.height,
                    u = t || document.getElementsByTagName("body")[0];
                "absolute" != u.style.position && "relative" != u.style.position && (u.style.position = "relative"), c && (u.style.height = c), l && (u.style.width = l), /^height$|^width$|^both$/.test(r) && (a = i.test(a) ? parseInt(a, 10) : void 0, s = i.test(s) ? parseInt(s, 10) : void 0, _(E(u), r, a, s, !1, n.bScaleToParent)), /^vertical$|^horizontal$|^both$/.test(o) && O(u, o)
            }

            function a(t, i) {
                et(function() {
                    var r = E("." + e);
                    o(r[0], n), t && U(bt[e], null, t.dom, t.style, r[0], i + e), r.removeClass("edgeLoad-" + e)
                })
            }

            function s() {
                tt(function t(e) {
                    if (e ? t && setTimeout(t, 20) : e = {
                            event: "loading",
                            progress: 0
                        }, c.preloaderDOM.script) {
                        var n = c.preloaderDOM.script.loading,
                            i = new Function("e", n);
                        i(e)
                    }
                }), a(c.preloaderDOM, "edgePreload-")
            }

            function l() {
                a(c.downLevelStageDOM, "edgeDownLevel-")
            }
            var c = bt[e] = AdobeEdge.compositions[e] = new q(e, n);
            $(AdobeEdge, "newComp", {
                comp: c
            }), dt ? (window.edge_authoring_mode || (i ? (c.definePreloader(i), s()) : c.load(t + "_edgePreload.js", s)), t && (n && n.bootstrapLoading ? Tt.push(t) : window.edge_authoring_mode && n.sym ? c.load(t + "_edge.js?symbol=" + n.sym) : c.load(t + "_edge.js"))) : window.edge_authoring_mode || (r ? (c.defineDownLevelStage(r), l()) : c.load(t + "_edgePreload.js", l))
        }

        function ut(t) {
            AdobeEdge.getCurrentComposition().registerFonts(t)
        }

        function pt() {
            t.doPlayWhenReady = !0;
            for (var e = 0; e < t.readyAndWaiting.length; e++) t.readyAndWaiting[e]()
        }
        var dt, ht, ft, mt, gt = document,
            yt = window,
            vt = {},
            bt = {},
            wt = {
                imagesDir: "images/"
            },
            xt = Array.prototype.forEach,
            Tt = [],
            St = [],
            Pt = St.push,
            kt = {},
            Et = {
                option: [1, "<select multiple='multiple'>", "</select>"],
                thead: [1, "<table>", "</table>"],
                col: [2, "<table><colgroup>", "</colgroup></table>"],
                tr: [2, "<table><tbody>", "</tbody></table>"],
                td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
                _default: [1, "", ""]
            },
            At = /<([\w:]+)/,
            Ct = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
            _t = {},
            Ot = {};
        t.doPlayWhenReady = !1, t.readyAndWaiting = [];
        var Mt = {
                columnCount: !0,
                fillOpacity: !0,
                fontWeight: !0,
                lineHeight: !0,
                opacity: !0,
                order: !0,
                orphans: !0,
                widows: !0,
                zIndex: !0,
                zoom: !0
            },
            $t = {
                letterSpacing: 0,
                fontWeight: 400
            };
        mt = document.createElement("div"), dt = p(["transformProperty", "WebkitTransform", "MozTransform", "OTransform", "msTransform"]), E.each = l, E.extend = x, E.data = function(t, e, n) {
            var i = "an_" + e;
            return arguments.length > 2 && (t[i] = n), t[i]
        }, x(M.prototype, {
            addObserver: function(t) {
                if (t) {
                    var e, n, i = this.notifier,
                        r = i.obs;
                    for (e = r.length, n = 0; e > n; n++)
                        if (r[n].o === t) return;
                    r[e] = {
                        o: t
                    }
                }
            },
            removeObserver: function(t) {
                if (t) {
                    var e, n = this.notifier,
                        i = n.obs;
                    for (e = 0; e < i.length; e++)
                        if (i[e].o === t) {
                            if (0 === n.lvl) {
                                i.splice(e, 1);
                                break
                            }
                            i[e].deleted = !0
                        }
                }
            },
            notifyObservers: function(t, e) {
                return $(this, t, e)
            },
            removeObservers: function() {
                var t = this.notifier ? this.notifier.obs : null;
                t && t.splice(0, t.length)
            }
        }), k.expr = {};
        var Dt = k.expr[":"] = {
                visible: function() {
                    return N(this) ? this : void 0
                },
                hidden: function() {
                    return N(this) ? void 0 : this
                },
                selected: function() {
                    return this.selected ? this : void 0
                },
                checked: function() {
                    return this.checked ? this : void 0
                },
                parent: function() {
                    return this.parentNode
                },
                first: function(t) {
                    return 0 === t ? this : void 0
                },
                last: function(t, e) {
                    return t === e.length - 1 ? this : void 0
                },
                eq: function(t, e, n) {
                    return t === n ? this : void 0
                },
                has: function(t, e, n) {
                    return F(this, n).length ? this : void 0
                }
            },
            It = new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),
            Ft = {
                tabindex: "tabIndex",
                readonly: "readOnly",
                "for": "htmlFor",
                "class": "className",
                maxlength: "maxLength",
                cellspacing: "cellSpacing",
                cellpadding: "cellPadding",
                rowspan: "rowSpan",
                colspan: "colSpan",
                usemap: "useMap",
                frameborder: "frameBorder",
                contenteditable: "contentEditable"
            };
        x(k.prototype, {
            css: function(t, n) {
                if (this.length < 1) return void 0;
                if ("string" == typeof t) {
                    var i, r = S(t);
                    if (arguments.length > 1) {
                        for (o(n) && !Mt[r] && (n += "px"), i = 0; i < this.length; i++) this[i].style[r] = n;
                        return this
                    }
                    var a = yt.getComputedStyle ? yt.getComputedStyle(this[0])[r] || this[0].style[r] : this[0].style[r];
                    return "normal" === a && r in $t && (a = $t[r]), a
                }
                if (e(t)) {
                    var s = {},
                        l = this[0];
                    return E.each(e(t) ? t : [t], function(t, e) {
                        var n = S(e);
                        s[e] = l.style[n] || yt.computedStyle.getPropertyValue(l)[n]
                    }), s
                }
                for (var c in t) this.css(c, t[c]);
                return this
            },
            prop: function(t, e) {
                return t = Ft[t] || t, 1 in arguments ? this.each(function(n, i) {
                    this[t] = L(this, e, i, this[t])
                }) : this[0] && this[0][t]
            },
            addClass: function(t) {
                return I(this, t), this
            },
            removeClass: function(t) {
                return I(this, t, !0), this
            },
            hasClass: function(t) {
                for (var e = " " + t + " ", n = 0, i = this.length, r = /[\t\r\n\f]/g; i > n; n++)
                    if (1 === this[n].nodeType && (" " + this[n].className + " ").replace(r, " ").indexOf(e) >= 0) return !0;
                return !1
            },
            attr: function(t, e) {
                return "string" == typeof t && this.length ? void 0 === e ? this[0].getAttribute(t) : (this.each(function(n, i) {
                    D(this, t, e)
                }), this) : null
            },
            removeAttr: function(t) {
                return "string" == typeof t && this.length ? (this.each(function(e, n) {
                    n.removeAttribute(t)
                }), this) : null
            },
            each: function(t) {
                var e = function(e, n) {
                    t.call(e, n, e)
                };
                return xt.call(this, e), this
            },
            get: function(t) {
                return this.length && t < this.length ? this[t] : void 0
            },
            _s: function(t, e) {
                return this.length ? void 0 === t ? this[0][e] : (this.each(function(n, i) {
                    this[e] = t
                }), this) : void 0
            },
            parent: function() {
                var t = this[0].parentNode;
                return t && 11 !== t.nodeType ? E(t) : null
            },
            parents: function() {
                return c(this[0], "parentNode")
            },
            text: function(t) {
                return this._s(t, "textContent")
            },
            html: function(t) {
                return this._s(t, "innerHTML")
            },
            show: function() {
                return this.each(function() {
                    "none" == this.style.display && (this.style.display = ""), "none" == getComputedStyle(this, "").getPropertyValue("display") && (this.style.display = u(this.nodeName))
                })
            },
            hide: function() {
                return this.css("display", "none")
            },
            wrap: function(t) {
                var e = n(t);
                if (this[0] && !e) var i = E(t).get(0),
                    r = i.parentNode || this.length > 1;
                return this.each(function(n) {
                    E(this).wrapAll(e ? t.call(this, n) : r ? i.cloneNode(!0) : i)
                })
            },
            wrapAll: function(t) {
                if (this[0]) {
                    for (this[0].parentElement.insertBefore(t, this[0]); t.firstElementChild;) t = t.firstElementChild;
                    E(t).append(this)
                }
                return this
            },
            dimension: function(t) {
                var e, n = this[0],
                    i = t[0] ? t[0].toUpperCase() + t.substr(1) : "";
                if (n === n.window) return n.document.documentElement["client" + i];
                if (9 === n.nodeType) return Math.max(n.body["scroll" + i], gt["scroll" + i], n.body["offset" + i], gt["offset" + i], gt["client" + i]);
                var r = this.css(t) || "";
                return "auto" == r || (r = T(r), r.units && "px" != r.units) ? (e = n.getBoundingClientRect(), "width" === t ? Math.round(e.width) : "height" === t ? Math.round(e.height) : void 0) : r.num
            },
            width: function(t) {
                return void 0 != t ? this.css("width", t) : this.dimension("width")
            },
            height: function(t) {
                return void 0 != t ? this.css("height", t) : this.dimension("height")
            },
            offset: function() {
                if (!this.length) return null;
                var t = this[0].getBoundingClientRect();
                return {
                    left: t.left + window.pageXOffset,
                    top: t.top + window.pageYOffset,
                    width: Math.round(t.width),
                    height: Math.round(t.height)
                }
            },
            is: function(t) {
                return this.length > 0 && V(this[0], t)
            }
        }), z({
            opacity: {},
            left: {
                f: "rect",
                i: 0,
                u: "px"
            },
            top: {
                f: "rect",
                i: 1,
                u: "px"
            },
            width: {
                f: "rect",
                i: 2,
                u: "px"
            },
            height: {
                f: "rect",
                i: 3,
                u: "px"
            },
            right: {
                f: "rect",
                i: 4,
                u: "px"
            },
            bottom: {
                f: "rect",
                i: 5,
                u: "px"
            },
            src: {
                o: "img",
                f: "fill",
                i: 1,
                a: 1,
                p: 1,
                x: {
                    apply: function(t, e, n, i) {
                        e = i ? i._getFullURL(e) : e, t.attr("src", e)
                    }
                }
            },
            poster: {
                f: "poster",
                o: "video",
                a: 1
            },
            preload: {
                f: "preload",
                a: 1
            },
            medsrc: {
                e: "img",
                f: "source",
                a: 1,
                x: {
                    apply: function(t, e, n, i) {
                        var r = b(n.type, e, i, n.preload);
                        if (E.isArray(e) && 1 != e.length)
                            for (var o = 0; o < e.length; o++) {
                                var a = document.createElement("source");
                                E(a).attr("src", i._getFullURL(e[o])), t.get(0).appendChild(a)
                            } else r ? t.attr("src", r) : t.attr("src", E.isArray(e) ? i._getFullURL(e[0]) : i._getFullURL(e));
                        "audio" == n.tag && t.attr("controls", "block" == n.display)
                    }
                }
            },
            "background-image": {
                e: "img",
                f: "fill",
                i: 1,
                t: "url(@@0)",
                p: 1,
                x: {
                    prep: function(t, e, n, i, r, o, a) {
                        var s;
                        return e[n] && (s = e[n][i]), void 0 !== s && (s = a._getFullURL(s), j(e.type, s, a), s = this.conf.t.replace("@@0", s)), s
                    }
                }
            },
            "background-color": {
                f: "fill",
                i: 0,
                x: {
                    apply: function(t, e) {
                        t.css("background-color", h(e))
                    }
                }
            },
            text: {
                x: {
                    apply: function(t, e) {
                        t.html(e)
                    }
                }
            },
            "min-width": {
                f: "sizeRange",
                i: 0
            },
            "max-width": {
                f: "sizeRange",
                i: 1
            },
            "min-height": {
                f: "sizeRange",
                i: 2
            },
            "max-height": {
                f: "sizeRange",
                i: 3
            },
            overflow: {
                x: {
                    apply: function(t, e) {
                        t.css("overflow", e), ("hidden" === e || "scroll" === e) && t.css("text-overflow", "clip")
                    }
                }
            },
            "background-repeat": {
                e: "img",
                f: "fill",
                x: {
                    apply: function(t, e) {
                        e && 1 != e.length && (E.isArray(e[1]) || t.css("background-repeat", e[6] || "no-repeat"))
                    }
                }
            },
            "background-attachment": {
                f: "fill",
                i: 7,
                x: {
                    apply: function(t, e) {
                        "scroll" !== e && t.css("background-attachment", e)
                    }
                }
            },
            "background-size": {
                f: "fill",
                i: 4,
                d: "100% 100%"
            },
            autoOrient: {
                x: {
                    apply: function(t, e) {
                        AdobeEdge.$.data(t[0], "doAutoOrient", e)
                    }
                }
            },
            clip: {},
            display: {},
            "border-top-left-radius": {
                f: "borderRadius",
                i: 0
            },
            "border-top-right-radius": {
                f: "borderRadius",
                i: 1,
                ii: 0
            },
            "border-bottom-right-radius": {
                f: "borderRadius",
                i: 2,
                ii: 0
            },
            "border-bottom-left-radius": {
                f: "borderRadius",
                i: 3,
                ii: 0
            },
            "border-width": {
                f: "stroke",
                i: 0,
                d: 0,
                u: "px"
            },
            "border-color": {
                f: "stroke",
                i: 1,
                d: "rgba(0,0,0,0)"
            },
            "border-style": {
                f: "stroke",
                i: 2,
                d: "none"
            },
            cursor: {
                f: "cursor"
            },
            "transform-origin": {
                cb: 1,
                f: "transform",
                i: 4,
                x: {
                    prep: function(t, e, n, i, r, o) {
                        return e.transform && void 0 != e.transform[4] ? 1 == e.transform[4].length ? e.transform[4][0] + " 50%" : e.transform[4][0] + " " + e.transform[4][1] : void 0
                    }
                }
            },
            "font-family": {
                f: "font",
                i: 0
            },
            "font-size": {
                f: "font",
                i: 1,
                u: "px",
                x: {
                    prep: function(t, e, n, i, r, o, a) {
                        if ("text" == e.type) {
                            var i = this.conf.i,
                                r = 0,
                                s = this.conf.f,
                                l = e[s][i][r],
                                c = e[s][i][r + 1];
                            return c && "" != c || (c = this.conf.u), l + c
                        }
                    }
                }
            },
            "font-weight": {
                f: "font",
                i: 3
            },
            "letter-spacing": {
                f: "textStyle",
                i: 0
            },
            "word-spacing": {
                f: "textStyle",
                i: 1
            },
            "line-height": {
                f: "textStyle",
                i: 2
            },
            "text-indent": {
                f: "textStyle",
                i: 3
            },
            "text-transform": {
                f: "textStyle",
                i: 4
            },
            color: {
                f: "font",
                i: 2,
                x: {
                    apply: function(t, e) {
                        t.css("color", h(e))
                    }
                }
            },
            "text-decoration": {
                f: "font",
                i: 4
            },
            "font-style": {
                f: "font",
                i: 5
            },
            "word-wrap": {
                f: "font",
                i: 6
            },
            "text-align": {
                f: "align"
            },
            "white-space": {
                f: "rect",
                x: {
                    prep: function(t, e) {
                        return e.font ? e.font.length > 7 ? e.font[7] : e.rect : void 0
                    },
                    apply: function(t, e) {
                        E.isArray(e) ? (!e[2] || e[2] <= 0 || "auto" == e[2]) && (!e[3] || e[3] <= 0 || "auto" == e[3]) && (t.css("white-space", "nowrap"), t.css("wordWrap", "break-word")) : (t.css("white-space", e), "nowrap" == e && t.css("wordWrap", "break-word"))
                    }
                }
            },
            volume: {
                f: "volume",
                x: {
                    apply: function(t, e) {
                        t.get(0).volume = e
                    }
                }
            },
            className: {
                f: "uc",
                x: {
                    apply: function(t, e) {
                        t.addClass(e)
                    }
                }
            },
            controls: {
                a: 1
            },
            alt: {
                a: 1
            },
            title: {
                a: 1
            },
            tabindex: {
                a: 1
            },
            autoplay: {
                a: 1
            },
            loop: {
                a: 1
            },
            linkURL: {
                f: "linkURL",
                a: 1,
                x: {
                    prep: function(t, e) {
                        kt[t[0].id] = e, t[0].onclick = function() {
                            var t = kt[this.id];
                            t.linkTarget ? window.open(t.linkURL, t.linkTarget) : window.location.href = t.linkURL
                        }, t[0].style.cursor = "pointer"
                    }
                }
            }
        });
        var Vt = {
            c: "children",
            r: "rect",
            zr: "sizeRange",
            br: "borderRadius",
            cl: "clip",
            al: "alt",
            tt: "title",
            ti: "tabindex",
            cn: "controls",
            sr: "source",
            ps: "poster",
            pr: "preload",
            cu: "cursor",
            ap: "autoplay",
            lp: "loop",
            n: "font",
            tf: "transform",
            sh: "boxShadow",
            ts: "textStyle",
            o: "opacity",
            uc: "userClass",
            s: "stroke",
            f: "fill",
            v: "display",
            fi: "filter",
            sN: "symbolName",
            tr: "trigger"
        };
        x(Z.prototype, M.prototype), x(Z.prototype, {
            init: function(t, e) {
                var n = this.data[this.name];
                n && U(this.composition, this, n.content.dom, n.content.style, t, e)
            },
            register: function(t, e) {},
            play: function(t) {}
        }), x(q.prototype, M.prototype), q._playAuto = H, K(), _t.cssTransform = p(["transformProperty", "WebkitTransform", "MozTransform", "OTransform", "msTransform"]), _t.cssTransform3d = p(["perspectiveProperty", "WebkitPerspective", "MozPerspective", "OPerspective", "msPerspective"]), _t.audio = f(), _t.video = m(), _t.customEvent = g(), _t.addEventListener = void 0 !== window.addEventListener, _t.rgba = d(), x(t, {
            version: "5.0.0",
            Composition: q,
            defaultOpt: wt,
            $: E,
            An$: k,
            renderDOM: U,
            ready: et,
            camelize: S,
            splitUnits: T,
            loadComposition: ct,
            registerCompositionDefn: nt,
            registerEventBinding: lt,
            getComposition: B,
            defineProps: z,
            props: vt,
            Symbol: Z,
            Notifier: M,
            isSupported: p,
            supported: _t,
            isIOS: v(),
            isOpera: y(),
            registerFonts: ut,
            playWhenReady: pt,
            _: {
                c: bt,
                P: R,
                p: vt,
                rE: Y,
                nO: $,
                nDN: X
            }
        }), x(t, M.prototype), M.call(t)
    }(window.AdobeEdge), window.AdobeEdge.bootstrapListeners || (window.AdobeEdge.bootstrapListeners = []), window.AdobeEdge.bootstrapCallback = function(t) {
        if (window.AdobeEdge.bootstrapListeners.push(t), aBootcompsLoaded.length > 0)
            for (var e = 0; e < aBootcompsLoaded.length; e++) t(aBootcompsLoaded[e])
    }, window.AdobeEdge.compositions || (window.AdobeEdge.compositions = []), window.AdobeEdge.yepnope = window.yepnope,
    function(t) {
        "use strict";

        function e() {
            t.Notifier.call(this), this.animationID = "animID-" + e.nextID, e.nextID += 1
        }

        function n(e, n, i) {
            t.Animation.call(this), "function" == typeof e ? this.handler = e : "string" == typeof e && (this.eventType = e), this.handlerContext = i, this.data = n, this.isTrigger = !0
        }

        function i(e, n, r, o, a) {
            t.Notifier.call(this), this.animation = e, this.position = 0, this.duration = -1, this.opts = {}, s.extend(this.opts, a), "function" == typeof o ? this.easing = o : this.easing = o && s.easing[o] ? o : i.defaultEasing, void 0 !== n && (this.position = n), void 0 !== r && (this.duration = r), this.timeline = null, this.dScale = 1, this.dDuration = 0, this.done = !1
        }

        function r(e) {
            t.Animation.call(this), s.extend(this, t.Timeline.config), s.extend(this, e), this.timer = 0, this.timerStart = 0, this.startPosition = 0, this.currentPosition = -1, this.playing = void 0, this.duration = 0, this.iteration = 0, this.interval = 1e3 / this.fps, this.objects = []
        }

        function o(t) {
            var e, n = t.objects,
                i = n.length;
            for (e = 0; i > e; e += 1) n[e].done = !1;
            t.tick()
        }

        function a(t) {
            return d.test(t[1])
        }
        var s = t.$,
            l = {},
            c = {},
            u = "style",
            p = {
                dropFrames: !0,
                fps: 60,
                pauseThreshold: 250
            },
            d = /^(trigger|@)$/;
        s.isArray = function(t) {
            return "[object Array]" === Object.prototype.toString.call(t)
        }, s.easing = s.easing || {}, s.extend(s.easing, {
            linear: function(t, e, n, i) {
                return n + i * t
            },
            swing: function(t, e, n, i) {
                return (-Math.cos(t * Math.PI) / 2 + .5) * i + n
            }
        }), e.nextID = 1, s.extend(e.prototype, t.Notifier.prototype), s.extend(e.prototype, {
            constructor: e,
            setup: function() {},
            update: function(t, e) {},
            getDuration: function() {
                return 0
            }
        }), s.extend(n.prototype, e.prototype), s.extend(n.prototype, {
            constructor: n,
            update: function(t) {
                this.fired || (this.fired = !0, this.handler ? this.handler.call(this.handlerContext, t, this.data) : this.eventType && this.timeline && this.timeline.notifyObservers(this.eventType, {
                    elapsed: t,
                    data: this.data
                }))
            },
            setup: function(t, e) {
                var n = void 0 === t.executeTriggers || null === t.executeTriggers;
                t.startingFromCurrent && n || !n && !t.executeTriggers ? this.fired = "reverse" !== t.playDirection ? t.currentPosition >= e : t.currentPosition <= e : this.fired = "reverse" !== t.playDirection ? t.currentPosition > e : t.currentPosition < e, this.timeline = t
            }
        }), i.defaultEasing = "linear", s.extend(i.prototype, t.Notifier.prototype), s.extend(i.prototype, {
            constructor: i,
            setup: function(t) {
                this.timeline = t;
                var e = this.duration,
                    n = null;
                this.animation && this.animation.getDuration && (n = this.animation.getDuration()), this.dScale = -1 !== e && 0 !== e ? n / e : 1, this.dDuration = -1 !== e ? e : n, this.done = !1, this.animation && this.animation.setup && this.animation.setup(t, this.position)
            },
            update: function(t) {
                if (!this.done) {
                    var e, n, i = t,
                        r = this.dDuration;
                    this.animation && (0 === r ? e = i >= 0 ? 1 : 0 : (i >= r && (i = r), 0 >= i && (i = 0), e = s.easing[this.easing](i / r, i, 0, 1, r)), this.animation.update(i * this.dScale, e)), n = "reverse" === this.timeline.playDirection ? 0 >= i : i >= r, n && this.complete()
                }
            },
            complete: function() {
                this.done = !0, this.timeline && this.timeline.updateComplete(this)
            },
            getPosition: function() {
                return this.position
            },
            setPosition: function(t) {
                this.position = t
            },
            getDuration: function() {
                return -1 !== this.duration ? this.duration : this.animation && this.animation.getDuration ? this.animation.getDuration() : 0
            },
            setDuration: function(t) {
                this.duration = t >= 0 ? t : -1
            }
        }), r.config = p, r.prototype.tick = function(t) {
            this._handleTimer(t)
        }, s.extend(r.prototype, e.prototype), s.extend(r.prototype, {
            constructor: r,
            play: function(t) {
                return t = t || {}, this.notifyObservers("play"), this.playing = !0, this._stop({}), ("undefined" == typeof t.pos || null === t.pos) && ("reverse" == t.playDirection ? (t.pos = this.currentPosition, t.pos <= 0 && (t.pos = this.getDuration())) : (this.currentPosition < 0 || this.currentPosition >= this.getDuration()) && (t.pos = 0)), s.extend(this, t), this.seek(t.pos, t), this.iteration = 0, this.timerStart = (new Date).getTime(), this.startPosition = this.currentPosition, this.lastUpdateTime = this.timerStart, this.firstUpdate = !0, this._handleTimer(), this.firstUpdate = !1, this
            },
            stop: function(t) {
                this.playing = !1, t && t.bSeek ? this.seek(t.pos, t) : this._stop(t)
            },
            seek: function(t, e) {
                this.notifyObservers("seek"), this.sort(e);
                var n = this.currentPosition;
                return this._stop(e), s.extend(this, e), void 0 !== t && (this.currentPosition = t), "number" == typeof t && n !== this.currentPosition ? this.startingFromCurrent = !1 : this.startingFromCurrent = !0, this.setup(this), this.firstUpdate = !0, this.updateSeek(this.currentPosition, 1, n), this.firstUpdate = !1, this
            },
            add: function(t, e, n, r, o) {
                var a = new i(t, e, n, r, o);
                this.objects.push(a), this.sorted = !1
            },
            sort: function(t) {
                var e = {
                    width: 1,
                    height: 2,
                    "-webkit-transform-origin": 3,
                    "transform-origin": 4,
                    "-moz-transform-origin": 5,
                    "-ms-transform-origin": 6,
                    left: 7,
                    top: 8,
                    bottom: 9,
                    right: 10,
                    motion: 11
                };
                this.sorted || (this.objects.sort(function(t, n) {
                    var i = t.animation,
                        r = n.animation;
                    if (!i && !r) return t.position - n.position;
                    if (!i) return -1;
                    if (!r) return 1;
                    if (!i.property && !r.property) return t.position - n.position;
                    if (!i.property) return -1;
                    if (!r.property) return 1;
                    var o = e[i.property],
                        a = e[r.property];
                    return i.sourceElements !== r.sourceElements ? i.sourceElements > r.sourceElements ? 1 : -1 : o && (!a || o > a) ? 1 : a && (!o || a > o) ? -1 : t.position - n.position
                }), this.sorted = !0);
                for (var n = 1; n < this.objects.length; n++) {
                    var i = this.objects[n - 1],
                        r = this.objects[n];
                    i.animation && r.animation && i.animation.property === r.animation.property && i.animation.sourceElements === r.animation.sourceElements ? (i.animation._nextObj = r.animation, r.animation._prevObj = i.animation) : (i.animation && (i.animation._nextObj = null), r.animation && (r.animation._prevObj = null))
                }
            },
            getDuration: function() {
                var t, e, n = this.duration,
                    i = this.objects,
                    r = this.objects.length,
                    o = Math.max;
                for (t = 0; r > t; t += 1) e = i[t], n = o(n, e.position + e.getDuration());
                return n
            },
            getCurrentPosition: function() {
                return this.currentPosition
            },
            update: function(t, e) {
                this.sort(), this.notifyObservers("preUpdate", {
                    elapsed: t,
                    easingConst: e
                });
                var n, i, r, o, a, s, l, c, u, p = this.objects,
                    d = this.triggers,
                    h = p.length,
                    f = d.length,
                    m = "reverse" !== this.playDirection,
                    g = !1,
                    y = !0,
                    v = !window.edge_authoring_mode && this.executeTriggers,
                    b = !window.edge_authoring_mode && (void 0 === this.executeTriggers || null === this.executeTriggers);
                for (this.currentDirection = m ? "forward" : "reverse", a = 0; f > a; a += 1)
                    if (s = d[m ? a : f - a - 1], l = s.animation.isTrigger && !(this.startingFromCurrent && this.firstUpdate), (b && l || v || !this.firstUpdate) && !s.animation.fired && (m ? t >= s.position : t <= s.position + s.duration)) {
                        for (c = this.currentPosition = s.position, u = this.getState(), n = 0; h > n; n += 1) i = p[m ? n : h - n - 1], o = m && !i.opts.reverseOnly || !m && !i.opts.forwardOnly, o && !i.animation.isTrigger && (m ? c >= i.position : c <= i.position + i.duration) && (r = c - i.position, r || i.duration || m || (r -= 1), i.update(r));
                        if (g = !0, s.animation.update(c), !this.equalState(u)) {
                            y = !1;
                            break
                        }
                    }
                if (!g)
                    for (n = 0; h > n; n += 1) i = p[m ? n : h - n - 1], o = m && !i.opts.reverseOnly || !m && !i.opts.forwardOnly, o && !i.animation.isTrigger && (m ? t >= i.position : t <= i.position + i.duration) && (r = t - i.position, r || i.duration || m || (r -= 1), i.update(r));
                return this.notifyObservers("fxUpdate", {
                    elapsed: t
                }), this.notifyObservers("postUpdate", {
                    elapsed: t,
                    easingConst: e
                }), this.notifyObservers("update", {
                    elapsed: t,
                    easingConst: e
                }), y
            },
            setLoop: function(t) {
                this.loopCount = t
            },
            getState: function() {
                return {
                    pos: this.currentPosition,
                    dir: this.playDirection,
                    playing: this.playing
                }
            },
            equalState: function(t) {
                var e = !!t.playing,
                    n = !!this.playing;
                return t.pos === this.currentPosition && t.dir === this.playDirection && e === n
            },
            _handleTimer: function(t) {
                t = t || (new Date).getTime();
                var e, n, i = "reverse" === this.playDirection,
                    r = i ? this.startPosition : this.duration - this.startPosition,
                    a = t - this.timerStart - this.iteration * r,
                    s = this.startPosition + (i ? -a : a);
                if (t - this.lastUpdateTime > this.pauseThreshold && (this.timerStart += t - this.lastUpdateTime + this.interval, a = t - this.timerStart), !this.playing) return void this.notifyObservers("fxUpdate", {
                    elapsed: a
                });
                if (s = Math.max(0, Math.min(s, this.duration)), this.currentPosition = s, e = this.update(s, 1), this.lastUpdateTime = t, i = "reverse" === this.playDirection, n = i ? this.currentPosition > 0 : this.currentPosition < this.duration, !n) {
                    if (this.loopCount && (this.iteration += 1, this.notifyObservers("iterationComplete", {
                            elapsed: a,
                            count: this.iteration
                        }), "forever" === this.loopCount || this.iteration < this.loopCount)) return void o(this);
                    this.stop(), this.notifyObservers("complete", {
                        elapsed: a
                    })
                }
            },
            setup: function(e) {
                t.Animation.prototype.setup.call(this, e), this.triggers = [];
                var n, i, r = this.objects,
                    o = this.objects.length;
                for (n = 0; o > n; n += 1) i = r[n], i.done = !1, i.setup(this), i.animation.isTrigger && this.triggers.push(i);
                this.duration = this.getDuration()
            },
            updateComplete: function(t) {
                t.done = !0
            },
            _stop: function(t) {
                var e = t ? t.dontNotify : !1;
                return e || this.notifyObservers("stop"), this.timer && clearTimeout(this.timer), this.timer = 0, this.timerStart = 0, this
            }
        }), r.prototype.updateSeek = r.prototype.update, t.Animation = e, t.TimelineObject = i, t.Timeline = r, t.Timeline.createTimeline = function(e) {
            return new t.Timeline(e)
        }, t.Timeline.createTween = function(t) {
            var e = l[t];
            return e ? e.func.apply(e.context, Array.prototype.slice.call(arguments, 1)) : null
        }, t.Timeline.addTweenType = function(t, e, n) {
            l[t] = {
                func: e,
                context: n
            }
        }, t.Timeline.addTweenProperty = function(t, e) {
            c[t] = e
        }, t.Timeline.getTweenType = function(t) {
            return c[t] || u
        }, t.Timeline.createTrigger = function(t, e) {
            var i = arguments[arguments.length - 1];
            return new n(t, e, i)
        }, t.Timeline.isTrigger = a, t.Timeline.isTween = function(t) {
            return !a(t)
        }, t.Timeline.createTL = function(e, n, i) {
            var r, o, s, l, p, d, h, f = t.Timeline.createTimeline(),
                m = e.length,
                g = e.duration ? e.duration : 0;
            for (f.duration = g, i && i.loop && f.setLoop(i.loop), r = 0; m > r; r += 1) o = e[r], s = null, g = -1, a(o) ? (p = o.slice(3, 5), p.push(n), s = t.Timeline.createTrigger.apply(null, p), d = o[5], h = "none") : o[1] && (l = c[o[1]] || u, p = [l, o[1]].concat(o.slice(5)), s = t.Timeline.createTween.apply(null, p), g = o[3], h = o[4], d = o[8]), s && (s.id = o[0], f.add(s, o[2], g, h, d));
            return f
        }
    }(window.AdobeEdge),
    function(t) {
        "use strict";
        var e = t.$,
            n = e;
        e.easing.jswing = e.easing.swing, e.extend(n.easing, {
            def: "easeOutQuad",
            swing: function(t, e, i, r, o) {
                return n.easing[n.easing.def](t, e, i, r, o)
            },
            easeInQuad: function(t, e, n, i, r) {
                return i * (e /= r) * e + n
            },
            easeOutQuad: function(t, e, n, i, r) {
                return -i * (e /= r) * (e - 2) + n
            },
            easeInOutQuad: function(t, e, n, i, r) {
                return (e /= r / 2) < 1 ? i / 2 * e * e + n : -i / 2 * (--e * (e - 2) - 1) + n
            },
            easeInCubic: function(t, e, n, i, r) {
                return i * (e /= r) * e * e + n
            },
            easeOutCubic: function(t, e, n, i, r) {
                return i * ((e = e / r - 1) * e * e + 1) + n
            },
            easeInOutCubic: function(t, e, n, i, r) {
                return (e /= r / 2) < 1 ? i / 2 * e * e * e + n : i / 2 * ((e -= 2) * e * e + 2) + n
            },
            easeInQuart: function(t, e, n, i, r) {
                return i * (e /= r) * e * e * e + n
            },
            easeOutQuart: function(t, e, n, i, r) {
                return -i * ((e = e / r - 1) * e * e * e - 1) + n
            },
            easeInOutQuart: function(t, e, n, i, r) {
                return (e /= r / 2) < 1 ? i / 2 * e * e * e * e + n : -i / 2 * ((e -= 2) * e * e * e - 2) + n
            },
            easeInQuint: function(t, e, n, i, r) {
                return i * (e /= r) * e * e * e * e + n
            },
            easeOutQuint: function(t, e, n, i, r) {
                return i * ((e = e / r - 1) * e * e * e * e + 1) + n
            },
            easeInOutQuint: function(t, e, n, i, r) {
                return (e /= r / 2) < 1 ? i / 2 * e * e * e * e * e + n : i / 2 * ((e -= 2) * e * e * e * e + 2) + n
            },
            easeInSine: function(t, e, n, i, r) {
                return -i * Math.cos(e / r * (Math.PI / 2)) + i + n
            },
            easeOutSine: function(t, e, n, i, r) {
                return i * Math.sin(e / r * (Math.PI / 2)) + n
            },
            easeInOutSine: function(t, e, n, i, r) {
                return -i / 2 * (Math.cos(Math.PI * e / r) - 1) + n
            },
            easeInExpo: function(t, e, n, i, r) {
                return 0 == e ? n : i * Math.pow(2, 10 * (e / r - 1)) + n
            },
            easeOutExpo: function(t, e, n, i, r) {
                return e == r ? n + i : i * (-Math.pow(2, -10 * e / r) + 1) + n
            },
            easeInOutExpo: function(t, e, n, i, r) {
                return 0 == e ? n : e == r ? n + i : (e /= r / 2) < 1 ? i / 2 * Math.pow(2, 10 * (e - 1)) + n : i / 2 * (-Math.pow(2, -10 * --e) + 2) + n
            },
            easeInCirc: function(t, e, n, i, r) {
                return -i * (Math.sqrt(1 - (e /= r) * e) - 1) + n
            },
            easeOutCirc: function(t, e, n, i, r) {
                return i * Math.sqrt(1 - (e = e / r - 1) * e) + n
            },
            easeInOutCirc: function(t, e, n, i, r) {
                return (e /= r / 2) < 1 ? -i / 2 * (Math.sqrt(1 - e * e) - 1) + n : i / 2 * (Math.sqrt(1 - (e -= 2) * e) + 1) + n
            },
            easeInElastic: function(t, e, n, i, r) {
                var o = 1.70158,
                    a = 0,
                    s = i;
                if (0 == e) return n;
                if (1 == (e /= r)) return n + i;
                if (a || (a = .3 * r), s < Math.abs(i)) {
                    s = i;
                    var o = a / 4
                } else var o = a / (2 * Math.PI) * Math.asin(i / s);
                return -(s * Math.pow(2, 10 * (e -= 1)) * Math.sin((e * r - o) * (2 * Math.PI) / a)) + n
            },
            easeOutElastic: function(t, e, n, i, r) {
                var o = 1.70158,
                    a = 0,
                    s = i;
                if (0 == e) return n;
                if (1 == (e /= r)) return n + i;
                if (a || (a = .3 * r), s < Math.abs(i)) {
                    s = i;
                    var o = a / 4
                } else var o = a / (2 * Math.PI) * Math.asin(i / s);
                return s * Math.pow(2, -10 * e) * Math.sin((e * r - o) * (2 * Math.PI) / a) + i + n
            },
            easeInOutElastic: function(t, e, n, i, r) {
                var o = 1.70158,
                    a = 0,
                    s = i;
                if (0 == e) return n;
                if (2 == (e /= r / 2)) return n + i;
                if (a || (a = r * (.3 * 1.5)), s < Math.abs(i)) {
                    s = i;
                    var o = a / 4
                } else var o = a / (2 * Math.PI) * Math.asin(i / s);
                return 1 > e ? -.5 * (s * Math.pow(2, 10 * (e -= 1)) * Math.sin((e * r - o) * (2 * Math.PI) / a)) + n : s * Math.pow(2, -10 * (e -= 1)) * Math.sin((e * r - o) * (2 * Math.PI) / a) * .5 + i + n
            },
            easeInBack: function(t, e, n, i, r, o) {
                return void 0 == o && (o = 1.70158), i * (e /= r) * e * ((o + 1) * e - o) + n
            },
            easeOutBack: function(t, e, n, i, r, o) {
                return void 0 == o && (o = 1.70158), i * ((e = e / r - 1) * e * ((o + 1) * e + o) + 1) + n
            },
            easeInOutBack: function(t, e, n, i, r, o) {
                return void 0 == o && (o = 1.70158), (e /= r / 2) < 1 ? i / 2 * (e * e * (((o *= 1.525) + 1) * e - o)) + n : i / 2 * ((e -= 2) * e * (((o *= 1.525) + 1) * e + o) + 2) + n
            },
            easeInBounce: function(t, e, i, r, o) {
                return r - n.easing.easeOutBounce(t, o - e, 0, r, o) + i
            },
            easeOutBounce: function(t, e, n, i, r) {
                return (e /= r) < 1 / 2.75 ? i * (7.5625 * e * e) + n : 2 / 2.75 > e ? i * (7.5625 * (e -= 1.5 / 2.75) * e + .75) + n : 2.5 / 2.75 > e ? i * (7.5625 * (e -= 2.25 / 2.75) * e + .9375) + n : i * (7.5625 * (e -= 2.625 / 2.75) * e + .984375) + n
            },
            easeInOutBounce: function(t, e, i, r, o) {
                return o / 2 > e ? .5 * n.easing.easeInBounce(t, 2 * e, 0, r, o) + i : .5 * n.easing.easeOutBounce(t, 2 * e - o, 0, r, o) + .5 * r + i
            }
        })
    }(window.AdobeEdge),
    function(t) {
        "use strict";

        function e(t, e) {
            return e ? e + "_" + t : t + "_" + P++
        }

        function n(t, n, i) {
            var r = e(n, i);
            return t._variables[n] = "#" + r, r
        }

        function i(t) {
            return t.length && (t = t[0]), t ? t.edgeSymbol : null
        }

        function r(t, e) {
            t.length && (t = t[0]), t && (t.edgeSymbol = e)
        }

        function o(e, n, i) {
            var r, o = e.composition;
            i.userClass && n.addClass(i.userClass), t.$.data(n[0], "defn", i), i.symbolName && (r = new x(o.sym, i.symbolName, o, e), r.init(n[0]), e.ci = e.ci || [], e.ci.push(r), r.prnt = e)
        }

        function a(t) {
            var e, n, i, r, o = t.length;
            if (w.isArray(t))
                for (e = [], i = 0; o > i; i++) n = t[i], e[i] = null != n && "object" == typeof n ? a(n) : n;
            else {
                e = {};
                for (r in t) t.hasOwnProperty(r) && "prototype" !== r && (n = t[r], e[r] = null != n && "object" == typeof n ? a(n) : n)
            }
            return e
        }

        function s(t) {
            var e = t.data[t.name];
            return e.timeline ? e.timeline.data : null
        }

        function l(t) {
            var e = t.data[t.name];
            return e.timeline ? e.timeline.duration : 0
        }

        function c(t) {
            return t.data[t.name].timeline
        }

        function u(e, n, i) {
            function r(t, e) {
                for (o = 0; o < t.length; o += 1) {
                    if (t[o].id === e) return t[o];
                    if (t[o].children) return r(t[o].children, e)
                }
                return null
            }
            var o, a, s, l = n.replace(/[\{\}\$]/g, ""),
                c = e.data[e.name],
                u = c.content ? c.content.dom : null;
            return u && (a = r(u, l), a && (s = t.props[i])) ? s.prep(null, a, i, s.i, s.j) : null
        }

        function p(t, e, n, i, r) {
            var o = ["generated", "location", i, r, "linear", t, [
                [e.x, e.y, 0, 0],
                [n.x, n.y, 0, 0]
            ]];
            return o
        }

        function d(e, n) {
            var i, r;
            n && (e.tlCached = void 0);
            var o = s(e);
            if (!o) return null;
            if (o.duration = l(e), o.dirty && e.tlCached && (i = e.tlCached.currentPosition, r = e.tlCached.notifier.obs, e.tlCached = void 0), !e.tlCached) {
                var a, d, h, f, m, g, y, v, b, w, x, P, k, E, A, C = c(e),
                    _ = {},
                    O = {},
                    M = o.duration,
                    $ = e.data[e.name];
                for (h = o.length, x = o.length - 1; x >= 0; x--) "injected" === o[x][0] && o.splice(x, 1);
                for (h = o.length, "number" != typeof $.timeline.duration && ($.timeline.duration = 0), w = 0; h > w; w++) m = o[w], m && S(m) && (g = m[5], _[g] || (_[g] = []), _[g].push(m), f = g + ":" + ("motion" === m[1] ? "location" : m[1]), O[f] || (O[f] = []), O[f].push(m)), m && S(m) && (y = m[3] || 0, M = Math.max(M, m[2] + y));
                b = Math.max($.timeline.duration, M), P = function(t, e) {
                    return t[2] - e[2]
                };
                for (f in O) O.hasOwnProperty(f) && O[f].sort(P);
                for (f in O) O.hasOwnProperty(f) && (m = O[f][0], m[2] > 0 && (d = u(e, m[5], m[1]), null == d && (d = m[6]), "location" === m[1] ? (m = O[f][0], E = {
                    x: m[6][0][0],
                    y: m[6][0][1]
                }, a = p(m[5], E, E, 0, Math.max(0, m[2] - 1)), a[0] = "injected", o.push(a)) : void 0 !== d && (m = t.cloneJSONObject(O[f][0]), m[6] = m[7] = d, m[3] = m[2], m[2] = 0, m[0] = "injected", m[8] && "" != m[8].valueTemplate && "string" == typeof d && (m[8].valueTemplate = ""), o.push(m))), v = O[f].length - 1, v >= 0 && (m = O[f][v], k = m[2] + m[3], M > k && ("location" === m[1] ? (A = m[6].length - 1, E = {
                    x: m[6][A][0],
                    y: m[6][A][1]
                }, a = p(m[5], E, E, k, b - k), a[0] = "injected", o.push(a)) : (a = t.cloneJSONObject(O[f][v]), a[6] = m[7], a[2] = b, a[3] = 0, a[0] = "injected", a[8] = a[8] || {}, a[8].reverseOnly = !0, o.push(a)))));
                b > M && (m = ["injected", "-an_resting", M, b - M, "linear", "${stage}", "0", "100"], o.push(m)), e.tlCached = T.createTL(o, e, {
                    loop: C.loop
                }), o.dirty && (e.tlCached.currentPosition = i, e.tlCached.notifier.obs = r || e.tlCached.notifier.obs), e.tlCached.sort()
            }
        }

        function h(t, e) {
            if ("string" == typeof e) {
                var n = t.data ? t.data[t.name] : 0,
                    i = n ? n.timeline : 0;
                return i && i.labels ? i.labels[e] : 0
            }
            return e
        }

        function f(t, e, n) {
            var i = {
                Symbol: t,
                element: t.ele,
                performDefaultAction: !0
            };
            return w.extend(i, n), i
        }

        function m(e, n) {
            var i = /^\$\{/;
            return i.test(n) ? (n = n.replace(i, ""), n = n.replace(/\}/, ""), e.find$(n)) : t.$(n)
        }

        function g(e, n, i) {
            var r;
            if (n && n[0])
                for (r in t._.p)
                    if (t._.p.hasOwnProperty(r)) {
                        if ("width" == r || "height" == r) {
                            var o = n[0].style[r];
                            if (null != o && "" != o && "auto" != o) continue
                        }
                        t._.p[r].render(n, i, e.composition)
                    }
        }

        function y(e, n) {
            var i, r, o;
            for (r in n)
                if ("${symbolSelector}" != r && n.hasOwnProperty(r) && (i = m(e, r)))
                    for (o in t._.p) t._.p.hasOwnProperty(o) && t._.p[o].render(i, n[r], e.composition)
        }

        function v(e) {
            var n, i, r = e;
            return "string" == typeof e && -1 !== e.search(/\$\{/) && (n = e.search(/\$\{/), i = e.search(/\}/), r = e.slice(n + 2, i), "string" == typeof r && (r = t.trimString(r), r = r.replace(/["']/g, ""))), r
        }

        function b(t, e) {
            for (var n, i = t; e && "string" == typeof i && -1 !== i.search(/\$\{/);) n = v(i), i = void 0 === e[n] ? void 0 : i.replace(/\$\{[^\}]*\}/, e[n]);
            return i
        }
        var w = window.jQuery ? window.jQuery : t.$,
            x = t.Symbol,
            T = t.Timeline,
            S = T.isTween,
            P = (T.isTrigger, 0);
        x._makeUniqueID = e, t.symbol = x, x.get = x.getSymbol = i, x.setSymbol = r, t.addObserver({
            newComp: function(t, e) {
                e.comp.addObserver({
                    newSymbol: function(t, e) {
                        e.symbol.addObserver({
                            newEle: function(t, e) {
                                o(t, w(e.ele), e.defn)
                            }
                        })
                    }
                })
            }
        }), t.cloneJSONObject = a, x.bldTL = d, x.p2n = h, t.trimString = function(t) {
            return t.replace(/^\s+|\s+$/g, "")
        }, x.parseVariableName = v, x.substituteVariables = b, w.extend(x.prototype, {
            init: function(n, i) {
                var o, a, s = this.data[this.name],
                    l = w(n),
                    c = l[0].id;
                this.gpuAccelerate = s.gpuAccelerate, "undefined" == typeof this.gpuAccelerate && (this.gpuAccelerate = !0), this.gpuAccelerate = this.gpuAccelerate && t.supported.cssTransform3d, this.variables = this.variables || {}, this._variables = this._variables || {}, n = n || w("." + i)[0], this.autoPlay = s.timeline ? s.timeline.autoPlay : !1, r(n, this), this.ele = n, n && (c && "" !== c || (c = e("stage"), l[0].id = c), a = "#" + c, this._variables[c] = this._variables.stage = a, this._variables.symbolStage = a, this._variables.symbolSelector = a, l.css("position", "absolute"), l.css("z-index", "0")), s && (t.renderDOM(this.composition, this, s.content.dom, s.content.style, n, i), y(this, s.content.style)), o = f(this, "creationComplete"), this.notifyObservers("creationComplete", o)
            },
            lookupSelector: function(t) {
                if ("string" != typeof t) return void 0;
                try {
                    return b("${" + t + "}", this._variables)
                } catch (e) {}
            },
            getSymbolTypeName: function() {
                return this.name
            },
            getComposition: function() {
                return this.composition
            },
            find$: function(e) {
                var n, r, o, a = e.split(" "),
                    s = this._variables[a[0]];
                return a.length < 2 || !s ? s ? t.$(s) : null : (n = t.$(s), n && n.length ? (a.splice(0, 1), r = a.join(" "), o = i(n), o ? o.find$(r) : void 0) : null)
            },
            $: function(e) {
                var n = e;
                if ("string" == typeof e) try {
                    -1 === e.search(/\$\{/) ? (n = this.lookupSelector(e), "undefined" == typeof n && (n = e)) : n = b(e, this._variables)
                } catch (i) {}
                return void 0 === n && (n = v(e)), t.$(n)
            },
            register: function(t, e, i) {
                var r = n(this, e.id, i);
                e.oldId = e.id, t.id = r
            },
            seek: function(t, e) {
                d(this), this.tlCached.seek(t, e)
            },
            play: function(t, e, n) {
                if (d(this), this.tlCached) {
                    t = h(this, t);
                    var i = {
                        pos: t,
                        variables: this._variables,
                        executeTriggers: e,
                        playDirection: n
                    };
                    this.tlCached.play(i)
                }
            },
            stop: function(t, e) {
                if (d(this), this.tlCached) {
                    t = h(this, t);
                    var n = {
                        pos: t,
                        variables: this._variables,
                        executeTriggers: e,
                        bSeek: void 0 != t
                    };
                    this.tlCached.stop(n)
                }
            },
            playReverse: function(t, e) {
                this.play(t, e, "reverse")
            },
            isPlaying: function() {
                var t = this._getTimeline();
                return t && !!t.playing
            },
            isPlayDirectionReverse: function() {
                var t = this._getTimeline();
                return t && "reverse" === t.currentDirection ? !0 : !1
            },
            getTimelinePosition: function() {
                return this.getPosition()
            },
            getPosition: function() {
                return d(this), this.tlCached ? this.tlCached.getCurrentPosition() : 0
            },
            getDuration: function() {
                return d(this), this.tlCached ? this.tlCached.getDuration() : void 0
            },
            getLabelPosition: function(t) {
                return h(this, t)
            },
            _getTimeline: function() {
                return d(this), this.tlCached
            },
            _rebuild: function() {
                d(this, !0)
            },
            getTimelineData: function() {
                return s(this)
            },
            getTLD: function() {
                return this.getTimelineData()
            },
            _applyBaseStyles: function(t, e) {
                var n = this.data[e];
                n.content && n.content.style && n.content.style["${symbolSelector}"] && g(this, t, n.content.style["${symbolSelector}"])
            },
            getAutoPlay: function() {
                return this.autoPlay
            },
            setAutoPlay: function(t) {
                this.autoPlay = t
            }
        })
    }(window.AdobeEdge),
    function(t) {
        "use strict";

        function e(e, r, o, a, s, l) {
            t.Animation.call(this), this.name = "prop tween", this.elements = o, this.sourceElements = o, this.deferElementResolution = !0, this.tweenType = i[e], this.updateTriggered = !1, this.property = r, this.fromValue = a, this.toValue = s, this.duration = 1e3, this.valueTemplate = null, this.tokens = null, this.fromValues = null, l && n.extend(this, l), this.deferElementResolution = this.deferElementResolution || "string" == typeof o && -1 !== o.search(/\$\{[^\{\}]+\}/), this.deferElementResolution || (this.elements = this.resolveElementSelector(o));
            var c, u, p, d, h, f, m, g = this.toValues = [],
                y = this.parseValue(s);
            for (n.isArray(s) || (s = [s]), y && 0 !== y.length || (y = s), p = y.length, c = 0; p > c; c += 1) u = y[c], t.props[r] && (u = t.props[r].units(u)), d = {}, "string" == typeof u ? (d.value = parseFloat(u.replace(/[a-zA-Z%]+$/, "")), d.unit = u.replace(/^-?[0-9]*(\.[0-9]+)?/, ""), isNaN(d.value) && (d.value = u, d.unit = "")) : ("number" == typeof u && (u = parseFloat(u)), d.value = u, d.unit = ""), g.push(d);
            if (null != this.fromValue)
                for (h = this.fromValues = [], f = this.parseValue(this.fromValue), f && f.length > 0 ? this.fromValue = f : n.isArray(this.fromValue) || (this.fromValue = [this.fromValue]), p = this.fromValue.length, c = 0; p > c; c += 1) u = this.fromValue[c], "string" == typeof u ? (h[c] = parseFloat(u.replace(/[a-zA-Z%]+$/, "")), isNaN(h[c]) && (h[c] = u)) : ("number" == typeof u && (u = parseFloat(u)), h[c] = u);
            if (this.filter)
                for (n.isArray(this.filter) || (this.filter = [this.filter]), m = this.filter, p = m.length, c = 0; p > c; c += 1) "string" == typeof m[c] && (m[c] = Math[m[c]]), "function" != typeof m[c] && (m[c] = null);
            this.valueTemplate && (this.tokens = this.parseTemplate(this.valueTemplate))
        }
        var n = t.$,
            i = {
                style: 0,
                attribute: 1,
                property: 2
            },
            r = "webkitAppearance" in document.documentElement.style;
        t.trimString = function(t) {
            return t.replace(/^\s+|\s+$/g, "")
        }, e.Token = function(t, e) {
            this.value = t, this.isPlaceholder = e
        }, e.parseVariableName = function(e) {
            var n, i, r = e;
            return "string" == typeof e && -1 !== e.search(/\$\{/) && (n = e.search(/\$\{/), i = e.search(/\}/), r = e.slice(n + 2, i), "string" == typeof r && (r = t.trimString(r), r = r.replace(/["']/g, ""))), r
        }, e.substituteVariables = function(t, n) {
            for (var i, r = t; n && "string" == typeof r && -1 !== r.search(/\$\{/);) i = e.parseVariableName(r), r = void 0 === n[i] ? void 0 : r.replace(/\$\{[^\}]*\}/, n[i]);
            return r
        }, n.extend(e.prototype, t.Animation.prototype), n.extend(e.prototype, {
            constructor: e,
            setup: function(t) {
                this.updateTriggered = !1, this.timeline = t, this.animData = void 0
            },
            update: function(t, e) {
                var n, i = this.getElementSet(),
                    r = this,
                    o = this.tweenType,
                    a = this.property;
                this.updateTriggered || (this.updateTriggered = !0, this.setupForAnimation()), i.each(function(i, s) {
                    var l, c, u, p, d, h, f, m, g, y, v, b, w, x, T = r.getPropertyTweenData(s, o, a);
                    if (T.animationID === r.animationID) {
                        for (l = T.fromValues, c = T.toValues, u = T.tokens, p = r.filter, d = l.length, h = [], n = 0; d > n; n += 1) f = l[n], g = c[n], m = "string" == typeof f ? 0 === e && r.duration > 0 ? f : g.value : f + (g.value - f) * e, p && p[n] && (m = p[n](m, r, this, a, g.unit, t)), "number" == typeof m && 1 > m && (m = m.toFixed(6)), h.push(m + g.unit);
                        if (y = "", v = r.formatValue(h), v.length > 0) y = v;
                        else if (u) {
                            for (b = u.length, w = [], n = 0; b > n; n += 1) x = u[n], x.isPlaceholder ? w.push(h[x.value]) : w.push(x.value);
                            y = w.join("")
                        } else y = h.join("");
                        r.setValue.call(this, o, a, y), r.notifyObservers("onUpdate", {
                            elapsed: t,
                            easingConst: e,
                            property: a,
                            value: y,
                            element: this
                        })
                    }
                })
            },
            setValue: function(t, e, i) {
                switch (t) {
                    case 0:
                        var o = n(this);
                        o.css(e, i), r && "background-size" === e ? o.css("-webkit-background-size", i) : "display" === e && "AUDIO" == this.nodeName && o.attr("controls", "none" === i ? null : "controls");
                        break;
                    case 1:
                        this.setAttribute(e, i);
                        break;
                    case 2:
                        this[e] = i
                }
            },
            getDuration: function() {
                return this.duration
            },
            resolveElementSelector: function() {
                var t = e.substituteVariables(this.elements, this.timeline.variables);
                return t || (t = this.elements), /^\$\{/.test(t) && (t = "bad_selector"), n(t)
            },
            getElementSet: function() {
                var t, e = this.animationID;
                return this.timeline.animData = this.timeline.animData || {}, t = this.timeline.animData[e], t || (t = this.timeline.animData[e] = this.deferElementResolution ? this.resolveElementSelector() : this.elements), t
            },
            getValue: function(t, e) {
                var i;
                switch (e) {
                    case 0:
                        i = n(this).css(t);
                        break;
                    case 1:
                        i = this.getAttribute(t);
                        break;
                    case 2:
                        i = String(this[t])
                }
                return i
            },
            setupForAnimation: function() {
                var t = this,
                    e = this.tweenType,
                    n = this.property,
                    i = this.getElementSet();
                i.each(function(i, r) {
                    var o, a, s, l, c, u, p = t.getPropertyTweenData(r, e, n);
                    if (p.animationID = t.animationID, p.toValues = t.toValues, p.tokens = t.tokens, t.fromValues) p.fromValues = t.fromValues;
                    else if (o = t.getValue.call(this, n, e), void 0 === o && (o = "0"), a = t.parseValue(o), a && a.length > 0)
                        for (s = p.fromValues = [], l = a.length, c = 0; l > c; c += 1) u = a[c], "string" == typeof u ? s[c] = parseFloat(u.replace(/[a-zA-Z%]+$/, "")) : s[c] = u, isNaN(s[c]) && (s[c] = u);
                    else p.fromValues = [parseFloat(o.replace(/[a-zA-Z%]+$/, ""))]
                })
            },
            parseTemplate: function(t) {
                var n = t.length,
                    i = [],
                    r = 0,
                    o = /@@[0-9]+@@/g,
                    a = null;
                for (n > r && (a = o.exec(t)); a;) a.index !== r && i.push(new e.Token(t.substring(r, a.index), !1)), i.push(new e.Token(parseInt(a[0].replace(/@@/g, ""), 10), !0)), r = o.lastIndex, a = null, n > r && (a = o.exec(t));
                return n > r && i.push(new e.Token(t.substring(r, n), !1)), i
            },
            parseValue: function(t) {
                return []
            },
            formatValue: function(t) {
                return ""
            },
            getPropertyTweenData: function(e, n, i) {
                var r, o, a = t.$.data(e, "tweenData");
                return a || (a = {}, t.$.data(e, "tweenData", a)), r = a[n], r || (r = a[n] = {}), o = r[i], o || (o = r[i] = {
                    animationID: -1
                }), o
            }
        }), t.PropertyTween = e, t.Timeline.addTweenType("style", function(t, n, i, r, o) {
            return new e("style", t, n, i, r, o)
        }), AdobeEdge.Timeline.addTweenType("attribute", function(t, n, i, r, o) {
            return new e("attribute", t, n, i, r, o)
        }), AdobeEdge.Timeline.addTweenType("property", function(t, n, i, r, o) {
            return new e("property", t, n, i, r, o)
        }), t.Timeline.addTweenProperty("volume", "property")
    }(window.AdobeEdge),
    function(t) {
        "use strict";
        var e = t.$,
            n = function(t) {
                this.handlers = {}, this.timeline = t
            };
        n.Register = function(t, e, i) {
            var r = t.updateFinalizer;
            "undefined" == typeof r && (r = new n(t), t.updateFinalizer = r, t.addObserver(r)), r.handlers[e] = i
        }, n.unRegister = function(t, e) {
            var n = t.updateFinalizer;
            "undefined" != typeof n && delete n.handlers[e]
        }, e.extend(n.prototype, {
            _finalizeUpdate: function(t, e) {
                var n, i = {
                        elapsed: t,
                        context: e
                    },
                    r = "onFinalUpdate";
                for (n in this.handlers)
                    if (this.handlers.hasOwnProperty(n)) {
                        var o = this.handlers[n];
                        o[r] && o[r](i)
                    }
                this.handlers = {}
            },
            postUpdate: function(t, e) {
                this._finalizeUpdate(e.elapsed, e.context)
            },
            complete: function(t) {
                this.timeline && this.timeline.removeObserver(this), this.timeline.updateFinalizer = void 0
            }
        }), t.UpdateFinalizer = n
    }(window.AdobeEdge),
    function(t) {
        "use strict";

        function e(t, e, n) {
            var i = d.event.special[e];
            i && i.setup && i.setup.call(t, e, n), t.addEventListener ? t.addEventListener(e, n) : t.attachEvent && t.attachEvent(e, n);
            var r = t.AnListeners = t.AnListeners || {};
            r[e] = r[e] || [], r[e].push(n)
        }

        function n(t, e, n) {
            var i = d.event.special[e];
            i && i.teardown && i.teardown.call(t, e, n);
            var r, o, a = t.AnListeners = t.AnListeners || {};
            if (r = a[e] = a[e] || [], null != n)
                for (t.removeEventListener ? t.removeEventListener(e, n) : t.detachEvent && t.detachEvent(e, n), o = a.length - 1; o >= 0; o--) r[o] === n && a.splice(o, 1);
            else e && (a[e].forEach(function(n) {
                t.removeEventListener ? t.removeEventListener(e, n) : t.detachEvent && t.detachEvent(e, n)
            }), a[e] = [])
        }

        function i(t, e, n, i) {
            function r(n) {
                if (n.length >= 2 && "object" == typeof n[0] && "object" == typeof n[1] && "onError" !== n[1].type) {
                    var i;
                    i = d.Event("onError"), t && (i.compId = t.getComposition().compId), i.originalEvent = n[1], document.dispatchEvent(i)
                }
                window.console.log("Javascript error in event handler! Event Type = " + e)
            }
            var o, a = t[i[0]];
            return "function" == typeof a ? ("element" === e ? o = function() {
                var e;
                if (e = Array.prototype.slice.call(arguments), e.unshift(t), e.length >= 2 && "object" == typeof e[0] && "object" == typeof e[1] && "compositionReady" === e[1].type && "string" == typeof e[1].compId && "object" == typeof e[0].composition && e[1].compId !== e[0].composition.id) return null;
                try {
                    return a.apply(t, e)
                } catch (n) {
                    return void r(e)
                }
            } : "timeline" === e ? o = function(n, i) {
                var o, s;
                s = i && i.methodName && /^trig_/.test(i.methodName) ? d.Event("trigger") : d.Event(e), i && d.extend(s, i), s.timeline = n, o = Array.prototype.slice.call(arguments), o.splice(0, 0, s), o.unshift(t);
                try {
                    return a.apply(t, o)
                } catch (l) {
                    return void r(o)
                }
            } : "symbol" === e && (o = function(t, n) {
                var i, o, s;
                o = n && n.methodName ? d.Event(n.methodName) : d.Event(e), n && (d.extend(o, n), n.variableValue && (s = n.variableValue)), i = Array.prototype.slice.call(arguments), i.splice(0, 0, o, s), i.unshift(t);
                try {
                    return a.apply(t, i)
                } catch (l) {
                    return void r(i)
                }
            }), o) : null
        }

        function r(t, e) {
            var n, r = e[0],
                o = m[r[0]];
            o && (n = i(t, r[0], r[1], e.slice(1)), n && o.apply(t, [n].concat(r.slice(1))))
        }

        function o(t, e) {
            e = e || t.data[t.name].bindings || [];
            var n, i, o = e.length;
            for (n = 0; o > n; n++) i = e[n], r(t, i)
        }

        function a(t, e) {
            e = e || t.data[t.name].actions || {}, d.extend(t, e)
        }

        function s(t, e) {
            a(t), o(t)
        }

        function l(t, e) {
            var n = e.symbol;
            n.addObserver(u)
        }

        function c(e, n, i, o, s, l) {
            var c, u, d, h, m, g, y, v = t.getComposition(e).sym[n],
                b = f("binding"),
                w = [
                    [l, i, o], b
                ];
            if (v && (v.actions = v.actions || {}, v.actions[b] = s, v.bindings = v.bindings || [], v.bindings.push(w), c = t.getComposition(e), c && (c.addObserver(p), u = c.getSymbols())))
                for (d = u.length, m = 0; d > m; m++) h = u[m], g = h.name, n === g && (y = {}, y[b] = s, a(h, y), r(h, w))
        }
        var u, p, d = (window.EdgeAn, t.$),
            h = t.Symbol,
            f = t.Symbol._makeUniqueID,
            m = t.triggerDict = {
                timeline: function(t, e, n) {
                    if (t) {
                        var i = {},
                            r = this._getTimeline();
                        i[n] = t, r.addObserver(i)
                    }
                },
                element: function(t, e, n) {
                    if (t)
                        if ("document" === e) d(document).bind(n, t);
                        else if ("window" === e) d(window).bind(n, t);
                    else {
                        var i = /^\$\{/;
                        i.test(e) && (e = e.replace(i, ""), e = e.replace(/\}/, ""));
                        var r = this.find$(e);
                        if (!r) return;
                        r.bind(n, t)
                    }
                },
                symbol: function(t, e, n) {
                    if (t) {
                        var i = {};
                        i[n] = t, this.addObserver(i)
                    }
                }
            };
        d.Event = function(e) {
            if (t.supported.customEvent) return new CustomEvent(e, {
                bubbles: !0,
                cancelable: !0
            });
            var n = document.createEvent("Event");
            return n.initEvent(e, !0, !0), n
        }, d.event = {}, d.event.special = {}, d.extend(t.An$.prototype, {
            bind: function(t, n) {
                return this.each(function(i, r) {
                    e(r, t, n)
                }), this
            },
            unbind: function(t, e) {
                return this.each(function(i, r) {
                    n(r, t, e)
                }), this
            },
            trigger: function(t) {
                var e = document;
                return this[0] && (e = this[0]), e.dispatchEvent(t), this
            }
        }), u = {
            creationComplete: s
        }, p = {
            newSymbol: l
        }, h.bindElementAction = function(t, e, n, i, r) {
            c(t, e, n, i, r, "element")
        }, h.bindTimelineAction = function(t, e, n, i, r) {
            c(t, e, n, i, r, "timeline")
        }, h.bindTriggerAction = function(e, n, i, r, o) {
            var a, s, l, u = t.getComposition(e).sym[n];
            u && (a = u.timeline ? u.timeline.data : null, a && (s = f("trig"), l = [s, "trigger", r, s], a.push(l), a.dirty = !0, c(e, n, i, s, o, "timeline"), a.dirty = !1))
        }, h.bindSymbolAction = function(t, e, n, i) {
            c(t, e, "", n, i, "symbol")
        }, h.bindVariableAction = function(t, e, n, i) {
            var r = "variableChanged:" + n;
            c(t, e, "", r, i, "symbol")
        }, d.extend(h.prototype, {
            executeSymbolAction: function(t, e) {
                if (!("object" != typeof e || e.length < 3)) {
                    var n, i = e[0],
                        r = this.$(e[1]),
                        o = e[2];
                    !r || r.length < 1 || (n = h.getSymbol(r[0]), n && i && (o && "object" == typeof o || (o = null), n[i].apply(n, o)))
                }
            },
            eSA: function(t, e) {
                this.executeSymbolAction(t, e)
            }
        })
    }(window.AdobeEdge),
    function(t, e, n) {
        "use strict";
        document.createEvent && (t.addTouchSupport = function() {
            var i = t.$,
                r = t.An$;
            i.fn = i.fn || {}, i.each("touchstart touchmove touchend swipe swipeleft swiperight ".split(" "), function(t, e) {
                r.prototype[e] = i.fn[e] = function(t) {
                    return t ? this.bind(e, t) : this.trigger(e)
                }, i.attrFn && (i.attrFn[e] = !0)
            });
            var o = "ontouchend" in document,
                a = !o && e.navigator.msPointerEnabled,
                s = o ? "touchstart" : "mousedown",
                l = o ? "touchend" : "mouseup",
                c = o ? "touchmove" : "mousemove";
            i.event.special.swipe = {
                scrollSupressionThreshold: 30,
                durationThreshold: 1e3,
                horizontalDistanceThreshold: 30,
                verticalDistanceThreshold: 75,
                swipeEvent: i.Event("swipe"),
                swipeLeftEvent: i.Event("swipeleft"),
                swipeRightEvent: i.Event("swiperight"),
                setup: function() {
                    if (!this.setupDone) {
                        var t = this,
                            e = i(t);
                        a && e.css("-ms-touch-action", "pan-y pinch-zoom double-tap-zoom"), e.bind(s, function(t) {
                            function r(t) {
                                e.unbind(l, r), e.unbind(c, o), u && a && a.time - u.time < i.event.special.swipe.durationThreshold && Math.abs(u.coords[0] - a.coords[0]) > i.event.special.swipe.horizontalDistanceThreshold && Math.abs(u.coords[1] - a.coords[1]) < i.event.special.swipe.verticalDistanceThreshold && e.trigger(i.event.special.swipe.swipeEvent).trigger(u.coords[0] > a.coords[0] ? i.event.special.swipe.swipeLeftEvent : i.event.special.swipe.swipeRightEvent), u = a = n
                            }

                            function o(t) {
                                if (u) {
                                    var e = t.touches ? t.touches[0] : t.originalEvent.touches ? t.originalEvent.touches[0] : t;
                                    a = {
                                        time: (new Date).getTime(),
                                        coords: [e.pageX, e.pageY]
                                    }, Math.abs(u.coords[0] - a.coords[0]) > i.event.special.swipe.scrollSupressionThreshold && t.preventDefault()
                                }
                            }
                            var a, s = t.touches ? t.touches[0] : t.originalEvent.touches ? t.originalEvent.touches[0] : t,
                                u = {
                                    time: (new Date).getTime(),
                                    coords: [s.pageX, s.pageY],
                                    origin: i(t.target)
                                };
                            e.bind(c, o).bind(l, r)
                        }), this.setupDone = !0
                    }
                }
            }, i.each({
                swipeleft: "swipe",
                swiperight: "swipe"
            }, function(t, e) {
                i.event.special[t] = {
                    setup: function() {
                        i(this).bind(e, i.noop)
                    },
                    teardown: function(t, n, r) {
                        i(t).unbind(e)
                    }
                }
            })
        })
    }(AdobeEdge, window),
    function(t) {
        "use strict";

        function e(e, n, i, r, o, a) {
            null !== f[n] && (this.superProperty = f[n].cssProp, e = f[n].type, "color" === e ? t.ColorTween && (u.extend(this, t.ColorTween.prototype), u.extend(this, g), t.ColorTween.call(this, e, n, i, r, o, a)) : (u.extend(this, p.prototype), u.extend(this, g), t.PropertyTween.call(this, e, n, i, r, o, a))), this.name = "subpropertyTween"
        }

        function n(t, e, n) {
            t = t.replace(/,\s*/g, ",");
            var i, r = [];
            r["filter.invert"] = (i = t.match(/invert\((.*?)\)/)) ? i[1] : null, r["filter.hue-rotate"] = (i = t.match(/hue-rotate\((.*?)\)/)) ? i[1] : null, r["filter.contrast"] = (i = t.match(/contrast\((.*?)\)/)) ? i[1] : null, r["filter.saturate"] = (i = t.match(/saturate\((.*?)\)/)) ? i[1] : null, r["filter.brightness"] = (i = t.match(/brightness\((.*?)\)/)) ? i[1] : null, r["filter.sepia"] = (i = t.match(/sepia\((.*?)\)/)) ? i[1] : null, r["filter.grayscale"] = (i = t.match(/grayscale\((.*?)\)/)) ? i[1] : null, r["filter.blur"] = (i = t.match(/blur\((.*?)\)/)) ? i[1] : null;
            var o = (i = t.match(/drop-shadow\((.*?\)\s*.*?)\)/)) ? i[1].split(" ") : [null, null, null, null];
            r["filter.drop-shadow.color"] = o[0], r["filter.drop-shadow.offsetH"] = o[1], r["filter.drop-shadow.offsetV"] = o[2], r["filter.drop-shadow.blur"] = o[3];
            var a, s = [];
            for (a = 0; a < n.length; a += 1) s[n[a]] = r[n[a]] || f[n[a]].def;
            return s
        }

        function i(t, e, n) {
            t = t.replace(/,\s*/g, ",");
            var i, r = t.split(" "),
                o = [];
            for (i = 0; i < n.length; i += 1) o[n[i]] = r[i] || f[n[i]].def;
            return o
        }

        function r(t, e) {
            var r, o, a = u(t);
            for (o in h[e])
                if (h[e].hasOwnProperty(o) && (r = a.css(o), r && "" !== r && "none" !== r)) return "filter" == e ? n(r, e, h[e][o]) : i(r, e, h[e][o]);
            return []
        }

        function o(t) {
            return f[t] ? f[t].type : void 0
        }

        function a(t) {
            return f[t] ? f[t].cssProp : void 0
        }

        function s() {
            var n = t.$.data(this.element, this.prop);
            n && e.applySubproperty(this.element, n, n.tween)
        }

        function l(e, n) {
            var i = e[0],
                r = this.name,
                o = t.$.data(i, f[r].cssProp);
            o || (o = g.buildProp.call({
                superProperty: f[r].cssProp
            }, i), t.$.data(i, f[r].cssProp, o)), o[r] = n, o.onFinalUpdate.call({
                element: i,
                prop: f[r].cssProp
            })
        }
        var c, u = t.$,
            p = t.PropertyTween,
            d = t.UpdateFinalizer,
            h = {
                "box-shadow": {
                    def: "box-shadow",
                    "-webkit-box-shadow": "boxShadow.color boxShadow.offsetH boxShadow.offsetV boxShadow.blur boxShadow.spread boxShadow.inset".split(" "),
                    "-moz-box-shadow": "boxShadow.color boxShadow.offsetH boxShadow.offsetV boxShadow.blur boxShadow.spread boxShadow.inset".split(" "),
                    "box-shadow": "boxShadow.color boxShadow.offsetH boxShadow.offsetV boxShadow.blur boxShadow.spread boxShadow.inset".split(" ")
                },
                "text-shadow": {
                    def: "text-shadow",
                    "text-shadow": ["textShadow.color", "textShadow.offsetH", "textShadow.offsetV", "textShadow.blur"]
                },
                filter: {
                    def: "-webkit-filter",
                    "-webkit-filter": "filter.invert filter.hue-rotate filter.contrast filter.saturate filter.brightness filter.sepia filter.grayscale filter.blur filter.drop-shadow.color filter.drop-shadow.offsetH filter.drop-shadow.offsetV filter.drop-shadow.blur".split(" "),
                    "-moz-filter": "filter.invert filter.hue-rotate filter.contrast filter.saturate filter.brightness filter.sepia filter.grayscale filter.blur filter.drop-shadow.color filter.drop-shadow.offsetH filter.drop-shadow.offsetV filter.drop-shadow.blur".split(" "),
                    filter: "filter.invert filter.hue-rotate filter.contrast filter.saturate filter.brightness filter.sepia filter.grayscale filter.blur filter.drop-shadow.color filter.drop-shadow.offsetH filter.drop-shadow.offsetV filter.drop-shadow.blur".split(" ")
                },
                "background-size": {
                    def: "background-size",
                    "background-size": ["background-size.x", "background-size.y"]
                },
                "background-position": {
                    def: "background-position",
                    "background-position": ["background-position.x", "background-position.y"]
                }
            },
            f = {
                "boxShadow.offsetH": {
                    cssProp: "box-shadow",
                    type: "style",
                    def: "0px",
                    u: "px",
                    i: 1
                },
                "boxShadow.offsetV": {
                    cssProp: "box-shadow",
                    type: "style",
                    def: "0px",
                    u: "px",
                    i: 2
                },
                "boxShadow.blur": {
                    cssProp: "box-shadow",
                    type: "style",
                    def: "0px",
                    u: "px",
                    i: 3
                },
                "boxShadow.spread": {
                    cssProp: "box-shadow",
                    type: "style",
                    def: "0px",
                    u: "px",
                    i: 4
                },
                "boxShadow.color": {
                    cssProp: "box-shadow",
                    type: "color",
                    def: "rgba(0,0,0,0)",
                    i: 5
                },
                "boxShadow.inset": {
                    cssProp: "box-shadow",
                    def: "",
                    i: 0
                },
                "textShadow.offsetH": {
                    cssProp: "text-shadow",
                    type: "style",
                    def: "0px",
                    u: "px",
                    i: 1
                },
                "textShadow.offsetV": {
                    cssProp: "text-shadow",
                    type: "style",
                    def: "0px",
                    u: "px",
                    i: 2
                },
                "textShadow.blur": {
                    cssProp: "text-shadow",
                    type: "style",
                    def: "0px",
                    u: "px",
                    i: 3
                },
                "textShadow.color": {
                    cssProp: "text-shadow",
                    type: "color",
                    def: "rgba(0,0,0,0)",
                    i: 0
                },
                "filter.drop-shadow.color": {
                    cssProp: "filter",
                    type: "color",
                    def: "rgba(0,0,0,0)",
                    strReplace: "drop-shadow(%1",
                    combinedNum: 4,
                    i: 8
                },
                "filter.drop-shadow.offsetH": {
                    cssProp: "filter",
                    type: "style",
                    def: "0px",
                    u: "px",
                    i: 9
                },
                "filter.drop-shadow.offsetV": {
                    cssProp: "filter",
                    type: "style",
                    def: "0px",
                    u: "px",
                    i: 10
                },
                "filter.drop-shadow.blur": {
                    cssProp: "filter",
                    type: "style",
                    def: "0px",
                    strReplace: "%1)",
                    u: "px",
                    i: 11
                },
                "filter.grayscale": {
                    cssProp: "filter",
                    type: "style",
                    def: "0",
                    strReplace: "grayscale(%1)",
                    i: 6
                },
                "filter.sepia": {
                    cssProp: "filter",
                    type: "style",
                    def: "0",
                    strReplace: "sepia(%1)",
                    i: 5
                },
                "filter.saturate": {
                    cssProp: "filter",
                    type: "style",
                    def: "1",
                    strReplace: "saturate(%1)",
                    i: 3
                },
                "filter.hue-rotate": {
                    cssProp: "filter",
                    type: "style",
                    def: "0deg",
                    strReplace: "hue-rotate(%1)",
                    u: "deg",
                    i: 1
                },
                "filter.invert": {
                    cssProp: "filter",
                    type: "style",
                    def: "0",
                    strReplace: "invert(%1)",
                    i: 0
                },
                "filter.brightness": {
                    cssProp: "filter",
                    type: "style",
                    def: "0",
                    strReplace: "brightness(%1)",
                    i: 4
                },
                "filter.contrast": {
                    cssProp: "filter",
                    type: "style",
                    def: "1",
                    strReplace: "contrast(%1)",
                    i: 2
                },
                "filter.blur": {
                    cssProp: "filter",
                    type: "style",
                    def: "0px",
                    strReplace: "blur(%1)",
                    u: "px",
                    i: 7
                },
                "background-position.x": {
                    cssProp: "background-position",
                    type: "style",
                    def: "0px",
                    u: "px",
                    i: 2,
                    domProp: "fill"
                },
                "background-position.y": {
                    cssProp: "background-position",
                    type: "style",
                    def: "0px",
                    u: "px",
                    i: 3,
                    domProp: "fill"
                },
                "background-size.x": {
                    cssProp: "background-size",
                    type: "style",
                    def: "100%",
                    u: "%",
                    i: 4,
                    domProp: "fill"
                },
                "background-size.y": {
                    cssProp: "background-size",
                    type: "style",
                    def: "100%",
                    u: "%",
                    i: 5,
                    domProp: "fill"
                }
            },
            m = 1,
            g = {
                setValue: function(e, n, i) {
                    var r = t.$.data(this, f[n].cssProp);
                    r[n] = i
                },
                getValue: function(e, n) {
                    t.$.data(this, f[e].cssProp)
                },
                setupForAnimation: function() {
                    var e = this.getElementSet(),
                        n = this;
                    e.each(function() {
                        var e = t.$.data(this, n.superProperty);
                        e || (e = n.buildProp(this), t.$.data(this, n.superProperty, e))
                    }), p.prototype.setupForAnimation.call(this)
                },
                buildProp: function(e) {
                    var n, i = {},
                        r = this.superProperty,
                        o = t.getSubProps(e, r);
                    for (n in o) o.hasOwnProperty(n) && (i[n] = o[n]);
                    return i.id = this.superProperty + m, m += 1, i.element = e, i.prop = r, i.onFinalUpdate = s, i
                },
                update: function(e, n) {
                    p.prototype.update.call(this, e, n);
                    var i = this.getElementSet(),
                        r = this,
                        o = this.property,
                        a = this.tweenType;
                    i.each(function() {
                        var e = r.getPropertyTweenData(this, a, o);
                        if (e.animationID === r.animationID) {
                            var n = t.$.data(this, r.superProperty);
                            n.timeline = r.timeline, n.tween = r, d.Register(r.timeline, n.id, n)
                        }
                    })
                }
            };
        e.prototype.constructor = e, t.getSubProps = r, e.getSubType = o, e.getStyle = a, e.applySubproperty = function(t, e, n) {
            var i, r, o, a, s = u(t);
            for (r in h[e.prop])
                if ("def" !== r && h[e.prop].hasOwnProperty(r)) {
                    i = "";
                    var l = !0;
                    for (o = 0; o < h[e.prop][r].length; o += 1) {
                        if (a = e[h[e.prop][r][o]], void 0 === a && (a = f[h[e.prop][r][o]].def), "combinedNum" in f[h[e.prop][r][o]]) {
                            l = !0;
                            for (var c = o; c < o + f[h[e.prop][r][o]].combinedNum; c++) void 0 !== e[h[e.prop][r][c]] && e[h[e.prop][r][c]] != f[h[e.prop][r][c]].def && (l = !1)
                        }
                        h[e.prop][r][o].match(/^filter./) && a == f[h[e.prop][r][o]].def && l || ("strReplace" in f[h[e.prop][r][o]] && (a = f[h[e.prop][r][o]].strReplace.replace("%1", a)), i += a, o !== h[e.prop][r].length - 1 && (i += " "))
                    }(window.edge_authoring_mode && r === h[e.prop].def || !window.edge_authoring_mode) && s.css(r, i)
                }
            n && n.notifier.obs.length && n.notifyObservers("onUpdate", {
                elapsed: 0,
                easingConst: 0,
                property: r,
                value: i,
                element: s[0]
            })
        }, t.SubpropertyTween = e;
        var y = "subproperty";
        t.Timeline.addTweenType(y, function(t, n, i, r, o) {
            return new e(y, t, n, i, r, o)
        });
        var v, b;
        for (c in f) v = {}, f.hasOwnProperty(c) && (t.Timeline.addTweenProperty(c, y), b = f[c], v[c] = {
            f: b.domProp || t.camelize(b.cssProp),
            i: b.i,
            j: b.j,
            def: b.def
        }, f[c].u && (v[c].u = f[c].u), t.defineProps(v), t._.p[c].apply = l)
    }(window.AdobeEdge),
    function(t) {
        "use strict";

        function e(e, n, i, r, o, a) {
            t.PropertyTween.call(this, e, n, i, r, o, a), this.name = "transformTween"
        }

        function n(t) {
            var e = 0;
            return "string" == typeof t ? e = parseFloat(t.replace(/[a-zA-Z%]+$/, "")) : "number" == typeof t && (e = t), e
        }

        function i(e, i, r) {
            if (void 0 === i) return r;
            if (void 0 === r) return i;
            var o, a, s, l = n(i),
                c = n(r);
            return l ? c ? (o = t.splitUnits(i).units,
                a = t.splitUnits(r).units, s = o, o !== a && ("%" === o && (s = a, l = l / 100 * e), "%" === a && (c = c / 100 * e)), l + c + s) : i : r
        }

        function r(t) {
            var e, n = l(t),
                i = n[0].style;
            return b && (e = n[0].style.webkitTransform, e || (e = n.css("-webkit-transform"))), e ? e : (e = n[0].style.msTransform, e || (e = n.css("-ms-transform")), e || (e = n.css("msTransform")), e || (e = i.MozTransform), e || (e = i["-moz-transform"]), e || (e = n.css("-moz-transform")), e || (e = i.oTransform), e || (e = n.css("-o-transform")), e || (e = i.transform), e || (e = n.css("transform")), e || "")
        }

        function o(e, n) {
            var i, r, o, a = "string" == typeof n ? n : t.getTransform(e),
                s = /(\w+\s*\([^\)]*\))/g,
                l = a.match(s),
                c = {},
                u = 0,
                p = {};
            if (!l) return null;
            for (p.translateX = "0px", p.translateY = "0px", p.translateZ = "0px", p.scaleX = 1, p.scaleY = 1, p.scaleZ = 1, p.rotateX = "0deg", p.rotateY = "0deg", p.rotateZ = "0deg", p.skewXZ = 0, p.skewXY = 0, p.skewYZ = 0, p.skewX = "0deg", p.skewY = "0deg", i = 0; i < l.length; i += 1) {
                if (r = l[i].match(/\w+/), c[r[0]] || v[r[0]] < u) return null;
                switch (o = l[i].match(/\([^\)]*\)/), o = o[0].replace(/[\(\)]/g, ""), o = o.split(","), r[0]) {
                    case "matrix":
                        return null;
                    case "translate3d":
                        p.translateX = o[0], p.translateY = o.length > 1 ? o[1] : "0px", p.translateZ = o.length > 2 ? o[2] : "0px", c.translate3d = c.translate = c.translateX = c.translateY = c.translateZ = !0;
                        break;
                    case "translate":
                        p.translateX = o[0], p.translateY = o.length > 1 ? o[1] : "0px", c.translate3d = c.translate = c.translateX = c.translateY = !0;
                        break;
                    case "translateX":
                        p.translateX = o[0], c.translate3d = c.translate = c.translateX = !0;
                        break;
                    case "translateY":
                        p.translateY = o[0], c.translate3d = c.translate = c.translateY = !0;
                        break;
                    case "translateZ":
                        p.translateZ = o[0], c.translate3d = c.translateZ = !0;
                        break;
                    case "rotate3d":
                        return c.rotate3d = c.rotate = c.rotateX = c.rotateY = c.rotateZ = !0, null;
                    case "rotateX":
                        p.rotateX = o[0], c.rotate3d = c.rotateX = !0;
                        break;
                    case "rotateY":
                        p.rotateY = o[0], c.rotate3d = c.rotateY = !0;
                        break;
                    case "rotateZ":
                    case "rotate":
                        p.rotateZ = o[0], c.rotate3d = c.rotate = c.rotateZ = !0;
                        break;
                    case "skew":
                        p.skewX = o[0], p.skewY = o.length > 1 ? o[1] : "0px", c.skew = c.skewX = c.skewY = !0;
                        break;
                    case "skewX":
                        p.skewX = o[0], c.skew = c.skewX = !0;
                        break;
                    case "skewY":
                        p.skewY = o[0], c.skew = c.skewY = !0;
                        break;
                    case "scale3d":
                        p.scaleX = o[0], p.scaleY = o.length > 1 ? o[1] : 1, p.scaleZ = o.length > 2 ? o[2] : 1, c.scale3d = c.scale = c.scaleX = c.scaleY = c.scaleZ = !0;
                        break;
                    case "scale":
                        p.scaleX = o[0], p.scaleY = o.length > 1 ? o[1] : o[0], c.scale = c.scaleX = c.scaleY = !0;
                        break;
                    case "scaleX":
                        p.scaleX = o[0], c.scale3d = c.scale = c.scaleX = !0;
                        break;
                    case "scaleY":
                        p.scaleY = o[0], c.scale3d = c.scale = c.scaleY = !0;
                        break;
                    case "scaleZ":
                        p.scaleZ = o[0], c.scale3d = c.scaleZ = !0;
                        break;
                    case "perspective":
                        c.perspective = !0
                }
            }
            return p
        }

        function a() {}
        var s, l = t.$,
            c = t.PropertyTween,
            u = t.UpdateFinalizer,
            p = (Math.asin, Math.sin, Math.cos),
            d = (Math.tan, Math.atan2, Math.PI / 180),
            h = (180 / Math.PI, "translateX translateY translateZ scaleX scaleY rotateX rotateY rotateZ skewX skewY"),
            f = h.split(" "),
            m = t.supported = t.supported || {},
            g = "transform_",
            y = 1,
            v = {
                translate3d: 0,
                translate: 0,
                translateX: 0,
                translateY: 0,
                translateZ: 0,
                rotate: 1,
                rotateZ: 1,
                rotateX: 1,
                rotateY: 1,
                rotate3d: 1,
                skew: 2,
                skewX: 2,
                skewY: 2,
                scale3d: 3,
                scale: 3,
                scaleX: 3,
                scaleY: 3,
                scaleZ: 3,
                perspective: 4
            },
            b = "webkitAppearance" in document.documentElement.style;
        for (m.cssTransform = t.isSupported(["transformProperty", "WebkitTransform", "MozTransform", "OTransform", "msTransform"]), m.cssTransform3d = t.isSupported(["perspectiveProperty", "WebkitPerspective", "MozPerspective", "OPerspective", "msPerspective"]), t.An$.prototype.hasClass = t.An$.prototype.hasClass || function(t) {
                if (this[0]) {
                    var e, n = this[0].className || "",
                        i = n.split(/\s+/);
                    for (e = 0; e < i.length; e += 1)
                        if (t === i[e]) return !0
                }
                return !1
            }, e.removeData = function(n) {
                var i = t.$.data(n, e.dataName);
                i && (i.timeline && u.unRegister(i.timeline, i.id), t.$.data(n, e.dataName, void 0))
            }, e.getNumber = n, e.splitUnits = t.splitUnits, e.applyTransform = function(e, r, o, a) {
                void 0 !== t.applyCount && (t.applyCount += 1);
                var s, c, u, h, f, m, g, y, v, w, x, T = l(e),
                    S = !0,
                    P = "transform";
                a && (S = !a.dontForceZ), c = i(1, r.translateX, r.motionTranslateX), u = i(1, r.translateY, r.motionTranslateY), v = i(1, r.rotateZ, r.motionRotateZ), h = t.supported.cssTransform3d, b ? (s = "translate(" + c + "," + u + ")", f = n(r.translateZ), (0 !== f || S) && h && (s += " translateZ(" + r.translateZ + ")"), s += " rotate(" + v + ") ", h && (f = n(r.rotateY), 0 !== f && (s += " rotateY(" + r.rotateY + ")"), f = n(r.rotateX), 0 !== f && (s += " rotateX(" + r.rotateX + ")")), r.skewX && "0deg" !== r.skewX && (s += " skewX(" + r.skewX + ") "), r.skewY && "0deg" !== r.skewY && (s += " skewY(" + r.skewY + ") "), s += " scale(" + r.scaleX + "," + r.scaleY + ") ", f = n(r.scaleZ), 1 !== f && h && (s += " scaleZ(" + r.scaleZ + ")"), m = navigator.userAgent, !window.edge_authoring_mode && h && T.css("-webkit-transform-style", "preserve-3d"), T.css("-webkit-transform", s), o && o.notifier.obs.length && o.notifyObservers("onUpdate", {
                    elapsed: 0,
                    easingConst: 0,
                    property: P,
                    value: s,
                    element: T[0]
                })) : (g = n(r.rotateX), y = n(r.rotateY), w = r.scaleX * p(d * y), x = r.scaleY * p(d * g), s = "translate(" + c + "," + u + ")", s += " rotate(" + v + ")", r.skewX && "0deg" !== r.skewX && (s += " skewX(" + r.skewX + ") "), r.skewY && "0deg" !== r.skewY && (s += " skewY(" + r.skewY + ") "), s += " scale(" + w + "," + x + ")", T.css("-moz-transform", s), T.css("-o-transform", s), T.css("-ms-transform", s), T.css("msTransform", s), o && o.notifier.obs.length && o.notifyObservers("onUpdate", {
                    elapsed: 0,
                    easingConst: 0,
                    property: P,
                    value: s,
                    element: T[0]
                })), T.css("transform", s)
            }, e.dataName = "EdgeTransformData", l.extend(e.prototype, c.prototype), l.extend(e.prototype, {
                constructor: e,
                setup: function(t) {
                    this.timeline = t, this.updateTriggered = !1
                },
                setValue: function(n, i, r) {
                    var o = t.$.data(this, e.dataName);
                    o[i] = r
                },
                getValue: function(n, i) {
                    t.$.data(this, e.dataName)
                },
                setupForAnimation: function() {
                    var n, i = this.getElementSet(),
                        r = this;
                    i.each(function() {
                        n = t.$.data(this, e.dataName), n || (n = r.buildTransformData(this), t.$.data(this, e.dataName, n))
                    }), c.prototype.setupForAnimation.call(this)
                },
                update: function(n, i) {
                    c.prototype.update.call(this, n, i);
                    var r = this.getElementSet(),
                        o = this,
                        a = this.property,
                        s = this.tweenType;
                    r.each(function() {
                        var n, i = o.getPropertyTweenData(this, s, a);
                        i.animationID === o.animationID && (n = t.$.data(this, e.dataName), n.timeline = o.timeline, n.tween = o, u.Register(o.timeline, n.id, n))
                    })
                },
                buildTransformData: function(e) {
                    var n = t.parseCanonicalTransform(e);
                    return n || (n = {}, n.translateX = "0px", n.translateY = "0px", n.translateZ = "0px", n.scaleX = 1, n.scaleY = 1, n.scaleZ = 1, n.rotateX = "0deg", n.rotateY = "0deg", n.rotateZ = "0deg", n.skewXZ = 0, n.skewXY = 0, n.skewYZ = 0, n.skewX = "0deg", n.skewY = "0deg", n.matrix && delete n.matrix), null === n && (n = {}), n.id = g + y, y += 1, n.element = e, n.onFinalUpdate = u.prototype.applyTransform, n
                },
                buildDefaultTransformData: function(t) {
                    var e = {};
                    return e.translateX = "0px", e.translateY = "0px", e.translateZ = "0px", e.scaleX = 1, e.scaleY = 1, e.scaleZ = 1, e.rotateX = "0deg", e.rotateY = "0deg", e.rotateZ = "0deg", e.skewXZ = 0, e.skewXY = 0, e.skewYZ = 0, e.skewX = "0deg", e.skewY = "0deg", e.id = g + y, y += 1, e.element = t, e.onFinalUpdate = u.prototype.applyTransform, e
                }
            }), t.getTransform = r, t.parseCanonicalTransform = o, t.TransformTween = e, l.extend(u.prototype, {
                applyTransform: function(n) {
                    var i = t.$.data(this.element, e.dataName);
                    i && n && e.applyTransform(this.element, i, i.tween, n.context)
                }
            }), a.applySubprop = function(t, n) {
                var i = t[0],
                    r = this.name,
                    o = e.prototype.buildTransformData(i);
                o[r] = n, e.applyTransform(i, o, null, {})
            }, t.Timeline.addTweenType("transform", function(t, n, i, r, o) {
                return new e("transform", t, n, i, r, o)
            }), s = 0; s < f.length; s += 1) t.Timeline.addTweenProperty(f[s], "transform");
        for (t.defineProps({
                translateX: {
                    f: "transform",
                    i: 0,
                    j: 0,
                    u: "px"
                },
                translateY: {
                    f: "transform",
                    i: 0,
                    j: 1,
                    u: "px"
                },
                translateZ: {
                    f: "transform",
                    i: 0,
                    j: 2,
                    u: "px"
                },
                rotateZ: {
                    f: "transform",
                    i: 1,
                    j: 0,
                    u: "deg"
                },
                rotateX: {
                    f: "transform",
                    i: 1,
                    j: 1,
                    u: "deg"
                },
                rotateY: {
                    f: "transform",
                    i: 1,
                    j: 2,
                    u: "deg"
                },
                skewX: {
                    f: "transform",
                    i: 2,
                    j: 0,
                    u: "deg"
                },
                skewY: {
                    f: "transform",
                    i: 2,
                    j: 1,
                    u: "deg"
                },
                scaleX: {
                    f: "transform",
                    i: 3,
                    j: 0
                },
                scaleY: {
                    f: "transform",
                    i: 3,
                    j: 1
                },
                scaleZ: {
                    f: "transform",
                    i: 3,
                    j: 2
                }
            }), s = 0; s < f.length; s += 1) t._.p[f[s]].apply = a.applySubprop
    }(window.AdobeEdge),
    function(t) {
        "use strict";

        function e() {
            if (!u) {
                var t, e, n = document.createElement("div"),
                    i = a(n);
                i.css("background-color", "transparent"), e = i.css("background-color"), i.css("background-color", "rgb(100, 100, 100)"), t = i.css("background-color"), p = t !== e, i.css("background-color", "transparent"), i.css("background-color", "hsl(100, 100%, 100%)"), t = i.css("background-color"), d = t !== e, i.css("background-color", "transparent"), i.css("background-color", "rgba(100, 100, 100,.5)"), t = i.css("background-color"), h = t !== e, i.css("background-color", "transparent"), i.css("background-color", "hsla(100, 100%, 100%, .5)"), t = i.css("background-color"), f = t !== e, u = !0
            }
        }

        function n(n, i, r, o, a, s) {
            t.PropertyTween.call(this, n, i, r, o, a, s), this.name = "colorTween", e()
        }

        function i(t) {
            return 0 > t ? t + 1 : t > 1 ? t - 1 : t
        }

        function r(t, e, n, i) {
            return g > i ? t + n * i : .5 > i ? e : y > i ? t + n * (y - i) : t
        }
        var o, a = t.$,
            s = t.PropertyTween,
            l = "color background-color border-color",
            c = l.split(" "),
            u = !1,
            p = !1,
            d = !1,
            h = !1,
            f = !1,
            m = 1 / 3,
            g = 1 / 6,
            y = 2 / 3;
        for (a.extend(n.prototype, s.prototype), a.extend(n.prototype, {
                constructor: n,
                getValue: function(t, e) {
                    return a(this).css(t)
                },
                setValue: function(t, e, n) {
                    a(this).css(e, n)
                },
                parseValue: function(e) {
                    var n, i, r, o, a, s = t.parseColorValue(e),
                        l = /rgb/gi,
                        c = /hsl/gi;
                    if (s && s.colorFunction && s.values) {
                        if (n = s.values, i = s.colorFunction, i.match(l))
                            if (this.animationColorSpace && "HSL" === this.animationColorSpace) r = {
                                r: n[0],
                                g: n[1],
                                b: n[2]
                            }, o = t.rgbToHSL(r), o ? n.length > 3 ? (a = n[3], n = [o.h, o.s, o.l, a]) : n = [o.h, o.s, o.l] : n = [];
                            else if (this.animationColorSpace) {
                            if ("RGB" !== this.animationColorSpace) return n
                        } else this.animationColorSpace = "RGB";
                        else if (i.match(c))
                            if (this.animationColorSpace && "RGB" === this.animationColorSpace) o = {
                                h: n[0],
                                s: n[1],
                                l: n[2]
                            }, r = t.hslToRGB(o), r ? n.length > 3 ? (a = n[3], n = [r.r, r.g, r.b, a]) : n = [r.r, r.g, r.b] : n = [];
                            else if (this.animationColorSpace) {
                            if ("HSL" !== this.animationColorSpace) return n
                        } else this.animationColorSpace = "HSL";
                        return 3 === n.length && (n[3] = 1), n
                    }
                },
                formatValue: function(n) {
                    if (e(), n) {
                        var i, r, o, a, s, l, c;
                        return "HSL" === this.animationColorSpace && f ? (r = "hsl", i = 4 === n.length && f ? r + "a(" + n[0] + "," + n[1] + "%," + n[2] + "%," + n[3] + ")" : r + "(" + n[0] + "," + n[1] + "%," + n[2] + "%)") : h ? (r = "rgb", i = 4 === n.length && h ? r + "a(" + n[0] + "%," + n[1] + "%," + n[2] + "%," + n[3] + ")" : r + "(" + n[0] + "%," + n[1] + "%," + n[2] + "%)") : (a = n[0], s = n[1], l = n[2], "HSL" === this.animationColorSpace && (c = t.hslToRGB({
                            h: n[0],
                            g: n[1],
                            b: n[2]
                        }), a = c.r, s = c.g, l = c.b), a *= 2.55, s *= 2.55, l *= 2.55, o = 256 * Math.floor(a) * 256 + 256 * Math.floor(s) + Math.floor(l), i = "#" + o.toString(16)), i
                    }
                }
            }), t.ColorTween = n, t.Color = {
                formatValue: n.prototype.formatValue,
                parseValue: n.prototype.parseValue
            }, t.parseColorValue = function(t) {
                if (t) {
                    var e, n, i, r, o, s = [],
                        l = /^\s*#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})\s*$/,
                        c = /^\s*#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])\s*$/,
                        u = /rgb/gi,
                        p = /hsl/gi;
                    if (n = l.exec(t), n ? (s = [parseInt(n[1], 16) / 255 * 100, parseInt(n[2], 16) / 255 * 100, parseInt(n[3], 16) / 255 * 100], e = "rgb") : (n = c.exec(t), n ? (s = [parseInt(n[1] + n[1], 16) / 255 * 100, parseInt(n[2] + n[2], 16) / 255 * 100, parseInt(n[3] + n[3], 16) / 255 * 100], e = "rgb") : "transparent" === t && (s = [0, 0, 0, 0], e = "rgb")), e || (e = t.toString().match(/\w+/), a.isArray(e) ? e = e[0] : e || (e = ""), n = t.toString().match(/\([\d%,\.\s]*\)/), n && n.length > 0 && (n = n[0].replace(/[\(\)]/g, ""))), 0 === s.length)
                        if (e.match(u)) {
                            if (r = /^\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*(?:,\s*([0-9](?:\.[0-9]+)?)\s*)?$/.exec(n), r && r.length >= 4) {
                                for (i = 0; 3 > i; i += 1) s[i] = r[i + 1] / 255 * 100;
                                r.length > 4 && (r[4] || (r[4] = 1), s[3] = r[4])
                            } else if (n = /^\s*([0-9]{1,3}(?:\.[0-9]+)?)\s*%\s*,\s*([0-9]{1,3}(?:\.[0-9]+)?)\s*%\s*,\s*([0-9]{1,3}(?:\.[0-9]+)?)\s*%\s*(?:,\s*([0-9](?:\.[0-9]+)?)\s*)?$/.exec(n), n && n.length >= 4)
                                for (n.length >= 5 && (n.length = 5, n[4] || (n[4] = 1)), i = 0; i < n.length - 1; i += 1) s[i] = n[i + 1]
                        } else if (e.match(p) && (n = /^\s*([0-9]{1,3}(?:\.[0-9]+)?)\s*,\s*([0-9]{1,3}(?:\.[0-9]+)?)\s*%\s*,\s*([0-9]{1,3}(?:\.[0-9]+)?)\s*%\s*(?:,\s*([0-9](?:\.[0-9]+)?)\s*)?$/.exec(n), n && n.length >= 4))
                        for (n.length >= 5 && (n.length = 5, n[4] || (n[4] = 1)), i = 0; i < n.length - 1; i += 1) s[i] = n[i + 1];
                    if (s)
                        for (i = 0; i < s.length; i += 1) s[i] = Math.round(1e4 * s[i]) / 1e4;
                    return o = {
                        colorFunction: e,
                        values: s
                    }
                }
            }, t.hslToRGB = function(t) {
                if (null === t || t.s < 0 || t.s > 100 || t.l < 0 || t.l > 100) return null;
                for (; t.h > 360;) t.h = t.h - 360;
                for (; t.h < 0;) t.h = 360 + t.h;
                var e, n, o, a, s, l, c = {},
                    u = t.h / 360,
                    p = t.s / 100,
                    d = t.l / 100;
                return 0 === p ? c.r = c.g = c.b = d : (e = .5 >= d ? d * (1 + p) : d + p - d * p, n = 2 * d - e, o = i(u + m), a = i(u), s = i(u - m), l = 6 * (e - n), c.r = r(n, e, l, o), c.g = r(n, e, l, a), c.b = r(n, e, l, s)), c.r = Math.min(100 * c.r, 100), c.g = Math.min(100 * c.g, 100), c.b = Math.min(100 * c.b, 100), c.r = Math.round(1e4 * c.r) / 1e4, c.g = Math.round(1e4 * c.g) / 1e4, c.b = Math.round(1e4 * c.b) / 1e4, c
            }, t.rgbToHSL = function(t) {
                if (null === t || t.r < 0 || t.r > 100 || t.g < 0 || t.g > 100 || t.b < 0 || t.b > 100) return null;
                var e, n = {
                        h: 0,
                        s: 0,
                        l: 0
                    },
                    i = t.r / 100,
                    r = t.g / 100,
                    o = t.b / 100,
                    a = Math.max(i, r, o),
                    s = Math.min(i, r, o);
                return n.l = (a + s) / 2, a > s && n.l > 0 && (e = a - s, n.l <= .5 ? n.s = e / (a + s) : n.s = e / (2 - a - s), a === o ? n.h = 4 + (i - r) / e : a === r ? n.h = 2 + (o - i) / e : n.h = (r - o) / e, n.h *= 60, n.h > 360 ? n.h = n.h - 360 : n.h < 0 && (n.h = 360 + n.h)), n.s = Math.min(100 * n.s, 100), n.l = Math.min(100 * n.l, 100), n.h = Math.round(1e4 * n.h) / 1e4, n.s = Math.round(1e4 * n.s) / 1e4, n.l = Math.round(1e4 * n.l) / 1e4, n
            }, t.colorToSupported = function(n) {
                if (e(), !h && /rgba/.test(n) || !p && /rgb/.test(n) || !f && /hsla/.test(n) || !d && /hsl/.test(n)) {
                    var i, r, o, a, s = t.parseColorValue(n),
                        l = s.values;
                    if (l.length >= 4 && l[3] < .5) return "transparent";
                    i = l[0], r = l[1], o = l[2], /hsl/.test(n) && (a = t.hslToRGB({
                        h: l[0],
                        g: l[1],
                        b: l[2]
                    }), i = a.r, r = a.g, o = a.b), i *= 2.55, r *= 2.55, o *= 2.55, i = Math.floor(i), r = Math.floor(r), o = Math.floor(o), i = (i > 15 ? "" : "0") + i.toString(16), r = (r > 15 ? "" : "0") + r.toString(16), o = (o > 15 ? "" : "0") + o.toString(16), n = "#" + i + r + o
                }
                return n
            }, t.Timeline.addTweenType("color", function(t, e, i, r, o) {
                return new n("color", t, e, i, r, o)
            }), o = 0; o < c.length; o += 1) t.Timeline.addTweenProperty(c[o], "color")
    }(window.AdobeEdge),
    function(t) {
        "use strict";

        function e(t) {
            if (document.documentElement.style.hasOwnProperty("webkitAppearance")) {
                var e = a(t).css("-webkit-transform");
                e.match(/translateZ/) || e.match(/matrix3d/) || a(t).css("-webkit-transform", e + " translateZ(0)")
            }
        }

        function n(e, n, i, r, o, s) {
            var c, u, p, d = null;
            if (o.length >= 2 && a.isArray(o[1]) && r.length >= 2 && a.isArray(r[1]) ? d = 1 : o.length >= 2 && a.isArray(o[4]) && r.length >= 2 && a.isArray(r[4]) && (d = 4), d)
                for (u = r[d].length < o[d].length ? r[d] : o[d], p = u === o[d] ? r[d] : o[d], c = u.length; c < p.length; c += 1) u[c] = u[c - 1];
            t.PropertyTween.call(this, e, n, i, r, o, s), this.name = "GradientTween", this.tweenType = l[e]
        }

        function i(e, n) {
            var i, r, o;
            return "string" == typeof n ? p.call(t._.p[c], e, n) : (i = t.Gradient.parseValue(n), o = t.formatGradient(i, !1), r = t.formatGradient(i, !0), e.css(c, "-webkit-" + r), e.css(c, "-moz-" + r), e.css(c, "-ms-" + r), e.css(c, "-o-" + r), void e.css(c, o))
        }

        function r(e, n, i, r, o, a, s) {
            return void 0 == n[i] || "string" == typeof n[i][r] ? d.call(t._.p[c], e, n, i, r, o, a, s) : n[i][r]
        }
        var o, a = t.$,
            s = t.PropertyTween,
            l = {
                gradient: 0
            },
            c = "background-image",
            u = {
                "background-image": {
                    cssProp: c,
                    def: "0px",
                    u: "px",
                    i: 1
                }
            },
            p = t._.p[c].apply,
            d = t._.p[c].prep;
        t.forceGPU = e, a.extend(n.prototype, s.prototype), a.extend(n.prototype, {
            constructor: n,
            setupForAnimation: function() {
                var t = this.getElementSet();
                t.each(function() {
                    e(this)
                }), s.prototype.setupForAnimation.call(this)
            },
            getValue: function(t, e) {
                return a(this).css(t)
            },
            setValuePre: function(t, e, n) {
                a(this).css(e, "-webkit-" + n), a(this).css(e, "-moz-" + n), a(this).css(e, "-ms-" + n), a(this).css(e, "-o-" + n)
            },
            setValue: function(t, e, n) {
                a(this).css(e, n)
            },
            update: function(t, e) {
                var n, i, r, a, s, l, c = this.getElementSet(),
                    p = this,
                    d = this.tweenType;
                o = u[this.property].cssProp, this.updateTriggered || (this.updateTriggered = !0, this.setupForAnimation()), c.each(function() {
                    var c, u, h, f, m, g = p.getPropertyTweenData(this, d, p.property);
                    if (g.animationID === p.animationID) {
                        for (i = g.fromValues, r = g.toValues, a = p.filter, s = i.length, l = [], n = 0; s > n; n += 1) c = i[n], h = r[n], u = void 0, u = "string" == typeof c ? 0 === e && p.duration > 0 ? c : h.value : c + (h.value - c) * e, a && a[n] && (u = a[n](u, p, this, o, h.unit, t)), "number" == typeof u && 1 > u && (u = u.toFixed(6)), l.push(u + h.unit);
                        f = p.formatValuePre(l), m = p.formatValue(l), p.setValuePre.call(this, d, o, f), p.setValue.call(this, d, o, m), p.notifyObservers("onUpdate", {
                            elapsed: t,
                            easingConst: e,
                            property: o,
                            value: m,
                            element: this
                        })
                    }
                })
            },
            parseValue: function(e) {
                function n(t, e) {
                    if (t[e].length > 1) return t[e][1];
                    var i;
                    return i = 0 === e ? 0 : e === t.length - 1 ? 100 : (n(t, e - 1) + n(t, e + 1)) / 2, t[e].push(i), i
                }
                if (e && !(e.length < 2)) {
                    "string" == typeof e && (e = JSON.parse(e));
                    var i, r, o, s = null,
                        l = null,
                        c = null,
                        u = null,
                        p = null,
                        d = [],
                        h = !1,
                        f = [];
                    for (a.isArray(e[1]) ? (s = e[0], l = e[1], e[2] && (h = e[2])) : (c = [e[0], e[1]], u = e[2], p = e[3], l = e[4], e[5] && (h = e[5])), i = 0; i < l.length; i += 1) o = t.Color.parseValue(l[i][0], i), o && (d = d.concat(o), d.push(n(l, i)));
                    if (r = {
                            angle: s,
                            colorstops: d,
                            centerPoint: c,
                            ellipse: u,
                            extent: p,
                            repeating: h
                        }, r && r.colorstops) return null !== r.angle ? f = f.concat(r.angle) : r.centerPoint && (f = f.concat(r.centerPoint), f = f.concat([r.ellipse, r.extent])), f = f.concat(r.colorstops), f.concat(r.repeating)
                }
            },
            formatValue: function(e) {
                return t.formatGradient(e, !1)
            },
            formatValuePre: function(e) {
                return t.formatGradient(e, !0)
            }
        }), t.GradientTween = n, t.Gradient = {
            parseValue: n.prototype.parseValue
        }, t.formatGradient = function(e, n) {
            if (e) {
                var i, r, o, a = "",
                    s = null;
                if (e.length % 5 === 2 ? (s = 1, a += "linear-gradient(", a += (n ? e[0] : (450 - e[0]) % 360) + "deg,") : (s = 4, a += "radial-gradient(", a += n ? e[0] + "% " + e[1] + "%," + (1 == e[2] ? "ellipse" : "circle") + " " + e[3] + "," : e[3] + " " + (1 == e[2] ? "ellipse" : "circle") + " at " + e[0] + "% " + e[1] + "%,"), 1 == e[e.length - 1] && (a = "repeating-" + a), !(e.length < 12 || (e.length - s - 1) % 5 !== 0)) {
                    for (o = Math.floor((e.length - s - 1) / 5), i = 0; o > i; i += 1) r = 5 * i + s, a += t.Color.formatValue(e.slice(r, r + 4)), -1 !== e[r + 4] && (a += " " + e[r + 4] + "%"), i !== o - 1 && (a += ",");
                    return a += ")"
                }
            }
        }, t.Timeline.addTweenType("gradient", function(t, e, i, r, o) {
            return new n("gradient", t, e, i, r, o)
        }), t._.p[c].apply = i, t._.p[c].prep = r;
        for (o in u) u.hasOwnProperty(o) && t.Timeline.addTweenProperty(o, "gradient")
    }(window.AdobeEdge),
    function(t) {
        "use strict";

        function e() {
            var t, e, n = document.createElement("div"),
                i = d(n);
            return null !== document.body && document.body.appendChild(n), i.css("left", "-9999px").css("width", "100px"), i.css("transform-origin", "50% 50%").css("-webkit-transform-origin", "50% 50%").css("-moz-transform-origin", "50% 50%").css("-ms-transform-origin", "50% 50%").css("-o-transform-origin", "50% 50%"), t = i.css("transform-origin") || i.css("-webkit-transform-origin") || i.css("-moz-transform-origin") || i.css("-ms-transform-origin") || i.css("-o-transform-origin"), i.css("border-width", "10px").css("border-style", "solid"), e = i.css("transform-origin") || i.css("-webkit-transform-origin") || i.css("-moz-transform-origin") || i.css("-ms-transform-origin") || i.css("-o-transform-origin"), null !== n.parentNode && n.parentNode.removeChild(n), t !== e
        }

        function n(t, n, i, r, o, a) {
            h.call(this, t, "motion", i, void 0, void 0, a), this.name = "motionTween", this.path = r, r && r.length > 1 && r[0].length < 6 && (r[0][4] = r[0][5] = 0, r[r.length - 1].splice(2, 0, 0, 0)), this.keyframes = [], this.originIncludesBorders = e()
        }

        function i(t) {
            return 0 !== t && Math.abs(t) < 1e-6 ? t.toFixed(6) : t.toString()
        }

        function r(t, e, n) {
            try {
                if (t[0] === e[0] && t[1] === e[1]) return {
                    x: e[0],
                    y: e[1]
                }
            } catch (i) {}
            var r = {},
                o = n * n,
                a = o * n,
                s = 2 * a - 3 * o + 1,
                l = a - 2 * o + n,
                c = -2 * a + 3 * o,
                u = a - o;
            return r.x = s * t[0] + l * t[2] + c * e[0] + u * e[4], r.y = s * t[1] + l * t[3] + c * e[1] + u * e[5], r
        }

        function o(t, e, n) {
            if (t[0] === e[0] && t[1] === e[1]) return {
                dx: 0,
                dy: 0
            };
            var i = {},
                r = n * n,
                o = 6 * r - 6 * n,
                a = 3 * r - 4 * n + 1,
                s = -6 * r + 6 * n,
                l = 3 * r - 2 * n,
                c = t[2],
                u = t[3],
                p = e[4],
                d = e[5];
            return i.dx = o * t[0] + a * c + s * e[0] + l * p, i.dy = o * t[1] + a * u + s * e[1] + l * d, i
        }

        function a(t, e) {
            var n = t.x - e.x,
                i = t.y - e.y;
            return Math.sqrt(n * n + i * i)
        }

        function s(t, e) {
            return t.x * e.x + t.y * e.y
        }

        function l(t, e, n, i, o) {
            var s = Math.floor(n[i].b),
                c = (n[i].b + n[i + 1].b) / 2 - s,
                u = r(t, e, c),
                p = {
                    x: (n[i].x + n[i + 1].x) / 2,
                    y: (n[i].y + n[i + 1].y) / 2
                },
                d = 0;
            return a(p, u) > o && (u.b = c + s, n.splice(i + 1, 0, u), d = l(t, e, n, i + 1, o), d = d + l(t, e, n, i, o) + 1), d
        }

        function c(t) {
            var e, n, i, r, o, a, s, l = 1;
            for (e = 0; e < t.length - 1; e++) t[e + 1].x - t[e].x > 0 && (l = Math.min(l, t[e + 1].x - t[e].x));
            for (i = Math.ceil(1 / l), r = 1 / i, o = [], a = 0, o[0] = {
                    t: 0,
                    e: 0
                }, e = 0; i > e; e++) {
                for (n = e * r; n > t[a + 1].x && a < t.length - 2;) a++;
                s = t[a + 1].y, t[a + 1].x - t[a].x > 0 && (s = t[a].y + (n - t[a].x) * (t[a + 1].y - t[a].y) / (t[a + 1].x - t[a].x)), o[e] = {
                    t: n,
                    e: s
                }
            }
            return o[o.length - 1].t < 1 && (o[o.length] = {
                t: 1,
                e: 1
            }), o
        }

        function u(t, e) {
            var n, i, r, o, l = a(t[t.length - 1], t[0]),
                c = {
                    x: t[t.length - 1].x - t[0].x,
                    y: t[t.length - 1].y - t[0].y
                };
            for (n = 1; n < t.length - 1; n++)
                if (i = {
                        x: t[n].x - t[0].x,
                        y: t[n].y - t[0].y
                    }, r = s(i, c), o = l * a(t[n], t[0]), Math.abs(Math.acos(r / o)) > e) return !1;
            return !0
        }

        function p(t) {
            var e, n, i, o, a, s, p, d, h;
            for (e = 0; e < t.length - 1; e++) {
                for (o = [0, 0, 3 * t[e].upper.x, 3 * t[e].upper.y, 3 * t[e].lower.x, 3 * t[e].lower.y], a = [1, 1, 3 * t[e + 1].upper.x, 3 * t[e + 1].upper.y, 3 * (1 - t[e + 1].lower.x), 3 * (1 - t[e + 1].lower.y)], s = [], n = 0; 5 > n; n++) p = n / 4, d = {
                    b: p
                }, h = r(o, a, p), d.x = h.x, d.y = h.y, d.b = p, s[n] = d;
                if (u(s, .005)) s.splice(1, 3);
                else
                    for (n = 0; 4 > n; n++) i = 3 - n, l(o, a, s, i, .01);
                t[e].easingTable = c(s)
            }
        }
        var d = t.$,
            h = (t.PropertyTween, t.TransformTween),
            f = t.UpdateFinalizer;
        d.extend(n.prototype, h.prototype), d.extend(n.prototype, {
            constructor: n,
            getValue: function(t, e) {},
            setupForAnimation: function() {
                h.prototype.setupForAnimation.call(this), this.points || (this.setUpPoints(), this.setUpLen2bMap(), p(this.keyframes)), this.deltas || window.edge_authoring_mode || (this.getElementSet().each(function() {
                    var e = d(this),
                        n = t.$.data(this, "p_x") || "left",
                        i = t.$.data(this, "p_y") || "top",
                        r = this.parentElement,
                        o = d(r),
                        a = +parseFloat(e.css(n)) || 0,
                        s = +parseFloat(e.css(i)) || 0;
                    "%" === t.$.data(this, "u_x") && (a = a / 100 * +o.width()), "%" === t.$.data(this, "u_y") && (s = s / 100 * +o.height()), t.$.data(this, "deltaX", a), t.$.data(this, "deltaY", s), e.css(n, "0px").css(i, "0px")
                }), this.deltas = !0);
                for (var e, n = this; n._prevObj && (2 != n._prevObj.path.length || n._prevObj.path[0][0] !== n._prevObj.path[1][0] || n._prevObj.path[0][1] !== n._prevObj.path[1][1]);) n = n._prevObj;
                e = o(n.path[0], n.path[1], 1e-6), this.deltaRotate = 180 * Math.atan2(e.dx, e.dy) / Math.PI
            },
            computeEasing: function(t) {
                var e, n, i, r, o, a, s = this.keyframes,
                    l = t / this.getDuration(),
                    c = 0;
                for (e = 0; e < s.length - 1 && (c = e, !(l <= s[e + 1].t)); e++);
                return n = s[c].easingTable, i = s[c + 1].l - s[c].l, r = s[c + 1].t - s[c].t, l = (l - s[c].t) / r, o = Math.floor(l / (n[1].t - n[0].t)), o = Math.min(n.length - 2, Math.max(o, 0)), a = n[o].e + (l - n[o].t) * (n[o + 1].e - n[o].e) / (n[o + 1].t - n[o].t), s[c].l + a * i
            },
            originInPx: function(e) {
                var n, i, r, o, a, s, l = {},
                    c = e.width(),
                    u = e.height();
                return n = e.css("transform-origin") || e.css("-webkit-transform-origin") || e.css("-moz-transform-origin") || e.css("-ms-transform-origin") || e.css("-o-transform-origin") || "50% 50%", i = n.split(" "), i[0].indexOf("%") > 0 ? (a = parseFloat(i[0].substring(0, i[0].length - 1)) / 100, s = parseFloat(i[1].substring(0, i[1].length - 1)) / 100, l.x = c * a, l.y = u * s) : (l.x = parseFloat(i[0].substring(0, i[0].length - 2)), l.y = parseFloat(i[1].substring(0, i[1].length - 2))), this.originIncludesBorders || (a = a || l.x / c, s = s || l.y / u, r = t.splitUnits(e.css("border-left-width")).num + t.splitUnits(e.css("border-right-width")).num || 0, r *= a, o = t.splitUnits(e.css("border-top-width")).num + t.splitUnits(e.css("border-bottom-width")).num || 0, o *= s, l.x += r, l.y += o), l
            },
            update: function(e, n, a) {
                this.updateTriggered || (this.updateTriggered = !0, this.setupForAnimation(a));
                var s, l, c, u = this.getElementSet(a),
                    p = this,
                    m = this.property,
                    g = this.tweenType,
                    y = n,
                    v = this.findSegment(y),
                    b = this.path,
                    w = this.easeToB(y),
                    x = this.points[this.points.length - 1].l;
                w -= v, w = Math.min(1, Math.max(0, w)), s = Math.max(1e-6, Math.min(.999999, w));
                var T, S, P = r(b[v], b[v + 1], w),
                    k = o(b[v], b[v + 1], s),
                    E = 180 * Math.atan2(k.dx, k.dy) / Math.PI;
                this._prevObj && 2 === b.length && b[0][0] === b[1][0] && b[0][1] === b[1][1] ? (S = !0, T = 0) : T = this.deltaRotate - E, (0 > y || y > 1) && (l = Math.atan2(k.dy, k.dx), c = y > 1 ? y - 1 : y, P.x += Math.cos(l) * x * c, P.y += Math.sin(l) * x * c), u.each(function() {
                    var r, o, a, s, l = d(this),
                        c = p.getPropertyTweenData(this, g, m),
                        u = t.$.data(this, h.dataName),
                        y = this.parentElement;
                    if (u.tween = p, c.animationID === p.animationID) {
                        r = p.originInPx(l);
                        var v = t.$.data(this, "p_x") || "left",
                            b = t.$.data(this, "p_y") || "top",
                            w = P.x,
                            x = P.y,
                            k = t.$.data(this, "u_x") || "px",
                            E = t.$.data(this, "u_y") || "px",
                            A = 0,
                            C = 0,
                            _ = !window.edge_authoring_mode,
                            O = t.$.data(this, "doAutoOrient");
                        O = "true" === O ? !0 : "false" === O ? !1 : O, _ && (o = d(y), a = o.width(), s = o.height(), "%" === k && (w = w / 100 * a), "%" === E && (x = x / 100 * s)), w += "right" === v ? r.x : -1 * r.x, x += "bottom" === b ? r.y : -1 * r.y, _ && (w += A, x += C), w = i(w), x = i(x), S || (O || (T = 0), T = Math.abs(T) > .01 ? T : 0, t.$.data(this, "motionRotateZ", T + "deg"), p.setValue.call(this, void 0, "motionRotateZ", T + "deg"), f.Register(p.timeline, u.id, u)), _ ? (p.setValue.call(this, void 0, "motionTranslateX", w + "px"), p.setValue.call(this, void 0, "motionTranslateY", x + "px"), f.Register(p.timeline, u.id, u)) : (d(this).css(v, w + k), p.notifyObservers("onUpdate", {
                            elapsed: e,
                            easingConst: n,
                            property: v,
                            value: w + k,
                            element: u.tween
                        }), d(this).css(b, x + E), p.notifyObservers("onUpdate", {
                            elapsed: e,
                            easingConst: n,
                            property: b,
                            value: x + E,
                            element: this
                        }))
                    }
                })
            },
            findSegment: function(t) {
                var e = this.len2b(t * this.points[this.points.length - 1].l);
                return e = Math.floor(e), Math.min(Math.max(e, 0), this.path.length - 2)
            },
            easeToB: function(t) {
                return this.len2b(t * this.points[this.points.length - 1].l)
            },
            setUpLen2bMap: function() {
                var t, e, n, i, r = 0,
                    o = 60 * this.getDuration() / 1e3,
                    s = this.len2bMap = [],
                    l = this.points;
                for (t = 0; t < l.length - 1; t++) l[t].l = r, r += a(l[t], l[t + 1]);
                if (l[l.length - 1].l = r, e = r, n = e / o, this.len2bStep = n, r = 0, t = 0, e > 0) {
                    for (; e >= r;) {
                        for (; t < l.length - 1 && r > l[t + 1].l;) t += 1;
                        if (t >= l.length - 1) break;
                        i = l[t].b + (r - l[t].l) * (l[t + 1].b - l[t].b) / (l[t + 1].l - l[t].l), s.push({
                            l: r,
                            b: i
                        }), r += n
                    }
                    s[s.length - 1].b < l[l.length - 1].b && s.push({
                        l: l[l.length - 1].l,
                        b: l[l.length - 1].b
                    })
                } else s.push({
                    l: 0,
                    b: l[0].b
                })
            },
            setUpPoints: function() {
                var t, e, n, i, o, a, s, c = this.path,
                    u = 2;
                for (this.points = [], t = 0; t < c.length - 1; t++)
                    for (e = 0; 5 > e; e++)(4 > e || t === c.length - 2) && (i = e / 4, o = {
                        b: t + i
                    }, a = r(c[t], c[t + 1], i), o.x = a.x, o.y = a.y, this.points.push(o));
                for (t = 1; t < c.length; t++)
                    for (s = c.length - t - 1, e = 0; 4 > e; e++) n = 3 - e + 4 * s, l(c[s], c[s + 1], this.points, n, u);
                return this.points
            },
            len2b: function(t) {
                this.len2bMap || this.setUpLen2bMap();
                var e, n = this.len2bMap,
                    i = Math.min(Math.max(0, Math.floor(t / this.len2bStep)), this.len2bMap.length - 2);
                return 0 === n.length ? 0 : 1 === n.length ? n[0].b : e = (t - n[i].l) * (n[i + 1].b - n[i].b) / (n[i + 1].l - n[i].l) + n[i].b
            }
        }), t.MotionTween = n, t.Timeline.addTweenType("motion", function(t, e, i, r, o, a) {
            return new n("motion", t, e, i, r, o, a)
        }), t.Timeline.addTweenProperty("motion", "motion"), t.Timeline.addTweenProperty("location", "motion")
    }(window.AdobeEdge),
    function(t) {
        "use strict";

        function e(t, e) {
            var n = t.ci = t.ci || [];
            n.push(e)
        }

        function n(t, n, i, r, o, a) {
            if (i && r && t && t._s && t.sym && t.sym[i]) {
                var s, l = [];
                return "object" == typeof r ? s = r : (s = n.find$(r), s || (s = n.$(r))), s.each(function() {
                    var n, r, s, c = p(this),
                        u = document.createElement("div"),
                        d = c._children(),
                        f = {};
                    s = h.getParentSymbol(this, !0), r = new h(t.sym, i, t, s, a), r && ((o || 0 === o) && c._children().eq(o)[0] ? 0 > o ? d.get(o).insertAfter(u) : d.get(o).insertBefore(u) : c.append(u), r.opts = r.opts || {}, p.extend(r.opts, f), r.init(u), r._applyBaseStyles(p(u), i), "boolean" == typeof n && r.setAutoPlay(n), e(s, r), l.push(r))
                }), t.readyCalled && l.forEach(function(t) {
                    f._playAuto(t, !0), t.getSymbolElement().css("position", "relative")
                }), l
            }
        }

        function i(t, e) {
            var n, i = e.getSymbolElementNode().id;
            for (n = t.length - 1; n >= 0; n--) t[n].getSymbolElementNode().id === i && t.splice(n, 1)
        }

        function r(t) {
            t.prnt && t.prnt.ci && i(t.prnt.ci, t), i(t.composition._s, t), t.composition = void 0, t.prnt = void 0
        }

        function o(t, e) {
            e = e || [];
            var n = t.parentNode;
            return t && 1 === t.nodeType && (e.push(n), o(n, e)), e
        }

        function a(t, e) {
            e = e || [];
            for (var n = t.firstElementChild; n;) e.push(n), n = n.nextElementSibling;
            return e
        }

        function s(t, e, n) {
            var i = p.Event(t);
            return p.extend(i, {
                Symbol: e,
                element: e.ele,
                performDefaultAction: !0
            }), n && p.extend(i, n), i
        }

        function l(t, e) {
            e = e || {};
            var n, i, o = t.composition ? t.composition._s : null,
                a = s("beforeDeletion", t, {}),
                c = t.ci;
            if (o && (t.notifyObservers("beforeDeletion", a), a.performDefaultAction)) {
                if (t.stop(0), c)
                    for (n = c.length; c.length > 0;) l(c[0], e);
                r(t), i = t.ele, h.setSymbol(p(i)[0], void 0), e._keepElement ? p(i).empty() : p(i).remove(), t.tlCached = null, t.ele = null, t.removeObservers()
            }
        }

        function c(t, e, n) {
            var i = p.Event(e);
            return p.extend(i, {
                Symbol: t,
                element: t.ele,
                performDefaultAction: !0
            }), p.extend(i, n), i
        }

        function u(t, e) {
            if (e) {
                var n = t.getVariable(e),
                    i = "variableChanged:" + e,
                    r = c(t, i, {
                        variableValue: n
                    });
                t.notifyObservers(i, r)
            }
        }
        var p = t.$,
            d = t.An$,
            h = t.Symbol,
            f = t.Composition;
        t.Notifier;
        p.extend(d.prototype, {
            _parents: function() {
                var t = [];
                return this.each(function(e, n) {
                    o(n, t)
                }), p(t)
            },
            _children: function() {
                var t = [];
                return this.each(function(e, n) {
                    a(n, t)
                }), p(t)
            },
            eq: function(t) {
                return p(this[t])
            },
            append: function(t) {
                var e = p(t),
                    n = this;
                e.each(function(t, e) {
                    n.each(function(t, n) {
                        n.appendChild(e)
                    })
                })
            }
        }), h.getParentSymbol = function(t, e) {
            var n, i, r = p(t),
                o = r._parents(),
                a = o.length;
            if (i = h.getSymbol(r[0]), i && e) return i;
            for (n = 0; a > n; n++)
                if (i = h.getSymbol(o[n])) return i;
            return null
        }, p.extend(d.prototype, {
            empty: function() {
                var t;
                this.each(function(e, n) {
                    for (t = n.firstChild; t;) n.removeChild(t), t = n.firstChild
                })
            },
            remove: function() {
                var t;
                this.empty(), this.each(function(e, n) {
                    t = n.parentNode, t && t.removeChild(n)
                })
            }
        }), p.extend(h.prototype, {
            deleteSymbol: function(t) {
                return l(this, t)
            },
            createChildSymbol: function(t, e, i, r) {
                if (t && e) {
                    var o, a;
                    if ("object" == typeof e ? o = e : (o = this.find$(e), o || (o = this.$(e))), o && o[0]) return a = n(this.composition, this, t, e, i, r), a ? (a.forEach(function(t) {}), a[0]) : void 0
                }
            },
            getVariable: function(t) {
                return this.variables[t]
            },
            setVariable: function(t, e) {
                return this.variables[t] = e, window.edge_authoring_mode && (this._variables[t] = e), u(this, t), this
            },
            getSymbol: function(t) {
                var e = this.$(t);
                return h.getSymbol(e)
            },
            getParentSymbol: function() {
                return h.getParentSymbol(this.ele, !1)
            },
            getChildSymbols: function() {
                return this.ci ? this.ci.slice(0) : []
            },
            playAll: function() {
                this.play();
                for (var t = this.getChildSymbols(), e = 0; e < t.length; e++) t[e].playAll()
            },
            stopAll: function(t, e) {
                this.stop(t, e);
                for (var n = this.getChildSymbols(), i = 0; i < n.length; i++) n[i].stopAll(t, e)
            },
            getSymbolElementNode: function() {
                return this.ele
            },
            getSymbolElement: function() {
                return t.$(this.ele)
            },
            _executeMediaAction: function(t, e) {
                if (!("object" != typeof e || e.length < 3)) {
                    var n = e[0],
                        i = e[1],
                        r = this.$(i)[0];
                    if (r && n) {
                        var o = e[2];
                        o && "object" == typeof o || (o = null), "play" === n ? (o && o.length > 0 && "number" == typeof o[0] && (r.currentTime = o[0]), r.play()) : "pause" === n && r.pause()
                    }
                }
            },
            _executeSymbolAction: function(e, n) {
                if (!("object" != typeof n || n.length < 3)) {
                    var i = n[0],
                        r = n[1],
                        o = t.Symbol.get(this.$(r));
                    if (o && i) {
                        var a = n[2];
                        a && "object" == typeof a || (a = null), o[i].apply(o, a)
                    }
                }
            },
            eMA: function(t, e) {
                this._executeMediaAction(t, e)
            }
        }), h.prototype.getParameter = h.prototype.getVariable, h.prototype.setParameter = h.prototype.setVariable, p.extend(f.prototype, {
            createSymbolChild: function(t, e, i, r) {
                return n(this, this.stage, t, e, i, r)
            },
            removeSymbol: function(t, e) {
                if (this.symbolInstances) {
                    var n = h.get(t);
                    n && n.deleteSymbol(e)
                }
            }
        })
    }(window.AdobeEdge);
! function(n, t, e, r) {
    function o(n) {
        return String(n).replace(/[&<>"'\/]/g, function(n) {
            return c[n]
        })
    }
    t || (t = {}, n ? n[r] = t : e[r] = t);
    var i, u, c, f = {},
        l = {},
        p = /[[\]{}()*+?.\\|^$\-,&#\s]/g;
    c = {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': "&quot;",
        "'": "&#39;",
        "/": "&#x2F;"
    }, t.define = function(n) {
        var t, e, r, c, a = [];
        for (t in n) {
            r = n[t].codes;
            for (e in r) c = r[e], f[c] = t, f[o(c)] = t, 0 == e && (l[c] = t)
        }
        for (c in f) a.push("(" + c.replace(p, "\\$&") + ")");
        u = new RegExp(a.join("|"), "g"), i = n
    }, t.replace = function(n, e) {
        return n.replace(u, function(n) {
            var r = f[n];
            return (e || t.tpl)(r, n, i[r].title)
        })
    }, t.toString = function(n) {
        var e, r, o = "";
        for (e in l) r = l[e], o += (n || t.tpl)(r, e, i[r].title);
        return o
    }, t.tpl = function(n, t, e) {
        return '<span class="emoticon emoticon-' + n + '" title="' + e + '">' + t + "</span>"
    }
}("undefined" != typeof jQuery ? jQuery : null, "undefined" != typeof exports ? exports : null, window, "emoticons");

function FastClick(a) {
    function b(a, b) {
        return function() {
            return a.apply(b, arguments)
        }
    }
    var c;
    this.trackingClick = !1;
    this.trackingClickStart = 0;
    this.targetElement = null;
    this.lastTouchIdentifier = this.touchStartY = this.touchStartX = 0;
    this.touchBoundary = 10;
    this.layer = a;
    FastClick.notNeeded(a) || (deviceIsAndroid && (a.addEventListener("mouseover", b(this.onMouse, this), !0), a.addEventListener("mousedown", b(this.onMouse, this), !0), a.addEventListener("mouseup", b(this.onMouse, this), !0)), a.addEventListener("click", b(this.onClick, this), !0), a.addEventListener("touchstart", b(this.onTouchStart, this), !1), a.addEventListener("touchmove", b(this.onTouchMove, this), !1), a.addEventListener("touchend", b(this.onTouchEnd, this), !1), a.addEventListener("touchcancel", b(this.onTouchCancel, this), !1), Event.prototype.stopImmediatePropagation || (a.removeEventListener = function(b, c, e) {
        var f = Node.prototype.removeEventListener;
        "click" === b ? f.call(a, b, c.hijacked || c, e) : f.call(a, b, c, e)
    }, a.addEventListener = function(b, c, e) {
        var f = Node.prototype.addEventListener;
        "click" === b ? f.call(a, b, c.hijacked || (c.hijacked = function(a) {
            a.propagationStopped || c(a)
        }), e) : f.call(a, b, c, e)
    }), "function" === typeof a.onclick && (c = a.onclick, a.addEventListener("click", function(a) {
        c(a)
    }, !1), a.onclick = null))
}
var deviceIsAndroid = 0 < navigator.userAgent.indexOf("Android"),
    deviceIsIOS = /iP(ad|hone|od)/.test(navigator.userAgent),
    deviceIsIOS4 = deviceIsIOS && /OS 4_\d(_\d)?/.test(navigator.userAgent),
    deviceIsIOSWithBadTarget = deviceIsIOS && /OS ([6-9]|\d{2})_\d/.test(navigator.userAgent);
FastClick.prototype.needsClick = function(a) {
    switch (a.nodeName.toLowerCase()) {
        case "button":
        case "select":
        case "textarea":
            if (a.disabled) return !0;
            break;
        case "input":
            if (deviceIsIOS && "file" === a.type || a.disabled) return !0;
            break;
        case "label":
        case "video":
            return !0
    }
    return /\bneedsclick\b/.test(a.className)
};
FastClick.prototype.needsFocus = function(a) {
    switch (a.nodeName.toLowerCase()) {
        case "textarea":
            return !0;
        case "select":
            return !deviceIsAndroid;
        case "input":
            switch (a.type) {
                case "button":
                case "checkbox":
                case "file":
                case "image":
                case "radio":
                case "submit":
                    return !1
            }
            return !a.disabled && !a.readOnly;
        default:
            return /\bneedsfocus\b/.test(a.className)
    }
};
FastClick.prototype.sendClick = function(a, b) {
    var c, d;
    document.activeElement && document.activeElement !== a && document.activeElement.blur();
    d = b.changedTouches[0];
    c = document.createEvent("MouseEvents");
    c.initMouseEvent(this.determineEventType(a), !0, !0, window, 1, d.screenX, d.screenY, d.clientX, d.clientY, !1, !1, !1, !1, 0, null);
    c.forwardedTouchEvent = !0;
    a.dispatchEvent(c)
};
FastClick.prototype.determineEventType = function(a) {
    return deviceIsAndroid && "select" === a.tagName.toLowerCase() ? "mousedown" : "click"
};
FastClick.prototype.focus = function(a) {
    var b;
    deviceIsIOS && a.setSelectionRange && 0 !== a.type.indexOf("date") && "time" !== a.type ? (b = a.value.length, a.setSelectionRange(b, b)) : a.focus()
};
FastClick.prototype.updateScrollParent = function(a) {
    var b, c;
    b = a.fastClickScrollParent;
    if (!b || !b.contains(a)) {
        c = a;
        do {
            if (c.scrollHeight > c.offsetHeight) {
                b = c;
                a.fastClickScrollParent = c;
                break
            }
            c = c.parentElement
        } while (c)
    }
    b && (b.fastClickLastScrollTop = b.scrollTop)
};
FastClick.prototype.getTargetElementFromEventTarget = function(a) {
    return a.nodeType === Node.TEXT_NODE ? a.parentNode : a
};
FastClick.prototype.onTouchStart = function(a) {
    var b, c, d;
    if (1 < a.targetTouches.length) return !0;
    b = this.getTargetElementFromEventTarget(a.target);
    c = a.targetTouches[0];
    if (deviceIsIOS) {
        d = window.getSelection();
        if (d.rangeCount && !d.isCollapsed) return !0;
        if (!deviceIsIOS4) {
            if (c.identifier === this.lastTouchIdentifier) return a.preventDefault(), !1;
            this.lastTouchIdentifier = c.identifier;
            this.updateScrollParent(b)
        }
    }
    this.trackingClick = !0;
    this.trackingClickStart = a.timeStamp;
    this.targetElement = b;
    this.touchStartX = c.pageX;
    this.touchStartY = c.pageY;
    200 > a.timeStamp - this.lastClickTime && a.preventDefault();
    return !0
};
FastClick.prototype.touchHasMoved = function(a) {
    a = a.changedTouches[0];
    var b = this.touchBoundary;
    return Math.abs(a.pageX - this.touchStartX) > b || Math.abs(a.pageY - this.touchStartY) > b ? !0 : !1
};
FastClick.prototype.onTouchMove = function(a) {
    if (!this.trackingClick) return !0;
    if (this.targetElement !== this.getTargetElementFromEventTarget(a.target) || this.touchHasMoved(a)) this.trackingClick = !1, this.targetElement = null;
    return !0
};
FastClick.prototype.findControl = function(a) {
    return void 0 !== a.control ? a.control : a.htmlFor ? document.getElementById(a.htmlFor) : a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")
};
FastClick.prototype.onTouchEnd = function(a) {
    var b, c, d = this.targetElement;
    if (!this.trackingClick) return !0;
    if (200 > a.timeStamp - this.lastClickTime) return this.cancelNextClick = !0;
    this.cancelNextClick = !1;
    this.lastClickTime = a.timeStamp;
    b = this.trackingClickStart;
    this.trackingClick = !1;
    this.trackingClickStart = 0;
    deviceIsIOSWithBadTarget && (c = a.changedTouches[0], d = document.elementFromPoint(c.pageX - window.pageXOffset, c.pageY - window.pageYOffset) || d, d.fastClickScrollParent = this.targetElement.fastClickScrollParent);
    c = d.tagName.toLowerCase();
    if ("label" === c) {
        if (b = this.findControl(d)) {
            this.focus(d);
            if (deviceIsAndroid) return !1;
            d = b
        }
    } else if (this.needsFocus(d)) {
        if (100 < a.timeStamp - b || deviceIsIOS && window.top !== window && "input" === c) return this.targetElement = null, !1;
        this.focus(d);
        this.sendClick(d, a);
        deviceIsIOS4 && "select" === c || (this.targetElement = null, a.preventDefault());
        return !1
    }
    if (deviceIsIOS && !deviceIsIOS4 && (b = d.fastClickScrollParent) && b.fastClickLastScrollTop !== b.scrollTop) return !0;
    this.needsClick(d) || (a.preventDefault(), this.sendClick(d, a));
    return !1
};
FastClick.prototype.onTouchCancel = function() {
    this.trackingClick = !1;
    this.targetElement = null
};
FastClick.prototype.onMouse = function(a) {
    return this.targetElement && !a.forwardedTouchEvent && a.cancelable ? !this.needsClick(this.targetElement) || this.cancelNextClick ? (a.stopImmediatePropagation ? a.stopImmediatePropagation() : a.propagationStopped = !0, a.stopPropagation(), a.preventDefault(), !1) : !0 : !0
};
FastClick.prototype.onClick = function(a) {
    if (this.trackingClick) return this.targetElement = null, this.trackingClick = !1, !0;
    if ("submit" === a.target.type && 0 === a.detail) return !0;
    a = this.onMouse(a);
    a || (this.targetElement = null);
    return a
};
FastClick.prototype.destroy = function() {
    var a = this.layer;
    deviceIsAndroid && (a.removeEventListener("mouseover", this.onMouse, !0), a.removeEventListener("mousedown", this.onMouse, !0), a.removeEventListener("mouseup", this.onMouse, !0));
    a.removeEventListener("click", this.onClick, !0);
    a.removeEventListener("touchstart", this.onTouchStart, !1);
    a.removeEventListener("touchmove", this.onTouchMove, !1);
    a.removeEventListener("touchend", this.onTouchEnd, !1);
    a.removeEventListener("touchcancel", this.onTouchCancel, !1)
};
FastClick.notNeeded = function(a) {
    var b, c;
    if ("undefined" === typeof window.ontouchstart) return !0;
    if (c = +(/Chrome\/([0-9]+)/.exec(navigator.userAgent) || [, 0])[1])
        if (deviceIsAndroid) {
            if ((b = document.querySelector("meta[name=viewport]")) && (-1 !== b.content.indexOf("user-scalable=no") || 31 < c && window.innerWidth <= window.screen.width)) return !0
        } else return !0;
    return "none" === a.style.msTouchAction ? !0 : !1
};
FastClick.attach = function(a) {
    return new FastClick(a)
};
"undefined" !== typeof define && define.amd ? define(function() {
    return FastClick
}) : "undefined" !== typeof module && module.exports ? (module.exports = FastClick.attach, module.exports.FastClick = FastClick) : window.FastClick = FastClick;
! function() {
    var e = {},
        t = null,
        n = !0,
        r = !1;
    try {
        "undefined" != typeof AudioContext ? t = new AudioContext : "undefined" != typeof webkitAudioContext ? t = new webkitAudioContext : n = !1
    } catch (i) {
        n = !1
    }
    if (!n)
        if ("undefined" != typeof Audio) try {
            new Audio
        } catch (i) {
            r = !0
        } else r = !0;
    if (n) {
        var s = void 0 === t.createGain ? t.createGainNode() : t.createGain();
        s.gain.value = 1, s.connect(t.destination)
    }
    var o = function(e) {
        this._volume = 1, this._muted = !1, this.usingWebAudio = n, this.ctx = t, this.noAudio = r, this._howls = [], this._codecs = e, this.iOSAutoEnable = !0
    };
    o.prototype = {
        volume: function(e) {
            var t = this;
            if (e = parseFloat(e), e >= 0 && 1 >= e) {
                t._volume = e, n && (s.gain.value = e);
                for (var r in t._howls)
                    if (t._howls.hasOwnProperty(r) && t._howls[r]._webAudio === !1)
                        for (var i = 0; i < t._howls[r]._audioNode.length; i++) t._howls[r]._audioNode[i].volume = t._howls[r]._volume * t._volume;
                return t
            }
            return n ? s.gain.value : t._volume
        },
        mute: function() {
            return this._setMuted(!0), this
        },
        unmute: function() {
            return this._setMuted(!1), this
        },
        _setMuted: function(e) {
            var t = this;
            t._muted = e, n && (s.gain.value = e ? 0 : t._volume);
            for (var r in t._howls)
                if (t._howls.hasOwnProperty(r) && t._howls[r]._webAudio === !1)
                    for (var i = 0; i < t._howls[r]._audioNode.length; i++) t._howls[r]._audioNode[i].muted = e
        },
        codecs: function(e) {
            return this._codecs[e]
        },
        _enableiOSAudio: function() {
            var e = this;
            if (!t || !e._iOSEnabled && /iPhone|iPad|iPod/i.test(navigator.userAgent)) {
                e._iOSEnabled = !1;
                var n = function() {
                    var r = t.createBuffer(1, 1, 22050),
                        i = t.createBufferSource();
                    i.buffer = r, i.connect(t.destination), void 0 === i.start ? i.noteOn(0) : i.start(0), setTimeout(function() {
                        (i.playbackState === i.PLAYING_STATE || i.playbackState === i.FINISHED_STATE) && (e._iOSEnabled = !0, e.iOSAutoEnable = !1, window.removeEventListener("touchstart", n, !1))
                    }, 0)
                };
                return window.addEventListener("touchstart", n, !1), e
            }
        }
    };
    var u = null,
        a = {};
    r || (u = new Audio, a = {
        mp3: !!u.canPlayType("audio/mpeg;").replace(/^no$/, ""),
        opus: !!u.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/, ""),
        ogg: !!u.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""),
        wav: !!u.canPlayType('audio/wav; codecs="1"').replace(/^no$/, ""),
        aac: !!u.canPlayType("audio/aac;").replace(/^no$/, ""),
        m4a: !!(u.canPlayType("audio/x-m4a;") || u.canPlayType("audio/m4a;") || u.canPlayType("audio/aac;")).replace(/^no$/, ""),
        mp4: !!(u.canPlayType("audio/x-mp4;") || u.canPlayType("audio/mp4;") || u.canPlayType("audio/aac;")).replace(/^no$/, ""),
        weba: !!u.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, "")
    });
    var f = new o(a),
        l = function(e) {
            var r = this;
            r._autoplay = e.autoplay || !1, r._buffer = e.buffer || !1, r._duration = e.duration || 0, r._format = e.format || null, r._loop = e.loop || !1, r._loaded = !1, r._sprite = e.sprite || {}, r._src = e.src || "", r._pos3d = e.pos3d || [0, 0, -.5], r._volume = void 0 !== e.volume ? e.volume : 1, r._urls = e.urls || [], r._rate = e.rate || 1, r._model = e.model || null, r._onload = [e.onload || function() {}], r._onloaderror = [e.onloaderror || function() {}], r._onend = [e.onend || function() {}], r._onpause = [e.onpause || function() {}], r._onplay = [e.onplay || function() {}], r._onendTimer = [], r._webAudio = n && !r._buffer, r._audioNode = [], r._webAudio && r._setupAudioNode(), void 0 !== t && t && f.iOSAutoEnable && f._enableiOSAudio(), f._howls.push(r), r.load()
        };
    if (l.prototype = {
            load: function() {
                var e = this,
                    t = null;
                if (r) return void e.on("loaderror");
                for (var n = 0; n < e._urls.length; n++) {
                    var i, s;
                    if (e._format) i = e._format;
                    else {
                        if (s = e._urls[n], i = /^data:audio\/([^;,]+);/i.exec(s), i || (i = /\.([^.]+)$/.exec(s.split("?", 1)[0])), !i) return void e.on("loaderror");
                        i = i[1].toLowerCase()
                    }
                    if (a[i]) {
                        t = e._urls[n];
                        break
                    }
                }
                if (!t) return void e.on("loaderror");
                if (e._src = t, e._webAudio) c(e, t);
                else {
                    var u = new Audio;
                    u.addEventListener("error", function() {
                        u.error && 4 === u.error.code && (o.noAudio = !0), e.on("loaderror", {
                            type: u.error ? u.error.code : 0
                        })
                    }, !1), e._audioNode.push(u), u.src = t, u._pos = 0, u.preload = "auto", u.volume = f._muted ? 0 : e._volume * f.volume();
                    var l = function() {
                        e._duration = Math.ceil(10 * u.duration) / 10, 0 === Object.getOwnPropertyNames(e._sprite).length && (e._sprite = {
                            _default: [0, 1e3 * e._duration]
                        }), e._loaded || (e._loaded = !0, e.on("load")), e._autoplay && e.play(), u.removeEventListener("canplaythrough", l, !1)
                    };
                    u.addEventListener("canplaythrough", l, !1), u.load()
                }
                return e
            },
            urls: function(e) {
                var t = this;
                return e ? (t.stop(), t._urls = "string" == typeof e ? [e] : e, t._loaded = !1, t.load(), t) : t._urls
            },
            play: function(e, n) {
                var r = this;
                return "function" == typeof e && (n = e), e && "function" != typeof e || (e = "_default"), r._loaded ? r._sprite[e] ? (r._inactiveNode(function(i) {
                    i._sprite = e;
                    var s = i._pos > 0 ? i._pos : r._sprite[e][0] / 1e3,
                        o = 0;
                    r._webAudio ? (o = r._sprite[e][1] / 1e3 - i._pos, i._pos > 0 && (s = r._sprite[e][0] / 1e3 + s)) : o = r._sprite[e][1] / 1e3 - (s - r._sprite[e][0] / 1e3);
                    var u, a = !(!r._loop && !r._sprite[e][2]),
                        l = "string" == typeof n ? n : Math.round(Date.now() * Math.random()) + "";
                    if (function() {
                            var t = {
                                id: l,
                                sprite: e,
                                loop: a
                            };
                            u = setTimeout(function() {
                                !r._webAudio && a && r.stop(t.id).play(e, t.id), r._webAudio && !a && (r._nodeById(t.id).paused = !0, r._nodeById(t.id)._pos = 0, r._clearEndTimer(t.id)), r._webAudio || a || r.stop(t.id), r.on("end", l)
                            }, 1e3 * o), r._onendTimer.push({
                                timer: u,
                                id: t.id
                            })
                        }(), r._webAudio) {
                        var c = r._sprite[e][0] / 1e3,
                            h = r._sprite[e][1] / 1e3;
                        i.id = l, i.paused = !1, d(r, [a, c, h], l), r._playStart = t.currentTime, i.gain.value = r._volume, void 0 === i.bufferSource.start ? i.bufferSource.noteGrainOn(0, s, o) : i.bufferSource.start(0, s, o)
                    } else {
                        if (4 !== i.readyState && (i.readyState || !navigator.isCocoonJS)) return r._clearEndTimer(l),
                            function() {
                                var t = r,
                                    s = e,
                                    o = n,
                                    u = i,
                                    a = function() {
                                        t.play(s, o), u.removeEventListener("canplaythrough", a, !1)
                                    };
                                u.addEventListener("canplaythrough", a, !1)
                            }(), r;
                        i.readyState = 4, i.id = l, i.currentTime = s, i.muted = f._muted || i.muted, i.volume = r._volume * f.volume(), setTimeout(function() {
                            i.play()
                        }, 0)
                    }
                    return r.on("play"), "function" == typeof n && n(l), r
                }), r) : ("function" == typeof n && n(), r) : (r.on("load", function() {
                    r.play(e, n)
                }), r)
            },
            pause: function(e) {
                var t = this;
                if (!t._loaded) return t.on("play", function() {
                    t.pause(e)
                }), t;
                t._clearEndTimer(e);
                var n = e ? t._nodeById(e) : t._activeNode();
                if (n)
                    if (n._pos = t.pos(null, e), t._webAudio) {
                        if (!n.bufferSource || n.paused) return t;
                        n.paused = !0, void 0 === n.bufferSource.stop ? n.bufferSource.noteOff(0) : n.bufferSource.stop(0)
                    } else n.pause();
                return t.on("pause"), t
            },
            stop: function(e) {
                var t = this;
                if (!t._loaded) return t.on("play", function() {
                    t.stop(e)
                }), t;
                t._clearEndTimer(e);
                var n = e ? t._nodeById(e) : t._activeNode();
                if (n)
                    if (n._pos = 0, t._webAudio) {
                        if (!n.bufferSource || n.paused) return t;
                        n.paused = !0, void 0 === n.bufferSource.stop ? n.bufferSource.noteOff(0) : n.bufferSource.stop(0)
                    } else isNaN(n.duration) || (n.pause(), n.currentTime = 0);
                return t
            },
            mute: function(e) {
                var t = this;
                if (!t._loaded) return t.on("play", function() {
                    t.mute(e)
                }), t;
                var n = e ? t._nodeById(e) : t._activeNode();
                return n && (t._webAudio ? n.gain.value = 0 : n.muted = !0), t
            },
            unmute: function(e) {
                var t = this;
                if (!t._loaded) return t.on("play", function() {
                    t.unmute(e)
                }), t;
                var n = e ? t._nodeById(e) : t._activeNode();
                return n && (t._webAudio ? n.gain.value = t._volume : n.muted = !1), t
            },
            volume: function(e, t) {
                var n = this;
                if (e = parseFloat(e), e >= 0 && 1 >= e) {
                    if (n._volume = e, !n._loaded) return n.on("play", function() {
                        n.volume(e, t)
                    }), n;
                    var r = t ? n._nodeById(t) : n._activeNode();
                    return r && (n._webAudio ? r.gain.value = e : r.volume = e * f.volume()), n
                }
                return n._volume
            },
            loop: function(e) {
                var t = this;
                return "boolean" == typeof e ? (t._loop = e, t) : t._loop
            },
            sprite: function(e) {
                var t = this;
                return "object" == typeof e ? (t._sprite = e, t) : t._sprite
            },
            pos: function(e, n) {
                var r = this;
                if (!r._loaded) return r.on("load", function() {
                    r.pos(e)
                }), "number" == typeof e ? r : r._pos || 0;
                e = parseFloat(e);
                var i = n ? r._nodeById(n) : r._activeNode();
                if (i) return e >= 0 ? (r.pause(n), i._pos = e, r.play(i._sprite, n), r) : r._webAudio ? i._pos + (t.currentTime - r._playStart) : i.currentTime;
                if (e >= 0) return r;
                for (var s = 0; s < r._audioNode.length; s++)
                    if (r._audioNode[s].paused && 4 === r._audioNode[s].readyState) return r._webAudio ? r._audioNode[s]._pos : r._audioNode[s].currentTime
            },
            pos3d: function(e, t, n, r) {
                var i = this;
                if (t = void 0 !== t && t ? t : 0, n = void 0 !== n && n ? n : -.5, !i._loaded) return i.on("play", function() {
                    i.pos3d(e, t, n, r)
                }), i;
                if (!(e >= 0 || 0 > e)) return i._pos3d;
                if (i._webAudio) {
                    var s = r ? i._nodeById(r) : i._activeNode();
                    s && (i._pos3d = [e, t, n], s.panner.setPosition(e, t, n), s.panner.panningModel = i._model || "HRTF")
                }
                return i
            },
            fade: function(e, t, n, r, i) {
                var s = this,
                    o = Math.abs(e - t),
                    u = e > t ? "down" : "up",
                    a = o / .01,
                    f = n / a;
                if (!s._loaded) return s.on("load", function() {
                    s.fade(e, t, n, r, i)
                }), s;
                s.volume(e, i);
                for (var l = 1; a >= l; l++) ! function() {
                    var e = s._volume + ("up" === u ? .01 : -.01) * l,
                        n = Math.round(1e3 * e) / 1e3,
                        o = t;
                    setTimeout(function() {
                        s.volume(n, i), n === o && r && r()
                    }, f * l)
                }()
            },
            fadeIn: function(e, t, n) {
                return this.volume(0).play().fade(0, e, t, n)
            },
            fadeOut: function(e, t, n, r) {
                var i = this;
                return i.fade(i._volume, e, t, function() {
                    n && n(), i.pause(r), i.on("end")
                }, r)
            },
            _nodeById: function(e) {
                for (var t = this, n = t._audioNode[0], r = 0; r < t._audioNode.length; r++)
                    if (t._audioNode[r].id === e) {
                        n = t._audioNode[r];
                        break
                    }
                return n
            },
            _activeNode: function() {
                for (var e = this, t = null, n = 0; n < e._audioNode.length; n++)
                    if (!e._audioNode[n].paused) {
                        t = e._audioNode[n];
                        break
                    }
                return e._drainPool(), t
            },
            _inactiveNode: function(e) {
                for (var t = this, n = null, r = 0; r < t._audioNode.length; r++)
                    if (t._audioNode[r].paused && 4 === t._audioNode[r].readyState) {
                        e(t._audioNode[r]), n = !0;
                        break
                    }
                if (t._drainPool(), !n) {
                    var i;
                    if (t._webAudio) i = t._setupAudioNode(), e(i);
                    else {
                        t.load(), i = t._audioNode[t._audioNode.length - 1];
                        var s = navigator.isCocoonJS ? "canplaythrough" : "loadedmetadata",
                            o = function() {
                                i.removeEventListener(s, o, !1), e(i)
                            };
                        i.addEventListener(s, o, !1)
                    }
                }
            },
            _drainPool: function() {
                var e, t = this,
                    n = 0;
                for (e = 0; e < t._audioNode.length; e++) t._audioNode[e].paused && n++;
                for (e = t._audioNode.length - 1; e >= 0 && !(5 >= n); e--) t._audioNode[e].paused && (t._webAudio && t._audioNode[e].disconnect(0), n--, t._audioNode.splice(e, 1))
            },
            _clearEndTimer: function(e) {
                for (var t = this, n = 0, r = 0; r < t._onendTimer.length; r++)
                    if (t._onendTimer[r].id === e) {
                        n = r;
                        break
                    }
                var i = t._onendTimer[n];
                i && (clearTimeout(i.timer), t._onendTimer.splice(n, 1))
            },
            _setupAudioNode: function() {
                var e = this,
                    n = e._audioNode,
                    r = e._audioNode.length;
                return n[r] = void 0 === t.createGain ? t.createGainNode() : t.createGain(), n[r].gain.value = e._volume, n[r].paused = !0, n[r]._pos = 0, n[r].readyState = 4, n[r].connect(s), n[r].panner = t.createPanner(), n[r].panner.panningModel = e._model || "equalpower", n[r].panner.setPosition(e._pos3d[0], e._pos3d[1], e._pos3d[2]), n[r].panner.connect(n[r]), n[r]
            },
            on: function(e, t) {
                var n = this,
                    r = n["_on" + e];
                if ("function" == typeof t) r.push(t);
                else
                    for (var i = 0; i < r.length; i++) t ? r[i].call(n, t) : r[i].call(n);
                return n
            },
            off: function(e, t) {
                var n = this,
                    r = n["_on" + e],
                    i = t ? "" + t : null;
                if (i) {
                    for (var s = 0; s < r.length; s++)
                        if (i === "" + r[s]) {
                            r.splice(s, 1);
                            break
                        }
                } else n["_on" + e] = [];
                return n
            },
            unload: function() {
                for (var t = this, n = t._audioNode, r = 0; r < t._audioNode.length; r++) n[r].paused || (t.stop(n[r].id), t.on("end", n[r].id)), t._webAudio ? n[r].disconnect(0) : n[r].src = "";
                for (r = 0; r < t._onendTimer.length; r++) clearTimeout(t._onendTimer[r].timer);
                var i = f._howls.indexOf(t);
                null !== i && i >= 0 && f._howls.splice(i, 1), delete e[t._src], t = null
            }
        }, n) var c = function(t, n) {
            if (n in e) return t._duration = e[n].duration, void p(t);
            if (/^data:[^;]+;base64,/.test(n)) {
                for (var r = atob(n.split(",")[1]), i = new Uint8Array(r.length), s = 0; s < r.length; ++s) i[s] = r.charCodeAt(s);
                h(i.buffer, t, n)
            } else {
                var o = new XMLHttpRequest;
                o.open("GET", n, !0), o.responseType = "arraybuffer", o.onload = function() {
                    h(o.response, t, n)
                }, o.onerror = function() {
                    t._webAudio && (t._buffer = !0, t._webAudio = !1, t._audioNode = [], delete t._gainNode, delete e[n], t.load())
                };
                try {
                    o.send()
                } catch (u) {
                    o.onerror()
                }
            }
        },
        h = function(n, r, i) {
            t.decodeAudioData(n, function(t) {
                t && (e[i] = t, p(r, t))
            }, function() {
                r.on("loaderror")
            })
        },
        p = function(e, t) {
            e._duration = t ? t.duration : e._duration, 0 === Object.getOwnPropertyNames(e._sprite).length && (e._sprite = {
                _default: [0, 1e3 * e._duration]
            }), e._loaded || (e._loaded = !0, e.on("load")), e._autoplay && e.play()
        },
        d = function(n, r, i) {
            var s = n._nodeById(i);
            s.bufferSource = t.createBufferSource(), s.bufferSource.buffer = e[n._src], s.bufferSource.connect(s.panner), s.bufferSource.loop = r[0], r[0] && (s.bufferSource.loopStart = r[1], s.bufferSource.loopEnd = r[1] + r[2]), s.bufferSource.playbackRate.value = n._rate
        };
    "function" == typeof define && define.amd && define(function() {
        return {
            Howler: f,
            Howl: l
        }
    }), "undefined" != typeof exports && (exports.Howler = f, exports.Howl = l), "undefined" != typeof window && (window.Howler = f, window.Howl = l)
}();
(function(e) {
    "function" == typeof define && define.amd ? define(["jquery"], e) : e(jQuery)
})(function(e) {
    function t(t, s) {
        var n, a, o, r = t.nodeName.toLowerCase();
        return "area" === r ? (n = t.parentNode, a = n.name, t.href && a && "map" === n.nodeName.toLowerCase() ? (o = e("img[usemap='#" + a + "']")[0], !!o && i(o)) : !1) : (/^(input|select|textarea|button|object)$/.test(r) ? !t.disabled : "a" === r ? t.href || s : s) && i(t)
    }

    function i(t) {
        return e.expr.filters.visible(t) && !e(t).parents().addBack().filter(function() {
            return "hidden" === e.css(this, "visibility")
        }).length
    }
    e.ui = e.ui || {}, e.extend(e.ui, {
        version: "1.11.4",
        keyCode: {
            BACKSPACE: 8,
            COMMA: 188,
            DELETE: 46,
            DOWN: 40,
            END: 35,
            ENTER: 13,
            ESCAPE: 27,
            HOME: 36,
            LEFT: 37,
            PAGE_DOWN: 34,
            PAGE_UP: 33,
            PERIOD: 190,
            RIGHT: 39,
            SPACE: 32,
            TAB: 9,
            UP: 38
        }
    }), e.fn.extend({
        scrollParent: function(t) {
            var i = this.css("position"),
                s = "absolute" === i,
                n = t ? /(auto|scroll|hidden)/ : /(auto|scroll)/,
                a = this.parents().filter(function() {
                    var t = e(this);
                    return s && "static" === t.css("position") ? !1 : n.test(t.css("overflow") + t.css("overflow-y") + t.css("overflow-x"))
                }).eq(0);
            return "fixed" !== i && a.length ? a : e(this[0].ownerDocument || document)
        },
        uniqueId: function() {
            var e = 0;
            return function() {
                return this.each(function() {
                    this.id || (this.id = "ui-id-" + ++e)
                })
            }
        }(),
        removeUniqueId: function() {
            return this.each(function() {
                /^ui-id-\d+$/.test(this.id) && e(this).removeAttr("id")
            })
        }
    }), e.extend(e.expr[":"], {
        data: e.expr.createPseudo ? e.expr.createPseudo(function(t) {
            return function(i) {
                return !!e.data(i, t)
            }
        }) : function(t, i, s) {
            return !!e.data(t, s[3])
        },
        focusable: function(i) {
            return t(i, !isNaN(e.attr(i, "tabindex")))
        },
        tabbable: function(i) {
            var s = e.attr(i, "tabindex"),
                n = isNaN(s);
            return (n || s >= 0) && t(i, !n)
        }
    }), e("<a>").outerWidth(1).jquery || e.each(["Width", "Height"], function(t, i) {
        function s(t, i, s, a) {
            return e.each(n, function() {
                i -= parseFloat(e.css(t, "padding" + this)) || 0, s && (i -= parseFloat(e.css(t, "border" + this + "Width")) || 0), a && (i -= parseFloat(e.css(t, "margin" + this)) || 0)
            }), i
        }
        var n = "Width" === i ? ["Left", "Right"] : ["Top", "Bottom"],
            a = i.toLowerCase(),
            o = {
                innerWidth: e.fn.innerWidth,
                innerHeight: e.fn.innerHeight,
                outerWidth: e.fn.outerWidth,
                outerHeight: e.fn.outerHeight
            };
        e.fn["inner" + i] = function(t) {
            return void 0 === t ? o["inner" + i].call(this) : this.each(function() {
                e(this).css(a, s(this, t) + "px")
            })
        }, e.fn["outer" + i] = function(t, n) {
            return "number" != typeof t ? o["outer" + i].call(this, t) : this.each(function() {
                e(this).css(a, s(this, t, !0, n) + "px")
            })
        }
    }), e.fn.addBack || (e.fn.addBack = function(e) {
        return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
    }), e("<a>").data("a-b", "a").removeData("a-b").data("a-b") && (e.fn.removeData = function(t) {
        return function(i) {
            return arguments.length ? t.call(this, e.camelCase(i)) : t.call(this)
        }
    }(e.fn.removeData)), e.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()), e.fn.extend({
        focus: function(t) {
            return function(i, s) {
                return "number" == typeof i ? this.each(function() {
                    var t = this;
                    setTimeout(function() {
                        e(t).focus(), s && s.call(t)
                    }, i)
                }) : t.apply(this, arguments)
            }
        }(e.fn.focus),
        disableSelection: function() {
            var e = "onselectstart" in document.createElement("div") ? "selectstart" : "mousedown";
            return function() {
                return this.bind(e + ".ui-disableSelection", function(e) {
                    e.preventDefault()
                })
            }
        }(),
        enableSelection: function() {
            return this.unbind(".ui-disableSelection")
        },
        zIndex: function(t) {
            if (void 0 !== t) return this.css("zIndex", t);
            if (this.length)
                for (var i, s, n = e(this[0]); n.length && n[0] !== document;) {
                    if (i = n.css("position"), ("absolute" === i || "relative" === i || "fixed" === i) && (s = parseInt(n.css("zIndex"), 10), !isNaN(s) && 0 !== s)) return s;
                    n = n.parent()
                }
            return 0
        }
    }), e.ui.plugin = {
        add: function(t, i, s) {
            var n, a = e.ui[t].prototype;
            for (n in s) a.plugins[n] = a.plugins[n] || [], a.plugins[n].push([i, s[n]])
        },
        call: function(e, t, i, s) {
            var n, a = e.plugins[t];
            if (a && (s || e.element[0].parentNode && 11 !== e.element[0].parentNode.nodeType))
                for (n = 0; a.length > n; n++) e.options[a[n][0]] && a[n][1].apply(e.element, i)
        }
    };
    var s = 0,
        n = Array.prototype.slice;
    e.cleanData = function(t) {
        return function(i) {
            var s, n, a;
            for (a = 0; null != (n = i[a]); a++) try {
                s = e._data(n, "events"), s && s.remove && e(n).triggerHandler("remove")
            } catch (o) {}
            t(i)
        }
    }(e.cleanData), e.widget = function(t, i, s) {
        var n, a, o, r, h = {},
            l = t.split(".")[0];
        return t = t.split(".")[1], n = l + "-" + t, s || (s = i, i = e.Widget), e.expr[":"][n.toLowerCase()] = function(t) {
            return !!e.data(t, n)
        }, e[l] = e[l] || {}, a = e[l][t], o = e[l][t] = function(e, t) {
            return this._createWidget ? (arguments.length && this._createWidget(e, t), void 0) : new o(e, t)
        }, e.extend(o, a, {
            version: s.version,
            _proto: e.extend({}, s),
            _childConstructors: []
        }), r = new i, r.options = e.widget.extend({}, r.options), e.each(s, function(t, s) {
            return e.isFunction(s) ? (h[t] = function() {
                var e = function() {
                        return i.prototype[t].apply(this, arguments)
                    },
                    n = function(e) {
                        return i.prototype[t].apply(this, e)
                    };
                return function() {
                    var t, i = this._super,
                        a = this._superApply;
                    return this._super = e, this._superApply = n, t = s.apply(this, arguments), this._super = i, this._superApply = a, t
                }
            }(), void 0) : (h[t] = s, void 0)
        }), o.prototype = e.widget.extend(r, {
            widgetEventPrefix: a ? r.widgetEventPrefix || t : t
        }, h, {
            constructor: o,
            namespace: l,
            widgetName: t,
            widgetFullName: n
        }), a ? (e.each(a._childConstructors, function(t, i) {
            var s = i.prototype;
            e.widget(s.namespace + "." + s.widgetName, o, i._proto)
        }), delete a._childConstructors) : i._childConstructors.push(o), e.widget.bridge(t, o), o
    }, e.widget.extend = function(t) {
        for (var i, s, a = n.call(arguments, 1), o = 0, r = a.length; r > o; o++)
            for (i in a[o]) s = a[o][i], a[o].hasOwnProperty(i) && void 0 !== s && (t[i] = e.isPlainObject(s) ? e.isPlainObject(t[i]) ? e.widget.extend({}, t[i], s) : e.widget.extend({}, s) : s);
        return t
    }, e.widget.bridge = function(t, i) {
        var s = i.prototype.widgetFullName || t;
        e.fn[t] = function(a) {
            var o = "string" == typeof a,
                r = n.call(arguments, 1),
                h = this;
            return o ? this.each(function() {
                var i, n = e.data(this, s);
                return "instance" === a ? (h = n, !1) : n ? e.isFunction(n[a]) && "_" !== a.charAt(0) ? (i = n[a].apply(n, r), i !== n && void 0 !== i ? (h = i && i.jquery ? h.pushStack(i.get()) : i, !1) : void 0) : e.error("no such method '" + a + "' for " + t + " widget instance") : e.error("cannot call methods on " + t + " prior to initialization; " + "attempted to call method '" + a + "'")
            }) : (r.length && (a = e.widget.extend.apply(null, [a].concat(r))), this.each(function() {
                var t = e.data(this, s);
                t ? (t.option(a || {}), t._init && t._init()) : e.data(this, s, new i(a, this))
            })), h
        }
    }, e.Widget = function() {}, e.Widget._childConstructors = [], e.Widget.prototype = {
        widgetName: "widget",
        widgetEventPrefix: "",
        defaultElement: "<div>",
        options: {
            disabled: !1,
            create: null
        },
        _createWidget: function(t, i) {
            i = e(i || this.defaultElement || this)[0], this.element = e(i), this.uuid = s++, this.eventNamespace = "." + this.widgetName + this.uuid, this.bindings = e(), this.hoverable = e(), this.focusable = e(), i !== this && (e.data(i, this.widgetFullName, this), this._on(!0, this.element, {
                remove: function(e) {
                    e.target === i && this.destroy()
                }
            }), this.document = e(i.style ? i.ownerDocument : i.document || i), this.window = e(this.document[0].defaultView || this.document[0].parentWindow)), this.options = e.widget.extend({}, this.options, this._getCreateOptions(), t), this._create(), this._trigger("create", null, this._getCreateEventData()), this._init()
        },
        _getCreateOptions: e.noop,
        _getCreateEventData: e.noop,
        _create: e.noop,
        _init: e.noop,
        destroy: function() {
            this._destroy(), this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)), this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled " + "ui-state-disabled"), this.bindings.unbind(this.eventNamespace), this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus")
        },
        _destroy: e.noop,
        widget: function() {
            return this.element
        },
        option: function(t, i) {
            var s, n, a, o = t;
            if (0 === arguments.length) return e.widget.extend({}, this.options);
            if ("string" == typeof t)
                if (o = {}, s = t.split("."), t = s.shift(), s.length) {
                    for (n = o[t] = e.widget.extend({}, this.options[t]), a = 0; s.length - 1 > a; a++) n[s[a]] = n[s[a]] || {}, n = n[s[a]];
                    if (t = s.pop(), 1 === arguments.length) return void 0 === n[t] ? null : n[t];
                    n[t] = i
                } else {
                    if (1 === arguments.length) return void 0 === this.options[t] ? null : this.options[t];
                    o[t] = i
                }
            return this._setOptions(o), this
        },
        _setOptions: function(e) {
            var t;
            for (t in e) this._setOption(t, e[t]);
            return this
        },
        _setOption: function(e, t) {
            return this.options[e] = t, "disabled" === e && (this.widget().toggleClass(this.widgetFullName + "-disabled", !!t), t && (this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus"))), this
        },
        enable: function() {
            return this._setOptions({
                disabled: !1
            })
        },
        disable: function() {
            return this._setOptions({
                disabled: !0
            })
        },
        _on: function(t, i, s) {
            var n, a = this;
            "boolean" != typeof t && (s = i, i = t, t = !1), s ? (i = n = e(i), this.bindings = this.bindings.add(i)) : (s = i, i = this.element, n = this.widget()), e.each(s, function(s, o) {
                function r() {
                    return t || a.options.disabled !== !0 && !e(this).hasClass("ui-state-disabled") ? ("string" == typeof o ? a[o] : o).apply(a, arguments) : void 0
                }
                "string" != typeof o && (r.guid = o.guid = o.guid || r.guid || e.guid++);
                var h = s.match(/^([\w:-]*)\s*(.*)$/),
                    l = h[1] + a.eventNamespace,
                    u = h[2];
                u ? n.delegate(u, l, r) : i.bind(l, r)
            })
        },
        _off: function(t, i) {
            i = (i || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace, t.unbind(i).undelegate(i), this.bindings = e(this.bindings.not(t).get()), this.focusable = e(this.focusable.not(t).get()), this.hoverable = e(this.hoverable.not(t).get())
        },
        _delay: function(e, t) {
            function i() {
                return ("string" == typeof e ? s[e] : e).apply(s, arguments)
            }
            var s = this;
            return setTimeout(i, t || 0)
        },
        _hoverable: function(t) {
            this.hoverable = this.hoverable.add(t), this._on(t, {
                mouseenter: function(t) {
                    e(t.currentTarget).addClass("ui-state-hover")
                },
                mouseleave: function(t) {
                    e(t.currentTarget).removeClass("ui-state-hover")
                }
            })
        },
        _focusable: function(t) {
            this.focusable = this.focusable.add(t), this._on(t, {
                focusin: function(t) {
                    e(t.currentTarget).addClass("ui-state-focus")
                },
                focusout: function(t) {
                    e(t.currentTarget).removeClass("ui-state-focus")
                }
            })
        },
        _trigger: function(t, i, s) {
            var n, a, o = this.options[t];
            if (s = s || {}, i = e.Event(i), i.type = (t === this.widgetEventPrefix ? t : this.widgetEventPrefix + t).toLowerCase(), i.target = this.element[0], a = i.originalEvent)
                for (n in a) n in i || (i[n] = a[n]);
            return this.element.trigger(i, s), !(e.isFunction(o) && o.apply(this.element[0], [i].concat(s)) === !1 || i.isDefaultPrevented())
        }
    }, e.each({
        show: "fadeIn",
        hide: "fadeOut"
    }, function(t, i) {
        e.Widget.prototype["_" + t] = function(s, n, a) {
            "string" == typeof n && (n = {
                effect: n
            });
            var o, r = n ? n === !0 || "number" == typeof n ? i : n.effect || i : t;
            n = n || {}, "number" == typeof n && (n = {
                duration: n
            }), o = !e.isEmptyObject(n), n.complete = a, n.delay && s.delay(n.delay), o && e.effects && e.effects.effect[r] ? s[t](n) : r !== t && s[r] ? s[r](n.duration, n.easing, a) : s.queue(function(i) {
                e(this)[t](), a && a.call(s[0]), i()
            })
        }
    }), e.widget;
    var a = !1;
    e(document).mouseup(function() {
        a = !1
    }), e.widget("ui.mouse", {
        version: "1.11.4",
        options: {
            cancel: "input,textarea,button,select,option",
            distance: 1,
            delay: 0
        },
        _mouseInit: function() {
            var t = this;
            this.element.bind("mousedown." + this.widgetName, function(e) {
                return t._mouseDown(e)
            }).bind("click." + this.widgetName, function(i) {
                return !0 === e.data(i.target, t.widgetName + ".preventClickEvent") ? (e.removeData(i.target, t.widgetName + ".preventClickEvent"), i.stopImmediatePropagation(), !1) : void 0
            }), this.started = !1
        },
        _mouseDestroy: function() {
            this.element.unbind("." + this.widgetName), this._mouseMoveDelegate && this.document.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate)
        },
        _mouseDown: function(t) {
            if (!a) {
                this._mouseMoved = !1, this._mouseStarted && this._mouseUp(t), this._mouseDownEvent = t;
                var i = this,
                    s = 1 === t.which,
                    n = "string" == typeof this.options.cancel && t.target.nodeName ? e(t.target).closest(this.options.cancel).length : !1;
                return s && !n && this._mouseCapture(t) ? (this.mouseDelayMet = !this.options.delay, this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function() {
                    i.mouseDelayMet = !0
                }, this.options.delay)), this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = this._mouseStart(t) !== !1, !this._mouseStarted) ? (t.preventDefault(), !0) : (!0 === e.data(t.target, this.widgetName + ".preventClickEvent") && e.removeData(t.target, this.widgetName + ".preventClickEvent"), this._mouseMoveDelegate = function(e) {
                    return i._mouseMove(e)
                }, this._mouseUpDelegate = function(e) {
                    return i._mouseUp(e)
                }, this.document.bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate), t.preventDefault(), a = !0, !0)) : !0
            }
        },
        _mouseMove: function(t) {
            if (this._mouseMoved) {
                if (e.ui.ie && (!document.documentMode || 9 > document.documentMode) && !t.button) return this._mouseUp(t);
                if (!t.which) return this._mouseUp(t)
            }
            return (t.which || t.button) && (this._mouseMoved = !0), this._mouseStarted ? (this._mouseDrag(t), t.preventDefault()) : (this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = this._mouseStart(this._mouseDownEvent, t) !== !1, this._mouseStarted ? this._mouseDrag(t) : this._mouseUp(t)), !this._mouseStarted)
        },
        _mouseUp: function(t) {
            return this.document.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate), this._mouseStarted && (this._mouseStarted = !1, t.target === this._mouseDownEvent.target && e.data(t.target, this.widgetName + ".preventClickEvent", !0), this._mouseStop(t)), a = !1, !1
        },
        _mouseDistanceMet: function(e) {
            return Math.max(Math.abs(this._mouseDownEvent.pageX - e.pageX), Math.abs(this._mouseDownEvent.pageY - e.pageY)) >= this.options.distance
        },
        _mouseDelayMet: function() {
            return this.mouseDelayMet
        },
        _mouseStart: function() {},
        _mouseDrag: function() {},
        _mouseStop: function() {},
        _mouseCapture: function() {
            return !0
        }
    }), e.widget("ui.progressbar", {
        version: "1.11.4",
        options: {
            max: 100,
            value: 0,
            change: null,
            complete: null
        },
        min: 0,
        _create: function() {
            this.oldValue = this.options.value = this._constrainedValue(), this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({
                role: "progressbar",
                "aria-valuemin": this.min
            }), this.valueDiv = e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element), this._refreshValue()
        },
        _destroy: function() {
            this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"), this.valueDiv.remove()
        },
        value: function(e) {
            return void 0 === e ? this.options.value : (this.options.value = this._constrainedValue(e), this._refreshValue(), void 0)
        },
        _constrainedValue: function(e) {
            return void 0 === e && (e = this.options.value), this.indeterminate = e === !1, "number" != typeof e && (e = 0), this.indeterminate ? !1 : Math.min(this.options.max, Math.max(this.min, e))
        },
        _setOptions: function(e) {
            var t = e.value;
            delete e.value, this._super(e), this.options.value = this._constrainedValue(t), this._refreshValue()
        },
        _setOption: function(e, t) {
            "max" === e && (t = Math.max(this.min, t)), "disabled" === e && this.element.toggleClass("ui-state-disabled", !!t).attr("aria-disabled", t),
                this._super(e, t)
        },
        _percentage: function() {
            return this.indeterminate ? 100 : 100 * (this.options.value - this.min) / (this.options.max - this.min)
        },
        _refreshValue: function() {
            var t = this.options.value,
                i = this._percentage();
            this.valueDiv.toggle(this.indeterminate || t > this.min).toggleClass("ui-corner-right", t === this.options.max).width(i.toFixed(0) + "%"), this.element.toggleClass("ui-progressbar-indeterminate", this.indeterminate), this.indeterminate ? (this.element.removeAttr("aria-valuenow"), this.overlayDiv || (this.overlayDiv = e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))) : (this.element.attr({
                "aria-valuemax": this.options.max,
                "aria-valuenow": t
            }), this.overlayDiv && (this.overlayDiv.remove(), this.overlayDiv = null)), this.oldValue !== t && (this.oldValue = t, this._trigger("change")), t === this.options.max && this._trigger("complete")
        }
    }), e.widget("ui.slider", e.ui.mouse, {
        version: "1.11.4",
        widgetEventPrefix: "slide",
        options: {
            animate: !1,
            distance: 0,
            max: 100,
            min: 0,
            orientation: "horizontal",
            range: !1,
            step: 1,
            value: 0,
            values: null,
            change: null,
            slide: null,
            start: null,
            stop: null
        },
        numPages: 5,
        _create: function() {
            this._keySliding = !1, this._mouseSliding = !1, this._animateOff = !0, this._handleIndex = null, this._detectOrientation(), this._mouseInit(), this._calculateNewMax(), this.element.addClass("ui-slider ui-slider-" + this.orientation + " ui-widget" + " ui-widget-content" + " ui-corner-all"), this._refresh(), this._setOption("disabled", this.options.disabled), this._animateOff = !1
        },
        _refresh: function() {
            this._createRange(), this._createHandles(), this._setupEvents(), this._refreshValue()
        },
        _createHandles: function() {
            var t, i, s = this.options,
                n = this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),
                a = "<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",
                o = [];
            for (i = s.values && s.values.length || 1, n.length > i && (n.slice(i).remove(), n = n.slice(0, i)), t = n.length; i > t; t++) o.push(a);
            this.handles = n.add(e(o.join("")).appendTo(this.element)), this.handle = this.handles.eq(0), this.handles.each(function(t) {
                e(this).data("ui-slider-handle-index", t)
            })
        },
        _createRange: function() {
            var t = this.options,
                i = "";
            t.range ? (t.range === !0 && (t.values ? t.values.length && 2 !== t.values.length ? t.values = [t.values[0], t.values[0]] : e.isArray(t.values) && (t.values = t.values.slice(0)) : t.values = [this._valueMin(), this._valueMin()]), this.range && this.range.length ? this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({
                left: "",
                bottom: ""
            }) : (this.range = e("<div></div>").appendTo(this.element), i = "ui-slider-range ui-widget-header ui-corner-all"), this.range.addClass(i + ("min" === t.range || "max" === t.range ? " ui-slider-range-" + t.range : ""))) : (this.range && this.range.remove(), this.range = null)
        },
        _setupEvents: function() {
            this._off(this.handles), this._on(this.handles, this._handleEvents), this._hoverable(this.handles), this._focusable(this.handles)
        },
        _destroy: function() {
            this.handles.remove(), this.range && this.range.remove(), this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"), this._mouseDestroy()
        },
        _mouseCapture: function(t) {
            var i, s, n, a, o, r, h, l, u = this,
                d = this.options;
            return d.disabled ? !1 : (this.elementSize = {
                width: this.element.outerWidth(),
                height: this.element.outerHeight()
            }, this.elementOffset = this.element.offset(), i = {
                x: t.pageX,
                y: t.pageY
            }, s = this._normValueFromMouse(i), n = this._valueMax() - this._valueMin() + 1, this.handles.each(function(t) {
                var i = Math.abs(s - u.values(t));
                (n > i || n === i && (t === u._lastChangedValue || u.values(t) === d.min)) && (n = i, a = e(this), o = t)
            }), r = this._start(t, o), r === !1 ? !1 : (this._mouseSliding = !0, this._handleIndex = o, a.addClass("ui-state-active").focus(), h = a.offset(), l = !e(t.target).parents().addBack().is(".ui-slider-handle"), this._clickOffset = l ? {
                left: 0,
                top: 0
            } : {
                left: t.pageX - h.left - a.width() / 2,
                top: t.pageY - h.top - a.height() / 2 - (parseInt(a.css("borderTopWidth"), 10) || 0) - (parseInt(a.css("borderBottomWidth"), 10) || 0) + (parseInt(a.css("marginTop"), 10) || 0)
            }, this.handles.hasClass("ui-state-hover") || this._slide(t, o, s), this._animateOff = !0, !0))
        },
        _mouseStart: function() {
            return !0
        },
        _mouseDrag: function(e) {
            var t = {
                    x: e.pageX,
                    y: e.pageY
                },
                i = this._normValueFromMouse(t);
            return this._slide(e, this._handleIndex, i), !1
        },
        _mouseStop: function(e) {
            return this.handles.removeClass("ui-state-active"), this._mouseSliding = !1, this._stop(e, this._handleIndex), this._change(e, this._handleIndex), this._handleIndex = null, this._clickOffset = null, this._animateOff = !1, !1
        },
        _detectOrientation: function() {
            this.orientation = "vertical" === this.options.orientation ? "vertical" : "horizontal"
        },
        _normValueFromMouse: function(e) {
            var t, i, s, n, a;
            return "horizontal" === this.orientation ? (t = this.elementSize.width, i = e.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left : 0)) : (t = this.elementSize.height, i = e.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top : 0)), s = i / t, s > 1 && (s = 1), 0 > s && (s = 0), "vertical" === this.orientation && (s = 1 - s), n = this._valueMax() - this._valueMin(), a = this._valueMin() + s * n, this._trimAlignValue(a)
        },
        _start: function(e, t) {
            var i = {
                handle: this.handles[t],
                value: this.value()
            };
            return this.options.values && this.options.values.length && (i.value = this.values(t), i.values = this.values()), this._trigger("start", e, i)
        },
        _slide: function(e, t, i) {
            var s, n, a;
            this.options.values && this.options.values.length ? (s = this.values(t ? 0 : 1), 2 === this.options.values.length && this.options.range === !0 && (0 === t && i > s || 1 === t && s > i) && (i = s), i !== this.values(t) && (n = this.values(), n[t] = i, a = this._trigger("slide", e, {
                handle: this.handles[t],
                value: i,
                values: n
            }), s = this.values(t ? 0 : 1), a !== !1 && this.values(t, i))) : i !== this.value() && (a = this._trigger("slide", e, {
                handle: this.handles[t],
                value: i
            }), a !== !1 && this.value(i))
        },
        _stop: function(e, t) {
            var i = {
                handle: this.handles[t],
                value: this.value()
            };
            this.options.values && this.options.values.length && (i.value = this.values(t), i.values = this.values()), this._trigger("stop", e, i)
        },
        _change: function(e, t) {
            if (!this._keySliding && !this._mouseSliding) {
                var i = {
                    handle: this.handles[t],
                    value: this.value()
                };
                this.options.values && this.options.values.length && (i.value = this.values(t), i.values = this.values()), this._lastChangedValue = t, this._trigger("change", e, i)
            }
        },
        value: function(e) {
            return arguments.length ? (this.options.value = this._trimAlignValue(e), this._refreshValue(), this._change(null, 0), void 0) : this._value()
        },
        values: function(t, i) {
            var s, n, a;
            if (arguments.length > 1) return this.options.values[t] = this._trimAlignValue(i), this._refreshValue(), this._change(null, t), void 0;
            if (!arguments.length) return this._values();
            if (!e.isArray(arguments[0])) return this.options.values && this.options.values.length ? this._values(t) : this.value();
            for (s = this.options.values, n = arguments[0], a = 0; s.length > a; a += 1) s[a] = this._trimAlignValue(n[a]), this._change(null, a);
            this._refreshValue()
        },
        _setOption: function(t, i) {
            var s, n = 0;
            switch ("range" === t && this.options.range === !0 && ("min" === i ? (this.options.value = this._values(0), this.options.values = null) : "max" === i && (this.options.value = this._values(this.options.values.length - 1), this.options.values = null)), e.isArray(this.options.values) && (n = this.options.values.length), "disabled" === t && this.element.toggleClass("ui-state-disabled", !!i), this._super(t, i), t) {
                case "orientation":
                    this._detectOrientation(), this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-" + this.orientation), this._refreshValue(), this.handles.css("horizontal" === i ? "bottom" : "left", "");
                    break;
                case "value":
                    this._animateOff = !0, this._refreshValue(), this._change(null, 0), this._animateOff = !1;
                    break;
                case "values":
                    for (this._animateOff = !0, this._refreshValue(), s = 0; n > s; s += 1) this._change(null, s);
                    this._animateOff = !1;
                    break;
                case "step":
                case "min":
                case "max":
                    this._animateOff = !0, this._calculateNewMax(), this._refreshValue(), this._animateOff = !1;
                    break;
                case "range":
                    this._animateOff = !0, this._refresh(), this._animateOff = !1
            }
        },
        _value: function() {
            var e = this.options.value;
            return e = this._trimAlignValue(e)
        },
        _values: function(e) {
            var t, i, s;
            if (arguments.length) return t = this.options.values[e], t = this._trimAlignValue(t);
            if (this.options.values && this.options.values.length) {
                for (i = this.options.values.slice(), s = 0; i.length > s; s += 1) i[s] = this._trimAlignValue(i[s]);
                return i
            }
            return []
        },
        _trimAlignValue: function(e) {
            if (this._valueMin() >= e) return this._valueMin();
            if (e >= this._valueMax()) return this._valueMax();
            var t = this.options.step > 0 ? this.options.step : 1,
                i = (e - this._valueMin()) % t,
                s = e - i;
            return 2 * Math.abs(i) >= t && (s += i > 0 ? t : -t), parseFloat(s.toFixed(5))
        },
        _calculateNewMax: function() {
            var e = this.options.max,
                t = this._valueMin(),
                i = this.options.step,
                s = Math.floor(+(e - t).toFixed(this._precision()) / i) * i;
            e = s + t, this.max = parseFloat(e.toFixed(this._precision()))
        },
        _precision: function() {
            var e = this._precisionOf(this.options.step);
            return null !== this.options.min && (e = Math.max(e, this._precisionOf(this.options.min))), e
        },
        _precisionOf: function(e) {
            var t = "" + e,
                i = t.indexOf(".");
            return -1 === i ? 0 : t.length - i - 1
        },
        _valueMin: function() {
            return this.options.min
        },
        _valueMax: function() {
            return this.max
        },
        _refreshValue: function() {
            var t, i, s, n, a, o = this.options.range,
                r = this.options,
                h = this,
                l = this._animateOff ? !1 : r.animate,
                u = {};
            this.options.values && this.options.values.length ? this.handles.each(function(s) {
                i = 100 * ((h.values(s) - h._valueMin()) / (h._valueMax() - h._valueMin())), u["horizontal" === h.orientation ? "left" : "bottom"] = i + "%", e(this).stop(1, 1)[l ? "animate" : "css"](u, r.animate), h.options.range === !0 && ("horizontal" === h.orientation ? (0 === s && h.range.stop(1, 1)[l ? "animate" : "css"]({
                    left: i + "%"
                }, r.animate), 1 === s && h.range[l ? "animate" : "css"]({
                    width: i - t + "%"
                }, {
                    queue: !1,
                    duration: r.animate
                })) : (0 === s && h.range.stop(1, 1)[l ? "animate" : "css"]({
                    bottom: i + "%"
                }, r.animate), 1 === s && h.range[l ? "animate" : "css"]({
                    height: i - t + "%"
                }, {
                    queue: !1,
                    duration: r.animate
                }))), t = i
            }) : (s = this.value(), n = this._valueMin(), a = this._valueMax(), i = a !== n ? 100 * ((s - n) / (a - n)) : 0, u["horizontal" === this.orientation ? "left" : "bottom"] = i + "%", this.handle.stop(1, 1)[l ? "animate" : "css"](u, r.animate), "min" === o && "horizontal" === this.orientation && this.range.stop(1, 1)[l ? "animate" : "css"]({
                width: i + "%"
            }, r.animate), "max" === o && "horizontal" === this.orientation && this.range[l ? "animate" : "css"]({
                width: 100 - i + "%"
            }, {
                queue: !1,
                duration: r.animate
            }), "min" === o && "vertical" === this.orientation && this.range.stop(1, 1)[l ? "animate" : "css"]({
                height: i + "%"
            }, r.animate), "max" === o && "vertical" === this.orientation && this.range[l ? "animate" : "css"]({
                height: 100 - i + "%"
            }, {
                queue: !1,
                duration: r.animate
            }))
        },
        _handleEvents: {
            keydown: function(t) {
                var i, s, n, a, o = e(t.target).data("ui-slider-handle-index");
                switch (t.keyCode) {
                    case e.ui.keyCode.HOME:
                    case e.ui.keyCode.END:
                    case e.ui.keyCode.PAGE_UP:
                    case e.ui.keyCode.PAGE_DOWN:
                    case e.ui.keyCode.UP:
                    case e.ui.keyCode.RIGHT:
                    case e.ui.keyCode.DOWN:
                    case e.ui.keyCode.LEFT:
                        if (t.preventDefault(), !this._keySliding && (this._keySliding = !0, e(t.target).addClass("ui-state-active"), i = this._start(t, o), i === !1)) return
                }
                switch (a = this.options.step, s = n = this.options.values && this.options.values.length ? this.values(o) : this.value(), t.keyCode) {
                    case e.ui.keyCode.HOME:
                        n = this._valueMin();
                        break;
                    case e.ui.keyCode.END:
                        n = this._valueMax();
                        break;
                    case e.ui.keyCode.PAGE_UP:
                        n = this._trimAlignValue(s + (this._valueMax() - this._valueMin()) / this.numPages);
                        break;
                    case e.ui.keyCode.PAGE_DOWN:
                        n = this._trimAlignValue(s - (this._valueMax() - this._valueMin()) / this.numPages);
                        break;
                    case e.ui.keyCode.UP:
                    case e.ui.keyCode.RIGHT:
                        if (s === this._valueMax()) return;
                        n = this._trimAlignValue(s + a);
                        break;
                    case e.ui.keyCode.DOWN:
                    case e.ui.keyCode.LEFT:
                        if (s === this._valueMin()) return;
                        n = this._trimAlignValue(s - a)
                }
                this._slide(t, o, n)
            },
            keyup: function(t) {
                var i = e(t.target).data("ui-slider-handle-index");
                this._keySliding && (this._keySliding = !1, this._stop(t, i), this._change(t, i), e(t.target).removeClass("ui-state-active"))
            }
        }
    });
    var o = "ui-effects-",
        r = e;
    e.effects = {
            effect: {}
        },
        function(e, t) {
            function i(e, t, i) {
                var s = d[t.type] || {};
                return null == e ? i || !t.def ? null : t.def : (e = s.floor ? ~~e : parseFloat(e), isNaN(e) ? t.def : s.mod ? (e + s.mod) % s.mod : 0 > e ? 0 : e > s.max ? s.max : e)
            }

            function s(i) {
                var s = l(),
                    n = s._rgba = [];
                return i = i.toLowerCase(), f(h, function(e, a) {
                    var o, r = a.re.exec(i),
                        h = r && a.parse(r),
                        l = a.space || "rgba";
                    return h ? (o = s[l](h), s[u[l].cache] = o[u[l].cache], n = s._rgba = o._rgba, !1) : t
                }), n.length ? ("0,0,0,0" === n.join() && e.extend(n, a.transparent), s) : a[i]
            }

            function n(e, t, i) {
                return i = (i + 1) % 1, 1 > 6 * i ? e + 6 * (t - e) * i : 1 > 2 * i ? t : 2 > 3 * i ? e + 6 * (t - e) * (2 / 3 - i) : e
            }
            var a, o = "backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",
                r = /^([\-+])=\s*(\d+\.?\d*)/,
                h = [{
                    re: /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
                    parse: function(e) {
                        return [e[1], e[2], e[3], e[4]]
                    }
                }, {
                    re: /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
                    parse: function(e) {
                        return [2.55 * e[1], 2.55 * e[2], 2.55 * e[3], e[4]]
                    }
                }, {
                    re: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
                    parse: function(e) {
                        return [parseInt(e[1], 16), parseInt(e[2], 16), parseInt(e[3], 16)]
                    }
                }, {
                    re: /#([a-f0-9])([a-f0-9])([a-f0-9])/,
                    parse: function(e) {
                        return [parseInt(e[1] + e[1], 16), parseInt(e[2] + e[2], 16), parseInt(e[3] + e[3], 16)]
                    }
                }, {
                    re: /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
                    space: "hsla",
                    parse: function(e) {
                        return [e[1], e[2] / 100, e[3] / 100, e[4]]
                    }
                }],
                l = e.Color = function(t, i, s, n) {
                    return new e.Color.fn.parse(t, i, s, n)
                },
                u = {
                    rgba: {
                        props: {
                            red: {
                                idx: 0,
                                type: "byte"
                            },
                            green: {
                                idx: 1,
                                type: "byte"
                            },
                            blue: {
                                idx: 2,
                                type: "byte"
                            }
                        }
                    },
                    hsla: {
                        props: {
                            hue: {
                                idx: 0,
                                type: "degrees"
                            },
                            saturation: {
                                idx: 1,
                                type: "percent"
                            },
                            lightness: {
                                idx: 2,
                                type: "percent"
                            }
                        }
                    }
                },
                d = {
                    "byte": {
                        floor: !0,
                        max: 255
                    },
                    percent: {
                        max: 1
                    },
                    degrees: {
                        mod: 360,
                        floor: !0
                    }
                },
                c = l.support = {},
                p = e("<p>")[0],
                f = e.each;
            p.style.cssText = "background-color:rgba(1,1,1,.5)", c.rgba = p.style.backgroundColor.indexOf("rgba") > -1, f(u, function(e, t) {
                t.cache = "_" + e, t.props.alpha = {
                    idx: 3,
                    type: "percent",
                    def: 1
                }
            }), l.fn = e.extend(l.prototype, {
                parse: function(n, o, r, h) {
                    if (n === t) return this._rgba = [null, null, null, null], this;
                    (n.jquery || n.nodeType) && (n = e(n).css(o), o = t);
                    var d = this,
                        c = e.type(n),
                        p = this._rgba = [];
                    return o !== t && (n = [n, o, r, h], c = "array"), "string" === c ? this.parse(s(n) || a._default) : "array" === c ? (f(u.rgba.props, function(e, t) {
                        p[t.idx] = i(n[t.idx], t)
                    }), this) : "object" === c ? (n instanceof l ? f(u, function(e, t) {
                        n[t.cache] && (d[t.cache] = n[t.cache].slice())
                    }) : f(u, function(t, s) {
                        var a = s.cache;
                        f(s.props, function(e, t) {
                            if (!d[a] && s.to) {
                                if ("alpha" === e || null == n[e]) return;
                                d[a] = s.to(d._rgba)
                            }
                            d[a][t.idx] = i(n[e], t, !0)
                        }), d[a] && 0 > e.inArray(null, d[a].slice(0, 3)) && (d[a][3] = 1, s.from && (d._rgba = s.from(d[a])))
                    }), this) : t
                },
                is: function(e) {
                    var i = l(e),
                        s = !0,
                        n = this;
                    return f(u, function(e, a) {
                        var o, r = i[a.cache];
                        return r && (o = n[a.cache] || a.to && a.to(n._rgba) || [], f(a.props, function(e, i) {
                            return null != r[i.idx] ? s = r[i.idx] === o[i.idx] : t
                        })), s
                    }), s
                },
                _space: function() {
                    var e = [],
                        t = this;
                    return f(u, function(i, s) {
                        t[s.cache] && e.push(i)
                    }), e.pop()
                },
                transition: function(e, t) {
                    var s = l(e),
                        n = s._space(),
                        a = u[n],
                        o = 0 === this.alpha() ? l("transparent") : this,
                        r = o[a.cache] || a.to(o._rgba),
                        h = r.slice();
                    return s = s[a.cache], f(a.props, function(e, n) {
                        var a = n.idx,
                            o = r[a],
                            l = s[a],
                            u = d[n.type] || {};
                        null !== l && (null === o ? h[a] = l : (u.mod && (l - o > u.mod / 2 ? o += u.mod : o - l > u.mod / 2 && (o -= u.mod)), h[a] = i((l - o) * t + o, n)))
                    }), this[n](h)
                },
                blend: function(t) {
                    if (1 === this._rgba[3]) return this;
                    var i = this._rgba.slice(),
                        s = i.pop(),
                        n = l(t)._rgba;
                    return l(e.map(i, function(e, t) {
                        return (1 - s) * n[t] + s * e
                    }))
                },
                toRgbaString: function() {
                    var t = "rgba(",
                        i = e.map(this._rgba, function(e, t) {
                            return null == e ? t > 2 ? 1 : 0 : e
                        });
                    return 1 === i[3] && (i.pop(), t = "rgb("), t + i.join() + ")"
                },
                toHslaString: function() {
                    var t = "hsla(",
                        i = e.map(this.hsla(), function(e, t) {
                            return null == e && (e = t > 2 ? 1 : 0), t && 3 > t && (e = Math.round(100 * e) + "%"), e
                        });
                    return 1 === i[3] && (i.pop(), t = "hsl("), t + i.join() + ")"
                },
                toHexString: function(t) {
                    var i = this._rgba.slice(),
                        s = i.pop();
                    return t && i.push(~~(255 * s)), "#" + e.map(i, function(e) {
                        return e = (e || 0).toString(16), 1 === e.length ? "0" + e : e
                    }).join("")
                },
                toString: function() {
                    return 0 === this._rgba[3] ? "transparent" : this.toRgbaString()
                }
            }), l.fn.parse.prototype = l.fn, u.hsla.to = function(e) {
                if (null == e[0] || null == e[1] || null == e[2]) return [null, null, null, e[3]];
                var t, i, s = e[0] / 255,
                    n = e[1] / 255,
                    a = e[2] / 255,
                    o = e[3],
                    r = Math.max(s, n, a),
                    h = Math.min(s, n, a),
                    l = r - h,
                    u = r + h,
                    d = .5 * u;
                return t = h === r ? 0 : s === r ? 60 * (n - a) / l + 360 : n === r ? 60 * (a - s) / l + 120 : 60 * (s - n) / l + 240, i = 0 === l ? 0 : .5 >= d ? l / u : l / (2 - u), [Math.round(t) % 360, i, d, null == o ? 1 : o]
            }, u.hsla.from = function(e) {
                if (null == e[0] || null == e[1] || null == e[2]) return [null, null, null, e[3]];
                var t = e[0] / 360,
                    i = e[1],
                    s = e[2],
                    a = e[3],
                    o = .5 >= s ? s * (1 + i) : s + i - s * i,
                    r = 2 * s - o;
                return [Math.round(255 * n(r, o, t + 1 / 3)), Math.round(255 * n(r, o, t)), Math.round(255 * n(r, o, t - 1 / 3)), a]
            }, f(u, function(s, n) {
                var a = n.props,
                    o = n.cache,
                    h = n.to,
                    u = n.from;
                l.fn[s] = function(s) {
                    if (h && !this[o] && (this[o] = h(this._rgba)), s === t) return this[o].slice();
                    var n, r = e.type(s),
                        d = "array" === r || "object" === r ? s : arguments,
                        c = this[o].slice();
                    return f(a, function(e, t) {
                        var s = d["object" === r ? e : t.idx];
                        null == s && (s = c[t.idx]), c[t.idx] = i(s, t)
                    }), u ? (n = l(u(c)), n[o] = c, n) : l(c)
                }, f(a, function(t, i) {
                    l.fn[t] || (l.fn[t] = function(n) {
                        var a, o = e.type(n),
                            h = "alpha" === t ? this._hsla ? "hsla" : "rgba" : s,
                            l = this[h](),
                            u = l[i.idx];
                        return "undefined" === o ? u : ("function" === o && (n = n.call(this, u), o = e.type(n)), null == n && i.empty ? this : ("string" === o && (a = r.exec(n), a && (n = u + parseFloat(a[2]) * ("+" === a[1] ? 1 : -1))), l[i.idx] = n, this[h](l)))
                    })
                })
            }), l.hook = function(t) {
                var i = t.split(" ");
                f(i, function(t, i) {
                    e.cssHooks[i] = {
                        set: function(t, n) {
                            var a, o, r = "";
                            if ("transparent" !== n && ("string" !== e.type(n) || (a = s(n)))) {
                                if (n = l(a || n), !c.rgba && 1 !== n._rgba[3]) {
                                    for (o = "backgroundColor" === i ? t.parentNode : t;
                                        ("" === r || "transparent" === r) && o && o.style;) try {
                                        r = e.css(o, "backgroundColor"), o = o.parentNode
                                    } catch (h) {}
                                    n = n.blend(r && "transparent" !== r ? r : "_default")
                                }
                                n = n.toRgbaString()
                            }
                            try {
                                t.style[i] = n
                            } catch (h) {}
                        }
                    }, e.fx.step[i] = function(t) {
                        t.colorInit || (t.start = l(t.elem, i), t.end = l(t.end), t.colorInit = !0), e.cssHooks[i].set(t.elem, t.start.transition(t.end, t.pos))
                    }
                })
            }, l.hook(o), e.cssHooks.borderColor = {
                expand: function(e) {
                    var t = {};
                    return f(["Top", "Right", "Bottom", "Left"], function(i, s) {
                        t["border" + s + "Color"] = e
                    }), t
                }
            }, a = e.Color.names = {
                aqua: "#00ffff",
                black: "#000000",
                blue: "#0000ff",
                fuchsia: "#ff00ff",
                gray: "#808080",
                green: "#008000",
                lime: "#00ff00",
                maroon: "#800000",
                navy: "#000080",
                olive: "#808000",
                purple: "#800080",
                red: "#ff0000",
                silver: "#c0c0c0",
                teal: "#008080",
                white: "#ffffff",
                yellow: "#ffff00",
                transparent: [null, null, null, 0],
                _default: "#ffffff"
            }
        }(r),
        function() {
            function t(t) {
                var i, s, n = t.ownerDocument.defaultView ? t.ownerDocument.defaultView.getComputedStyle(t, null) : t.currentStyle,
                    a = {};
                if (n && n.length && n[0] && n[n[0]])
                    for (s = n.length; s--;) i = n[s], "string" == typeof n[i] && (a[e.camelCase(i)] = n[i]);
                else
                    for (i in n) "string" == typeof n[i] && (a[i] = n[i]);
                return a
            }

            function i(t, i) {
                var s, a, o = {};
                for (s in i) a = i[s], t[s] !== a && (n[s] || (e.fx.step[s] || !isNaN(parseFloat(a))) && (o[s] = a));
                return o
            }
            var s = ["add", "remove", "toggle"],
                n = {
                    border: 1,
                    borderBottom: 1,
                    borderColor: 1,
                    borderLeft: 1,
                    borderRight: 1,
                    borderTop: 1,
                    borderWidth: 1,
                    margin: 1,
                    padding: 1
                };
            e.each(["borderLeftStyle", "borderRightStyle", "borderBottomStyle", "borderTopStyle"], function(t, i) {
                e.fx.step[i] = function(e) {
                    ("none" !== e.end && !e.setAttr || 1 === e.pos && !e.setAttr) && (r.style(e.elem, i, e.end), e.setAttr = !0)
                }
            }), e.fn.addBack || (e.fn.addBack = function(e) {
                return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
            }), e.effects.animateClass = function(n, a, o, r) {
                var h = e.speed(a, o, r);
                return this.queue(function() {
                    var a, o = e(this),
                        r = o.attr("class") || "",
                        l = h.children ? o.find("*").addBack() : o;
                    l = l.map(function() {
                        var i = e(this);
                        return {
                            el: i,
                            start: t(this)
                        }
                    }), a = function() {
                        e.each(s, function(e, t) {
                            n[t] && o[t + "Class"](n[t])
                        })
                    }, a(), l = l.map(function() {
                        return this.end = t(this.el[0]), this.diff = i(this.start, this.end), this
                    }), o.attr("class", r), l = l.map(function() {
                        var t = this,
                            i = e.Deferred(),
                            s = e.extend({}, h, {
                                queue: !1,
                                complete: function() {
                                    i.resolve(t)
                                }
                            });
                        return this.el.animate(this.diff, s), i.promise()
                    }), e.when.apply(e, l.get()).done(function() {
                        a(), e.each(arguments, function() {
                            var t = this.el;
                            e.each(this.diff, function(e) {
                                t.css(e, "")
                            })
                        }), h.complete.call(o[0])
                    })
                })
            }, e.fn.extend({
                addClass: function(t) {
                    return function(i, s, n, a) {
                        return s ? e.effects.animateClass.call(this, {
                            add: i
                        }, s, n, a) : t.apply(this, arguments)
                    }
                }(e.fn.addClass),
                removeClass: function(t) {
                    return function(i, s, n, a) {
                        return arguments.length > 1 ? e.effects.animateClass.call(this, {
                            remove: i
                        }, s, n, a) : t.apply(this, arguments)
                    }
                }(e.fn.removeClass),
                toggleClass: function(t) {
                    return function(i, s, n, a, o) {
                        return "boolean" == typeof s || void 0 === s ? n ? e.effects.animateClass.call(this, s ? {
                            add: i
                        } : {
                            remove: i
                        }, n, a, o) : t.apply(this, arguments) : e.effects.animateClass.call(this, {
                            toggle: i
                        }, s, n, a)
                    }
                }(e.fn.toggleClass),
                switchClass: function(t, i, s, n, a) {
                    return e.effects.animateClass.call(this, {
                        add: i,
                        remove: t
                    }, s, n, a)
                }
            })
        }(),
        function() {
            function t(t, i, s, n) {
                return e.isPlainObject(t) && (i = t, t = t.effect), t = {
                    effect: t
                }, null == i && (i = {}), e.isFunction(i) && (n = i, s = null, i = {}), ("number" == typeof i || e.fx.speeds[i]) && (n = s, s = i, i = {}), e.isFunction(s) && (n = s, s = null), i && e.extend(t, i), s = s || i.duration, t.duration = e.fx.off ? 0 : "number" == typeof s ? s : s in e.fx.speeds ? e.fx.speeds[s] : e.fx.speeds._default, t.complete = n || i.complete, t
            }

            function i(t) {
                return !t || "number" == typeof t || e.fx.speeds[t] ? !0 : "string" != typeof t || e.effects.effect[t] ? e.isFunction(t) ? !0 : "object" != typeof t || t.effect ? !1 : !0 : !0
            }
            e.extend(e.effects, {
                version: "1.11.4",
                save: function(e, t) {
                    for (var i = 0; t.length > i; i++) null !== t[i] && e.data(o + t[i], e[0].style[t[i]])
                },
                restore: function(e, t) {
                    var i, s;
                    for (s = 0; t.length > s; s++) null !== t[s] && (i = e.data(o + t[s]), void 0 === i && (i = ""), e.css(t[s], i))
                },
                setMode: function(e, t) {
                    return "toggle" === t && (t = e.is(":hidden") ? "show" : "hide"), t
                },
                getBaseline: function(e, t) {
                    var i, s;
                    switch (e[0]) {
                        case "top":
                            i = 0;
                            break;
                        case "middle":
                            i = .5;
                            break;
                        case "bottom":
                            i = 1;
                            break;
                        default:
                            i = e[0] / t.height
                    }
                    switch (e[1]) {
                        case "left":
                            s = 0;
                            break;
                        case "center":
                            s = .5;
                            break;
                        case "right":
                            s = 1;
                            break;
                        default:
                            s = e[1] / t.width
                    }
                    return {
                        x: s,
                        y: i
                    }
                },
                createWrapper: function(t) {
                    if (t.parent().is(".ui-effects-wrapper")) return t.parent();
                    var i = {
                            width: t.outerWidth(!0),
                            height: t.outerHeight(!0),
                            "float": t.css("float")
                        },
                        s = e("<div></div>").addClass("ui-effects-wrapper").css({
                            fontSize: "100%",
                            background: "transparent",
                            border: "none",
                            margin: 0,
                            padding: 0
                        }),
                        n = {
                            width: t.width(),
                            height: t.height()
                        },
                        a = document.activeElement;
                    try {
                        a.id
                    } catch (o) {
                        a = document.body
                    }
                    return t.wrap(s), (t[0] === a || e.contains(t[0], a)) && e(a).focus(), s = t.parent(), "static" === t.css("position") ? (s.css({
                        position: "relative"
                    }), t.css({
                        position: "relative"
                    })) : (e.extend(i, {
                        position: t.css("position"),
                        zIndex: t.css("z-index")
                    }), e.each(["top", "left", "bottom", "right"], function(e, s) {
                        i[s] = t.css(s), isNaN(parseInt(i[s], 10)) && (i[s] = "auto")
                    }), t.css({
                        position: "relative",
                        top: 0,
                        left: 0,
                        right: "auto",
                        bottom: "auto"
                    })), t.css(n), s.css(i).show()
                },
                removeWrapper: function(t) {
                    var i = document.activeElement;
                    return t.parent().is(".ui-effects-wrapper") && (t.parent().replaceWith(t), (t[0] === i || e.contains(t[0], i)) && e(i).focus()), t
                },
                setTransition: function(t, i, s, n) {
                    return n = n || {}, e.each(i, function(e, i) {
                        var a = t.cssUnit(i);
                        a[0] > 0 && (n[i] = a[0] * s + a[1])
                    }), n
                }
            }), e.fn.extend({
                effect: function() {
                    function i(t) {
                        function i() {
                            e.isFunction(a) && a.call(n[0]), e.isFunction(t) && t()
                        }
                        var n = e(this),
                            a = s.complete,
                            r = s.mode;
                        (n.is(":hidden") ? "hide" === r : "show" === r) ? (n[r](), i()) : o.call(n[0], s, i)
                    }
                    var s = t.apply(this, arguments),
                        n = s.mode,
                        a = s.queue,
                        o = e.effects.effect[s.effect];
                    return e.fx.off || !o ? n ? this[n](s.duration, s.complete) : this.each(function() {
                        s.complete && s.complete.call(this)
                    }) : a === !1 ? this.each(i) : this.queue(a || "fx", i)
                },
                show: function(e) {
                    return function(s) {
                        if (i(s)) return e.apply(this, arguments);
                        var n = t.apply(this, arguments);
                        return n.mode = "show", this.effect.call(this, n)
                    }
                }(e.fn.show),
                hide: function(e) {
                    return function(s) {
                        if (i(s)) return e.apply(this, arguments);
                        var n = t.apply(this, arguments);
                        return n.mode = "hide", this.effect.call(this, n)
                    }
                }(e.fn.hide),
                toggle: function(e) {
                    return function(s) {
                        if (i(s) || "boolean" == typeof s) return e.apply(this, arguments);
                        var n = t.apply(this, arguments);
                        return n.mode = "toggle", this.effect.call(this, n)
                    }
                }(e.fn.toggle),
                cssUnit: function(t) {
                    var i = this.css(t),
                        s = [];
                    return e.each(["em", "px", "%", "pt"], function(e, t) {
                        i.indexOf(t) > 0 && (s = [parseFloat(i), t])
                    }), s
                }
            })
        }(),
        function() {
            var t = {};
            e.each(["Quad", "Cubic", "Quart", "Quint", "Expo"], function(e, i) {
                t[i] = function(t) {
                    return Math.pow(t, e + 2)
                }
            }), e.extend(t, {
                Sine: function(e) {
                    return 1 - Math.cos(e * Math.PI / 2)
                },
                Circ: function(e) {
                    return 1 - Math.sqrt(1 - e * e)
                },
                Elastic: function(e) {
                    return 0 === e || 1 === e ? e : -Math.pow(2, 8 * (e - 1)) * Math.sin((80 * (e - 1) - 7.5) * Math.PI / 15)
                },
                Back: function(e) {
                    return e * e * (3 * e - 2)
                },
                Bounce: function(e) {
                    for (var t, i = 4;
                        ((t = Math.pow(2, --i)) - 1) / 11 > e;);
                    return 1 / Math.pow(4, 3 - i) - 7.5625 * Math.pow((3 * t - 2) / 22 - e, 2)
                }
            }), e.each(t, function(t, i) {
                e.easing["easeIn" + t] = i, e.easing["easeOut" + t] = function(e) {
                    return 1 - i(1 - e)
                }, e.easing["easeInOut" + t] = function(e) {
                    return .5 > e ? i(2 * e) / 2 : 1 - i(-2 * e + 2) / 2
                }
            })
        }(), e.effects, e.effects.effect.blind = function(t, i) {
            var s, n, a, o = e(this),
                r = /up|down|vertical/,
                h = /up|left|vertical|horizontal/,
                l = ["position", "top", "bottom", "left", "right", "height", "width"],
                u = e.effects.setMode(o, t.mode || "hide"),
                d = t.direction || "up",
                c = r.test(d),
                p = c ? "height" : "width",
                f = c ? "top" : "left",
                m = h.test(d),
                g = {},
                v = "show" === u;
            o.parent().is(".ui-effects-wrapper") ? e.effects.save(o.parent(), l) : e.effects.save(o, l), o.show(), s = e.effects.createWrapper(o).css({
                overflow: "hidden"
            }), n = s[p](), a = parseFloat(s.css(f)) || 0, g[p] = v ? n : 0, m || (o.css(c ? "bottom" : "right", 0).css(c ? "top" : "left", "auto").css({
                position: "absolute"
            }), g[f] = v ? a : n + a), v && (s.css(p, 0), m || s.css(f, a + n)), s.animate(g, {
                duration: t.duration,
                easing: t.easing,
                queue: !1,
                complete: function() {
                    "hide" === u && o.hide(), e.effects.restore(o, l), e.effects.removeWrapper(o), i()
                }
            })
        }, e.effects.effect.bounce = function(t, i) {
            var s, n, a, o = e(this),
                r = ["position", "top", "bottom", "left", "right", "height", "width"],
                h = e.effects.setMode(o, t.mode || "effect"),
                l = "hide" === h,
                u = "show" === h,
                d = t.direction || "up",
                c = t.distance,
                p = t.times || 5,
                f = 2 * p + (u || l ? 1 : 0),
                m = t.duration / f,
                g = t.easing,
                v = "up" === d || "down" === d ? "top" : "left",
                y = "up" === d || "left" === d,
                b = o.queue(),
                _ = b.length;
            for ((u || l) && r.push("opacity"), e.effects.save(o, r), o.show(), e.effects.createWrapper(o), c || (c = o["top" === v ? "outerHeight" : "outerWidth"]() / 3), u && (a = {
                    opacity: 1
                }, a[v] = 0, o.css("opacity", 0).css(v, y ? 2 * -c : 2 * c).animate(a, m, g)), l && (c /= Math.pow(2, p - 1)), a = {}, a[v] = 0, s = 0; p > s; s++) n = {}, n[v] = (y ? "-=" : "+=") + c, o.animate(n, m, g).animate(a, m, g), c = l ? 2 * c : c / 2;
            l && (n = {
                opacity: 0
            }, n[v] = (y ? "-=" : "+=") + c, o.animate(n, m, g)), o.queue(function() {
                l && o.hide(), e.effects.restore(o, r), e.effects.removeWrapper(o), i()
            }), _ > 1 && b.splice.apply(b, [1, 0].concat(b.splice(_, f + 1))), o.dequeue()
        }, e.effects.effect.clip = function(t, i) {
            var s, n, a, o = e(this),
                r = ["position", "top", "bottom", "left", "right", "height", "width"],
                h = e.effects.setMode(o, t.mode || "hide"),
                l = "show" === h,
                u = t.direction || "vertical",
                d = "vertical" === u,
                c = d ? "height" : "width",
                p = d ? "top" : "left",
                f = {};
            e.effects.save(o, r), o.show(), s = e.effects.createWrapper(o).css({
                overflow: "hidden"
            }), n = "IMG" === o[0].tagName ? s : o, a = n[c](), l && (n.css(c, 0), n.css(p, a / 2)), f[c] = l ? a : 0, f[p] = l ? 0 : a / 2, n.animate(f, {
                queue: !1,
                duration: t.duration,
                easing: t.easing,
                complete: function() {
                    l || o.hide(), e.effects.restore(o, r), e.effects.removeWrapper(o), i()
                }
            })
        }, e.effects.effect.drop = function(t, i) {
            var s, n = e(this),
                a = ["position", "top", "bottom", "left", "right", "opacity", "height", "width"],
                o = e.effects.setMode(n, t.mode || "hide"),
                r = "show" === o,
                h = t.direction || "left",
                l = "up" === h || "down" === h ? "top" : "left",
                u = "up" === h || "left" === h ? "pos" : "neg",
                d = {
                    opacity: r ? 1 : 0
                };
            e.effects.save(n, a), n.show(), e.effects.createWrapper(n), s = t.distance || n["top" === l ? "outerHeight" : "outerWidth"](!0) / 2, r && n.css("opacity", 0).css(l, "pos" === u ? -s : s), d[l] = (r ? "pos" === u ? "+=" : "-=" : "pos" === u ? "-=" : "+=") + s, n.animate(d, {
                queue: !1,
                duration: t.duration,
                easing: t.easing,
                complete: function() {
                    "hide" === o && n.hide(), e.effects.restore(n, a), e.effects.removeWrapper(n), i()
                }
            })
        }, e.effects.effect.explode = function(t, i) {
            function s() {
                b.push(this), b.length === d * c && n()
            }

            function n() {
                p.css({
                    visibility: "visible"
                }), e(b).remove(), m || p.hide(), i()
            }
            var a, o, r, h, l, u, d = t.pieces ? Math.round(Math.sqrt(t.pieces)) : 3,
                c = d,
                p = e(this),
                f = e.effects.setMode(p, t.mode || "hide"),
                m = "show" === f,
                g = p.show().css("visibility", "hidden").offset(),
                v = Math.ceil(p.outerWidth() / c),
                y = Math.ceil(p.outerHeight() / d),
                b = [];
            for (a = 0; d > a; a++)
                for (h = g.top + a * y, u = a - (d - 1) / 2, o = 0; c > o; o++) r = g.left + o * v, l = o - (c - 1) / 2, p.clone().appendTo("body").wrap("<div></div>").css({
                    position: "absolute",
                    visibility: "visible",
                    left: -o * v,
                    top: -a * y
                }).parent().addClass("ui-effects-explode").css({
                    position: "absolute",
                    overflow: "hidden",
                    width: v,
                    height: y,
                    left: r + (m ? l * v : 0),
                    top: h + (m ? u * y : 0),
                    opacity: m ? 0 : 1
                }).animate({
                    left: r + (m ? 0 : l * v),
                    top: h + (m ? 0 : u * y),
                    opacity: m ? 1 : 0
                }, t.duration || 500, t.easing, s)
        }, e.effects.effect.fade = function(t, i) {
            var s = e(this),
                n = e.effects.setMode(s, t.mode || "toggle");
            s.animate({
                opacity: n
            }, {
                queue: !1,
                duration: t.duration,
                easing: t.easing,
                complete: i
            })
        }, e.effects.effect.fold = function(t, i) {
            var s, n, a = e(this),
                o = ["position", "top", "bottom", "left", "right", "height", "width"],
                r = e.effects.setMode(a, t.mode || "hide"),
                h = "show" === r,
                l = "hide" === r,
                u = t.size || 15,
                d = /([0-9]+)%/.exec(u),
                c = !!t.horizFirst,
                p = h !== c,
                f = p ? ["width", "height"] : ["height", "width"],
                m = t.duration / 2,
                g = {},
                v = {};
            e.effects.save(a, o), a.show(), s = e.effects.createWrapper(a).css({
                overflow: "hidden"
            }), n = p ? [s.width(), s.height()] : [s.height(), s.width()], d && (u = parseInt(d[1], 10) / 100 * n[l ? 0 : 1]), h && s.css(c ? {
                height: 0,
                width: u
            } : {
                height: u,
                width: 0
            }), g[f[0]] = h ? n[0] : u, v[f[1]] = h ? n[1] : 0, s.animate(g, m, t.easing).animate(v, m, t.easing, function() {
                l && a.hide(), e.effects.restore(a, o), e.effects.removeWrapper(a), i()
            })
        }, e.effects.effect.highlight = function(t, i) {
            var s = e(this),
                n = ["backgroundImage", "backgroundColor", "opacity"],
                a = e.effects.setMode(s, t.mode || "show"),
                o = {
                    backgroundColor: s.css("backgroundColor")
                };
            "hide" === a && (o.opacity = 0), e.effects.save(s, n), s.show().css({
                backgroundImage: "none",
                backgroundColor: t.color || "#ffff99"
            }).animate(o, {
                queue: !1,
                duration: t.duration,
                easing: t.easing,
                complete: function() {
                    "hide" === a && s.hide(), e.effects.restore(s, n), i()
                }
            })
        }, e.effects.effect.size = function(t, i) {
            var s, n, a, o = e(this),
                r = ["position", "top", "bottom", "left", "right", "width", "height", "overflow", "opacity"],
                h = ["position", "top", "bottom", "left", "right", "overflow", "opacity"],
                l = ["width", "height", "overflow"],
                u = ["fontSize"],
                d = ["borderTopWidth", "borderBottomWidth", "paddingTop", "paddingBottom"],
                c = ["borderLeftWidth", "borderRightWidth", "paddingLeft", "paddingRight"],
                p = e.effects.setMode(o, t.mode || "effect"),
                f = t.restore || "effect" !== p,
                m = t.scale || "both",
                g = t.origin || ["middle", "center"],
                v = o.css("position"),
                y = f ? r : h,
                b = {
                    height: 0,
                    width: 0,
                    outerHeight: 0,
                    outerWidth: 0
                };
            "show" === p && o.show(), s = {
                height: o.height(),
                width: o.width(),
                outerHeight: o.outerHeight(),
                outerWidth: o.outerWidth()
            }, "toggle" === t.mode && "show" === p ? (o.from = t.to || b, o.to = t.from || s) : (o.from = t.from || ("show" === p ? b : s), o.to = t.to || ("hide" === p ? b : s)), a = {
                from: {
                    y: o.from.height / s.height,
                    x: o.from.width / s.width
                },
                to: {
                    y: o.to.height / s.height,
                    x: o.to.width / s.width
                }
            }, ("box" === m || "both" === m) && (a.from.y !== a.to.y && (y = y.concat(d), o.from = e.effects.setTransition(o, d, a.from.y, o.from), o.to = e.effects.setTransition(o, d, a.to.y, o.to)), a.from.x !== a.to.x && (y = y.concat(c), o.from = e.effects.setTransition(o, c, a.from.x, o.from), o.to = e.effects.setTransition(o, c, a.to.x, o.to))), ("content" === m || "both" === m) && a.from.y !== a.to.y && (y = y.concat(u).concat(l), o.from = e.effects.setTransition(o, u, a.from.y, o.from), o.to = e.effects.setTransition(o, u, a.to.y, o.to)), e.effects.save(o, y), o.show(), e.effects.createWrapper(o), o.css("overflow", "hidden").css(o.from), g && (n = e.effects.getBaseline(g, s), o.from.top = (s.outerHeight - o.outerHeight()) * n.y, o.from.left = (s.outerWidth - o.outerWidth()) * n.x, o.to.top = (s.outerHeight - o.to.outerHeight) * n.y, o.to.left = (s.outerWidth - o.to.outerWidth) * n.x), o.css(o.from), ("content" === m || "both" === m) && (d = d.concat(["marginTop", "marginBottom"]).concat(u), c = c.concat(["marginLeft", "marginRight"]), l = r.concat(d).concat(c), o.find("*[width]").each(function() {
                var i = e(this),
                    s = {
                        height: i.height(),
                        width: i.width(),
                        outerHeight: i.outerHeight(),
                        outerWidth: i.outerWidth()
                    };
                f && e.effects.save(i, l), i.from = {
                    height: s.height * a.from.y,
                    width: s.width * a.from.x,
                    outerHeight: s.outerHeight * a.from.y,
                    outerWidth: s.outerWidth * a.from.x
                }, i.to = {
                    height: s.height * a.to.y,
                    width: s.width * a.to.x,
                    outerHeight: s.height * a.to.y,
                    outerWidth: s.width * a.to.x
                }, a.from.y !== a.to.y && (i.from = e.effects.setTransition(i, d, a.from.y, i.from), i.to = e.effects.setTransition(i, d, a.to.y, i.to)), a.from.x !== a.to.x && (i.from = e.effects.setTransition(i, c, a.from.x, i.from), i.to = e.effects.setTransition(i, c, a.to.x, i.to)), i.css(i.from), i.animate(i.to, t.duration, t.easing, function() {
                    f && e.effects.restore(i, l)
                })
            })), o.animate(o.to, {
                queue: !1,
                duration: t.duration,
                easing: t.easing,
                complete: function() {
                    0 === o.to.opacity && o.css("opacity", o.from.opacity), "hide" === p && o.hide(), e.effects.restore(o, y), f || ("static" === v ? o.css({
                        position: "relative",
                        top: o.to.top,
                        left: o.to.left
                    }) : e.each(["top", "left"], function(e, t) {
                        o.css(t, function(t, i) {
                            var s = parseInt(i, 10),
                                n = e ? o.to.left : o.to.top;
                            return "auto" === i ? n + "px" : s + n + "px"
                        })
                    })), e.effects.removeWrapper(o), i()
                }
            })
        }, e.effects.effect.scale = function(t, i) {
            var s = e(this),
                n = e.extend(!0, {}, t),
                a = e.effects.setMode(s, t.mode || "effect"),
                o = parseInt(t.percent, 10) || (0 === parseInt(t.percent, 10) ? 0 : "hide" === a ? 0 : 100),
                r = t.direction || "both",
                h = t.origin,
                l = {
                    height: s.height(),
                    width: s.width(),
                    outerHeight: s.outerHeight(),
                    outerWidth: s.outerWidth()
                },
                u = {
                    y: "horizontal" !== r ? o / 100 : 1,
                    x: "vertical" !== r ? o / 100 : 1
                };
            n.effect = "size", n.queue = !1, n.complete = i, "effect" !== a && (n.origin = h || ["middle", "center"], n.restore = !0), n.from = t.from || ("show" === a ? {
                height: 0,
                width: 0,
                outerHeight: 0,
                outerWidth: 0
            } : l), n.to = {
                height: l.height * u.y,
                width: l.width * u.x,
                outerHeight: l.outerHeight * u.y,
                outerWidth: l.outerWidth * u.x
            }, n.fade && ("show" === a && (n.from.opacity = 0, n.to.opacity = 1), "hide" === a && (n.from.opacity = 1, n.to.opacity = 0)), s.effect(n)
        }, e.effects.effect.puff = function(t, i) {
            var s = e(this),
                n = e.effects.setMode(s, t.mode || "hide"),
                a = "hide" === n,
                o = parseInt(t.percent, 10) || 150,
                r = o / 100,
                h = {
                    height: s.height(),
                    width: s.width(),
                    outerHeight: s.outerHeight(),
                    outerWidth: s.outerWidth()
                };
            e.extend(t, {
                effect: "scale",
                queue: !1,
                fade: !0,
                mode: n,
                complete: i,
                percent: a ? o : 100,
                from: a ? h : {
                    height: h.height * r,
                    width: h.width * r,
                    outerHeight: h.outerHeight * r,
                    outerWidth: h.outerWidth * r
                }
            }), s.effect(t)
        }, e.effects.effect.pulsate = function(t, i) {
            var s, n = e(this),
                a = e.effects.setMode(n, t.mode || "show"),
                o = "show" === a,
                r = "hide" === a,
                h = o || "hide" === a,
                l = 2 * (t.times || 5) + (h ? 1 : 0),
                u = t.duration / l,
                d = 0,
                c = n.queue(),
                p = c.length;
            for ((o || !n.is(":visible")) && (n.css("opacity", 0).show(), d = 1), s = 1; l > s; s++) n.animate({
                opacity: d
            }, u, t.easing), d = 1 - d;
            n.animate({
                opacity: d
            }, u, t.easing), n.queue(function() {
                r && n.hide(), i()
            }), p > 1 && c.splice.apply(c, [1, 0].concat(c.splice(p, l + 1))), n.dequeue()
        }, e.effects.effect.shake = function(t, i) {
            var s, n = e(this),
                a = ["position", "top", "bottom", "left", "right", "height", "width"],
                o = e.effects.setMode(n, t.mode || "effect"),
                r = t.direction || "left",
                h = t.distance || 20,
                l = t.times || 3,
                u = 2 * l + 1,
                d = Math.round(t.duration / u),
                c = "up" === r || "down" === r ? "top" : "left",
                p = "up" === r || "left" === r,
                f = {},
                m = {},
                g = {},
                v = n.queue(),
                y = v.length;
            for (e.effects.save(n, a), n.show(), e.effects.createWrapper(n), f[c] = (p ? "-=" : "+=") + h, m[c] = (p ? "+=" : "-=") + 2 * h, g[c] = (p ? "-=" : "+=") + 2 * h, n.animate(f, d, t.easing), s = 1; l > s; s++) n.animate(m, d, t.easing).animate(g, d, t.easing);
            n.animate(m, d, t.easing).animate(f, d / 2, t.easing).queue(function() {
                "hide" === o && n.hide(), e.effects.restore(n, a), e.effects.removeWrapper(n), i()
            }), y > 1 && v.splice.apply(v, [1, 0].concat(v.splice(y, u + 1))), n.dequeue()
        }, e.effects.effect.slide = function(t, i) {
            var s, n = e(this),
                a = ["position", "top", "bottom", "left", "right", "width", "height"],
                o = e.effects.setMode(n, t.mode || "show"),
                r = "show" === o,
                h = t.direction || "left",
                l = "up" === h || "down" === h ? "top" : "left",
                u = "up" === h || "left" === h,
                d = {};
            e.effects.save(n, a), n.show(), s = t.distance || n["top" === l ? "outerHeight" : "outerWidth"](!0), e.effects.createWrapper(n).css({
                overflow: "hidden"
            }), r && n.css(l, u ? isNaN(s) ? "-" + s : -s : s), d[l] = (r ? u ? "+=" : "-=" : u ? "-=" : "+=") + s, n.animate(d, {
                queue: !1,
                duration: t.duration,
                easing: t.easing,
                complete: function() {
                    "hide" === o && n.hide(), e.effects.restore(n, a), e.effects.removeWrapper(n), i()
                }
            })
        }, e.effects.effect.transfer = function(t, i) {
            var s = e(this),
                n = e(t.to),
                a = "fixed" === n.css("position"),
                o = e("body"),
                r = a ? o.scrollTop() : 0,
                h = a ? o.scrollLeft() : 0,
                l = n.offset(),
                u = {
                    top: l.top - r,
                    left: l.left - h,
                    height: n.innerHeight(),
                    width: n.innerWidth()
                },
                d = s.offset(),
                c = e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({
                    top: d.top - r,
                    left: d.left - h,
                    height: s.innerHeight(),
                    width: s.innerWidth(),
                    position: a ? "fixed" : "absolute"
                }).animate(u, t.duration, t.easing, function() {
                    c.remove(), i()
                })
        }
});
(function(e) {
    e.fn.marquee = function(t) {
        return this.each(function() {
            var n = e.extend({}, e.fn.marquee.defaults, t),
                r = e(this),
                i, s, o, u, a, f = 3,
                l = "animation-play-state",
                c = false,
                h = function(e, t, n) {
                    var r = ["webkit", "moz", "MS", "o", ""];
                    for (var i = 0; i < r.length; i++) {
                        if (!r[i]) t = t.toLowerCase();
                        e.addEventListener(r[i] + t, n, false)
                    }
                },
                p = function(e) {
                    var t = [];
                    for (var n in e) {
                        if (e.hasOwnProperty(n)) {
                            t.push(n + ":" + e[n])
                        }
                    }
                    t.push();
                    return "{" + t.join(",") + "}"
                },
                d = function() {
                    r.timer = setTimeout(M, n.delayBeforeStart)
                },
                v = {
                    pause: function() {
                        if (c && n.allowCss3Support) {
                            i.css(l, "paused")
                        } else {
                            if (e.fn.pause) {
                                i.pause()
                            }
                        }
                        r.data("runningStatus", "paused");
                        r.trigger("paused")
                    },
                    resume: function() {
                        if (c && n.allowCss3Support) {
                            i.css(l, "running")
                        } else {
                            if (e.fn.resume) {
                                i.resume()
                            }
                        }
                        r.data("runningStatus", "resumed");
                        r.trigger("resumed")
                    },
                    toggle: function() {
                        v[r.data("runningStatus") == "resumed" ? "pause" : "resume"]()
                    },
                    destroy: function() {
                        clearTimeout(r.timer);
                        r.find("*").andSelf().unbind();
                        r.html(r.find(".js-marquee:first").html())
                    }
                };
            if (typeof t === "string") {
                if (e.isFunction(v[t])) {
                    if (!i) {
                        i = r.find(".js-marquee-wrapper")
                    }
                    if (r.data("css3AnimationIsSupported") === true) {
                        c = true
                    }
                    v[t]()
                }
                return
            }
            var m = {},
                g;
            e.each(n, function(e, t) {
                g = r.attr("data-" + e);
                if (typeof g !== "undefined") {
                    switch (g) {
                        case "true":
                            g = true;
                            break;
                        case "false":
                            g = false;
                            break
                    }
                    n[e] = g
                }
            });
            n.duration = n.speed || n.duration;
            u = n.direction == "up" || n.direction == "down";
            n.gap = n.duplicated ? parseInt(n.gap) : 0;
            r.wrapInner('<div class="js-marquee"></div>');
            var y = r.find(".js-marquee").css({
                "margin-right": n.gap,
                "float": "left"
            });
            if (n.duplicated) {
                y.clone(true).appendTo(r)
            }
            r.wrapInner('<div style="width:100000px" class="js-marquee-wrapper"></div>');
            i = r.find(".js-marquee-wrapper");
            if (u) {
                var b = r.height();
                i.removeAttr("style");
                r.height(b);
                r.find(".js-marquee").css({
                    "float": "none",
                    "margin-bottom": n.gap,
                    "margin-right": 0
                });
                if (n.duplicated) r.find(".js-marquee:last").css({
                    "margin-bottom": 0
                });
                var w = r.find(".js-marquee:first").height() + n.gap;
                n.duration = (parseInt(w, 10) + parseInt(b, 10)) / parseInt(b, 10) * n.duration
            } else {
                a = r.find(".js-marquee:first").width() + n.gap;
                s = r.width();
                n.duration = (parseInt(a, 10) + parseInt(s, 10)) / parseInt(s, 10) * n.duration
            }
            if (n.duplicated) {
                n.duration = n.duration / 2
            }
            if (n.allowCss3Support) {
                var E = document.body || document.createElement("div"),
                    S = "marqueeAnimation-" + Math.floor(Math.random() * 1e7),
                    x = "Webkit Moz O ms Khtml".split(" "),
                    T = "animation",
                    N = "",
                    C = "";
                if (E.style.animation) {
                    C = "@keyframes " + S + " ";
                    c = true
                }
                if (c === false) {
                    for (var k = 0; k < x.length; k++) {
                        if (E.style[x[k] + "AnimationName"] !== undefined) {
                            var L = "-" + x[k].toLowerCase() + "-";
                            T = L + T;
                            l = L + l;
                            C = "@" + L + "keyframes " + S + " ";
                            c = true;
                            break
                        }
                    }
                }
                if (c) {
                    N = S + " " + n.duration / 1e3 + "s " + n.delayBeforeStart / 1e3 + "s infinite " + n.css3easing;
                    r.data("css3AnimationIsSupported", true)
                }
            }
            var A = function() {
                    i.css("margin-top", n.direction == "up" ? b + "px" : "-" + w + "px")
                },
                O = function() {
                    i.css("margin-left", n.direction == "left" ? s + "px" : "-" + a + "px")
                };
            if (n.duplicated) {
                if (u) {
                    i.css("margin-top", n.direction == "up" ? b : "-" + (w * 2 - n.gap) + "px")
                } else {
                    i.css("margin-left", n.direction == "left" ? s + "px" : "-" + (a * 2 - n.gap) + "px")
                }
                f = 1
            } else {
                if (u) {
                    A()
                } else {
                    O()
                }
            }
            var M = function() {
                if (n.duplicated) {
                    if (f === 1) {
                        n._originalDuration = n.duration;
                        if (u) {
                            n.duration = n.direction == "up" ? n.duration + b / (w / n.duration) : n.duration * 2
                        } else {
                            n.duration = n.direction == "left" ? n.duration + s / (a / n.duration) : n.duration * 2
                        }
                        if (N) {
                            N = S + " " + n.duration / 1e3 + "s " + n.delayBeforeStart / 1e3 + "s " + n.css3easing
                        }
                        f++
                    } else if (f === 2) {
                        n.duration = n._originalDuration;
                        if (N) {
                            S = S + "0";
                            C = e.trim(C) + "0 ";
                            N = S + " " + n.duration / 1e3 + "s 0s infinite " + n.css3easing
                        }
                        f++
                    }
                }
                if (u) {
                    if (n.duplicated) {
                        if (f > 2) {
                            i.css("margin-top", n.direction == "up" ? 0 : "-" + w + "px")
                        }
                        o = {
                            "margin-top": n.direction == "up" ? "-" + w + "px" : 0
                        }
                    } else {
                        A();
                        o = {
                            "margin-top": n.direction == "up" ? "-" + i.height() + "px" : b + "px"
                        }
                    }
                } else {
                    if (n.duplicated) {
                        if (f > 2) {
                            i.css("margin-left", n.direction == "left" ? 0 : "-" + a + "px")
                        }
                        o = {
                            "margin-left": n.direction == "left" ? "-" + a + "px" : 0
                        }
                    } else {
                        O();
                        o = {
                            "margin-left": n.direction == "left" ? "-" + a + "px" : s + "px"
                        }
                    }
                }
                r.trigger("beforeStarting");
                if (c) {
                    i.css(T, N);
                    var t = C + " { 100%  " + p(o) + "}",
                        l = e("style");
                    if (l.length !== 0) {
                        l.filter(":last").append(t)
                    } else {
                        e("head").append("<style>" + t + "</style>")
                    }
                    h(i[0], "AnimationIteration", function() {
                        r.trigger("finished")
                    });
                    h(i[0], "AnimationEnd", function() {
                        M();
                        r.trigger("finished")
                    })
                } else {
                    i.animate(o, n.duration, n.easing, function() {
                        r.trigger("finished");
                        if (n.pauseOnCycle) {
                            d()
                        } else {
                            M()
                        }
                    })
                }
                r.data("runningStatus", "resumed")
            };
            r.bind("pause", v.pause);
            r.bind("resume", v.resume);
            if (n.pauseOnHover) {
                r.bind("mouseenter mouseleave", v.toggle)
            }
            if (c && n.allowCss3Support) {
                M()
            } else {
                d()
            }
        })
    };
    e.fn.marquee.defaults = {
        allowCss3Support: true,
        css3easing: "linear",
        easing: "linear",
        delayBeforeStart: 1e3,
        direction: "left",
        duplicated: false,
        duration: 5e3,
        gap: 20,
        pauseOnCycle: false,
        pauseOnHover: false
    }
})(jQuery);
(function(f) {
    "function" === typeof define && define.amd ? define(["jquery"], f) : "object" === typeof exports ? module.exports = f(require("jquery")) : f(jQuery)
})(function(f) {
    var B = !1,
        F = !1,
        O = 0,
        P = 2e3,
        A = 0,
        J = ["webkit", "ms", "moz", "o"],
        v = window.requestAnimationFrame || !1,
        w = window.cancelAnimationFrame || !1;
    if (!v)
        for (var Q in J) {
            var G = J[Q];
            if (v = window[G + "RequestAnimationFrame"]) {
                w = window[G + "CancelAnimationFrame"] || window[G + "CancelRequestAnimationFrame"];
                break
            }
        }
    var x = window.MutationObserver || window.WebKitMutationObserver || !1,
        K = {
            zindex: "auto",
            cursoropacitymin: 0,
            cursoropacitymax: 1,
            cursorcolor: "#424242",
            cursorwidth: "6px",
            cursorborder: "1px solid #fff",
            cursorborderradius: "5px",
            scrollspeed: 60,
            mousescrollstep: 24,
            touchbehavior: !1,
            hwacceleration: !0,
            usetransition: !0,
            boxzoom: !1,
            dblclickzoom: !0,
            gesturezoom: !0,
            grabcursorenabled: !0,
            autohidemode: !0,
            background: "",
            iframeautoresize: !0,
            cursorminheight: 32,
            preservenativescrolling: !0,
            railoffset: !1,
            railhoffset: !1,
            bouncescroll: !0,
            spacebarenabled: !0,
            railpadding: {
                top: 0,
                right: 0,
                left: 0,
                bottom: 0
            },
            disableoutline: !0,
            horizrailenabled: !0,
            railalign: "right",
            railvalign: "bottom",
            enabletranslate3d: !0,
            enablemousewheel: !0,
            enablekeyboard: !0,
            smoothscroll: !0,
            sensitiverail: !0,
            enablemouselockapi: !0,
            cursorfixedheight: !1,
            directionlockdeadzone: 6,
            hidecursordelay: 400,
            nativeparentscrolling: !0,
            enablescrollonselection: !0,
            overflowx: !0,
            overflowy: !0,
            cursordragspeed: .3,
            rtlmode: "auto",
            cursordragontouch: !1,
            oneaxismousemode: "auto",
            scriptpath: function() {
                var f = document.getElementsByTagName("script"),
                    f = f.length ? f[f.length - 1].src.split("?")[0] : "";
                return 0 < f.split("/").length ? f.split("/").slice(0, -1).join("/") + "/" : ""
            }(),
            preventmultitouchscrolling: !0,
            disablemutationobserver: !1
        },
        H = !1,
        R = function() {
            if (H) return H;
            var f = document.createElement("DIV"),
                c = f.style,
                k = navigator.userAgent,
                l = navigator.platform,
                d = {
                    haspointerlock: "pointerLockElement" in document || "webkitPointerLockElement" in document || "mozPointerLockElement" in document
                };
            d.isopera = "opera" in window;
            d.isopera12 = d.isopera && "getUserMedia" in navigator;
            d.isoperamini = "[object OperaMini]" === Object.prototype.toString.call(window.operamini);
            d.isie = "all" in document && "attachEvent" in f && !d.isopera;
            d.isieold = d.isie && !("msInterpolationMode" in c);
            d.isie7 = d.isie && !d.isieold && (!("documentMode" in document) || 7 == document.documentMode);
            d.isie8 = d.isie && "documentMode" in document && 8 == document.documentMode;
            d.isie9 = d.isie && "performance" in window && 9 == document.documentMode;
            d.isie10 = d.isie && "performance" in window && 10 == document.documentMode;
            d.isie11 = "msRequestFullscreen" in f && 11 <= document.documentMode;
            d.isieedge12 = navigator.userAgent.match(/Edge\/12\./);
            d.isieedge = "msOverflowStyle" in f;
            d.ismodernie = d.isie11 || d.isieedge;
            d.isie9mobile = /iemobile.9/i.test(k);
            d.isie9mobile && (d.isie9 = !1);
            d.isie7mobile = !d.isie9mobile && d.isie7 && /iemobile/i.test(k);
            d.ismozilla = "MozAppearance" in c;
            d.iswebkit = "WebkitAppearance" in c;
            d.ischrome = "chrome" in window;
            d.ischrome38 = d.ischrome && "touchAction" in c;
            d.ischrome22 = !d.ischrome38 && d.ischrome && d.haspointerlock;
            d.ischrome26 = !d.ischrome38 && d.ischrome && "transition" in c;
            d.cantouch = "ontouchstart" in document.documentElement || "ontouchstart" in window;
            d.hasw3ctouch = (window.PointerEvent || !1) && (0 < navigator.MaxTouchPoints || 0 < navigator.msMaxTouchPoints);
            d.hasmstouch = !d.hasw3ctouch && (window.MSPointerEvent || !1);
            d.ismac = /^mac$/i.test(l);
            d.isios = d.cantouch && /iphone|ipad|ipod/i.test(l);
            d.isios4 = d.isios && !("seal" in Object);
            d.isios7 = d.isios && "webkitHidden" in document;
            d.isios8 = d.isios && "hidden" in document;
            d.isandroid = /android/i.test(k);
            d.haseventlistener = "addEventListener" in f;
            d.trstyle = !1;
            d.hastransform = !1;
            d.hastranslate3d = !1;
            d.transitionstyle = !1;
            d.hastransition = !1;
            d.transitionend = !1;
            l = ["transform", "msTransform", "webkitTransform", "MozTransform", "OTransform"];
            for (k = 0; k < l.length; k++)
                if (void 0 !== c[l[k]]) {
                    d.trstyle = l[k];
                    break
                }
            d.hastransform = !!d.trstyle;
            d.hastransform && (c[d.trstyle] = "translate3d(1px,2px,3px)", d.hastranslate3d = /translate3d/.test(c[d.trstyle]));
            d.transitionstyle = !1;
            d.prefixstyle = "";
            d.transitionend = !1;
            for (var l = "transition webkitTransition msTransition MozTransition OTransition OTransition KhtmlTransition".split(" "), q = " -webkit- -ms- -moz- -o- -o -khtml-".split(" "), t = "transitionend webkitTransitionEnd msTransitionEnd transitionend otransitionend oTransitionEnd KhtmlTransitionEnd".split(" "), k = 0; k < l.length; k++)
                if (l[k] in c) {
                    d.transitionstyle = l[k];
                    d.prefixstyle = q[k];
                    d.transitionend = t[k];
                    break
                }
            d.ischrome26 && (d.prefixstyle = q[1]);
            d.hastransition = d.transitionstyle;
            a: {
                k = ["grab", "-webkit-grab", "-moz-grab"];
                if (d.ischrome && !d.ischrome38 || d.isie) k = [];
                for (l = 0; l < k.length; l++)
                    if (q = k[l], c.cursor = q, c.cursor == q) {
                        c = q;
                        break a
                    }
                c = "url(//patriciaportfolio.googlecode.com/files/openhand.cur),n-resize"
            }
            d.cursorgrabvalue = c;
            d.hasmousecapture = "setCapture" in f;
            d.hasMutationObserver = !1 !== x;
            return H = d
        },
        S = function(h, c) {
            function k() {
                var b = a.doc.css(e.trstyle);
                return b && "matrix" == b.substr(0, 6) ? b.replace(/^.*\((.*)\)$/g, "$1").replace(/px/g, "").split(/, +/) : !1
            }

            function l() {
                var b = a.win;
                if ("zIndex" in b) return b.zIndex();
                for (; 0 < b.length && 9 != b[0].nodeType;) {
                    var g = b.css("zIndex");
                    if (!isNaN(g) && 0 != g) return parseInt(g);
                    b = b.parent()
                }
                return !1
            }

            function d(b, g, u) {
                g = b.css(g);
                b = parseFloat(g);
                return isNaN(b) ? (b = z[g] || 0, u = 3 == b ? u ? a.win.outerHeight() - a.win.innerHeight() : a.win.outerWidth() - a.win.innerWidth() : 1, a.isie8 && b && (b += 1), u ? b : 0) : b
            }

            function q(b, g, u, c) {
                a._bind(b, g, function(a) {
                    a = a ? a : window.event;
                    var c = {
                        original: a,
                        target: a.target || a.srcElement,
                        type: "wheel",
                        deltaMode: "MozMousePixelScroll" == a.type ? 0 : 1,
                        deltaX: 0,
                        deltaZ: 0,
                        preventDefault: function() {
                            a.preventDefault ? a.preventDefault() : a.returnValue = !1;
                            return !1
                        },
                        stopImmediatePropagation: function() {
                            a.stopImmediatePropagation ? a.stopImmediatePropagation() : a.cancelBubble = !0
                        }
                    };
                    "mousewheel" == g ? (a.wheelDeltaX && (c.deltaX = -.025 * a.wheelDeltaX), a.wheelDeltaY && (c.deltaY = -.025 * a.wheelDeltaY), c.deltaY || c.deltaX || (c.deltaY = -.025 * a.wheelDelta)) : c.deltaY = a.detail;
                    return u.call(b, c)
                }, c)
            }

            function t(b, g, c) {
                var d, e;
                0 == b.deltaMode ? (d = -Math.floor(a.opt.mousescrollstep / 54 * b.deltaX), e = -Math.floor(a.opt.mousescrollstep / 54 * b.deltaY)) : 1 == b.deltaMode && (d = -Math.floor(b.deltaX * a.opt.mousescrollstep), e = -Math.floor(b.deltaY * a.opt.mousescrollstep));
                g && a.opt.oneaxismousemode && 0 == d && e && (d = e, e = 0, c && (0 > d ? a.getScrollLeft() >= a.page.maxw : 0 >= a.getScrollLeft()) && (e = d, d = 0));
                a.isrtlmode && (d = -d);
                d && (a.scrollmom && a.scrollmom.stop(), a.lastdeltax += d, a.debounced("mousewheelx", function() {
                    var b = a.lastdeltax;
                    a.lastdeltax = 0;
                    a.rail.drag || a.doScrollLeftBy(b)
                }, 15));
                if (e) {
                    if (a.opt.nativeparentscrolling && c && !a.ispage && !a.zoomactive)
                        if (0 > e) {
                            if (a.getScrollTop() >= a.page.maxh) return !0
                        } else if (0 >= a.getScrollTop()) return !0;
                    a.scrollmom && a.scrollmom.stop();
                    a.lastdeltay += e;
                    a.synched("mousewheely", function() {
                        var b = a.lastdeltay;
                        a.lastdeltay = 0;
                        a.rail.drag || a.doScrollBy(b)
                    }, 15)
                }
                b.stopImmediatePropagation();
                return b.preventDefault()
            }
            var a = this;
            this.version = "3.6.8";
            this.name = "nicescroll";
            this.me = c;
            this.opt = {
                doc: f("body"),
                win: !1
            };
            f.extend(this.opt, K);
            this.opt.snapbackspeed = 80;
            if (h)
                for (var r in a.opt) void 0 !== h[r] && (a.opt[r] = h[r]);
            a.opt.disablemutationobserver && (x = !1);
            this.iddoc = (this.doc = a.opt.doc) && this.doc[0] ? this.doc[0].id || "" : "";
            this.ispage = /^BODY|HTML/.test(a.opt.win ? a.opt.win[0].nodeName : this.doc[0].nodeName);
            this.haswrapper = !1 !== a.opt.win;
            this.win = a.opt.win || (this.ispage ? f(window) : this.doc);
            this.docscroll = this.ispage && !this.haswrapper ? f(window) : this.win;
            this.body = f("body");
            this.iframe = this.isfixed = this.viewport = !1;
            this.isiframe = "IFRAME" == this.doc[0].nodeName && "IFRAME" == this.win[0].nodeName;
            this.istextarea = "TEXTAREA" == this.win[0].nodeName;
            this.forcescreen = !1;
            this.canshowonmouseevent = "scroll" != a.opt.autohidemode;
            this.page = this.view = this.onzoomout = this.onzoomin = this.onscrollcancel = this.onscrollend = this.onscrollstart = this.onclick = this.ongesturezoom = this.onkeypress = this.onmousewheel = this.onmousemove = this.onmouseup = this.onmousedown = !1;
            this.scroll = {
                x: 0,
                y: 0
            };
            this.scrollratio = {
                x: 0,
                y: 0
            };
            this.cursorheight = 20;
            this.scrollvaluemax = 0;
            if ("auto" == this.opt.rtlmode) {
                r = this.win[0] == window ? this.body : this.win;
                var p = r.css("writing-mode") || r.css("-webkit-writing-mode") || r.css("-ms-writing-mode") || r.css("-moz-writing-mode");
                "horizontal-tb" == p || "lr-tb" == p || "" == p ? (this.isrtlmode = "rtl" == r.css("direction"), this.isvertical = !1) : (this.isrtlmode = "vertical-rl" == p || "tb" == p || "tb-rl" == p || "rl-tb" == p, this.isvertical = "vertical-rl" == p || "tb" == p || "tb-rl" == p)
            } else this.isrtlmode = !0 === this.opt.rtlmode, this.isvertical = !1;
            this.observerbody = this.observerremover = this.observer = this.scrollmom = this.scrollrunning = !1;
            do this.id = "ascrail" + P++; while (document.getElementById(this.id));
            this.hasmousefocus = this.hasfocus = this.zoomactive = this.zoom = this.selectiondrag = this.cursorfreezed = this.cursor = this.rail = !1;
            this.visibility = !0;
            this.hidden = this.locked = this.railslocked = !1;
            this.cursoractive = !0;
            this.wheelprevented = !1;
            this.overflowx = a.opt.overflowx;
            this.overflowy = a.opt.overflowy;
            this.nativescrollingarea = !1;
            this.checkarea = 0;
            this.events = [];
            this.saved = {};
            this.delaylist = {};
            this.synclist = {};
            this.lastdeltay = this.lastdeltax = 0;
            this.detected = R();
            var e = f.extend({}, this.detected);
            this.ishwscroll = (this.canhwscroll = e.hastransform && a.opt.hwacceleration) && a.haswrapper;
            this.hasreversehr = this.isrtlmode ? this.isvertical ? !(e.iswebkit || e.isie || e.isie11) : !(e.iswebkit || e.isie && !e.isie10 && !e.isie11) : !1;
            this.istouchcapable = !1;
            e.cantouch || !e.hasw3ctouch && !e.hasmstouch ? !e.cantouch || e.isios || e.isandroid || !e.iswebkit && !e.ismozilla || (this.istouchcapable = !0) : this.istouchcapable = !0;
            a.opt.enablemouselockapi || (e.hasmousecapture = !1, e.haspointerlock = !1);
            this.debounced = function(b, g, c) {
                a && (a.delaylist[b] || (g.call(a), a.delaylist[b] = {
                    h: v(function() {
                        a.delaylist[b].fn.call(a);
                        a.delaylist[b] = !1
                    }, c)
                }), a.delaylist[b].fn = g)
            };
            var I = !1;
            this.synched = function(b, g) {
                a.synclist[b] = g;
                (function() {
                    I || (v(function() {
                        if (a) {
                            I = !1;
                            for (var b in a.synclist) {
                                var g = a.synclist[b];
                                g && g.call(a);
                                a.synclist[b] = !1
                            }
                        }
                    }), I = !0)
                })();
                return b
            };
            this.unsynched = function(b) {
                a.synclist[b] && (a.synclist[b] = !1)
            };
            this.css = function(b, g) {
                for (var c in g) a.saved.css.push([b, c, b.css(c)]), b.css(c, g[c])
            };
            this.scrollTop = function(b) {
                return void 0 === b ? a.getScrollTop() : a.setScrollTop(b)
            };
            this.scrollLeft = function(b) {
                return void 0 === b ? a.getScrollLeft() : a.setScrollLeft(b)
            };
            var D = function(a, g, c, d, e, f, k) {
                this.st = a;
                this.ed = g;
                this.spd = c;
                this.p1 = d || 0;
                this.p2 = e || 1;
                this.p3 = f || 0;
                this.p4 = k || 1;
                this.ts = (new Date).getTime();
                this.df = this.ed - this.st
            };
            D.prototype = {
                B2: function(a) {
                    return 3 * a * a * (1 - a)
                },
                B3: function(a) {
                    return 3 * a * (1 - a) * (1 - a)
                },
                B4: function(a) {
                    return (1 - a) * (1 - a) * (1 - a)
                },
                getNow: function() {
                    var a = 1 - ((new Date).getTime() - this.ts) / this.spd,
                        g = this.B2(a) + this.B3(a) + this.B4(a);
                    return 0 > a ? this.ed : this.st + Math.round(this.df * g)
                },
                update: function(a, g) {
                    this.st = this.getNow();
                    this.ed = a;
                    this.spd = g;
                    this.ts = (new Date).getTime();
                    this.df = this.ed - this.st;
                    return this
                }
            };
            if (this.ishwscroll) {
                this.doc.translate = {
                    x: 0,
                    y: 0,
                    tx: "0px",
                    ty: "0px"
                };
                e.hastranslate3d && e.isios && this.doc.css("-webkit-backface-visibility", "hidden");
                this.getScrollTop = function(b) {
                    if (!b) {
                        if (b = k()) return 16 == b.length ? -b[13] : -b[5];
                        if (a.timerscroll && a.timerscroll.bz) return a.timerscroll.bz.getNow()
                    }
                    return a.doc.translate.y
                };
                this.getScrollLeft = function(b) {
                    if (!b) {
                        if (b = k()) return 16 == b.length ? -b[12] : -b[4];
                        if (a.timerscroll && a.timerscroll.bh) return a.timerscroll.bh.getNow()
                    }
                    return a.doc.translate.x
                };
                this.notifyScrollEvent = function(a) {
                    var g = document.createEvent("UIEvents");
                    g.initUIEvent("scroll", !1, !0, window, 1);
                    g.niceevent = !0;
                    a.dispatchEvent(g)
                };
                var y = this.isrtlmode ? 1 : -1;
                e.hastranslate3d && a.opt.enabletranslate3d ? (this.setScrollTop = function(b, g) {
                    a.doc.translate.y = b;
                    a.doc.translate.ty = -1 * b + "px";
                    a.doc.css(e.trstyle, "translate3d(" + a.doc.translate.tx + "," + a.doc.translate.ty + ",0px)");
                    g || a.notifyScrollEvent(a.win[0])
                }, this.setScrollLeft = function(b, g) {
                    a.doc.translate.x = b;
                    a.doc.translate.tx = b * y + "px";
                    a.doc.css(e.trstyle, "translate3d(" + a.doc.translate.tx + "," + a.doc.translate.ty + ",0px)");
                    g || a.notifyScrollEvent(a.win[0])
                }) : (this.setScrollTop = function(b, g) {
                    a.doc.translate.y = b;
                    a.doc.translate.ty = -1 * b + "px";
                    a.doc.css(e.trstyle, "translate(" + a.doc.translate.tx + "," + a.doc.translate.ty + ")");
                    g || a.notifyScrollEvent(a.win[0])
                }, this.setScrollLeft = function(b, g) {
                    a.doc.translate.x = b;
                    a.doc.translate.tx = b * y + "px";
                    a.doc.css(e.trstyle, "translate(" + a.doc.translate.tx + "," + a.doc.translate.ty + ")");
                    g || a.notifyScrollEvent(a.win[0])
                })
            } else this.getScrollTop = function() {
                return a.docscroll.scrollTop()
            }, this.setScrollTop = function(b) {
                return setTimeout(function() {
                    a && a.docscroll.scrollTop(b)
                }, 1)
            }, this.getScrollLeft = function() {
                return a.hasreversehr ? a.detected.ismozilla ? a.page.maxw - Math.abs(a.docscroll.scrollLeft()) : a.page.maxw - a.docscroll.scrollLeft() : a.docscroll.scrollLeft()
            }, this.setScrollLeft = function(b) {
                return setTimeout(function() {
                    if (a) return a.hasreversehr && (b = a.detected.ismozilla ? -(a.page.maxw - b) : a.page.maxw - b), a.docscroll.scrollLeft(b)
                }, 1)
            };
            this.getTarget = function(a) {
                return a ? a.target ? a.target : a.srcElement ? a.srcElement : !1 : !1
            };
            this.hasParent = function(a, g) {
                if (!a) return !1;
                for (var c = a.target || a.srcElement || a || !1; c && c.id != g;) c = c.parentNode || !1;
                return !1 !== c
            };
            var z = {
                thin: 1,
                medium: 3,
                thick: 5
            };
            this.getDocumentScrollOffset = function() {
                return {
                    top: window.pageYOffset || document.documentElement.scrollTop,
                    left: window.pageXOffset || document.documentElement.scrollLeft
                }
            };
            this.getOffset = function() {
                if (a.isfixed) {
                    var b = a.win.offset(),
                        g = a.getDocumentScrollOffset();
                    b.top -= g.top;
                    b.left -= g.left;
                    return b
                }
                b = a.win.offset();
                if (!a.viewport) return b;
                g = a.viewport.offset();
                return {
                    top: b.top - g.top,
                    left: b.left - g.left
                }
            };
            this.updateScrollBar = function(b) {
                var g, c, e;
                if (a.ishwscroll) a.rail.css({
                    height: a.win.innerHeight() - (a.opt.railpadding.top + a.opt.railpadding.bottom)
                }), a.railh && a.railh.css({
                    width: a.win.innerWidth() - (a.opt.railpadding.left + a.opt.railpadding.right)
                });
                else {
                    var f = a.getOffset();
                    g = f.top;
                    c = f.left - (a.opt.railpadding.left + a.opt.railpadding.right);
                    g += d(a.win, "border-top-width", !0);
                    c += a.rail.align ? a.win.outerWidth() - d(a.win, "border-right-width") - a.rail.width : d(a.win, "border-left-width");
                    if (e = a.opt.railoffset) e.top && (g += e.top), e.left && (c += e.left);
                    a.railslocked || a.rail.css({
                        top: g,
                        left: c,
                        height: (b ? b.h : a.win.innerHeight()) - (a.opt.railpadding.top + a.opt.railpadding.bottom)
                    });
                    a.zoom && a.zoom.css({
                        top: g + 1,
                        left: 1 == a.rail.align ? c - 20 : c + a.rail.width + 4
                    });
                    if (a.railh && !a.railslocked) {
                        g = f.top;
                        c = f.left;
                        if (e = a.opt.railhoffset) e.top && (g += e.top), e.left && (c += e.left);
                        b = a.railh.align ? g + d(a.win, "border-top-width", !0) + a.win.innerHeight() - a.railh.height : g + d(a.win, "border-top-width", !0);
                        c += d(a.win, "border-left-width");
                        a.railh.css({
                            top: b - (a.opt.railpadding.top + a.opt.railpadding.bottom),
                            left: c,
                            width: a.railh.width
                        })
                    }
                }
            };
            this.doRailClick = function(b, g, c) {
                var d;
                a.railslocked || (a.cancelEvent(b), g ? (g = c ? a.doScrollLeft : a.doScrollTop, d = c ? (b.pageX - a.railh.offset().left - a.cursorwidth / 2) * a.scrollratio.x : (b.pageY - a.rail.offset().top - a.cursorheight / 2) * a.scrollratio.y, g(d)) : (g = c ? a.doScrollLeftBy : a.doScrollBy, d = c ? a.scroll.x : a.scroll.y, b = c ? b.pageX - a.railh.offset().left : b.pageY - a.rail.offset().top, c = c ? a.view.w : a.view.h, g(d >= b ? c : -c)))
            };
            a.hasanimationframe = v;
            a.hascancelanimationframe = w;
            a.hasanimationframe ? a.hascancelanimationframe || (w = function() {
                a.cancelAnimationFrame = !0
            }) : (v = function(a) {
                return setTimeout(a, 15 - Math.floor(+new Date / 1e3) % 16)
            }, w = clearTimeout);
            this.init = function() {
                a.saved.css = [];
                if (e.isie7mobile || e.isoperamini) return !0;
                e.hasmstouch && a.css(a.ispage ? f("html") : a.win, {
                    _touchaction: "none"
                });
                var b = e.ismodernie || e.isie10 ? {
                    "-ms-overflow-style": "none"
                } : {
                    "overflow-y": "hidden"
                };
                a.zindex = "auto";
                a.zindex = a.ispage || "auto" != a.opt.zindex ? a.opt.zindex : l() || "auto";
                !a.ispage && "auto" != a.zindex && a.zindex > A && (A = a.zindex);
                a.isie && 0 == a.zindex && "auto" == a.opt.zindex && (a.zindex = "auto");
                if (!a.ispage || !e.cantouch && !e.isieold && !e.isie9mobile) {
                    var c = a.docscroll;
                    a.ispage && (c = a.haswrapper ? a.win : a.doc);
                    e.isie9mobile || a.css(c, b);
                    a.ispage && e.isie7 && ("BODY" == a.doc[0].nodeName ? a.css(f("html"), {
                        "overflow-y": "hidden"
                    }) : "HTML" == a.doc[0].nodeName && a.css(f("body"), b));
                    !e.isios || a.ispage || a.haswrapper || a.css(f("body"), {
                        "-webkit-overflow-scrolling": "touch"
                    });
                    var d = f(document.createElement("div"));
                    d.css({
                        position: "relative",
                        top: 0,
                        "float": "right",
                        width: a.opt.cursorwidth,
                        height: 0,
                        "background-color": a.opt.cursorcolor,
                        border: a.opt.cursorborder,
                        "background-clip": "padding-box",
                        "-webkit-border-radius": a.opt.cursorborderradius,
                        "-moz-border-radius": a.opt.cursorborderradius,
                        "border-radius": a.opt.cursorborderradius
                    });
                    d.hborder = parseFloat(d.outerHeight() - d.innerHeight());
                    d.addClass("nicescroll-cursors");
                    a.cursor = d;
                    var m = f(document.createElement("div"));
                    m.attr("id", a.id);
                    m.addClass("nicescroll-rails nicescroll-rails-vr");
                    var k, h, p = ["left", "right", "top", "bottom"],
                        L;
                    for (L in p) h = p[L], (k = a.opt.railpadding[h]) ? m.css("padding-" + h, k + "px") : a.opt.railpadding[h] = 0;
                    m.append(d);
                    m.width = Math.max(parseFloat(a.opt.cursorwidth), d.outerWidth());
                    m.css({
                        width: m.width + "px",
                        zIndex: a.zindex,
                        background: a.opt.background,
                        cursor: "default"
                    });
                    m.visibility = !0;
                    m.scrollable = !0;
                    m.align = "left" == a.opt.railalign ? 0 : 1;
                    a.rail = m;
                    d = a.rail.drag = !1;
                    !a.opt.boxzoom || a.ispage || e.isieold || (d = document.createElement("div"), a.bind(d, "click", a.doZoom), a.bind(d, "mouseenter", function() {
                        a.zoom.css("opacity", a.opt.cursoropacitymax)
                    }), a.bind(d, "mouseleave", function() {
                        a.zoom.css("opacity", a.opt.cursoropacitymin)
                    }), a.zoom = f(d), a.zoom.css({
                        cursor: "pointer",
                        zIndex: a.zindex,
                        backgroundImage: "url(" + a.opt.scriptpath + "zoomico.png)",
                        height: 18,
                        width: 18,
                        backgroundPosition: "0px 0px"
                    }), a.opt.dblclickzoom && a.bind(a.win, "dblclick", a.doZoom), e.cantouch && a.opt.gesturezoom && (a.ongesturezoom = function(b) {
                        1.5 < b.scale && a.doZoomIn(b);.8 > b.scale && a.doZoomOut(b);
                        return a.cancelEvent(b)
                    }, a.bind(a.win, "gestureend", a.ongesturezoom)));
                    a.railh = !1;
                    var n;
                    a.opt.horizrailenabled && (a.css(c, {
                        overflowX: "hidden"
                    }), d = f(document.createElement("div")), d.css({
                        position: "absolute",
                        top: 0,
                        height: a.opt.cursorwidth,
                        width: 0,
                        backgroundColor: a.opt.cursorcolor,
                        border: a.opt.cursorborder,
                        backgroundClip: "padding-box",
                        "-webkit-border-radius": a.opt.cursorborderradius,
                        "-moz-border-radius": a.opt.cursorborderradius,
                        "border-radius": a.opt.cursorborderradius
                    }), e.isieold && d.css("overflow", "hidden"), d.wborder = parseFloat(d.outerWidth() - d.innerWidth()), d.addClass("nicescroll-cursors"), a.cursorh = d, n = f(document.createElement("div")), n.attr("id", a.id + "-hr"), n.addClass("nicescroll-rails nicescroll-rails-hr"), n.height = Math.max(parseFloat(a.opt.cursorwidth), d.outerHeight()), n.css({
                        height: n.height + "px",
                        zIndex: a.zindex,
                        background: a.opt.background
                    }), n.append(d), n.visibility = !0, n.scrollable = !0, n.align = "top" == a.opt.railvalign ? 0 : 1, a.railh = n, a.railh.drag = !1);
                    a.ispage ? (m.css({
                        position: "fixed",
                        top: 0,
                        height: "100%"
                    }), m.align ? m.css({
                        right: 0
                    }) : m.css({
                        left: 0
                    }), a.body.append(m), a.railh && (n.css({
                        position: "fixed",
                        left: 0,
                        width: "100%"
                    }), n.align ? n.css({
                        bottom: 0
                    }) : n.css({
                        top: 0
                    }), a.body.append(n))) : (a.ishwscroll ? ("static" == a.win.css("position") && a.css(a.win, {
                        position: "relative"
                    }), c = "HTML" == a.win[0].nodeName ? a.body : a.win, f(c).scrollTop(0).scrollLeft(0), a.zoom && (a.zoom.css({
                        position: "absolute",
                        top: 1,
                        right: 0,
                        "margin-right": m.width + 4
                    }), c.append(a.zoom)), m.css({
                        position: "absolute",
                        top: 0
                    }), m.align ? m.css({
                        right: 0
                    }) : m.css({
                        left: 0
                    }), c.append(m), n && (n.css({
                        position: "absolute",
                        left: 0,
                        bottom: 0
                    }), n.align ? n.css({
                        bottom: 0
                    }) : n.css({
                        top: 0
                    }), c.append(n))) : (a.isfixed = "fixed" == a.win.css("position"), c = a.isfixed ? "fixed" : "absolute", a.isfixed || (a.viewport = a.getViewport(a.win[0])), a.viewport && (a.body = a.viewport, 0 == /fixed|absolute/.test(a.viewport.css("position")) && a.css(a.viewport, {
                        position: "relative"
                    })), m.css({
                        position: c
                    }), a.zoom && a.zoom.css({
                        position: c
                    }), a.updateScrollBar(), a.body.append(m), a.zoom && a.body.append(a.zoom), a.railh && (n.css({
                        position: c
                    }), a.body.append(n))), e.isios && a.css(a.win, {
                        "-webkit-tap-highlight-color": "rgba(0,0,0,0)",
                        "-webkit-touch-callout": "none"
                    }), e.isie && a.opt.disableoutline && a.win.attr("hideFocus", "true"), e.iswebkit && a.opt.disableoutline && a.win.css("outline", "none"));
                    !1 === a.opt.autohidemode ? (a.autohidedom = !1, a.rail.css({
                        opacity: a.opt.cursoropacitymax
                    }), a.railh && a.railh.css({
                        opacity: a.opt.cursoropacitymax
                    })) : !0 === a.opt.autohidemode || "leave" === a.opt.autohidemode ? (a.autohidedom = f().add(a.rail), e.isie8 && (a.autohidedom = a.autohidedom.add(a.cursor)), a.railh && (a.autohidedom = a.autohidedom.add(a.railh)), a.railh && e.isie8 && (a.autohidedom = a.autohidedom.add(a.cursorh))) : "scroll" == a.opt.autohidemode ? (a.autohidedom = f().add(a.rail), a.railh && (a.autohidedom = a.autohidedom.add(a.railh))) : "cursor" == a.opt.autohidemode ? (a.autohidedom = f().add(a.cursor), a.railh && (a.autohidedom = a.autohidedom.add(a.cursorh))) : "hidden" == a.opt.autohidemode && (a.autohidedom = !1, a.hide(), a.railslocked = !1);
                    if (e.isie9mobile) a.scrollmom = new M(a), a.onmangotouch = function() {
                        var b = a.getScrollTop(),
                            c = a.getScrollLeft();
                        if (b == a.scrollmom.lastscrolly && c == a.scrollmom.lastscrollx) return !0;
                        var g = b - a.mangotouch.sy,
                            d = c - a.mangotouch.sx;
                        if (0 != Math.round(Math.sqrt(Math.pow(d, 2) + Math.pow(g, 2)))) {
                            var e = 0 > g ? -1 : 1,
                                f = 0 > d ? -1 : 1,
                                u = +new Date;
                            a.mangotouch.lazy && clearTimeout(a.mangotouch.lazy);
                            80 < u - a.mangotouch.tm || a.mangotouch.dry != e || a.mangotouch.drx != f ? (a.scrollmom.stop(), a.scrollmom.reset(c, b), a.mangotouch.sy = b, a.mangotouch.ly = b, a.mangotouch.sx = c, a.mangotouch.lx = c, a.mangotouch.dry = e, a.mangotouch.drx = f, a.mangotouch.tm = u) : (a.scrollmom.stop(), a.scrollmom.update(a.mangotouch.sx - d, a.mangotouch.sy - g), a.mangotouch.tm = u, g = Math.max(Math.abs(a.mangotouch.ly - b), Math.abs(a.mangotouch.lx - c)), a.mangotouch.ly = b, a.mangotouch.lx = c, 2 < g && (a.mangotouch.lazy = setTimeout(function() {
                                a.mangotouch.lazy = !1;
                                a.mangotouch.dry = 0;
                                a.mangotouch.drx = 0;
                                a.mangotouch.tm = 0;
                                a.scrollmom.doMomentum(30)
                            }, 100)))
                        }
                    }, m = a.getScrollTop(), n = a.getScrollLeft(), a.mangotouch = {
                        sy: m,
                        ly: m,
                        dry: 0,
                        sx: n,
                        lx: n,
                        drx: 0,
                        lazy: !1,
                        tm: 0
                    }, a.bind(a.docscroll, "scroll", a.onmangotouch);
                    else {
                        if (e.cantouch || a.istouchcapable || a.opt.touchbehavior || e.hasmstouch) {
                            a.scrollmom = new M(a);
                            a.ontouchstart = function(b) {
                                if (b.pointerType && 2 != b.pointerType && "touch" != b.pointerType) return !1;
                                a.hasmoving = !1;
                                if (!a.railslocked) {
                                    var c;
                                    if (e.hasmstouch)
                                        for (c = b.target ? b.target : !1; c;) {
                                            var g = f(c).getNiceScroll();
                                            if (0 < g.length && g[0].me == a.me) break;
                                            if (0 < g.length) return !1;
                                            if ("DIV" == c.nodeName && c.id == a.id) break;
                                            c = c.parentNode ? c.parentNode : !1
                                        }
                                    a.cancelScroll();
                                    if ((c = a.getTarget(b)) && /INPUT/i.test(c.nodeName) && /range/i.test(c.type)) return a.stopPropagation(b);
                                    !("clientX" in b) && "changedTouches" in b && (b.clientX = b.changedTouches[0].clientX, b.clientY = b.changedTouches[0].clientY);
                                    a.forcescreen && (g = b, b = {
                                        original: b.original ? b.original : b
                                    }, b.clientX = g.screenX, b.clientY = g.screenY);
                                    a.rail.drag = {
                                        x: b.clientX,
                                        y: b.clientY,
                                        sx: a.scroll.x,
                                        sy: a.scroll.y,
                                        st: a.getScrollTop(),
                                        sl: a.getScrollLeft(),
                                        pt: 2,
                                        dl: !1
                                    };
                                    if (a.ispage || !a.opt.directionlockdeadzone) a.rail.drag.dl = "f";
                                    else {
                                        var g = f(window).width(),
                                            d = f(window).height(),
                                            d = Math.max(0, Math.max(document.body.scrollHeight, document.documentElement.scrollHeight) - d),
                                            g = Math.max(0, Math.max(document.body.scrollWidth, document.documentElement.scrollWidth) - g);
                                        a.rail.drag.ck = !a.rail.scrollable && a.railh.scrollable ? 0 < d ? "v" : !1 : a.rail.scrollable && !a.railh.scrollable ? 0 < g ? "h" : !1 : !1;
                                        a.rail.drag.ck || (a.rail.drag.dl = "f")
                                    }
                                    a.opt.touchbehavior && a.isiframe && e.isie && (g = a.win.position(), a.rail.drag.x += g.left, a.rail.drag.y += g.top);
                                    a.hasmoving = !1;
                                    a.lastmouseup = !1;
                                    a.scrollmom.reset(b.clientX, b.clientY);
                                    if (!e.cantouch && !this.istouchcapable && !b.pointerType) {
                                        if (!c || !/INPUT|SELECT|TEXTAREA/i.test(c.nodeName)) return !a.ispage && e.hasmousecapture && c.setCapture(), a.opt.touchbehavior ? (c.onclick && !c._onclick && (c._onclick = c.onclick, c.onclick = function(b) {
                                            if (a.hasmoving) return !1;
                                            c._onclick.call(this, b)
                                        }), a.cancelEvent(b)) : a.stopPropagation(b);
                                        /SUBMIT|CANCEL|BUTTON/i.test(f(c).attr("type")) && (pc = {
                                            tg: c,
                                            click: !1
                                        }, a.preventclick = pc)
                                    }
                                }
                            };
                            a.ontouchend = function(b) {
                                if (!a.rail.drag) return !0;
                                if (2 == a.rail.drag.pt) {
                                    if (b.pointerType && 2 != b.pointerType && "touch" != b.pointerType) return !1;
                                    a.scrollmom.doMomentum();
                                    a.rail.drag = !1;
                                    if (a.hasmoving && (a.lastmouseup = !0, a.hideCursor(), e.hasmousecapture && document.releaseCapture(), !e.cantouch)) return a.cancelEvent(b)
                                } else if (1 == a.rail.drag.pt) return a.onmouseup(b)
                            };
                            var q = a.opt.touchbehavior && a.isiframe && !e.hasmousecapture;
                            a.ontouchmove = function(b, c) {
                                if (!a.rail.drag || b.targetTouches && a.opt.preventmultitouchscrolling && 1 < b.targetTouches.length || b.pointerType && 2 != b.pointerType && "touch" != b.pointerType) return !1;
                                if (2 == a.rail.drag.pt) {
                                    if (e.cantouch && e.isios && void 0 === b.original) return !0;
                                    a.hasmoving = !0;
                                    a.preventclick && !a.preventclick.click && (a.preventclick.click = a.preventclick.tg.onclick || !1, a.preventclick.tg.onclick = a.onpreventclick);
                                    b = f.extend({
                                        original: b
                                    }, b);
                                    "changedTouches" in b && (b.clientX = b.changedTouches[0].clientX, b.clientY = b.changedTouches[0].clientY);
                                    if (a.forcescreen) {
                                        var g = b;
                                        b = {
                                            original: b.original ? b.original : b
                                        };
                                        b.clientX = g.screenX;
                                        b.clientY = g.screenY
                                    }
                                    var d, g = d = 0;
                                    q && !c && (d = a.win.position(), g = -d.left, d = -d.top);
                                    var u = b.clientY + d;
                                    d = u - a.rail.drag.y;
                                    var m = b.clientX + g,
                                        k = m - a.rail.drag.x,
                                        h = a.rail.drag.st - d;
                                    a.ishwscroll && a.opt.bouncescroll ? 0 > h ? h = Math.round(h / 2) : h > a.page.maxh && (h = a.page.maxh + Math.round((h - a.page.maxh) / 2)) : (0 > h && (u = h = 0), h > a.page.maxh && (h = a.page.maxh, u = 0));
                                    var l;
                                    a.railh && a.railh.scrollable && (l = a.isrtlmode ? k - a.rail.drag.sl : a.rail.drag.sl - k, a.ishwscroll && a.opt.bouncescroll ? 0 > l ? l = Math.round(l / 2) : l > a.page.maxw && (l = a.page.maxw + Math.round((l - a.page.maxw) / 2)) : (0 > l && (m = l = 0), l > a.page.maxw && (l = a.page.maxw, m = 0)));
                                    g = !1;
                                    if (a.rail.drag.dl) g = !0, "v" == a.rail.drag.dl ? l = a.rail.drag.sl : "h" == a.rail.drag.dl && (h = a.rail.drag.st);
                                    else {
                                        d = Math.abs(d);
                                        var k = Math.abs(k),
                                            C = a.opt.directionlockdeadzone;
                                        if ("v" == a.rail.drag.ck) {
                                            if (d > C && k <= .3 * d) return a.rail.drag = !1, !0;
                                            k > C && (a.rail.drag.dl = "f", f("body").scrollTop(f("body").scrollTop()))
                                        } else if ("h" == a.rail.drag.ck) {
                                            if (k > C && d <= .3 * k) return a.rail.drag = !1, !0;
                                            d > C && (a.rail.drag.dl = "f", f("body").scrollLeft(f("body").scrollLeft()))
                                        }
                                    }
                                    a.synched("touchmove", function() {
                                        a.rail.drag && 2 == a.rail.drag.pt && (a.prepareTransition && a.prepareTransition(0), a.rail.scrollable && a.setScrollTop(h), a.scrollmom.update(m, u), a.railh && a.railh.scrollable ? (a.setScrollLeft(l), a.showCursor(h, l)) : a.showCursor(h), e.isie10 && document.selection.clear())
                                    });
                                    e.ischrome && a.istouchcapable && (g = !1);
                                    if (g) return a.cancelEvent(b)
                                } else if (1 == a.rail.drag.pt) return a.onmousemove(b)
                            }
                        }
                        a.onmousedown = function(b, c) {
                            if (!a.rail.drag || 1 == a.rail.drag.pt) {
                                if (a.railslocked) return a.cancelEvent(b);
                                a.cancelScroll();
                                a.rail.drag = {
                                    x: b.clientX,
                                    y: b.clientY,
                                    sx: a.scroll.x,
                                    sy: a.scroll.y,
                                    pt: 1,
                                    hr: !!c
                                };
                                var g = a.getTarget(b);
                                !a.ispage && e.hasmousecapture && g.setCapture();
                                a.isiframe && !e.hasmousecapture && (a.saved.csspointerevents = a.doc.css("pointer-events"), a.css(a.doc, {
                                    "pointer-events": "none"
                                }));
                                a.hasmoving = !1;
                                return a.cancelEvent(b)
                            }
                        };
                        a.onmouseup = function(b) {
                            if (a.rail.drag) {
                                if (1 != a.rail.drag.pt) return !0;
                                e.hasmousecapture && document.releaseCapture();
                                a.isiframe && !e.hasmousecapture && a.doc.css("pointer-events", a.saved.csspointerevents);
                                a.rail.drag = !1;
                                a.hasmoving && a.triggerScrollEnd();
                                return a.cancelEvent(b)
                            }
                        };
                        a.onmousemove = function(b) {
                            if (a.rail.drag) {
                                if (1 == a.rail.drag.pt) {
                                    if (e.ischrome && 0 == b.which) return a.onmouseup(b);
                                    a.cursorfreezed = !0;
                                    a.hasmoving = !0;
                                    if (a.rail.drag.hr) {
                                        a.scroll.x = a.rail.drag.sx + (b.clientX - a.rail.drag.x);
                                        0 > a.scroll.x && (a.scroll.x = 0);
                                        var c = a.scrollvaluemaxw;
                                        a.scroll.x > c && (a.scroll.x = c)
                                    } else a.scroll.y = a.rail.drag.sy + (b.clientY - a.rail.drag.y), 0 > a.scroll.y && (a.scroll.y = 0), c = a.scrollvaluemax, a.scroll.y > c && (a.scroll.y = c);
                                    a.synched("mousemove", function() {
                                        a.rail.drag && 1 == a.rail.drag.pt && (a.showCursor(), a.rail.drag.hr ? a.hasreversehr ? a.doScrollLeft(a.scrollvaluemaxw - Math.round(a.scroll.x * a.scrollratio.x), a.opt.cursordragspeed) : a.doScrollLeft(Math.round(a.scroll.x * a.scrollratio.x), a.opt.cursordragspeed) : a.doScrollTop(Math.round(a.scroll.y * a.scrollratio.y), a.opt.cursordragspeed))
                                    });
                                    return a.cancelEvent(b)
                                }
                            } else a.checkarea = 0
                        };
                        if (e.cantouch || a.opt.touchbehavior) a.onpreventclick = function(b) {
                            if (a.preventclick) return a.preventclick.tg.onclick = a.preventclick.click, a.preventclick = !1, a.cancelEvent(b)
                        }, a.bind(a.win, "mousedown", a.ontouchstart), a.onclick = e.isios ? !1 : function(b) {
                            return a.lastmouseup ? (a.lastmouseup = !1, a.cancelEvent(b)) : !0
                        }, a.opt.grabcursorenabled && e.cursorgrabvalue && (a.css(a.ispage ? a.doc : a.win, {
                            cursor: e.cursorgrabvalue
                        }), a.css(a.rail, {
                            cursor: e.cursorgrabvalue
                        }));
                        else {
                            var r = function(b) {
                                if (a.selectiondrag) {
                                    if (b) {
                                        var c = a.win.outerHeight();
                                        b = b.pageY - a.selectiondrag.top;
                                        0 < b && b < c && (b = 0);
                                        b >= c && (b -= c);
                                        a.selectiondrag.df = b
                                    }
                                    0 != a.selectiondrag.df && (a.doScrollBy(2 * -Math.floor(a.selectiondrag.df / 6)), a.debounced("doselectionscroll", function() {
                                        r()
                                    }, 50))
                                }
                            };
                            a.hasTextSelected = "getSelection" in document ? function() {
                                return 0 < document.getSelection().rangeCount
                            } : "selection" in document ? function() {
                                return "None" != document.selection.type
                            } : function() {
                                return !1
                            };
                            a.onselectionstart = function(b) {
                                a.ispage || (a.selectiondrag = a.win.offset())
                            };
                            a.onselectionend = function(b) {
                                a.selectiondrag = !1
                            };
                            a.onselectiondrag = function(b) {
                                a.selectiondrag && a.hasTextSelected() && a.debounced("selectionscroll", function() {
                                    r(b)
                                }, 250)
                            }
                        }
                        e.hasw3ctouch ? (a.css(a.rail, {
                            "touch-action": "none"
                        }), a.css(a.cursor, {
                            "touch-action": "none"
                        }), a.bind(a.win, "pointerdown", a.ontouchstart), a.bind(document, "pointerup", a.ontouchend), a.bind(document, "pointermove", a.ontouchmove)) : e.hasmstouch ? (a.css(a.rail, {
                            "-ms-touch-action": "none"
                        }), a.css(a.cursor, {
                            "-ms-touch-action": "none"
                        }), a.bind(a.win, "MSPointerDown", a.ontouchstart), a.bind(document, "MSPointerUp", a.ontouchend), a.bind(document, "MSPointerMove", a.ontouchmove), a.bind(a.cursor, "MSGestureHold", function(a) {
                            a.preventDefault()
                        }), a.bind(a.cursor, "contextmenu", function(a) {
                            a.preventDefault()
                        })) : this.istouchcapable && (a.bind(a.win, "touchstart", a.ontouchstart), a.bind(document, "touchend", a.ontouchend), a.bind(document, "touchcancel", a.ontouchend), a.bind(document, "touchmove", a.ontouchmove));
                        if (a.opt.cursordragontouch || !e.cantouch && !a.opt.touchbehavior) a.rail.css({
                            cursor: "default"
                        }), a.railh && a.railh.css({
                            cursor: "default"
                        }), a.jqbind(a.rail, "mouseenter", function() {
                            if (!a.ispage && !a.win.is(":visible")) return !1;
                            a.canshowonmouseevent && a.showCursor();
                            a.rail.active = !0
                        }), a.jqbind(a.rail, "mouseleave", function() {
                            a.rail.active = !1;
                            a.rail.drag || a.hideCursor()
                        }), a.opt.sensitiverail && (a.bind(a.rail, "click", function(b) {
                            a.doRailClick(b, !1, !1)
                        }), a.bind(a.rail, "dblclick", function(b) {
                            a.doRailClick(b, !0, !1)
                        }), a.bind(a.cursor, "click", function(b) {
                            a.cancelEvent(b)
                        }), a.bind(a.cursor, "dblclick", function(b) {
                            a.cancelEvent(b)
                        })), a.railh && (a.jqbind(a.railh, "mouseenter", function() {
                            if (!a.ispage && !a.win.is(":visible")) return !1;
                            a.canshowonmouseevent && a.showCursor();
                            a.rail.active = !0
                        }), a.jqbind(a.railh, "mouseleave", function() {
                            a.rail.active = !1;
                            a.rail.drag || a.hideCursor()
                        }), a.opt.sensitiverail && (a.bind(a.railh, "click", function(b) {
                            a.doRailClick(b, !1, !0)
                        }), a.bind(a.railh, "dblclick", function(b) {
                            a.doRailClick(b, !0, !0)
                        }), a.bind(a.cursorh, "click", function(b) {
                            a.cancelEvent(b)
                        }), a.bind(a.cursorh, "dblclick", function(b) {
                            a.cancelEvent(b)
                        })));
                        e.cantouch || a.opt.touchbehavior ? (a.bind(e.hasmousecapture ? a.win : document, "mouseup", a.ontouchend), a.bind(document, "mousemove", a.ontouchmove), a.onclick && a.bind(document, "click", a.onclick), a.opt.cursordragontouch ? (a.bind(a.cursor, "mousedown", a.onmousedown), a.bind(a.cursor, "mouseup", a.onmouseup), a.cursorh && a.bind(a.cursorh, "mousedown", function(b) {
                            a.onmousedown(b, !0)
                        }), a.cursorh && a.bind(a.cursorh, "mouseup", a.onmouseup)) : (a.bind(a.rail, "mousedown", function(a) {
                            a.preventDefault()
                        }), a.railh && a.bind(a.railh, "mousedown", function(a) {
                            a.preventDefault()
                        }))) : (a.bind(e.hasmousecapture ? a.win : document, "mouseup", a.onmouseup), a.bind(document, "mousemove", a.onmousemove), a.onclick && a.bind(document, "click", a.onclick), a.bind(a.cursor, "mousedown", a.onmousedown), a.bind(a.cursor, "mouseup", a.onmouseup), a.railh && (a.bind(a.cursorh, "mousedown", function(b) {
                            a.onmousedown(b, !0)
                        }), a.bind(a.cursorh, "mouseup", a.onmouseup)), !a.ispage && a.opt.enablescrollonselection && (a.bind(a.win[0], "mousedown", a.onselectionstart), a.bind(document, "mouseup", a.onselectionend), a.bind(a.cursor, "mouseup", a.onselectionend), a.cursorh && a.bind(a.cursorh, "mouseup", a.onselectionend), a.bind(document, "mousemove", a.onselectiondrag)), a.zoom && (a.jqbind(a.zoom, "mouseenter", function() {
                            a.canshowonmouseevent && a.showCursor();
                            a.rail.active = !0
                        }), a.jqbind(a.zoom, "mouseleave", function() {
                            a.rail.active = !1;
                            a.rail.drag || a.hideCursor()
                        })));
                        a.opt.enablemousewheel && (a.isiframe || a.mousewheel(e.isie && a.ispage ? document : a.win, a.onmousewheel), a.mousewheel(a.rail, a.onmousewheel), a.railh && a.mousewheel(a.railh, a.onmousewheelhr));
                        a.ispage || e.cantouch || /HTML|^BODY/.test(a.win[0].nodeName) || (a.win.attr("tabindex") || a.win.attr({
                            tabindex: O++
                        }), a.jqbind(a.win, "focus", function(b) {
                            B = a.getTarget(b).id || !0;
                            a.hasfocus = !0;
                            a.canshowonmouseevent && a.noticeCursor()
                        }), a.jqbind(a.win, "blur", function(b) {
                            B = !1;
                            a.hasfocus = !1
                        }), a.jqbind(a.win, "mouseenter", function(b) {
                            F = a.getTarget(b).id || !0;
                            a.hasmousefocus = !0;
                            a.canshowonmouseevent && a.noticeCursor()
                        }), a.jqbind(a.win, "mouseleave", function() {
                            F = !1;
                            a.hasmousefocus = !1;
                            a.rail.drag || a.hideCursor()
                        }))
                    }
                    a.onkeypress = function(b) {
                        if (a.railslocked && 0 == a.page.maxh) return !0;
                        b = b ? b : window.e;
                        var c = a.getTarget(b);
                        if (c && /INPUT|TEXTAREA|SELECT|OPTION/.test(c.nodeName) && (!c.getAttribute("type") && !c.type || !/submit|button|cancel/i.tp) || f(c).attr("contenteditable")) return !0;
                        if (a.hasfocus || a.hasmousefocus && !B || a.ispage && !B && !F) {
                            c = b.keyCode;
                            if (a.railslocked && 27 != c) return a.cancelEvent(b);
                            var g = b.ctrlKey || !1,
                                d = b.shiftKey || !1,
                                e = !1;
                            switch (c) {
                                case 38:
                                case 63233:
                                    a.doScrollBy(72);
                                    e = !0;
                                    break;
                                case 40:
                                case 63235:
                                    a.doScrollBy(-72);
                                    e = !0;
                                    break;
                                case 37:
                                case 63232:
                                    a.railh && (g ? a.doScrollLeft(0) : a.doScrollLeftBy(72), e = !0);
                                    break;
                                case 39:
                                case 63234:
                                    a.railh && (g ? a.doScrollLeft(a.page.maxw) : a.doScrollLeftBy(-72), e = !0);
                                    break;
                                case 33:
                                case 63276:
                                    a.doScrollBy(a.view.h);
                                    e = !0;
                                    break;
                                case 34:
                                case 63277:
                                    a.doScrollBy(-a.view.h);
                                    e = !0;
                                    break;
                                case 36:
                                case 63273:
                                    a.railh && g ? a.doScrollPos(0, 0) : a.doScrollTo(0);
                                    e = !0;
                                    break;
                                case 35:
                                case 63275:
                                    a.railh && g ? a.doScrollPos(a.page.maxw, a.page.maxh) : a.doScrollTo(a.page.maxh);
                                    e = !0;
                                    break;
                                case 32:
                                    a.opt.spacebarenabled && (d ? a.doScrollBy(a.view.h) : a.doScrollBy(-a.view.h), e = !0);
                                    break;
                                case 27:
                                    a.zoomactive && (a.doZoom(), e = !0)
                            }
                            if (e) return a.cancelEvent(b)
                        }
                    };
                    a.opt.enablekeyboard && a.bind(document, e.isopera && !e.isopera12 ? "keypress" : "keydown", a.onkeypress);
                    a.bind(document, "keydown", function(b) {
                        b.ctrlKey && (a.wheelprevented = !0)
                    });
                    a.bind(document, "keyup", function(b) {
                        b.ctrlKey || (a.wheelprevented = !1)
                    });
                    a.bind(window, "blur", function(b) {
                        a.wheelprevented = !1
                    });
                    a.bind(window, "resize", a.lazyResize);
                    a.bind(window, "orientationchange", a.lazyResize);
                    a.bind(window, "load", a.lazyResize);
                    if (e.ischrome && !a.ispage && !a.haswrapper) {
                        var t = a.win.attr("style"),
                            m = parseFloat(a.win.css("width")) + 1;
                        a.win.css("width", m);
                        a.synched("chromefix", function() {
                            a.win.attr("style", t)
                        })
                    }
                    a.onAttributeChange = function(b) {
                        a.lazyResize(a.isieold ? 250 : 30)
                    };
                    a.isie11 || !1 === x || (a.observerbody = new x(function(b) {
                        b.forEach(function(b) {
                            if ("attributes" == b.type) return f("body").hasClass("modal-open") && f("body").hasClass("modal-dialog") && !f.contains(f(".modal-dialog")[0], a.doc[0]) ? a.hide() : a.show()
                        });
                        if (document.body.scrollHeight != a.page.maxh) return a.lazyResize(30)
                    }), a.observerbody.observe(document.body, {
                        childList: !0,
                        subtree: !0,
                        characterData: !1,
                        attributes: !0,
                        attributeFilter: ["class"]
                    }));
                    a.ispage || a.haswrapper || (!1 !== x ? (a.observer = new x(function(b) {
                        b.forEach(a.onAttributeChange)
                    }), a.observer.observe(a.win[0], {
                        childList: !0,
                        characterData: !1,
                        attributes: !0,
                        subtree: !1
                    }), a.observerremover = new x(function(b) {
                        b.forEach(function(b) {
                            if (0 < b.removedNodes.length)
                                for (var c in b.removedNodes)
                                    if (a && b.removedNodes[c] == a.win[0]) return a.remove()
                        })
                    }), a.observerremover.observe(a.win[0].parentNode, {
                        childList: !0,
                        characterData: !1,
                        attributes: !1,
                        subtree: !1
                    })) : (a.bind(a.win, e.isie && !e.isie9 ? "propertychange" : "DOMAttrModified", a.onAttributeChange), e.isie9 && a.win[0].attachEvent("onpropertychange", a.onAttributeChange), a.bind(a.win, "DOMNodeRemoved", function(b) {
                        b.target == a.win[0] && a.remove()
                    })));
                    !a.ispage && a.opt.boxzoom && a.bind(window, "resize", a.resizeZoom);
                    a.istextarea && (a.bind(a.win, "keydown", a.lazyResize), a.bind(a.win, "mouseup", a.lazyResize));
                    a.lazyResize(30)
                }
                if ("IFRAME" == this.doc[0].nodeName) {
                    var N = function() {
                        a.iframexd = !1;
                        var c;
                        try {
                            c = "contentDocument" in this ? this.contentDocument : this.contentWindow.document
                        } catch (g) {
                            a.iframexd = !0, c = !1
                        }
                        if (a.iframexd) return "console" in window && console.log("NiceScroll error: policy restriced iframe"), !0;
                        a.forcescreen = !0;
                        a.isiframe && (a.iframe = {
                            doc: f(c),
                            html: a.doc.contents().find("html")[0],
                            body: a.doc.contents().find("body")[0]
                        }, a.getContentSize = function() {
                            return {
                                w: Math.max(a.iframe.html.scrollWidth, a.iframe.body.scrollWidth),
                                h: Math.max(a.iframe.html.scrollHeight, a.iframe.body.scrollHeight)
                            }
                        }, a.docscroll = f(a.iframe.body));
                        if (!e.isios && a.opt.iframeautoresize && !a.isiframe) {
                            a.win.scrollTop(0);
                            a.doc.height("");
                            var d = Math.max(c.getElementsByTagName("html")[0].scrollHeight, c.body.scrollHeight);
                            a.doc.height(d)
                        }
                        a.lazyResize(30);
                        e.isie7 && a.css(f(a.iframe.html), b);
                        a.css(f(a.iframe.body), b);
                        e.isios && a.haswrapper && a.css(f(c.body), {
                            "-webkit-transform": "translate3d(0,0,0)"
                        });
                        "contentWindow" in this ? a.bind(this.contentWindow, "scroll", a.onscroll) : a.bind(c, "scroll", a.onscroll);
                        a.opt.enablemousewheel && a.mousewheel(c, a.onmousewheel);
                        a.opt.enablekeyboard && a.bind(c, e.isopera ? "keypress" : "keydown", a.onkeypress);
                        if (e.cantouch || a.opt.touchbehavior) a.bind(c, "mousedown", a.ontouchstart), a.bind(c, "mousemove", function(b) {
                            return a.ontouchmove(b, !0)
                        }), a.opt.grabcursorenabled && e.cursorgrabvalue && a.css(f(c.body), {
                            cursor: e.cursorgrabvalue
                        });
                        a.bind(c, "mouseup", a.ontouchend);
                        a.zoom && (a.opt.dblclickzoom && a.bind(c, "dblclick", a.doZoom), a.ongesturezoom && a.bind(c, "gestureend", a.ongesturezoom))
                    };
                    this.doc[0].readyState && "complete" == this.doc[0].readyState && setTimeout(function() {
                        N.call(a.doc[0], !1)
                    }, 500);
                    a.bind(this.doc, "load", N)
                }
            };
            this.showCursor = function(b, c) {
                a.cursortimeout && (clearTimeout(a.cursortimeout), a.cursortimeout = 0);
                if (a.rail) {
                    a.autohidedom && (a.autohidedom.stop().css({
                        opacity: a.opt.cursoropacitymax
                    }), a.cursoractive = !0);
                    a.rail.drag && 1 == a.rail.drag.pt || (void 0 !== b && !1 !== b && (a.scroll.y = Math.round(1 * b / a.scrollratio.y)), void 0 !== c && (a.scroll.x = Math.round(1 * c / a.scrollratio.x)));
                    a.cursor.css({
                        height: a.cursorheight,
                        top: a.scroll.y
                    });
                    if (a.cursorh) {
                        var d = a.hasreversehr ? a.scrollvaluemaxw - a.scroll.x : a.scroll.x;
                        !a.rail.align && a.rail.visibility ? a.cursorh.css({
                            width: a.cursorwidth,
                            left: d + a.rail.width
                        }) : a.cursorh.css({
                            width: a.cursorwidth,
                            left: d
                        });
                        a.cursoractive = !0
                    }
                    a.zoom && a.zoom.stop().css({
                        opacity: a.opt.cursoropacitymax
                    })
                }
            };
            this.hideCursor = function(b) {
                a.cursortimeout || !a.rail || !a.autohidedom || a.hasmousefocus && "leave" == a.opt.autohidemode || (a.cursortimeout = setTimeout(function() {
                    a.rail.active && a.showonmouseevent || (a.autohidedom.stop().animate({
                        opacity: a.opt.cursoropacitymin
                    }), a.zoom && a.zoom.stop().animate({
                        opacity: a.opt.cursoropacitymin
                    }), a.cursoractive = !1);
                    a.cursortimeout = 0
                }, b || a.opt.hidecursordelay))
            };
            this.noticeCursor = function(b, c, d) {
                a.showCursor(c, d);
                a.rail.active || a.hideCursor(b)
            };
            this.getContentSize = a.ispage ? function() {
                return {
                    w: Math.max(document.body.scrollWidth, document.documentElement.scrollWidth),
                    h: Math.max(document.body.scrollHeight, document.documentElement.scrollHeight)
                }
            } : a.haswrapper ? function() {
                return {
                    w: a.doc.outerWidth() + parseInt(a.win.css("paddingLeft")) + parseInt(a.win.css("paddingRight")),
                    h: a.doc.outerHeight() + parseInt(a.win.css("paddingTop")) + parseInt(a.win.css("paddingBottom"))
                }
            } : function() {
                return {
                    w: a.docscroll[0].scrollWidth,
                    h: a.docscroll[0].scrollHeight
                }
            };
            this.onResize = function(b, c) {
                if (!a || !a.win) return !1;
                if (!a.haswrapper && !a.ispage) {
                    if ("none" == a.win.css("display")) return a.visibility && a.hideRail().hideRailHr(), !1;
                    a.hidden || a.visibility || a.showRail().showRailHr()
                }
                var d = a.page.maxh,
                    e = a.page.maxw,
                    f = a.view.h,
                    k = a.view.w;
                a.view = {
                    w: a.ispage ? a.win.width() : parseInt(a.win[0].clientWidth),
                    h: a.ispage ? a.win.height() : parseInt(a.win[0].clientHeight)
                };
                a.page = c ? c : a.getContentSize();
                a.page.maxh = Math.max(0, a.page.h - a.view.h);
                a.page.maxw = Math.max(0, a.page.w - a.view.w);
                if (a.page.maxh == d && a.page.maxw == e && a.view.w == k && a.view.h == f) {
                    if (a.ispage) return a;
                    d = a.win.offset();
                    if (a.lastposition && (e = a.lastposition, e.top == d.top && e.left == d.left)) return a;
                    a.lastposition = d
                }
                0 == a.page.maxh ? (a.hideRail(), a.scrollvaluemax = 0, a.scroll.y = 0, a.scrollratio.y = 0, a.cursorheight = 0, a.setScrollTop(0), a.rail && (a.rail.scrollable = !1)) : (a.page.maxh -= a.opt.railpadding.top + a.opt.railpadding.bottom, a.rail.scrollable = !0);
                0 == a.page.maxw ? (a.hideRailHr(), a.scrollvaluemaxw = 0, a.scroll.x = 0, a.scrollratio.x = 0, a.cursorwidth = 0, a.setScrollLeft(0), a.railh && (a.railh.scrollable = !1)) : (a.page.maxw -= a.opt.railpadding.left + a.opt.railpadding.right, a.railh && (a.railh.scrollable = a.opt.horizrailenabled));
                a.railslocked = a.locked || 0 == a.page.maxh && 0 == a.page.maxw;
                if (a.railslocked) return a.ispage || a.updateScrollBar(a.view), !1;
                a.hidden || a.visibility ? !a.railh || a.hidden || a.railh.visibility || a.showRailHr() : a.showRail().showRailHr();
                a.istextarea && a.win.css("resize") && "none" != a.win.css("resize") && (a.view.h -= 20);
                a.cursorheight = Math.min(a.view.h, Math.round(a.view.h / a.page.h * a.view.h));
                a.cursorheight = a.opt.cursorfixedheight ? a.opt.cursorfixedheight : Math.max(a.opt.cursorminheight, a.cursorheight);
                a.cursorwidth = Math.min(a.view.w, Math.round(a.view.w / a.page.w * a.view.w));
                a.cursorwidth = a.opt.cursorfixedheight ? a.opt.cursorfixedheight : Math.max(a.opt.cursorminheight, a.cursorwidth);
                a.scrollvaluemax = a.view.h - a.cursorheight - a.cursor.hborder - (a.opt.railpadding.top + a.opt.railpadding.bottom);
                a.railh && (a.railh.width = 0 < a.page.maxh ? a.view.w - a.rail.width : a.view.w, a.scrollvaluemaxw = a.railh.width - a.cursorwidth - a.cursorh.wborder - (a.opt.railpadding.left + a.opt.railpadding.right));
                a.ispage || a.updateScrollBar(a.view);
                a.scrollratio = {
                    x: a.page.maxw / a.scrollvaluemaxw,
                    y: a.page.maxh / a.scrollvaluemax
                };
                a.getScrollTop() > a.page.maxh ? a.doScrollTop(a.page.maxh) : (a.scroll.y = Math.round(a.getScrollTop() * (1 / a.scrollratio.y)), a.scroll.x = Math.round(a.getScrollLeft() * (1 / a.scrollratio.x)), a.cursoractive && a.noticeCursor());
                a.scroll.y && 0 == a.getScrollTop() && a.doScrollTo(Math.floor(a.scroll.y * a.scrollratio.y));
                return a
            };
            this.resize = a.onResize;
            this.hlazyresize = 0;
            this.lazyResize = function(b) {
                a.haswrapper || a.hide();
                a.hlazyresize && clearTimeout(a.hlazyresize);
                a.hlazyresize = setTimeout(function() {
                    a && a.show().resize()
                }, 240);
                return a
            };
            this.jqbind = function(b, c, d) {
                a.events.push({
                    e: b,
                    n: c,
                    f: d,
                    q: !0
                });
                f(b).bind(c, d)
            };
            this.mousewheel = function(b, c, d) {
                b = "jquery" in b ? b[0] : b;
                if ("onwheel" in document.createElement("div")) a._bind(b, "wheel", c, d || !1);
                else {
                    var e = void 0 !== document.onmousewheel ? "mousewheel" : "DOMMouseScroll";
                    q(b, e, c, d || !1);
                    "DOMMouseScroll" == e && q(b, "MozMousePixelScroll", c, d || !1)
                }
            };
            e.haseventlistener ? (this.bind = function(b, c, d, e) {
                a._bind("jquery" in b ? b[0] : b, c, d, e || !1)
            }, this._bind = function(b, c, d, e) {
                a.events.push({
                    e: b,
                    n: c,
                    f: d,
                    b: e,
                    q: !1
                });
                b.addEventListener(c, d, e || !1)
            }, this.cancelEvent = function(a) {
                if (!a) return !1;
                a = a.original ? a.original : a;
                a.cancelable && a.preventDefault();
                a.stopPropagation();
                a.preventManipulation && a.preventManipulation();
                return !1
            }, this.stopPropagation = function(a) {
                if (!a) return !1;
                a = a.original ? a.original : a;
                a.stopPropagation();
                return !1
            }, this._unbind = function(a, c, d, e) {
                a.removeEventListener(c, d, e)
            }) : (this.bind = function(b, c, d, e) {
                var f = "jquery" in b ? b[0] : b;
                a._bind(f, c, function(b) {
                    (b = b || window.event || !1) && b.srcElement && (b.target = b.srcElement);
                    "pageY" in b || (b.pageX = b.clientX + document.documentElement.scrollLeft, b.pageY = b.clientY + document.documentElement.scrollTop);
                    return !1 === d.call(f, b) || !1 === e ? a.cancelEvent(b) : !0
                })
            }, this._bind = function(b, c, d, e) {
                a.events.push({
                    e: b,
                    n: c,
                    f: d,
                    b: e,
                    q: !1
                });
                b.attachEvent ? b.attachEvent("on" + c, d) : b["on" + c] = d
            }, this.cancelEvent = function(a) {
                a = window.event || !1;
                if (!a) return !1;
                a.cancelBubble = !0;
                a.cancel = !0;
                return a.returnValue = !1
            }, this.stopPropagation = function(a) {
                a = window.event || !1;
                if (!a) return !1;
                a.cancelBubble = !0;
                return !1
            }, this._unbind = function(a, c, d, e) {
                a.detachEvent ? a.detachEvent("on" + c, d) : a["on" + c] = !1
            });
            this.unbindAll = function() {
                for (var b = 0; b < a.events.length; b++) {
                    var c = a.events[b];
                    c.q ? c.e.unbind(c.n, c.f) : a._unbind(c.e, c.n, c.f, c.b)
                }
            };
            this.showRail = function() {
                0 == a.page.maxh || !a.ispage && "none" == a.win.css("display") || (a.visibility = !0, a.rail.visibility = !0, a.rail.css("display", "block"));
                return a
            };
            this.showRailHr = function() {
                if (!a.railh) return a;
                0 == a.page.maxw || !a.ispage && "none" == a.win.css("display") || (a.railh.visibility = !0, a.railh.css("display", "block"));
                return a
            };
            this.hideRail = function() {
                a.visibility = !1;
                a.rail.visibility = !1;
                a.rail.css("display", "none");
                return a
            };
            this.hideRailHr = function() {
                if (!a.railh) return a;
                a.railh.visibility = !1;
                a.railh.css("display", "none");
                return a
            };
            this.show = function() {
                a.hidden = !1;
                a.railslocked = !1;
                return a.showRail().showRailHr()
            };
            this.hide = function() {
                a.hidden = !0;
                a.railslocked = !0;
                return a.hideRail().hideRailHr()
            };
            this.toggle = function() {
                return a.hidden ? a.show() : a.hide()
            };
            this.remove = function() {
                a.stop();
                a.cursortimeout && clearTimeout(a.cursortimeout);
                for (var b in a.delaylist) a.delaylist[b] && w(a.delaylist[b].h);
                a.doZoomOut();
                a.unbindAll();
                e.isie9 && a.win[0].detachEvent("onpropertychange", a.onAttributeChange);
                !1 !== a.observer && a.observer.disconnect();
                !1 !== a.observerremover && a.observerremover.disconnect();
                !1 !== a.observerbody && a.observerbody.disconnect();
                a.events = null;
                a.cursor && a.cursor.remove();
                a.cursorh && a.cursorh.remove();
                a.rail && a.rail.remove();
                a.railh && a.railh.remove();
                a.zoom && a.zoom.remove();
                for (b = 0; b < a.saved.css.length; b++) {
                    var c = a.saved.css[b];
                    c[0].css(c[1], void 0 === c[2] ? "" : c[2])
                }
                a.saved = !1;
                a.me.data("__nicescroll", "");
                var d = f.nicescroll;
                d.each(function(b) {
                    if (this && this.id === a.id) {
                        delete d[b];
                        for (var c = ++b; c < d.length; c++, b++) d[b] = d[c];
                        d.length--;
                        d.length && delete d[d.length]
                    }
                });
                for (var k in a) a[k] = null, delete a[k];
                a = null
            };
            this.scrollstart = function(b) {
                this.onscrollstart = b;
                return a
            };
            this.scrollend = function(b) {
                this.onscrollend = b;
                return a
            };
            this.scrollcancel = function(b) {
                this.onscrollcancel = b;
                return a
            };
            this.zoomin = function(b) {
                this.onzoomin = b;
                return a
            };
            this.zoomout = function(b) {
                this.onzoomout = b;
                return a
            };
            this.isScrollable = function(a) {
                a = a.target ? a.target : a;
                if ("OPTION" == a.nodeName) return !0;
                for (; a && 1 == a.nodeType && !/^BODY|HTML/.test(a.nodeName);) {
                    var c = f(a),
                        c = c.css("overflowY") || c.css("overflowX") || c.css("overflow") || "";
                    if (/scroll|auto/.test(c)) return a.clientHeight != a.scrollHeight;
                    a = a.parentNode ? a.parentNode : !1
                }
                return !1
            };
            this.getViewport = function(a) {
                for (a = a && a.parentNode ? a.parentNode : !1; a && 1 == a.nodeType && !/^BODY|HTML/.test(a.nodeName);) {
                    var c = f(a);
                    if (/fixed|absolute/.test(c.css("position"))) return c;
                    var d = c.css("overflowY") || c.css("overflowX") || c.css("overflow") || "";
                    if (/scroll|auto/.test(d) && a.clientHeight != a.scrollHeight || 0 < c.getNiceScroll().length) return c;
                    a = a.parentNode ? a.parentNode : !1
                }
                return !1
            };
            this.triggerScrollEnd = function() {
                if (a.onscrollend) {
                    var b = a.getScrollLeft(),
                        c = a.getScrollTop();
                    a.onscrollend.call(a, {
                        type: "scrollend",
                        current: {
                            x: b,
                            y: c
                        },
                        end: {
                            x: b,
                            y: c
                        }
                    })
                }
            };
            this.onmousewheel = function(b) {
                if (!a.wheelprevented) {
                    if (a.railslocked) return a.debounced("checkunlock", a.resize, 250), !0;
                    if (a.rail.drag) return a.cancelEvent(b);
                    "auto" == a.opt.oneaxismousemode && 0 != b.deltaX && (a.opt.oneaxismousemode = !1);
                    if (a.opt.oneaxismousemode && 0 == b.deltaX && !a.rail.scrollable) return a.railh && a.railh.scrollable ? a.onmousewheelhr(b) : !0;
                    var c = +new Date,
                        d = !1;
                    a.opt.preservenativescrolling && a.checkarea + 600 < c && (a.nativescrollingarea = a.isScrollable(b), d = !0);
                    a.checkarea = c;
                    if (a.nativescrollingarea) return !0;
                    if (b = t(b, !1, d)) a.checkarea = 0;
                    return b
                }
            };
            this.onmousewheelhr = function(b) {
                if (!a.wheelprevented) {
                    if (a.railslocked || !a.railh.scrollable) return !0;
                    if (a.rail.drag) return a.cancelEvent(b);
                    var c = +new Date,
                        d = !1;
                    a.opt.preservenativescrolling && a.checkarea + 600 < c && (a.nativescrollingarea = a.isScrollable(b), d = !0);
                    a.checkarea = c;
                    return a.nativescrollingarea ? !0 : a.railslocked ? a.cancelEvent(b) : t(b, !0, d)
                }
            };
            this.stop = function() {
                a.cancelScroll();
                a.scrollmon && a.scrollmon.stop();
                a.cursorfreezed = !1;
                a.scroll.y = Math.round(a.getScrollTop() * (1 / a.scrollratio.y));
                a.noticeCursor();
                return a
            };
            this.getTransitionSpeed = function(b) {
                b = Math.min(Math.round(10 * a.opt.scrollspeed), Math.round(b / 20 * a.opt.scrollspeed));
                return 20 < b ? b : 0
            };
            a.opt.smoothscroll ? a.ishwscroll && e.hastransition && a.opt.usetransition && a.opt.smoothscroll ? (this.prepareTransition = function(b, c) {
                var d = c ? 20 < b ? b : 0 : a.getTransitionSpeed(b),
                    f = d ? e.prefixstyle + "transform " + d + "ms ease-out" : "";
                a.lasttransitionstyle && a.lasttransitionstyle == f || (a.lasttransitionstyle = f, a.doc.css(e.transitionstyle, f));
                return d
            }, this.doScrollLeft = function(b, c) {
                var d = a.scrollrunning ? a.newscrolly : a.getScrollTop();
                a.doScrollPos(b, d, c)
            }, this.doScrollTop = function(b, c) {
                var d = a.scrollrunning ? a.newscrollx : a.getScrollLeft();
                a.doScrollPos(d, b, c)
            }, this.doScrollPos = function(b, c, d) {
                var f = a.getScrollTop(),
                    k = a.getScrollLeft();
                (0 > (a.newscrolly - f) * (c - f) || 0 > (a.newscrollx - k) * (b - k)) && a.cancelScroll();
                0 == a.opt.bouncescroll && (0 > c ? c = 0 : c > a.page.maxh && (c = a.page.maxh), 0 > b ? b = 0 : b > a.page.maxw && (b = a.page.maxw));
                if (a.scrollrunning && b == a.newscrollx && c == a.newscrolly) return !1;
                a.newscrolly = c;
                a.newscrollx = b;
                a.newscrollspeed = d || !1;
                if (a.timer) return !1;
                a.timer = setTimeout(function() {
                    var d = a.getScrollTop(),
                        f = a.getScrollLeft(),
                        k = Math.round(Math.sqrt(Math.pow(b - f, 2) + Math.pow(c - d, 2))),
                        k = a.newscrollspeed && 1 < a.newscrollspeed ? a.newscrollspeed : a.getTransitionSpeed(k);
                    a.newscrollspeed && 1 >= a.newscrollspeed && (k *= a.newscrollspeed);
                    a.prepareTransition(k, !0);
                    a.timerscroll && a.timerscroll.tm && clearInterval(a.timerscroll.tm);
                    0 < k && (!a.scrollrunning && a.onscrollstart && a.onscrollstart.call(a, {
                        type: "scrollstart",
                        current: {
                            x: f,
                            y: d
                        },
                        request: {
                            x: b,
                            y: c
                        },
                        end: {
                            x: a.newscrollx,
                            y: a.newscrolly
                        },
                        speed: k
                    }), e.transitionend ? a.scrollendtrapped || (a.scrollendtrapped = !0, a.bind(a.doc, e.transitionend, a.onScrollTransitionEnd, !1)) : (a.scrollendtrapped && clearTimeout(a.scrollendtrapped), a.scrollendtrapped = setTimeout(a.onScrollTransitionEnd, k)), a.timerscroll = {
                        bz: new D(d, a.newscrolly, k, 0, 0, .58, 1),
                        bh: new D(f, a.newscrollx, k, 0, 0, .58, 1)
                    }, a.cursorfreezed || (a.timerscroll.tm = setInterval(function() {
                        a.showCursor(a.getScrollTop(), a.getScrollLeft())
                    }, 60)));
                    a.synched("doScroll-set", function() {
                        a.timer = 0;
                        a.scrollendtrapped && (a.scrollrunning = !0);
                        a.setScrollTop(a.newscrolly);
                        a.setScrollLeft(a.newscrollx);
                        if (!a.scrollendtrapped) a.onScrollTransitionEnd()
                    })
                }, 50)
            }, this.cancelScroll = function() {
                if (!a.scrollendtrapped) return !0;
                var b = a.getScrollTop(),
                    c = a.getScrollLeft();
                a.scrollrunning = !1;
                e.transitionend || clearTimeout(e.transitionend);
                a.scrollendtrapped = !1;
                a._unbind(a.doc[0], e.transitionend, a.onScrollTransitionEnd);
                a.prepareTransition(0);
                a.setScrollTop(b);
                a.railh && a.setScrollLeft(c);
                a.timerscroll && a.timerscroll.tm && clearInterval(a.timerscroll.tm);
                a.timerscroll = !1;
                a.cursorfreezed = !1;
                a.showCursor(b, c);
                return a
            }, this.onScrollTransitionEnd = function() {
                a.scrollendtrapped && a._unbind(a.doc[0], e.transitionend, a.onScrollTransitionEnd);
                a.scrollendtrapped = !1;
                a.prepareTransition(0);
                a.timerscroll && a.timerscroll.tm && clearInterval(a.timerscroll.tm);
                a.timerscroll = !1;
                var b = a.getScrollTop(),
                    c = a.getScrollLeft();
                a.setScrollTop(b);
                a.railh && a.setScrollLeft(c);
                a.noticeCursor(!1, b, c);
                a.cursorfreezed = !1;
                0 > b ? b = 0 : b > a.page.maxh && (b = a.page.maxh);
                0 > c ? c = 0 : c > a.page.maxw && (c = a.page.maxw);
                if (b != a.newscrolly || c != a.newscrollx) return a.doScrollPos(c, b, a.opt.snapbackspeed);
                a.onscrollend && a.scrollrunning && a.triggerScrollEnd();
                a.scrollrunning = !1
            }) : (this.doScrollLeft = function(b, c) {
                var d = a.scrollrunning ? a.newscrolly : a.getScrollTop();
                a.doScrollPos(b, d, c)
            }, this.doScrollTop = function(b, c) {
                var d = a.scrollrunning ? a.newscrollx : a.getScrollLeft();
                a.doScrollPos(d, b, c)
            }, this.doScrollPos = function(b, c, d) {
                function e() {
                    if (a.cancelAnimationFrame) return !0;
                    a.scrollrunning = !0;
                    if (p = 1 - p) return a.timer = v(e) || 1;
                    var b = 0,
                        c, d, f = d = a.getScrollTop();
                    if (a.dst.ay) {
                        f = a.bzscroll ? a.dst.py + a.bzscroll.getNow() * a.dst.ay : a.newscrolly;
                        c = f - d;
                        if (0 > c && f < a.newscrolly || 0 < c && f > a.newscrolly) f = a.newscrolly;
                        a.setScrollTop(f);
                        f == a.newscrolly && (b = 1)
                    } else b = 1;
                    d = c = a.getScrollLeft();
                    if (a.dst.ax) {
                        d = a.bzscroll ? a.dst.px + a.bzscroll.getNow() * a.dst.ax : a.newscrollx;
                        c = d - c;
                        if (0 > c && d < a.newscrollx || 0 < c && d > a.newscrollx) d = a.newscrollx;
                        a.setScrollLeft(d);
                        d == a.newscrollx && (b += 1)
                    } else b += 1;
                    2 == b ? (a.timer = 0, a.cursorfreezed = !1, a.bzscroll = !1, a.scrollrunning = !1, 0 > f ? f = 0 : f > a.page.maxh && (f = Math.max(0, a.page.maxh)), 0 > d ? d = 0 : d > a.page.maxw && (d = a.page.maxw), d != a.newscrollx || f != a.newscrolly ? a.doScrollPos(d, f) : a.onscrollend && a.triggerScrollEnd()) : a.timer = v(e) || 1
                }
                c = void 0 === c || !1 === c ? a.getScrollTop(!0) : c;
                if (a.timer && a.newscrolly == c && a.newscrollx == b) return !0;
                a.timer && w(a.timer);
                a.timer = 0;
                var f = a.getScrollTop(),
                    k = a.getScrollLeft();
                (0 > (a.newscrolly - f) * (c - f) || 0 > (a.newscrollx - k) * (b - k)) && a.cancelScroll();
                a.newscrolly = c;
                a.newscrollx = b;
                a.bouncescroll && a.rail.visibility || (0 > a.newscrolly ? a.newscrolly = 0 : a.newscrolly > a.page.maxh && (a.newscrolly = a.page.maxh));
                a.bouncescroll && a.railh.visibility || (0 > a.newscrollx ? a.newscrollx = 0 : a.newscrollx > a.page.maxw && (a.newscrollx = a.page.maxw));
                a.dst = {};
                a.dst.x = b - k;
                a.dst.y = c - f;
                a.dst.px = k;
                a.dst.py = f;
                var h = Math.round(Math.sqrt(Math.pow(a.dst.x, 2) + Math.pow(a.dst.y, 2)));
                a.dst.ax = a.dst.x / h;
                a.dst.ay = a.dst.y / h;
                var l = 0,
                    n = h;
                0 == a.dst.x ? (l = f, n = c, a.dst.ay = 1, a.dst.py = 0) : 0 == a.dst.y && (l = k, n = b, a.dst.ax = 1, a.dst.px = 0);
                h = a.getTransitionSpeed(h);
                d && 1 >= d && (h *= d);
                a.bzscroll = 0 < h ? a.bzscroll ? a.bzscroll.update(n, h) : new D(l, n, h, 0, 1, 0, 1) : !1;
                if (!a.timer) {
                    (f == a.page.maxh && c >= a.page.maxh || k == a.page.maxw && b >= a.page.maxw) && a.checkContentSize();
                    var p = 1;
                    a.cancelAnimationFrame = !1;
                    a.timer = 1;
                    a.onscrollstart && !a.scrollrunning && a.onscrollstart.call(a, {
                        type: "scrollstart",
                        current: {
                            x: k,
                            y: f
                        },
                        request: {
                            x: b,
                            y: c
                        },
                        end: {
                            x: a.newscrollx,
                            y: a.newscrolly
                        },
                        speed: h
                    });
                    e();
                    (f == a.page.maxh && c >= f || k == a.page.maxw && b >= k) && a.checkContentSize();
                    a.noticeCursor()
                }
            }, this.cancelScroll = function() {
                a.timer && w(a.timer);
                a.timer = 0;
                a.bzscroll = !1;
                a.scrollrunning = !1;
                return a
            }) : (this.doScrollLeft = function(b, c) {
                var d = a.getScrollTop();
                a.doScrollPos(b, d, c)
            }, this.doScrollTop = function(b, c) {
                var d = a.getScrollLeft();
                a.doScrollPos(d, b, c)
            }, this.doScrollPos = function(b, c, d) {
                var e = b > a.page.maxw ? a.page.maxw : b;
                0 > e && (e = 0);
                var f = c > a.page.maxh ? a.page.maxh : c;
                0 > f && (f = 0);
                a.synched("scroll", function() {
                    a.setScrollTop(f);
                    a.setScrollLeft(e)
                })
            }, this.cancelScroll = function() {});
            this.doScrollBy = function(b, c) {
                var d = 0,
                    d = c ? Math.floor((a.scroll.y - b) * a.scrollratio.y) : (a.timer ? a.newscrolly : a.getScrollTop(!0)) - b;
                if (a.bouncescroll) {
                    var e = Math.round(a.view.h / 2);
                    d < -e ? d = -e : d > a.page.maxh + e && (d = a.page.maxh + e)
                }
                a.cursorfreezed = !1;
                e = a.getScrollTop(!0);
                if (0 > d && 0 >= e) return a.noticeCursor();
                if (d > a.page.maxh && e >= a.page.maxh) return a.checkContentSize(), a.noticeCursor();
                a.doScrollTop(d)
            };
            this.doScrollLeftBy = function(b, c) {
                var d = 0,
                    d = c ? Math.floor((a.scroll.x - b) * a.scrollratio.x) : (a.timer ? a.newscrollx : a.getScrollLeft(!0)) - b;
                if (a.bouncescroll) {
                    var e = Math.round(a.view.w / 2);
                    d < -e ? d = -e : d > a.page.maxw + e && (d = a.page.maxw + e)
                }
                a.cursorfreezed = !1;
                e = a.getScrollLeft(!0);
                if (0 > d && 0 >= e || d > a.page.maxw && e >= a.page.maxw) return a.noticeCursor();
                a.doScrollLeft(d)
            };
            this.doScrollTo = function(b, c) {
                a.cursorfreezed = !1;
                a.doScrollTop(b)
            };
            this.checkContentSize = function() {
                var b = a.getContentSize();
                b.h == a.page.h && b.w == a.page.w || a.resize(!1, b)
            };
            a.onscroll = function(b) {
                a.rail.drag || a.cursorfreezed || a.synched("scroll", function() {
                    a.scroll.y = Math.round(a.getScrollTop() * (1 / a.scrollratio.y));
                    a.railh && (a.scroll.x = Math.round(a.getScrollLeft() * (1 / a.scrollratio.x)));
                    a.noticeCursor()
                })
            };
            a.bind(a.docscroll, "scroll", a.onscroll);
            this.doZoomIn = function(b) {
                if (!a.zoomactive) {
                    a.zoomactive = !0;
                    a.zoomrestore = {
                        style: {}
                    };
                    var c = "position top left zIndex backgroundColor marginTop marginBottom marginLeft marginRight".split(" "),
                        d = a.win[0].style,
                        k;
                    for (k in c) {
                        var h = c[k];
                        a.zoomrestore.style[h] = void 0 !== d[h] ? d[h] : ""
                    }
                    a.zoomrestore.style.width = a.win.css("width");
                    a.zoomrestore.style.height = a.win.css("height");
                    a.zoomrestore.padding = {
                        w: a.win.outerWidth() - a.win.width(),
                        h: a.win.outerHeight() - a.win.height()
                    };
                    e.isios4 && (a.zoomrestore.scrollTop = f(window).scrollTop(), f(window).scrollTop(0));
                    a.win.css({
                        position: e.isios4 ? "absolute" : "fixed",
                        top: 0,
                        left: 0,
                        zIndex: A + 100,
                        margin: 0
                    });
                    c = a.win.css("backgroundColor");
                    ("" == c || /transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(c)) && a.win.css("backgroundColor", "#fff");
                    a.rail.css({
                        zIndex: A + 101
                    });
                    a.zoom.css({
                        zIndex: A + 102
                    });
                    a.zoom.css("backgroundPosition", "0px -18px");
                    a.resizeZoom();
                    a.onzoomin && a.onzoomin.call(a);
                    return a.cancelEvent(b)
                }
            };
            this.doZoomOut = function(b) {
                if (a.zoomactive) return a.zoomactive = !1, a.win.css("margin", ""), a.win.css(a.zoomrestore.style), e.isios4 && f(window).scrollTop(a.zoomrestore.scrollTop), a.rail.css({
                    "z-index": a.zindex
                }), a.zoom.css({
                    "z-index": a.zindex
                }), a.zoomrestore = !1, a.zoom.css("backgroundPosition", "0px 0px"), a.onResize(), a.onzoomout && a.onzoomout.call(a), a.cancelEvent(b)
            };
            this.doZoom = function(b) {
                return a.zoomactive ? a.doZoomOut(b) : a.doZoomIn(b)
            };
            this.resizeZoom = function() {
                if (a.zoomactive) {
                    var b = a.getScrollTop();
                    a.win.css({
                        width: f(window).width() - a.zoomrestore.padding.w + "px",
                        height: f(window).height() - a.zoomrestore.padding.h + "px"
                    });
                    a.onResize();
                    a.setScrollTop(Math.min(a.page.maxh, b))
                }
            };
            this.init();
            f.nicescroll.push(this)
        },
        M = function(f) {
            var c = this;
            this.nc = f;
            this.steptime = this.lasttime = this.speedy = this.speedx = this.lasty = this.lastx = 0;
            this.snapy = this.snapx = !1;
            this.demuly = this.demulx = 0;
            this.lastscrolly = this.lastscrollx = -1;
            this.timer = this.chky = this.chkx = 0;
            this.time = function() {
                return +new Date
            };
            this.reset = function(f, h) {
                c.stop();
                var d = c.time();
                c.steptime = 0;
                c.lasttime = d;
                c.speedx = 0;
                c.speedy = 0;
                c.lastx = f;
                c.lasty = h;
                c.lastscrollx = -1;
                c.lastscrolly = -1
            };
            this.update = function(f, h) {
                var d = c.time();
                c.steptime = d - c.lasttime;
                c.lasttime = d;
                var d = h - c.lasty,
                    q = f - c.lastx,
                    t = c.nc.getScrollTop(),
                    a = c.nc.getScrollLeft(),
                    t = t + d,
                    a = a + q;
                c.snapx = 0 > a || a > c.nc.page.maxw;
                c.snapy = 0 > t || t > c.nc.page.maxh;
                c.speedx = q;
                c.speedy = d;
                c.lastx = f;
                c.lasty = h
            };
            this.stop = function() {
                c.nc.unsynched("domomentum2d");
                c.timer && clearTimeout(c.timer);
                c.timer = 0;
                c.lastscrollx = -1;
                c.lastscrolly = -1
            };
            this.doSnapy = function(f, h) {
                var d = !1;
                0 > h ? (h = 0, d = !0) : h > c.nc.page.maxh && (h = c.nc.page.maxh, d = !0);
                0 > f ? (f = 0, d = !0) : f > c.nc.page.maxw && (f = c.nc.page.maxw, d = !0);
                d ? c.nc.doScrollPos(f, h, c.nc.opt.snapbackspeed) : c.nc.triggerScrollEnd()
            };
            this.doMomentum = function(f) {
                var h = c.time(),
                    d = f ? h + f : c.lasttime;
                f = c.nc.getScrollLeft();
                var q = c.nc.getScrollTop(),
                    t = c.nc.page.maxh,
                    a = c.nc.page.maxw;
                c.speedx = 0 < a ? Math.min(60, c.speedx) : 0;
                c.speedy = 0 < t ? Math.min(60, c.speedy) : 0;
                d = d && 60 >= h - d;
                if (0 > q || q > t || 0 > f || f > a) d = !1;
                f = c.speedx && d ? c.speedx : !1;
                if (c.speedy && d && c.speedy || f) {
                    var r = Math.max(16, c.steptime);
                    50 < r && (f = r / 50, c.speedx *= f, c.speedy *= f, r = 50);
                    c.demulxy = 0;
                    c.lastscrollx = c.nc.getScrollLeft();
                    c.chkx = c.lastscrollx;
                    c.lastscrolly = c.nc.getScrollTop();
                    c.chky = c.lastscrolly;
                    var p = c.lastscrollx,
                        e = c.lastscrolly,
                        v = function() {
                            var d = 600 < c.time() - h ? .04 : .02;
                            c.speedx && (p = Math.floor(c.lastscrollx - c.speedx * (1 - c.demulxy)), c.lastscrollx = p, 0 > p || p > a) && (d = .1);
                            c.speedy && (e = Math.floor(c.lastscrolly - c.speedy * (1 - c.demulxy)), c.lastscrolly = e, 0 > e || e > t) && (d = .1);
                            c.demulxy = Math.min(1, c.demulxy + d);
                            c.nc.synched("domomentum2d", function() {
                                c.speedx && (c.nc.getScrollLeft(), c.chkx = p, c.nc.setScrollLeft(p));
                                c.speedy && (c.nc.getScrollTop(), c.chky = e, c.nc.setScrollTop(e));
                                c.timer || (c.nc.hideCursor(), c.doSnapy(p, e))
                            });
                            1 > c.demulxy ? c.timer = setTimeout(v, r) : (c.stop(), c.nc.hideCursor(), c.doSnapy(p, e))
                        };
                    v()
                } else c.doSnapy(c.nc.getScrollLeft(), c.nc.getScrollTop())
            }
        },
        y = f.fn.scrollTop;
    f.cssHooks.pageYOffset = {
        get: function(h, c, k) {
            return (c = f.data(h, "__nicescroll") || !1) && c.ishwscroll ? c.getScrollTop() : y.call(h)
        },
        set: function(h, c) {
            var k = f.data(h, "__nicescroll") || !1;
            k && k.ishwscroll ? k.setScrollTop(parseInt(c)) : y.call(h, c);
            return this
        }
    };
    f.fn.scrollTop = function(h) {
        if (void 0 === h) {
            var c = this[0] ? f.data(this[0], "__nicescroll") || !1 : !1;
            return c && c.ishwscroll ? c.getScrollTop() : y.call(this)
        }
        return this.each(function() {
            var c = f.data(this, "__nicescroll") || !1;
            c && c.ishwscroll ? c.setScrollTop(parseInt(h)) : y.call(f(this), h)
        })
    };
    var z = f.fn.scrollLeft;
    f.cssHooks.pageXOffset = {
        get: function(h, c, k) {
            return (c = f.data(h, "__nicescroll") || !1) && c.ishwscroll ? c.getScrollLeft() : z.call(h)
        },
        set: function(h, c) {
            var k = f.data(h, "__nicescroll") || !1;
            k && k.ishwscroll ? k.setScrollLeft(parseInt(c)) : z.call(h, c);
            return this
        }
    };
    f.fn.scrollLeft = function(h) {
        if (void 0 === h) {
            var c = this[0] ? f.data(this[0], "__nicescroll") || !1 : !1;
            return c && c.ishwscroll ? c.getScrollLeft() : z.call(this)
        }
        return this.each(function() {
            var c = f.data(this, "__nicescroll") || !1;
            c && c.ishwscroll ? c.setScrollLeft(parseInt(h)) : z.call(f(this), h)
        })
    };
    var E = function(h) {
        var c = this;
        this.length = 0;
        this.name = "nicescrollarray";
        this.each = function(d) {
            f.each(c, d);
            return c
        };
        this.push = function(d) {
            c[c.length] = d;
            c.length++
        };
        this.eq = function(d) {
            return c[d]
        };
        if (h)
            for (var k = 0; k < h.length; k++) {
                var l = f.data(h[k], "__nicescroll") || !1;
                l && (this[this.length] = l, this.length++)
            }
        return this
    };
    (function(f, c, k) {
        for (var l = 0; l < c.length; l++) k(f, c[l])
    })(E.prototype, "show hide toggle onResize resize remove stop doScrollPos".split(" "), function(f, c) {
        f[c] = function() {
            var f = arguments;
            return this.each(function() {
                this[c].apply(this, f)
            })
        }
    });
    f.fn.getNiceScroll = function(h) {
        return void 0 === h ? new E(this) : this[h] && f.data(this[h], "__nicescroll") || !1
    };
    f.expr[":"].nicescroll = function(h) {
        return void 0 !== f.data(h, "__nicescroll")
    };
    f.fn.niceScroll = function(h, c) {
        void 0 !== c || "object" != typeof h || "jquery" in h || (c = h, h = !1);
        c = f.extend({}, c);
        var k = new E;
        void 0 === c && (c = {});
        h && (c.doc = f(h), c.win = f(this));
        var l = !("doc" in c);
        l || "win" in c || (c.win = f(this));
        this.each(function() {
            var d = f(this).data("__nicescroll") || !1;
            d || (c.doc = l ? f(this) : c.doc, d = new S(c, f(this)), f(this).data("__nicescroll", d));
            k.push(d)
        });
        return 1 == k.length ? k[0] : k
    };
    window.NiceScroll = {
        getjQuery: function() {
            return f
        }
    };
    f.nicescroll || (f.nicescroll = new E, f.nicescroll.options = K)
});
! function(e) {
    if ("function" == typeof define && define.amd) define(e);
    else if ("object" == typeof exports) module.exports = e();
    else {
        var n = window.Cookies,
            t = window.Cookies = e();
        t.noConflict = function() {
            return window.Cookies = n, t
        }
    }
}(function() {
    function e() {
        for (var e = 0, n = {}; e < arguments.length; e++) {
            var t = arguments[e];
            for (var o in t) n[o] = t[o]
        }
        return n
    }

    function n(t) {
        function o(n, r, i) {
            var c;
            if (arguments.length > 1) {
                if (i = e({
                        path: "/"
                    }, o.defaults, i), "number" == typeof i.expires) {
                    var s = new Date;
                    s.setMilliseconds(s.getMilliseconds() + 864e5 * i.expires), i.expires = s
                }
                try {
                    c = JSON.stringify(r), /^[\{\[]/.test(c) && (r = c)
                } catch (a) {}
                return r = encodeURIComponent(String(r)), r = r.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent), n = encodeURIComponent(String(n)), n = n.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent), n = n.replace(/[\(\)]/g, escape), document.cookie = [n, "=", r, i.expires && "; expires=" + i.expires.toUTCString(), i.path && "; path=" + i.path, i.domain && "; domain=" + i.domain, i.secure ? "; secure" : ""].join("")
            }
            n || (c = {});
            for (var p = document.cookie ? document.cookie.split("; ") : [], u = /(%[0-9A-Z]{2})+/g, d = 0; d < p.length; d++) {
                var f = p[d].split("="),
                    l = f[0].replace(u, decodeURIComponent),
                    m = f.slice(1).join("=");
                '"' === m.charAt(0) && (m = m.slice(1, -1));
                try {
                    if (m = t && t(m, l) || m.replace(u, decodeURIComponent), this.json) try {
                        m = JSON.parse(m)
                    } catch (a) {}
                    if (n === l) {
                        c = m;
                        break
                    }
                    n || (c[l] = m)
                } catch (a) {}
            }
            return c
        }
        return o.get = o.set = o, o.getJSON = function() {
            return o.apply({
                json: !0
            }, [].slice.call(arguments))
        }, o.defaults = {}, o.remove = function(n, t) {
            o(n, "", e(t, {
                expires: -1
            }))
        }, o.withConverter = n, o
    }
    return n()
});
(function() {
    function t(t, n) {
        return t.set(n[0], n[1]), t
    }

    function n(t, n) {
        return t.add(n), t
    }

    function r(t, n, r) {
        switch (r.length) {
            case 0:
                return t.call(n);
            case 1:
                return t.call(n, r[0]);
            case 2:
                return t.call(n, r[0], r[1]);
            case 3:
                return t.call(n, r[0], r[1], r[2])
        }
        return t.apply(n, r)
    }

    function e(t, n, r, e) {
        for (var u = -1, o = t.length; ++u < o;) {
            var i = t[u];
            n(e, i, r(i), t)
        }
        return e
    }

    function u(t, n) {
        for (var r = -1, e = t.length; ++r < e && false !== n(t[r], r, t););
        return t
    }

    function o(t, n) {
        for (var r = t.length; r-- && false !== n(t[r], r, t););
        return t
    }

    function i(t, n) {
        for (var r = -1, e = t.length; ++r < e;)
            if (!n(t[r], r, t)) return false;
        return true
    }

    function f(t, n) {
        for (var r = -1, e = t.length, u = 0, o = []; ++r < e;) {
            var i = t[r];
            n(i, r, t) && (o[u++] = i)
        }
        return o
    }

    function c(t, n) {
        return !!t.length && -1 < d(t, n, 0)
    }

    function a(t, n, r) {
        for (var e = -1, u = t.length; ++e < u;)
            if (r(n, t[e])) return true;
        return false
    }

    function l(t, n) {
        for (var r = -1, e = t.length, u = Array(e); ++r < e;) u[r] = n(t[r], r, t);
        return u
    }

    function s(t, n) {
        for (var r = -1, e = n.length, u = t.length; ++r < e;) t[u + r] = n[r];
        return t
    }

    function h(t, n, r, e) {
        var u = -1,
            o = t.length;
        for (e && o && (r = t[++u]); ++u < o;) r = n(r, t[u], u, t);
        return r
    }

    function p(t, n, r, e) {
        var u = t.length;
        for (e && u && (r = t[--u]); u--;) r = n(r, t[u], u, t);
        return r
    }

    function _(t, n) {
        for (var r = -1, e = t.length; ++r < e;)
            if (n(t[r], r, t)) return true;
        return false
    }

    function v(t, n, r, e) {
        var u;
        return r(t, function(t, r, o) {
            return n(t, r, o) ? (u = e ? r : t, false) : void 0
        }), u
    }

    function g(t, n, r) {
        for (var e = t.length, u = r ? e : -1; r ? u-- : ++u < e;)
            if (n(t[u], u, t)) return u;
        return -1
    }

    function d(t, n, r) {
        if (n !== n) return M(t, r);
        --r;
        for (var e = t.length; ++r < e;)
            if (t[r] === n) return r;
        return -1
    }

    function y(t, n, r, e) {
        --r;
        for (var u = t.length; ++r < u;)
            if (e(t[r], n)) return r;
        return -1
    }

    function b(t, n) {
        var r = t ? t.length : 0;
        return r ? w(t, n) / r : V
    }

    function x(t, n, r, e, u) {
        return u(t, function(t, u, o) {
            r = e ? (e = false, t) : n(r, t, u, o)
        }), r
    }

    function j(t, n) {
        var r = t.length;
        for (t.sort(n); r--;) t[r] = t[r].c;
        return t
    }

    function w(t, n) {
        for (var r, e = -1, u = t.length; ++e < u;) {
            var o = n(t[e]);
            o !== T && (r = r === T ? o : r + o)
        }
        return r
    }

    function m(t, n) {
        for (var r = -1, e = Array(t); ++r < t;) e[r] = n(r);
        return e
    }

    function A(t, n) {
        return l(n, function(n) {
            return [n, t[n]]
        })
    }

    function O(t) {
        return function(n) {
            return t(n)
        }
    }

    function k(t, n) {
        return l(n, function(n) {
            return t[n]
        })
    }

    function E(t, n) {
        return t.has(n)
    }

    function I(t, n) {
        for (var r = -1, e = t.length; ++r < e && -1 < d(n, t[r], 0););
        return r
    }

    function S(t, n) {
        for (var r = t.length; r-- && -1 < d(n, t[r], 0););
        return r
    }

    function R(t) {
        return t && t.Object === Object ? t : null
    }

    function W(t) {
        return zt[t]
    }

    function B(t) {
        return Ut[t]
    }

    function L(t) {
        return "\\" + $t[t]
    }

    function M(t, n, r) {
        var e = t.length;
        for (n += r ? 0 : -1; r ? n-- : ++n < e;) {
            var u = t[n];
            if (u !== u) return n
        }
        return -1
    }

    function C(t) {
        var n = false;
        if (null != t && typeof t.toString != "function") try {
            n = !!(t + "")
        } catch (r) {}
        return n
    }

    function z(t) {
        for (var n, r = []; !(n = t.next()).done;) r.push(n.value);
        return r
    }

    function U(t) {
        var n = -1,
            r = Array(t.size);
        return t.forEach(function(t, e) {
            r[++n] = [e, t]
        }), r
    }

    function D(t, n) {
        for (var r = -1, e = t.length, u = 0, o = []; ++r < e;) {
            var i = t[r];
            i !== n && "__lodash_placeholder__" !== i || (t[r] = "__lodash_placeholder__", o[u++] = r)
        }
        return o
    }

    function F(t) {
        var n = -1,
            r = Array(t.size);
        return t.forEach(function(t) {
            r[++n] = t
        }), r
    }

    function $(t) {
        var n = -1,
            r = Array(t.size);
        return t.forEach(function(t) {
            r[++n] = [t, t]
        }), r
    }

    function N(t) {
        if (!t || !Wt.test(t)) return t.length;
        for (var n = St.lastIndex = 0; St.test(t);) n++;
        return n
    }

    function P(t) {
        return Dt[t]
    }

    function Z(R) {
        function At(t) {
            if (De(t) && !ai(t) && !(t instanceof zt)) {
                if (t instanceof kt) return t;
                if (wu.call(t, "__wrapped__")) return ie(t)
            }
            return new kt(t)
        }

        function Ot() {}

        function kt(t, n) {
            this.__wrapped__ = t, this.__actions__ = [], this.__chain__ = !!n, this.__index__ = 0, this.__values__ = T
        }

        function zt(t) {
            this.__wrapped__ = t, this.__actions__ = [], this.__dir__ = 1, this.__filtered__ = false, this.__iteratees__ = [], this.__takeCount__ = 4294967295, this.__views__ = []
        }

        function Ut(t) {
            var n = -1,
                r = t ? t.length : 0;
            for (this.clear(); ++n < r;) {
                var e = t[n];
                this.set(e[0], e[1])
            }
        }

        function Dt(t) {
            var n = -1,
                r = t ? t.length : 0;
            for (this.clear(); ++n < r;) {
                var e = t[n];
                this.set(e[0], e[1])
            }
        }

        function Ft(t) {
            var n = -1,
                r = t ? t.length : 0;
            for (this.clear(); ++n < r;) {
                var e = t[n];
                this.set(e[0], e[1])
            }
        }

        function $t(t) {
            var n = -1,
                r = t ? t.length : 0;
            for (this.__data__ = new Ft; ++n < r;) this.add(t[n])
        }

        function Zt(t) {
            this.__data__ = new Dt(t)
        }

        function Tt(t, n, r, e) {
            return t === T || Se(t, bu[r]) && !wu.call(e, r) ? n : t
        }

        function Vt(t, n, r) {
            (r === T || Se(t[n], r)) && (typeof n != "number" || r !== T || n in t) || (t[n] = r)
        }

        function Kt(t, n, r) {
            var e = t[n];
            wu.call(t, n) && Se(e, r) && (r !== T || n in t) || (t[n] = r)
        }

        function Gt(t, n) {
            for (var r = t.length; r--;)
                if (Se(t[r][0], n)) return r;
            return -1
        }

        function Ht(t, n, r, e) {
            return go(t, function(t, u, o) {
                n(e, t, r(t), o)
            }), e
        }

        function Qt(t, n) {
            return t && ar(n, nu(n), t)
        }

        function Xt(t, n) {
            for (var r = -1, e = null == t, u = n.length, o = Array(u); ++r < u;) o[r] = e ? T : Xe(t, n[r]);
            return o
        }

        function tn(t, n, r) {
            return t === t && (r !== T && (t = r >= t ? t : r), n !== T && (t = t >= n ? t : n)), t
        }

        function nn(t, n, r, e, o, i, f) {
            var c;
            if (e && (c = i ? e(t, o, i, f) : e(t)), c !== T) return c;
            if (!Ue(t)) return t;
            if (o = ai(t)) {
                if (c = Tr(t), !n) return cr(t, c)
            } else {
                var a = Pr(t),
                    l = "[object Function]" == a || "[object GeneratorFunction]" == a;
                if (li(t)) return er(t, n);
                if ("[object Object]" == a || "[object Arguments]" == a || l && !i) {
                    if (C(t)) return i ? t : {};
                    if (c = qr(l ? {} : t), !n) return lr(t, Qt(c, t))
                } else {
                    if (!Ct[a]) return i ? t : {};
                    c = Vr(t, a, nn, n)
                }
            }
            if (f || (f = new Zt), i = f.get(t)) return i;
            if (f.set(t, c), !o) var s = r ? vn(t, nu, Nr) : nu(t);
            return u(s || t, function(u, o) {
                s && (o = u, u = t[o]), Kt(c, o, nn(u, n, r, e, o, t, f))
            }), c
        }

        function rn(t) {
            var n = nu(t),
                r = n.length;
            return function(e) {
                if (null == e) return !r;
                for (var u = r; u--;) {
                    var o = n[u],
                        i = t[o],
                        f = e[o];
                    if (f === T && !(o in Object(e)) || !i(f)) return false
                }
                return true
            }
        }

        function en(t) {
            return Ue(t) ? zu(t) : {}
        }

        function un(t, n, r) {
            if (typeof t != "function") throw new du("Expected a function");
            return Du(function() {
                t.apply(T, r)
            }, n)
        }

        function on(t, n, r, e) {
            var u = -1,
                o = c,
                i = true,
                f = t.length,
                s = [],
                h = n.length;
            if (!f) return s;
            r && (n = l(n, O(r))), e ? (o = a, i = false) : n.length >= 200 && (o = E, i = false, n = new $t(n));
            t: for (; ++u < f;) {
                var p = t[u],
                    _ = r ? r(p) : p,
                    p = e || 0 !== p ? p : 0;
                if (i && _ === _) {
                    for (var v = h; v--;)
                        if (n[v] === _) continue t;
                    s.push(p)
                } else o(n, _, e) || s.push(p)
            }
            return s
        }

        function fn(t, n) {
            var r = true;
            return go(t, function(t, e, u) {
                return r = !!n(t, e, u)
            }), r
        }

        function cn(t, n, r) {
            for (var e = -1, u = t.length; ++e < u;) {
                var o = t[e],
                    i = n(o);
                if (null != i && (f === T ? i === i && !Te(i) : r(i, f))) var f = i,
                    c = o
            }
            return c
        }

        function an(t, n) {
            var r = [];
            return go(t, function(t, e, u) {
                n(t, e, u) && r.push(t)
            }), r
        }

        function ln(t, n, r, e, u) {
            var o = -1,
                i = t.length;
            for (r || (r = Gr), u || (u = []); ++o < i;) {
                var f = t[o];
                n > 0 && r(f) ? n > 1 ? ln(f, n - 1, r, e, u) : s(u, f) : e || (u[u.length] = f)
            }
            return u
        }

        function sn(t, n) {
            return t && bo(t, n, nu)
        }

        function hn(t, n) {
            return t && xo(t, n, nu)
        }

        function pn(t, n) {
            return f(n, function(n) {
                return Me(t[n])
            })
        }

        function _n(t, n) {
            n = Qr(n, t) ? [n] : nr(n);
            for (var r = 0, e = n.length; null != t && e > r;) t = t[ue(n[r++])];
            return r && r == e ? t : T
        }

        function vn(t, n, r) {
            return n = n(t), ai(t) ? n : s(n, r(t))
        }

        function gn(t, n) {
            return t > n
        }

        function dn(t, n) {
            return wu.call(t, n) || typeof t == "object" && n in t && null === Pu(Object(t))
        }

        function yn(t, n) {
            return n in Object(t)
        }

        function bn(t, n, r) {
            for (var e = r ? a : c, u = t[0].length, o = t.length, i = o, f = Array(o), s = 1 / 0, h = []; i--;) {
                var p = t[i];
                i && n && (p = l(p, O(n))), s = Ku(p.length, s), f[i] = !r && (n || u >= 120 && p.length >= 120) ? new $t(i && p) : T
            }
            var p = t[0],
                _ = -1,
                v = f[0];
            t: for (; ++_ < u && s > h.length;) {
                var g = p[_],
                    d = n ? n(g) : g,
                    g = r || 0 !== g ? g : 0;
                if (v ? !E(v, d) : !e(h, d, r)) {
                    for (i = o; --i;) {
                        var y = f[i];
                        if (y ? !E(y, d) : !e(t[i], d, r)) continue t
                    }
                    v && v.push(d), h.push(g)
                }
            }
            return h
        }

        function xn(t, n, r) {
            var e = {};
            return sn(t, function(t, u, o) {
                n(e, r(t), u, o)
            }), e
        }

        function jn(t, n, e) {
            return Qr(n, t) || (n = nr(n), t = ee(t, n), n = le(n)), n = null == t ? t : t[ue(n)], null == n ? T : r(n, t, e)
        }

        function wn(t, n, r, e, u) {
            if (t === n) n = true;
            else if (null == t || null == n || !Ue(t) && !De(n)) n = t !== t && n !== n;
            else t: {
                var o = ai(t),
                    i = ai(n),
                    f = "[object Array]",
                    c = "[object Array]";
                o || (f = Pr(t), f = "[object Arguments]" == f ? "[object Object]" : f), i || (c = Pr(n), c = "[object Arguments]" == c ? "[object Object]" : c);
                var a = "[object Object]" == f && !C(t),
                    i = "[object Object]" == c && !C(n);
                if ((c = f == c) && !a) u || (u = new Zt), n = o || qe(t) ? Lr(t, n, wn, r, e, u) : Mr(t, n, f, wn, r, e, u);
                else {
                    if (!(2 & e) && (o = a && wu.call(t, "__wrapped__"), f = i && wu.call(n, "__wrapped__"), o || f)) {
                        t = o ? t.value() : t, n = f ? n.value() : n, u || (u = new Zt), n = wn(t, n, r, e, u);
                        break t
                    }
                    if (c) n: if (u || (u = new Zt), o = 2 & e, f = nu(t), i = f.length, c = nu(n).length, i == c || o) {
                        for (a = i; a--;) {
                            var l = f[a];
                            if (!(o ? l in n : dn(n, l))) {
                                n = false;
                                break n
                            }
                        }
                        if (c = u.get(t)) n = c == n;
                        else {
                            c = true, u.set(t, n);
                            for (var s = o; ++a < i;) {
                                var l = f[a],
                                    h = t[l],
                                    p = n[l];
                                if (r) var _ = o ? r(p, h, l, n, t, u) : r(h, p, l, t, n, u);
                                if (_ === T ? h !== p && !wn(h, p, r, e, u) : !_) {
                                    c = false;
                                    break
                                }
                                s || (s = "constructor" == l)
                            }
                            c && !s && (r = t.constructor, e = n.constructor, r != e && "constructor" in t && "constructor" in n && !(typeof r == "function" && r instanceof r && typeof e == "function" && e instanceof e) && (c = false)), u["delete"](t), n = c
                        }
                    } else n = false;
                    else n = false
                }
            }
            return n
        }

        function mn(t, n, r, e) {
            var u = r.length,
                o = u,
                i = !e;
            if (null == t) return !o;
            for (t = Object(t); u--;) {
                var f = r[u];
                if (i && f[2] ? f[1] !== t[f[0]] : !(f[0] in t)) return false
            }
            for (; ++u < o;) {
                var f = r[u],
                    c = f[0],
                    a = t[c],
                    l = f[1];
                if (i && f[2]) {
                    if (a === T && !(c in t)) return false
                } else {
                    if (f = new Zt, e) var s = e(a, l, c, t, n, f);
                    if (s === T ? !wn(l, a, e, 3, f) : !s) return false
                }
            }
            return true
        }

        function An(t) {
            return typeof t == "function" ? t : null == t ? cu : typeof t == "object" ? ai(t) ? Sn(t[0], t[1]) : In(t) : hu(t)
        }

        function On(t) {
            t = null == t ? t : Object(t);
            var n, r = [];
            for (n in t) r.push(n);
            return r
        }

        function kn(t, n) {
            return n > t
        }

        function En(t, n) {
            var r = -1,
                e = We(t) ? Array(t.length) : [];
            return go(t, function(t, u, o) {
                e[++r] = n(t, u, o)
            }), e
        }

        function In(t) {
            var n = Fr(t);
            return 1 == n.length && n[0][2] ? ne(n[0][0], n[0][1]) : function(r) {
                return r === t || mn(r, t, n)
            }
        }

        function Sn(t, n) {
            return Qr(t) && n === n && !Ue(n) ? ne(ue(t), n) : function(r) {
                var e = Xe(r, t);
                return e === T && e === n ? tu(r, t) : wn(n, e, T, 3)
            }
        }

        function Rn(t, n, r, e, o) {
            if (t !== n) {
                if (!ai(n) && !qe(n)) var i = ru(n);
                u(i || n, function(u, f) {
                    if (i && (f = u, u = n[f]), Ue(u)) {
                        o || (o = new Zt);
                        var c = f,
                            a = o,
                            l = t[c],
                            s = n[c],
                            h = a.get(s);
                        if (h) Vt(t, c, h);
                        else {
                            var h = e ? e(l, s, c + "", t, n, a) : T,
                                p = h === T;
                            p && (h = s, ai(s) || qe(s) ? ai(l) ? h = l : Be(l) ? h = cr(l) : (p = false, h = nn(s, true)) : Ne(s) || Re(s) ? Re(l) ? h = He(l) : !Ue(l) || r && Me(l) ? (p = false, h = nn(s, true)) : h = l : p = false), a.set(s, h), p && Rn(h, s, r, e, a), a["delete"](s), Vt(t, c, h)
                        }
                    } else c = e ? e(t[f], u, f + "", t, n, o) : T, c === T && (c = u), Vt(t, f, c)
                })
            }
        }

        function Wn(t, n) {
            var r = t.length;
            return r ? (n += 0 > n ? r : 0, Yr(n, r) ? t[n] : T) : void 0
        }

        function Bn(t, n, r) {
            var e = -1;
            return n = l(n.length ? n : [cu], O(Ur())), t = En(t, function(t) {
                return {
                    a: l(n, function(n) {
                        return n(t)
                    }),
                    b: ++e,
                    c: t
                }
            }), j(t, function(t, n) {
                var e;
                t: {
                    e = -1;
                    for (var u = t.a, o = n.a, i = u.length, f = r.length; ++e < i;) {
                        var c = or(u[e], o[e]);
                        if (c) {
                            e = e >= f ? c : c * ("desc" == r[e] ? -1 : 1);
                            break t
                        }
                    }
                    e = t.b - n.b
                }
                return e
            })
        }

        function Ln(t, n) {
            return t = Object(t), h(n, function(n, r) {
                return r in t && (n[r] = t[r]), n
            }, {})
        }

        function Mn(t, n) {
            for (var r = -1, e = vn(t, ru, Oo), u = e.length, o = {}; ++r < u;) {
                var i = e[r],
                    f = t[i];
                n(f, i) && (o[i] = f)
            }
            return o
        }

        function Cn(t) {
            return function(n) {
                return null == n ? T : n[t]
            }
        }

        function zn(t) {
            return function(n) {
                return _n(n, t)
            }
        }

        function Un(t, n, r, e) {
            var u = e ? y : d,
                o = -1,
                i = n.length,
                f = t;
            for (r && (f = l(t, O(r))); ++o < i;)
                for (var c = 0, a = n[o], a = r ? r(a) : a; - 1 < (c = u(f, a, c, e));) f !== t && Fu.call(f, c, 1), Fu.call(t, c, 1);
            return t
        }

        function Dn(t, n) {
            for (var r = t ? n.length : 0, e = r - 1; r--;) {
                var u = n[r];
                if (r == e || u !== o) {
                    var o = u;
                    if (Yr(u)) Fu.call(t, u, 1);
                    else if (Qr(u, t)) delete t[ue(u)];
                    else {
                        var u = nr(u),
                            i = ee(t, u);
                        null != i && delete i[ue(le(u))]
                    }
                }
            }
        }

        function Fn(t, n) {
            return t + Nu(Ju() * (n - t + 1))
        }

        function $n(t, n) {
            var r = "";
            if (!t || 1 > n || n > 9007199254740991) return r;
            do n % 2 && (r += t), (n = Nu(n / 2)) && (t += t); while (n);
            return r
        }

        function Nn(t, n, r, e) {
            n = Qr(n, t) ? [n] : nr(n);
            for (var u = -1, o = n.length, i = o - 1, f = t; null != f && ++u < o;) {
                var c = ue(n[u]);
                if (Ue(f)) {
                    var a = r;
                    if (u != i) {
                        var l = f[c],
                            a = e ? e(l, c, f) : T;
                        a === T && (a = null == l ? Yr(n[u + 1]) ? [] : {} : l)
                    }
                    Kt(f, c, a)
                }
                f = f[c]
            }
            return t
        }

        function Pn(t, n, r) {
            var e = -1,
                u = t.length;
            for (0 > n && (n = -n > u ? 0 : u + n), r = r > u ? u : r, 0 > r && (r += u), u = n > r ? 0 : r - n >>> 0, n >>>= 0, r = Array(u); ++e < u;) r[e] = t[e + n];
            return r
        }

        function Zn(t, n) {
            var r;
            return go(t, function(t, e, u) {
                return r = n(t, e, u), !r
            }), !!r
        }

        function Tn(t, n, r) {
            var e = 0,
                u = t ? t.length : e;
            if (typeof n == "number" && n === n && 2147483647 >= u) {
                for (; u > e;) {
                    var o = e + u >>> 1,
                        i = t[o];
                    null !== i && !Te(i) && (r ? n >= i : n > i) ? e = o + 1 : u = o
                }
                return u
            }
            return qn(t, n, cu, r)
        }

        function qn(t, n, r, e) {
            n = r(n);
            for (var u = 0, o = t ? t.length : 0, i = n !== n, f = null === n, c = Te(n), a = n === T; o > u;) {
                var l = Nu((u + o) / 2),
                    s = r(t[l]),
                    h = s !== T,
                    p = null === s,
                    _ = s === s,
                    v = Te(s);
                (i ? e || _ : a ? _ && (e || h) : f ? _ && h && (e || !p) : c ? _ && h && !p && (e || !v) : p || v ? 0 : e ? n >= s : n > s) ? u = l + 1: o = l
            }
            return Ku(o, 4294967294)
        }

        function Vn(t, n) {
            for (var r = -1, e = t.length, u = 0, o = []; ++r < e;) {
                var i = t[r],
                    f = n ? n(i) : i;
                if (!r || !Se(f, c)) {
                    var c = f;
                    o[u++] = 0 === i ? 0 : i
                }
            }
            return o
        }

        function Kn(t) {
            return typeof t == "number" ? t : Te(t) ? V : +t
        }

        function Gn(t) {
            if (typeof t == "string") return t;
            if (Te(t)) return vo ? vo.call(t) : "";
            var n = t + "";
            return "0" == n && 1 / t == -q ? "-0" : n
        }

        function Jn(t, n, r) {
            var e = -1,
                u = c,
                o = t.length,
                i = true,
                f = [],
                l = f;
            if (r) i = false, u = a;
            else if (o >= 200) {
                if (u = n ? null : wo(t)) return F(u);
                i = false, u = E, l = new $t
            } else l = n ? [] : f;
            t: for (; ++e < o;) {
                var s = t[e],
                    h = n ? n(s) : s,
                    s = r || 0 !== s ? s : 0;
                if (i && h === h) {
                    for (var p = l.length; p--;)
                        if (l[p] === h) continue t;
                    n && l.push(h), f.push(s)
                } else u(l, h, r) || (l !== f && l.push(h), f.push(s))
            }
            return f
        }

        function Yn(t, n, r, e) {
            for (var u = t.length, o = e ? u : -1;
                (e ? o-- : ++o < u) && n(t[o], o, t););
            return r ? Pn(t, e ? 0 : o, e ? o + 1 : u) : Pn(t, e ? o + 1 : 0, e ? u : o)
        }

        function Hn(t, n) {
            var r = t;
            return r instanceof zt && (r = r.value()), h(n, function(t, n) {
                return n.func.apply(n.thisArg, s([t], n.args))
            }, r)
        }

        function Qn(t, n, r) {
            for (var e = -1, u = t.length; ++e < u;) var o = o ? s(on(o, t[e], n, r), on(t[e], o, n, r)) : t[e];
            return o && o.length ? Jn(o, n, r) : []
        }

        function Xn(t, n, r) {
            for (var e = -1, u = t.length, o = n.length, i = {}; ++e < u;) r(i, t[e], o > e ? n[e] : T);
            return i
        }

        function tr(t) {
            return Be(t) ? t : []
        }

        function nr(t) {
            return ai(t) ? t : Eo(t)
        }

        function rr(t, n, r) {
            var e = t.length;
            return r = r === T ? e : r, !n && r >= e ? t : Pn(t, n, r)
        }

        function er(t, n) {
            if (n) return t.slice();
            var r = new t.constructor(t.length);
            return t.copy(r), r
        }

        function ur(t) {
            var n = new t.constructor(t.byteLength);
            return new Wu(n).set(new Wu(t)), n
        }

        function or(t, n) {
            if (t !== n) {
                var r = t !== T,
                    e = null === t,
                    u = t === t,
                    o = Te(t),
                    i = n !== T,
                    f = null === n,
                    c = n === n,
                    a = Te(n);
                if (!f && !a && !o && t > n || o && i && c && !f && !a || e && i && c || !r && c || !u) return 1;
                if (!e && !o && !a && n > t || a && r && u && !e && !o || f && r && u || !i && u || !c) return -1
            }
            return 0
        }

        function ir(t, n, r, e) {
            var u = -1,
                o = t.length,
                i = r.length,
                f = -1,
                c = n.length,
                a = Vu(o - i, 0),
                l = Array(c + a);
            for (e = !e; ++f < c;) l[f] = n[f];
            for (; ++u < i;)(e || o > u) && (l[r[u]] = t[u]);
            for (; a--;) l[f++] = t[u++];
            return l
        }

        function fr(t, n, r, e) {
            var u = -1,
                o = t.length,
                i = -1,
                f = r.length,
                c = -1,
                a = n.length,
                l = Vu(o - f, 0),
                s = Array(l + a);
            for (e = !e; ++u < l;) s[u] = t[u];
            for (l = u; ++c < a;) s[l + c] = n[c];
            for (; ++i < f;)(e || o > u) && (s[l + r[i]] = t[u++]);
            return s
        }

        function cr(t, n) {
            var r = -1,
                e = t.length;
            for (n || (n = Array(e)); ++r < e;) n[r] = t[r];
            return n
        }

        function ar(t, n, r, e) {
            r || (r = {});
            for (var u = -1, o = n.length; ++u < o;) {
                var i = n[u],
                    f = e ? e(r[i], t[i], i, r, t) : t[i];
                Kt(r, i, f)
            }
            return r
        }

        function lr(t, n) {
            return ar(t, Nr(t), n)
        }

        function sr(t, n) {
            return function(r, u) {
                var o = ai(r) ? e : Ht,
                    i = n ? n() : {};
                return o(r, t, Ur(u), i)
            }
        }

        function hr(t) {
            return Ie(function(n, r) {
                var e = -1,
                    u = r.length,
                    o = u > 1 ? r[u - 1] : T,
                    i = u > 2 ? r[2] : T,
                    o = t.length > 3 && typeof o == "function" ? (u--, o) : T;
                for (i && Hr(r[0], r[1], i) && (o = 3 > u ? T : o, u = 1), n = Object(n); ++e < u;)(i = r[e]) && t(n, i, e, o);
                return n
            })
        }

        function pr(t, n) {
            return function(r, e) {
                if (null == r) return r;
                if (!We(r)) return t(r, e);
                for (var u = r.length, o = n ? u : -1, i = Object(r);
                    (n ? o-- : ++o < u) && false !== e(i[o], o, i););
                return r
            }
        }

        function _r(t) {
            return function(n, r, e) {
                var u = -1,
                    o = Object(n);
                e = e(n);
                for (var i = e.length; i--;) {
                    var f = e[t ? i : ++u];
                    if (false === r(o[f], f, o)) break
                }
                return n
            }
        }

        function vr(t, n, r) {
            function e() {
                return (this && this !== Jt && this instanceof e ? o : t).apply(u ? r : this, arguments)
            }
            var u = 1 & n,
                o = yr(t);
            return e
        }

        function gr(t) {
            return function(n) {
                n = Qe(n);
                var r = Wt.test(n) ? n.match(St) : T,
                    e = r ? r[0] : n.charAt(0);
                return n = r ? rr(r, 1).join("") : n.slice(1), e[t]() + n
            }
        }

        function dr(t) {
            return function(n) {
                return h(iu(ou(n).replace(Et, "")), t, "")
            }
        }

        function yr(t) {
            return function() {
                var n = arguments;
                switch (n.length) {
                    case 0:
                        return new t;
                    case 1:
                        return new t(n[0]);
                    case 2:
                        return new t(n[0], n[1]);
                    case 3:
                        return new t(n[0], n[1], n[2]);
                    case 4:
                        return new t(n[0], n[1], n[2], n[3]);
                    case 5:
                        return new t(n[0], n[1], n[2], n[3], n[4]);
                    case 6:
                        return new t(n[0], n[1], n[2], n[3], n[4], n[5]);
                    case 7:
                        return new t(n[0], n[1], n[2], n[3], n[4], n[5], n[6])
                }
                var r = en(t.prototype),
                    n = t.apply(r, n);
                return Ue(n) ? n : r
            }
        }

        function br(t, n, e) {
            function u() {
                for (var i = arguments.length, f = Array(i), c = i, a = zr(u); c--;) f[c] = arguments[c];
                return c = 3 > i && f[0] !== a && f[i - 1] !== a ? [] : D(f, a), i -= c.length, e > i ? Sr(t, n, jr, u.placeholder, T, f, c, T, T, e - i) : r(this && this !== Jt && this instanceof u ? o : t, this, f)
            }
            var o = yr(t);
            return u
        }

        function xr(t) {
            return Ie(function(n) {
                n = ln(n, 1);
                var r = n.length,
                    e = r,
                    u = kt.prototype.thru;
                for (t && n.reverse(); e--;) {
                    var o = n[e];
                    if (typeof o != "function") throw new du("Expected a function");
                    if (u && !i && "wrapper" == Cr(o)) var i = new kt([], true)
                }
                for (e = i ? e : r; ++e < r;) var o = n[e],
                    u = Cr(o),
                    f = "wrapper" == u ? mo(o) : T,
                    i = f && Xr(f[0]) && 424 == f[1] && !f[4].length && 1 == f[9] ? i[Cr(f[0])].apply(i, f[3]) : 1 == o.length && Xr(o) ? i[u]() : i.thru(o);
                return function() {
                    var t = arguments,
                        e = t[0];
                    if (i && 1 == t.length && ai(e) && e.length >= 200) return i.plant(e).value();
                    for (var u = 0, t = r ? n[u].apply(this, t) : e; ++u < r;) t = n[u].call(this, t);
                    return t
                }
            })
        }

        function jr(t, n, r, e, u, o, i, f, c, a) {
            function l() {
                for (var d = arguments.length, y = Array(d), b = d; b--;) y[b] = arguments[b];
                if (_) {
                    var x, j = zr(l),
                        b = y.length;
                    for (x = 0; b--;) y[b] === j && x++
                }
                if (e && (y = ir(y, e, u, _)), o && (y = fr(y, o, i, _)), d -= x, _ && a > d) return j = D(y, j), Sr(t, n, jr, l.placeholder, r, y, j, f, c, a - d);
                if (j = h ? r : this, b = p ? j[t] : t, d = y.length, f) {
                    x = y.length;
                    for (var w = Ku(f.length, x), m = cr(y); w--;) {
                        var A = f[w];
                        y[w] = Yr(A, x) ? m[A] : T
                    }
                } else v && d > 1 && y.reverse();
                return s && d > c && (y.length = c), this && this !== Jt && this instanceof l && (b = g || yr(b)), b.apply(j, y)
            }
            var s = 128 & n,
                h = 1 & n,
                p = 2 & n,
                _ = 24 & n,
                v = 512 & n,
                g = p ? T : yr(t);
            return l
        }

        function wr(t, n) {
            return function(r, e) {
                return xn(r, t, n(e))
            }
        }

        function mr(t) {
            return function(n, r) {
                var e;
                if (n === T && r === T) return 0;
                if (n !== T && (e = n), r !== T) {
                    if (e === T) return r;
                    typeof n == "string" || typeof r == "string" ? (n = Gn(n), r = Gn(r)) : (n = Kn(n), r = Kn(r)), e = t(n, r)
                }
                return e
            }
        }

        function Ar(t) {
            return Ie(function(n) {
                return n = 1 == n.length && ai(n[0]) ? l(n[0], O(Ur())) : l(ln(n, 1, Jr), O(Ur())), Ie(function(e) {
                    var u = this;
                    return t(n, function(t) {
                        return r(t, u, e)
                    })
                })
            })
        }

        function Or(t, n) {
            n = n === T ? " " : Gn(n);
            var r = n.length;
            return 2 > r ? r ? $n(n, t) : n : (r = $n(n, $u(t / N(n))), Wt.test(n) ? rr(r.match(St), 0, t).join("") : r.slice(0, t))
        }

        function kr(t, n, e, u) {
            function o() {
                for (var n = -1, c = arguments.length, a = -1, l = u.length, s = Array(l + c), h = this && this !== Jt && this instanceof o ? f : t; ++a < l;) s[a] = u[a];
                for (; c--;) s[a++] = arguments[++n];
                return r(h, i ? e : this, s)
            }
            var i = 1 & n,
                f = yr(t);
            return o
        }

        function Er(t) {
            return function(n, r, e) {
                e && typeof e != "number" && Hr(n, r, e) && (r = e = T), n = Ye(n), n = n === n ? n : 0, r === T ? (r = n, n = 0) : r = Ye(r) || 0, e = e === T ? r > n ? 1 : -1 : Ye(e) || 0;
                var u = -1;
                r = Vu($u((r - n) / (e || 1)), 0);
                for (var o = Array(r); r--;) o[t ? r : ++u] = n, n += e;
                return o
            }
        }

        function Ir(t) {
            return function(n, r) {
                return typeof n == "string" && typeof r == "string" || (n = Ye(n), r = Ye(r)), t(n, r)
            }
        }

        function Sr(t, n, r, e, u, o, i, f, c, a) {
            var l = 8 & n,
                s = l ? i : T;
            i = l ? T : i;
            var h = l ? o : T;
            return o = l ? T : o, n = (n | (l ? 32 : 64)) & ~(l ? 64 : 32), 4 & n || (n &= -4), n = [t, n, u, h, s, o, i, f, c, a], r = r.apply(T, n), Xr(t) && ko(r, n), r.placeholder = e, r
        }

        function Rr(t) {
            var n = vu[t];
            return function(t, r) {
                if (t = Ye(t), r = Ge(r)) {
                    var e = (Qe(t) + "e").split("e"),
                        e = n(e[0] + "e" + (+e[1] + r)),
                        e = (Qe(e) + "e").split("e");
                    return +(e[0] + "e" + (+e[1] - r))
                }
                return n(t)
            }
        }

        function Wr(t) {
            return function(n) {
                var r = Pr(n);
                return "[object Map]" == r ? U(n) : "[object Set]" == r ? $(n) : A(n, t(n))
            }
        }

        function Br(t, n, r, e, u, o, i, f) {
            var c = 2 & n;
            if (!c && typeof t != "function") throw new du("Expected a function");
            var a = e ? e.length : 0;
            if (a || (n &= -97, e = u = T), i = i === T ? i : Vu(Ge(i), 0), f = f === T ? f : Ge(f), a -= u ? u.length : 0, 64 & n) {
                var l = e,
                    s = u;
                e = u = T
            }
            var h = c ? T : mo(t);
            return o = [t, n, r, e, u, l, s, o, i, f], h && (r = o[1], t = h[1], n = r | t, e = 128 == t && 8 == r || 128 == t && 256 == r && h[8] >= o[7].length || 384 == t && h[8] >= h[7].length && 8 == r, 131 > n || e) && (1 & t && (o[2] = h[2], n |= 1 & r ? 0 : 4), (r = h[3]) && (e = o[3], o[3] = e ? ir(e, r, h[4]) : r, o[4] = e ? D(o[3], "__lodash_placeholder__") : h[4]), (r = h[5]) && (e = o[5], o[5] = e ? fr(e, r, h[6]) : r, o[6] = e ? D(o[5], "__lodash_placeholder__") : h[6]), (r = h[7]) && (o[7] = r), 128 & t && (o[8] = null == o[8] ? h[8] : Ku(o[8], h[8])), null == o[9] && (o[9] = h[9]), o[0] = h[0], o[1] = n), t = o[0], n = o[1], r = o[2], e = o[3], u = o[4], f = o[9] = null == o[9] ? c ? 0 : t.length : Vu(o[9] - a, 0), !f && 24 & n && (n &= -25), (h ? jo : ko)(n && 1 != n ? 8 == n || 16 == n ? br(t, n, f) : 32 != n && 33 != n || u.length ? jr.apply(T, o) : kr(t, n, r, e) : vr(t, n, r), o)
        }

        function Lr(t, n, r, e, u, o) {
            var i = 2 & u,
                f = t.length,
                c = n.length;
            if (f != c && !(i && c > f)) return false;
            if (c = o.get(t)) return c == n;
            var c = -1,
                a = true,
                l = 1 & u ? new $t : T;
            for (o.set(t, n); ++c < f;) {
                var s = t[c],
                    h = n[c];
                if (e) var p = i ? e(h, s, c, n, t, o) : e(s, h, c, t, n, o);
                if (p !== T) {
                    if (p) continue;
                    a = false;
                    break
                }
                if (l) {
                    if (!_(n, function(t, n) {
                            return l.has(n) || s !== t && !r(s, t, e, u, o) ? void 0 : l.add(n)
                        })) {
                        a = false;
                        break
                    }
                } else if (s !== h && !r(s, h, e, u, o)) {
                    a = false;
                    break
                }
            }
            return o["delete"](t), a
        }

        function Mr(t, n, r, e, u, o, i) {
            switch (r) {
                case "[object DataView]":
                    if (t.byteLength != n.byteLength || t.byteOffset != n.byteOffset) break;
                    t = t.buffer, n = n.buffer;
                case "[object ArrayBuffer]":
                    if (t.byteLength != n.byteLength || !e(new Wu(t), new Wu(n))) break;
                    return true;
                case "[object Boolean]":
                case "[object Date]":
                    return +t == +n;
                case "[object Error]":
                    return t.name == n.name && t.message == n.message;
                case "[object Number]":
                    return t != +t ? n != +n : t == +n;
                case "[object RegExp]":
                case "[object String]":
                    return t == n + "";
                case "[object Map]":
                    var f = U;
                case "[object Set]":
                    if (f || (f = F), t.size != n.size && !(2 & o)) break;
                    return (r = i.get(t)) ? r == n : (o |= 1, i.set(t, n), Lr(f(t), f(n), e, u, o, i));
                case "[object Symbol]":
                    if (_o) return _o.call(t) == _o.call(n)
            }
            return false
        }

        function Cr(t) {
            for (var n = t.name + "", r = fo[n], e = wu.call(fo, n) ? r.length : 0; e--;) {
                var u = r[e],
                    o = u.func;
                if (null == o || o == t) return u.name
            }
            return n
        }

        function zr(t) {
            return (wu.call(At, "placeholder") ? At : t).placeholder
        }

        function Ur() {
            var t = At.iteratee || au,
                t = t === au ? An : t;
            return arguments.length ? t(arguments[0], arguments[1]) : t
        }

        function Dr(t, n) {
            var r = t.__data__,
                e = typeof n;
            return ("string" == e || "number" == e || "symbol" == e || "boolean" == e ? "__proto__" !== n : null === n) ? r[typeof n == "string" ? "string" : "hash"] : r.map
        }

        function Fr(t) {
            t = Ei(t);
            for (var n = t.length; n--;) {
                var r = t[n][1];
                t[n][2] = r === r && !Ue(r)
            }
            return t
        }

        function $r(t, n) {
            var r = t[n];
            return Fe(r) ? r : T
        }

        function Nr(t) {
            return Mu(Object(t))
        }

        function Pr(t) {
            return Ou.call(t)
        }

        function Zr(t, n, r) {
            n = Qr(n, t) ? [n] : nr(n);
            for (var e, u = -1, o = n.length; ++u < o;) {
                var i = ue(n[u]);
                if (!(e = null != t && r(t, i))) break;
                t = t[i]
            }
            return e ? e : (o = t ? t.length : 0, !!o && ze(o) && Yr(i, o) && (ai(t) || Ze(t) || Re(t)))
        }

        function Tr(t) {
            var n = t.length,
                r = t.constructor(n);
            return n && "string" == typeof t[0] && wu.call(t, "index") && (r.index = t.index, r.input = t.input), r
        }

        function qr(t) {
            return typeof t.constructor != "function" || te(t) ? {} : en(Pu(Object(t)))
        }

        function Vr(r, e, u, o) {
            var i = r.constructor;
            switch (e) {
                case "[object ArrayBuffer]":
                    return ur(r);
                case "[object Boolean]":
                case "[object Date]":
                    return new i(+r);
                case "[object DataView]":
                    return e = o ? ur(r.buffer) : r.buffer, new r.constructor(e, r.byteOffset, r.byteLength);
                case "[object Float32Array]":
                case "[object Float64Array]":
                case "[object Int8Array]":
                case "[object Int16Array]":
                case "[object Int32Array]":
                case "[object Uint8Array]":
                case "[object Uint8ClampedArray]":
                case "[object Uint16Array]":
                case "[object Uint32Array]":
                    return e = o ? ur(r.buffer) : r.buffer, new r.constructor(e, r.byteOffset, r.length);
                case "[object Map]":
                    return e = o ? u(U(r), true) : U(r), h(e, t, new r.constructor);
                case "[object Number]":
                case "[object String]":
                    return new i(r);
                case "[object RegExp]":
                    return e = new r.constructor(r.source, _t.exec(r)), e.lastIndex = r.lastIndex, e;
                case "[object Set]":
                    return e = o ? u(F(r), true) : F(r), h(e, n, new r.constructor);
                case "[object Symbol]":
                    return _o ? Object(_o.call(r)) : {}
            }
        }

        function Kr(t) {
            var n = t ? t.length : T;
            return ze(n) && (ai(t) || Ze(t) || Re(t)) ? m(n, String) : null
        }

        function Gr(t) {
            return ai(t) || Re(t)
        }

        function Jr(t) {
            return ai(t) && !(2 == t.length && !Me(t[0]))
        }

        function Yr(t, n) {
            return n = null == n ? 9007199254740991 : n, !!n && (typeof t == "number" || xt.test(t)) && t > -1 && 0 == t % 1 && n > t
        }

        function Hr(t, n, r) {
            if (!Ue(r)) return false;
            var e = typeof n;
            return ("number" == e ? We(r) && Yr(n, r.length) : "string" == e && n in r) ? Se(r[n], t) : false
        }

        function Qr(t, n) {
            if (ai(t)) return false;
            var r = typeof t;
            return "number" == r || "symbol" == r || "boolean" == r || null == t || Te(t) ? true : ut.test(t) || !et.test(t) || null != n && t in Object(n)
        }

        function Xr(t) {
            var n = Cr(t),
                r = At[n];
            return typeof r == "function" && n in zt.prototype ? t === r ? true : (n = mo(r), !!n && t === n[0]) : false
        }

        function te(t) {
            var n = t && t.constructor;
            return t === (typeof n == "function" && n.prototype || bu)
        }

        function ne(t, n) {
            return function(r) {
                return null == r ? false : r[t] === n && (n !== T || t in Object(r))
            }
        }

        function re(t, n, r, e, u, o) {
            return Ue(t) && Ue(n) && Rn(t, n, T, re, o.set(n, t)), t
        }

        function ee(t, n) {
            return 1 == n.length ? t : _n(t, Pn(n, 0, -1))
        }

        function ue(t) {
            if (typeof t == "string" || Te(t)) return t;
            var n = t + "";
            return "0" == n && 1 / t == -q ? "-0" : n
        }

        function oe(t) {
            if (null != t) {
                try {
                    return ju.call(t)
                } catch (n) {}
                return t + ""
            }
            return ""
        }

        function ie(t) {
            if (t instanceof zt) return t.clone();
            var n = new kt(t.__wrapped__, t.__chain__);
            return n.__actions__ = cr(t.__actions__), n.__index__ = t.__index__, n.__values__ = t.__values__, n
        }

        function fe(t, n, r) {
            var e = t ? t.length : 0;
            return e ? (n = r || n === T ? 1 : Ge(n), Pn(t, 0 > n ? 0 : n, e)) : []
        }

        function ce(t, n, r) {
            var e = t ? t.length : 0;
            return e ? (n = r || n === T ? 1 : Ge(n), n = e - n, Pn(t, 0, 0 > n ? 0 : n)) : []
        }

        function ae(t) {
            return t && t.length ? t[0] : T
        }

        function le(t) {
            var n = t ? t.length : 0;
            return n ? t[n - 1] : T
        }

        function se(t, n) {
            return t && t.length && n && n.length ? Un(t, n) : t
        }

        function he(t) {
            return t ? Hu.call(t) : t
        }

        function pe(t) {
            if (!t || !t.length) return [];
            var n = 0;
            return t = f(t, function(t) {
                return Be(t) ? (n = Vu(t.length, n), true) : void 0
            }), m(n, function(n) {
                return l(t, Cn(n))
            })
        }

        function _e(t, n) {
            if (!t || !t.length) return [];
            var e = pe(t);
            return null == n ? e : l(e, function(t) {
                return r(n, T, t)
            })
        }

        function ve(t) {
            return t = At(t), t.__chain__ = true, t
        }

        function ge(t, n) {
            return n(t)
        }

        function de() {
            return this;
        }

        function ye(t, n) {
            return (ai(t) ? u : go)(t, Ur(n, 3))
        }

        function be(t, n) {
            return (ai(t) ? o : yo)(t, Ur(n, 3))
        }

        function xe(t, n) {
            return (ai(t) ? l : En)(t, Ur(n, 3))
        }

        function je(t, n, r) {
            var e = -1,
                u = Ve(t),
                o = u.length,
                i = o - 1;
            for (n = (r ? Hr(t, n, r) : n === T) ? 1 : tn(Ge(n), 0, o); ++e < n;) t = Fn(e, i), r = u[t], u[t] = u[e], u[e] = r;
            return u.length = n, u
        }

        function we(t, n, r) {
            return n = r ? T : n, n = t && null == n ? t.length : n, Br(t, 128, T, T, T, T, n)
        }

        function me(t, n) {
            var r;
            if (typeof n != "function") throw new du("Expected a function");
            return t = Ge(t),
                function() {
                    return 0 < --t && (r = n.apply(this, arguments)), 1 >= t && (n = T), r
                }
        }

        function Ae(t, n, r) {
            return n = r ? T : n, t = Br(t, 8, T, T, T, T, T, n), t.placeholder = Ae.placeholder, t
        }

        function Oe(t, n, r) {
            return n = r ? T : n, t = Br(t, 16, T, T, T, T, T, n), t.placeholder = Oe.placeholder, t
        }

        function ke(t, n, r) {
            function e(n) {
                var r = c,
                    e = a;
                return c = a = T, _ = n, s = t.apply(e, r)
            }

            function u(t) {
                var r = t - p;
                return t -= _, !p || r >= n || 0 > r || g && t >= l
            }

            function o() {
                var t = Qo();
                if (u(t)) return i(t);
                var r;
                r = t - _, t = n - (t - p), r = g ? Ku(t, l - r) : t, h = Du(o, r)
            }

            function i(t) {
                return Bu(h), h = T, d && c ? e(t) : (c = a = T, s)
            }

            function f() {
                var t = Qo(),
                    r = u(t);
                if (c = arguments, a = this, p = t, r) {
                    if (h === T) return _ = t = p, h = Du(o, n), v ? e(t) : s;
                    if (g) return Bu(h), h = Du(o, n), e(p)
                }
                return h === T && (h = Du(o, n)), s
            }
            var c, a, l, s, h, p = 0,
                _ = 0,
                v = false,
                g = false,
                d = true;
            if (typeof t != "function") throw new du("Expected a function");
            return n = Ye(n) || 0, Ue(r) && (v = !!r.leading, l = (g = "maxWait" in r) ? Vu(Ye(r.maxWait) || 0, n) : l, d = "trailing" in r ? !!r.trailing : d), f.cancel = function() {
                h !== T && Bu(h), p = _ = 0, c = a = h = T
            }, f.flush = function() {
                return h === T ? s : i(Qo())
            }, f
        }

        function Ee(t, n) {
            function r() {
                var e = arguments,
                    u = n ? n.apply(this, e) : e[0],
                    o = r.cache;
                return o.has(u) ? o.get(u) : (e = t.apply(this, e), r.cache = o.set(u, e), e)
            }
            if (typeof t != "function" || n && typeof n != "function") throw new du("Expected a function");
            return r.cache = new(Ee.Cache || Ft), r
        }

        function Ie(t, n) {
            if (typeof t != "function") throw new du("Expected a function");
            return n = Vu(n === T ? t.length - 1 : Ge(n), 0),
                function() {
                    for (var e = arguments, u = -1, o = Vu(e.length - n, 0), i = Array(o); ++u < o;) i[u] = e[n + u];
                    switch (n) {
                        case 0:
                            return t.call(this, i);
                        case 1:
                            return t.call(this, e[0], i);
                        case 2:
                            return t.call(this, e[0], e[1], i)
                    }
                    for (o = Array(n + 1), u = -1; ++u < n;) o[u] = e[u];
                    return o[n] = i, r(t, this, o)
                }
        }

        function Se(t, n) {
            return t === n || t !== t && n !== n
        }

        function Re(t) {
            return Be(t) && wu.call(t, "callee") && (!Uu.call(t, "callee") || "[object Arguments]" == Ou.call(t))
        }

        function We(t) {
            return null != t && ze(Ao(t)) && !Me(t)
        }

        function Be(t) {
            return De(t) && We(t)
        }

        function Le(t) {
            return De(t) ? "[object Error]" == Ou.call(t) || typeof t.message == "string" && typeof t.name == "string" : false
        }

        function Me(t) {
            return t = Ue(t) ? Ou.call(t) : "", "[object Function]" == t || "[object GeneratorFunction]" == t
        }

        function Ce(t) {
            return typeof t == "number" && t == Ge(t)
        }

        function ze(t) {
            return typeof t == "number" && t > -1 && 0 == t % 1 && 9007199254740991 >= t
        }

        function Ue(t) {
            var n = typeof t;
            return !!t && ("object" == n || "function" == n)
        }

        function De(t) {
            return !!t && typeof t == "object"
        }

        function Fe(t) {
            return Ue(t) ? (Me(t) || C(t) ? Eu : yt).test(oe(t)) : false
        }

        function $e(t) {
            return typeof t == "number" || De(t) && "[object Number]" == Ou.call(t)
        }

        function Ne(t) {
            return !De(t) || "[object Object]" != Ou.call(t) || C(t) ? false : (t = Pu(Object(t)), null === t ? true : (t = wu.call(t, "constructor") && t.constructor, typeof t == "function" && t instanceof t && ju.call(t) == Au))
        }

        function Pe(t) {
            return Ue(t) && "[object RegExp]" == Ou.call(t)
        }

        function Ze(t) {
            return typeof t == "string" || !ai(t) && De(t) && "[object String]" == Ou.call(t)
        }

        function Te(t) {
            return typeof t == "symbol" || De(t) && "[object Symbol]" == Ou.call(t)
        }

        function qe(t) {
            return De(t) && ze(t.length) && !!Mt[Ou.call(t)]
        }

        function Ve(t) {
            if (!t) return [];
            if (We(t)) return Ze(t) ? t.match(St) : cr(t);
            if (Cu && t[Cu]) return z(t[Cu]());
            var n = Pr(t);
            return ("[object Map]" == n ? U : "[object Set]" == n ? F : eu)(t)
        }

        function Ke(t) {
            return t ? (t = Ye(t), t === q || t === -q ? 1.7976931348623157e308 * (0 > t ? -1 : 1) : t === t ? t : 0) : 0 === t ? t : 0
        }

        function Ge(t) {
            t = Ke(t);
            var n = t % 1;
            return t === t ? n ? t - n : t : 0
        }

        function Je(t) {
            return t ? tn(Ge(t), 0, 4294967295) : 0
        }

        function Ye(t) {
            if (typeof t == "number") return t;
            if (Te(t)) return V;
            if (Ue(t) && (t = Me(t.valueOf) ? t.valueOf() : t, t = Ue(t) ? t + "" : t), typeof t != "string") return 0 === t ? t : +t;
            t = t.replace(ct, "");
            var n = dt.test(t);
            return n || bt.test(t) ? Pt(t.slice(2), n ? 2 : 8) : gt.test(t) ? V : +t
        }

        function He(t) {
            return ar(t, ru(t))
        }

        function Qe(t) {
            return null == t ? "" : Gn(t)
        }

        function Xe(t, n, r) {
            return t = null == t ? T : _n(t, n), t === T ? r : t
        }

        function tu(t, n) {
            return null != t && Zr(t, n, yn)
        }

        function nu(t) {
            var n = te(t);
            if (!n && !We(t)) return qu(Object(t));
            var r, e = Kr(t),
                u = !!e,
                e = e || [],
                o = e.length;
            for (r in t) !dn(t, r) || u && ("length" == r || Yr(r, o)) || n && "constructor" == r || e.push(r);
            return e
        }

        function ru(t) {
            for (var n = -1, r = te(t), e = On(t), u = e.length, o = Kr(t), i = !!o, o = o || [], f = o.length; ++n < u;) {
                var c = e[n];
                i && ("length" == c || Yr(c, f)) || "constructor" == c && (r || !wu.call(t, c)) || o.push(c)
            }
            return o
        }

        function eu(t) {
            return t ? k(t, nu(t)) : []
        }

        function uu(t) {
            return zi(Qe(t).toLowerCase())
        }

        function ou(t) {
            return (t = Qe(t)) && t.replace(jt, W).replace(It, "")
        }

        function iu(t, n, r) {
            return t = Qe(t), n = r ? T : n, n === T && (n = Bt.test(t) ? Rt : st), t.match(n) || []
        }

        function fu(t) {
            return function() {
                return t
            }
        }

        function cu(t) {
            return t
        }

        function au(t) {
            return An(typeof t == "function" ? t : nn(t, true))
        }

        function lu(t, n, r) {
            var e = nu(n),
                o = pn(n, e);
            null != r || Ue(n) && (o.length || !e.length) || (r = n, n = t, t = this, o = pn(n, nu(n)));
            var i = !(Ue(r) && "chain" in r && !r.chain),
                f = Me(t);
            return u(o, function(r) {
                var e = n[r];
                t[r] = e, f && (t.prototype[r] = function() {
                    var n = this.__chain__;
                    if (i || n) {
                        var r = t(this.__wrapped__);
                        return (r.__actions__ = cr(this.__actions__)).push({
                            func: e,
                            args: arguments,
                            thisArg: t
                        }), r.__chain__ = n, r
                    }
                    return e.apply(t, s([this.value()], arguments))
                })
            }), t
        }

        function su() {}

        function hu(t) {
            return Qr(t) ? Cn(ue(t)) : zn(t)
        }
        R = R ? Yt.defaults({}, R, Yt.pick(Jt, Lt)) : Jt;
        var pu = R.Date,
            _u = R.Error,
            vu = R.Math,
            gu = R.RegExp,
            du = R.TypeError,
            yu = R.Array.prototype,
            bu = R.Object.prototype,
            xu = R.String.prototype,
            ju = R.Function.prototype.toString,
            wu = bu.hasOwnProperty,
            mu = 0,
            Au = ju.call(Object),
            Ou = bu.toString,
            ku = Jt._,
            Eu = gu("^" + ju.call(wu).replace(it, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"),
            Iu = qt ? R.Buffer : T,
            Su = R.Reflect,
            Ru = R.Symbol,
            Wu = R.Uint8Array,
            Bu = R.clearTimeout,
            Lu = Su ? Su.f : T,
            Mu = Object.getOwnPropertySymbols,
            Cu = typeof(Cu = Ru && Ru.iterator) == "symbol" ? Cu : T,
            zu = Object.create,
            Uu = bu.propertyIsEnumerable,
            Du = R.setTimeout,
            Fu = yu.splice,
            $u = vu.ceil,
            Nu = vu.floor,
            Pu = Object.getPrototypeOf,
            Zu = R.isFinite,
            Tu = yu.join,
            qu = Object.keys,
            Vu = vu.max,
            Ku = vu.min,
            Gu = R.parseInt,
            Ju = vu.random,
            Yu = xu.replace,
            Hu = yu.reverse,
            Qu = xu.split,
            Xu = $r(R, "DataView"),
            to = $r(R, "Map"),
            no = $r(R, "Promise"),
            ro = $r(R, "Set"),
            eo = $r(R, "WeakMap"),
            uo = $r(Object, "create"),
            oo = eo && new eo,
            io = !Uu.call({
                valueOf: 1
            }, "valueOf"),
            fo = {},
            co = oe(Xu),
            ao = oe(to),
            lo = oe(no),
            so = oe(ro),
            ho = oe(eo),
            po = Ru ? Ru.prototype : T,
            _o = po ? po.valueOf : T,
            vo = po ? po.toString : T;
        At.templateSettings = {
            escape: tt,
            evaluate: nt,
            interpolate: rt,
            variable: "",
            imports: {
                _: At
            }
        }, At.prototype = Ot.prototype, At.prototype.constructor = At, kt.prototype = en(Ot.prototype), kt.prototype.constructor = kt, zt.prototype = en(Ot.prototype), zt.prototype.constructor = zt, Ut.prototype.clear = function() {
            this.__data__ = uo ? uo(null) : {}
        }, Ut.prototype["delete"] = function(t) {
            return this.has(t) && delete this.__data__[t]
        }, Ut.prototype.get = function(t) {
            var n = this.__data__;
            return uo ? (t = n[t], "__lodash_hash_undefined__" === t ? T : t) : wu.call(n, t) ? n[t] : T
        }, Ut.prototype.has = function(t) {
            var n = this.__data__;
            return uo ? n[t] !== T : wu.call(n, t)
        }, Ut.prototype.set = function(t, n) {
            return this.__data__[t] = uo && n === T ? "__lodash_hash_undefined__" : n, this
        }, Dt.prototype.clear = function() {
            this.__data__ = []
        }, Dt.prototype["delete"] = function(t) {
            var n = this.__data__;
            return t = Gt(n, t), 0 > t ? false : (t == n.length - 1 ? n.pop() : Fu.call(n, t, 1), true)
        }, Dt.prototype.get = function(t) {
            var n = this.__data__;
            return t = Gt(n, t), 0 > t ? T : n[t][1]
        }, Dt.prototype.has = function(t) {
            return -1 < Gt(this.__data__, t)
        }, Dt.prototype.set = function(t, n) {
            var r = this.__data__,
                e = Gt(r, t);
            return 0 > e ? r.push([t, n]) : r[e][1] = n, this
        }, Ft.prototype.clear = function() {
            this.__data__ = {
                hash: new Ut,
                map: new(to || Dt),
                string: new Ut
            }
        }, Ft.prototype["delete"] = function(t) {
            return Dr(this, t)["delete"](t)
        }, Ft.prototype.get = function(t) {
            return Dr(this, t).get(t)
        }, Ft.prototype.has = function(t) {
            return Dr(this, t).has(t)
        }, Ft.prototype.set = function(t, n) {
            return Dr(this, t).set(t, n), this
        }, $t.prototype.add = $t.prototype.push = function(t) {
            return this.__data__.set(t, "__lodash_hash_undefined__"), this
        }, $t.prototype.has = function(t) {
            return this.__data__.has(t)
        }, Zt.prototype.clear = function() {
            this.__data__ = new Dt
        }, Zt.prototype["delete"] = function(t) {
            return this.__data__["delete"](t)
        }, Zt.prototype.get = function(t) {
            return this.__data__.get(t)
        }, Zt.prototype.has = function(t) {
            return this.__data__.has(t)
        }, Zt.prototype.set = function(t, n) {
            var r = this.__data__;
            return r instanceof Dt && 200 == r.__data__.length && (r = this.__data__ = new Ft(r.__data__)), r.set(t, n), this
        };
        var go = pr(sn),
            yo = pr(hn, true),
            bo = _r(),
            xo = _r(true);
        Lu && !Uu.call({
            valueOf: 1
        }, "valueOf") && (On = function(t) {
            return z(Lu(t))
        });
        var jo = oo ? function(t, n) {
                return oo.set(t, n), t
            } : cu,
            wo = ro && 1 / F(new ro([, -0]))[1] == q ? function(t) {
                return new ro(t)
            } : su,
            mo = oo ? function(t) {
                return oo.get(t)
            } : su,
            Ao = Cn("length");
        Mu || (Nr = function() {
            return []
        });
        var Oo = Mu ? function(t) {
            for (var n = []; t;) s(n, Nr(t)), t = Pu(Object(t));
            return n
        } : Nr;
        (Xu && "[object DataView]" != Pr(new Xu(new ArrayBuffer(1))) || to && "[object Map]" != Pr(new to) || no && "[object Promise]" != Pr(no.resolve()) || ro && "[object Set]" != Pr(new ro) || eo && "[object WeakMap]" != Pr(new eo)) && (Pr = function(t) {
            var n = Ou.call(t);
            if (t = (t = "[object Object]" == n ? t.constructor : T) ? oe(t) : T) switch (t) {
                case co:
                    return "[object DataView]";
                case ao:
                    return "[object Map]";
                case lo:
                    return "[object Promise]";
                case so:
                    return "[object Set]";
                case ho:
                    return "[object WeakMap]"
            }
            return n
        });
        var ko = function() {
                var t = 0,
                    n = 0;
                return function(r, e) {
                    var u = Qo(),
                        o = 16 - (u - n);
                    if (n = u, o > 0) {
                        if (150 <= ++t) return r
                    } else t = 0;
                    return jo(r, e)
                }
            }(),
            Eo = Ee(function(t) {
                var n = [];
                return Qe(t).replace(ot, function(t, r, e, u) {
                    n.push(e ? u.replace(ht, "$1") : r || t)
                }), n
            }),
            Io = Ie(function(t, n) {
                return Be(t) ? on(t, ln(n, 1, Be, true)) : []
            }),
            So = Ie(function(t, n) {
                var r = le(n);
                return Be(r) && (r = T), Be(t) ? on(t, ln(n, 1, Be, true), Ur(r)) : []
            }),
            Ro = Ie(function(t, n) {
                var r = le(n);
                return Be(r) && (r = T), Be(t) ? on(t, ln(n, 1, Be, true), T, r) : []
            }),
            Wo = Ie(function(t) {
                var n = l(t, tr);
                return n.length && n[0] === t[0] ? bn(n) : []
            }),
            Bo = Ie(function(t) {
                var n = le(t),
                    r = l(t, tr);
                return n === le(r) ? n = T : r.pop(), r.length && r[0] === t[0] ? bn(r, Ur(n)) : []
            }),
            Lo = Ie(function(t) {
                var n = le(t),
                    r = l(t, tr);
                return n === le(r) ? n = T : r.pop(), r.length && r[0] === t[0] ? bn(r, T, n) : []
            }),
            Mo = Ie(se),
            Co = Ie(function(t, n) {
                n = ln(n, 1);
                var r = t ? t.length : 0,
                    e = Xt(t, n);
                return Dn(t, l(n, function(t) {
                    return Yr(t, r) ? +t : t
                }).sort(or)), e
            }),
            zo = Ie(function(t) {
                return Jn(ln(t, 1, Be, true))
            }),
            Uo = Ie(function(t) {
                var n = le(t);
                return Be(n) && (n = T), Jn(ln(t, 1, Be, true), Ur(n))
            }),
            Do = Ie(function(t) {
                var n = le(t);
                return Be(n) && (n = T), Jn(ln(t, 1, Be, true), T, n)
            }),
            Fo = Ie(function(t, n) {
                return Be(t) ? on(t, n) : []
            }),
            $o = Ie(function(t) {
                return Qn(f(t, Be))
            }),
            No = Ie(function(t) {
                var n = le(t);
                return Be(n) && (n = T), Qn(f(t, Be), Ur(n))
            }),
            Po = Ie(function(t) {
                var n = le(t);
                return Be(n) && (n = T), Qn(f(t, Be), T, n)
            }),
            Zo = Ie(pe),
            To = Ie(function(t) {
                var n = t.length,
                    n = n > 1 ? t[n - 1] : T,
                    n = typeof n == "function" ? (t.pop(), n) : T;
                return _e(t, n)
            }),
            qo = Ie(function(t) {
                function n(n) {
                    return Xt(n, t)
                }
                t = ln(t, 1);
                var r = t.length,
                    e = r ? t[0] : 0,
                    u = this.__wrapped__;
                return !(r > 1 || this.__actions__.length) && u instanceof zt && Yr(e) ? (u = u.slice(e, +e + (r ? 1 : 0)), u.__actions__.push({
                    func: ge,
                    args: [n],
                    thisArg: T
                }), new kt(u, this.__chain__).thru(function(t) {
                    return r && !t.length && t.push(T), t
                })) : this.thru(n)
            }),
            Vo = sr(function(t, n, r) {
                wu.call(t, r) ? ++t[r] : t[r] = 1
            }),
            Ko = sr(function(t, n, r) {
                wu.call(t, r) ? t[r].push(n) : t[r] = [n]
            }),
            Go = Ie(function(t, n, e) {
                var u = -1,
                    o = typeof n == "function",
                    i = Qr(n),
                    f = We(t) ? Array(t.length) : [];
                return go(t, function(t) {
                    var c = o ? n : i && null != t ? t[n] : T;
                    f[++u] = c ? r(c, t, e) : jn(t, n, e)
                }), f
            }),
            Jo = sr(function(t, n, r) {
                t[r] = n
            }),
            Yo = sr(function(t, n, r) {
                t[r ? 0 : 1].push(n)
            }, function() {
                return [
                    [],
                    []
                ]
            }),
            Ho = Ie(function(t, n) {
                if (null == t) return [];
                var r = n.length;
                return r > 1 && Hr(t, n[0], n[1]) ? n = [] : r > 2 && Hr(n[0], n[1], n[2]) && (n = [n[0]]), n = 1 == n.length && ai(n[0]) ? n[0] : ln(n, 1, Jr), Bn(t, n, [])
            }),
            Qo = pu.now,
            Xo = Ie(function(t, n, r) {
                var e = 1;
                if (r.length) var u = D(r, zr(Xo)),
                    e = 32 | e;
                return Br(t, e, n, r, u)
            }),
            ti = Ie(function(t, n, r) {
                var e = 3;
                if (r.length) var u = D(r, zr(ti)),
                    e = 32 | e;
                return Br(n, e, t, r, u)
            }),
            ni = Ie(function(t, n) {
                return un(t, 1, n)
            }),
            ri = Ie(function(t, n, r) {
                return un(t, Ye(n) || 0, r)
            });
        Ee.Cache = Ft;
        var ei = Ie(function(t, n) {
                n = 1 == n.length && ai(n[0]) ? l(n[0], O(Ur())) : l(ln(n, 1, Jr), O(Ur()));
                var e = n.length;
                return Ie(function(u) {
                    for (var o = -1, i = Ku(u.length, e); ++o < i;) u[o] = n[o].call(this, u[o]);
                    return r(t, this, u)
                })
            }),
            ui = Ie(function(t, n) {
                var r = D(n, zr(ui));
                return Br(t, 32, T, n, r)
            }),
            oi = Ie(function(t, n) {
                var r = D(n, zr(oi));
                return Br(t, 64, T, n, r)
            }),
            ii = Ie(function(t, n) {
                return Br(t, 256, T, T, T, ln(n, 1))
            }),
            fi = Ir(gn),
            ci = Ir(function(t, n) {
                return t >= n
            }),
            ai = Array.isArray,
            li = Iu ? function(t) {
                return t instanceof Iu
            } : fu(false),
            si = Ir(kn),
            hi = Ir(function(t, n) {
                return n >= t
            }),
            pi = hr(function(t, n) {
                if (io || te(n) || We(n)) ar(n, nu(n), t);
                else
                    for (var r in n) wu.call(n, r) && Kt(t, r, n[r])
            }),
            _i = hr(function(t, n) {
                if (io || te(n) || We(n)) ar(n, ru(n), t);
                else
                    for (var r in n) Kt(t, r, n[r])
            }),
            vi = hr(function(t, n, r, e) {
                ar(n, ru(n), t, e)
            }),
            gi = hr(function(t, n, r, e) {
                ar(n, nu(n), t, e)
            }),
            di = Ie(function(t, n) {
                return Xt(t, ln(n, 1))
            }),
            yi = Ie(function(t) {
                return t.push(T, Tt), r(vi, T, t)
            }),
            bi = Ie(function(t) {
                return t.push(T, re), r(Ai, T, t)
            }),
            xi = wr(function(t, n, r) {
                t[n] = r
            }, fu(cu)),
            ji = wr(function(t, n, r) {
                wu.call(t, n) ? t[n].push(r) : t[n] = [r]
            }, Ur),
            wi = Ie(jn),
            mi = hr(function(t, n, r) {
                Rn(t, n, r)
            }),
            Ai = hr(function(t, n, r, e) {
                Rn(t, n, r, e)
            }),
            Oi = Ie(function(t, n) {
                return null == t ? {} : (n = l(ln(n, 1), ue), Ln(t, on(vn(t, ru, Oo), n)))
            }),
            ki = Ie(function(t, n) {
                return null == t ? {} : Ln(t, l(ln(n, 1), ue))
            }),
            Ei = Wr(nu),
            Ii = Wr(ru),
            Si = dr(function(t, n, r) {
                return n = n.toLowerCase(), t + (r ? uu(n) : n)
            }),
            Ri = dr(function(t, n, r) {
                return t + (r ? "-" : "") + n.toLowerCase()
            }),
            Wi = dr(function(t, n, r) {
                return t + (r ? " " : "") + n.toLowerCase()
            }),
            Bi = gr("toLowerCase"),
            Li = dr(function(t, n, r) {
                return t + (r ? "_" : "") + n.toLowerCase()
            }),
            Mi = dr(function(t, n, r) {
                return t + (r ? " " : "") + zi(n)
            }),
            Ci = dr(function(t, n, r) {
                return t + (r ? " " : "") + n.toUpperCase()
            }),
            zi = gr("toUpperCase"),
            Ui = Ie(function(t, n) {
                try {
                    return r(t, T, n)
                } catch (e) {
                    return Le(e) ? e : new _u(e)
                }
            }),
            Di = Ie(function(t, n) {
                return u(ln(n, 1), function(n) {
                    n = ue(n), t[n] = Xo(t[n], t)
                }), t
            }),
            Fi = xr(),
            $i = xr(true),
            Ni = Ie(function(t, n) {
                return function(r) {
                    return jn(r, t, n)
                }
            }),
            Pi = Ie(function(t, n) {
                return function(r) {
                    return jn(t, r, n)
                }
            }),
            Zi = Ar(l),
            Ti = Ar(i),
            qi = Ar(_),
            Vi = Er(),
            Ki = Er(true),
            Gi = mr(function(t, n) {
                return t + n
            }),
            Ji = Rr("ceil"),
            Yi = mr(function(t, n) {
                return t / n
            }),
            Hi = Rr("floor"),
            Qi = mr(function(t, n) {
                return t * n
            }),
            Xi = Rr("round"),
            tf = mr(function(t, n) {
                return t - n
            });
        return At.after = function(t, n) {
            if (typeof n != "function") throw new du("Expected a function");
            return t = Ge(t),
                function() {
                    return 1 > --t ? n.apply(this, arguments) : void 0
                }
        }, At.ary = we, At.assign = pi, At.assignIn = _i, At.assignInWith = vi, At.assignWith = gi, At.at = di, At.before = me, At.bind = Xo, At.bindAll = Di, At.bindKey = ti, At.castArray = function() {
            if (!arguments.length) return [];
            var t = arguments[0];
            return ai(t) ? t : [t]
        }, At.chain = ve, At.chunk = function(t, n, r) {
            if (n = (r ? Hr(t, n, r) : n === T) ? 1 : Vu(Ge(n), 0), r = t ? t.length : 0, !r || 1 > n) return [];
            for (var e = 0, u = 0, o = Array($u(r / n)); r > e;) o[u++] = Pn(t, e, e += n);
            return o
        }, At.compact = function(t) {
            for (var n = -1, r = t ? t.length : 0, e = 0, u = []; ++n < r;) {
                var o = t[n];
                o && (u[e++] = o)
            }
            return u
        }, At.concat = function() {
            for (var t = arguments.length, n = Array(t ? t - 1 : 0), r = arguments[0], e = t; e--;) n[e - 1] = arguments[e];
            return t ? s(ai(r) ? cr(r) : [r], ln(n, 1)) : []
        }, At.cond = function(t) {
            var n = t ? t.length : 0,
                e = Ur();
            return t = n ? l(t, function(t) {
                if ("function" != typeof t[1]) throw new du("Expected a function");
                return [e(t[0]), t[1]]
            }) : [], Ie(function(e) {
                for (var u = -1; ++u < n;) {
                    var o = t[u];
                    if (r(o[0], this, e)) return r(o[1], this, e)
                }
            })
        }, At.conforms = function(t) {
            return rn(nn(t, true))
        }, At.constant = fu, At.countBy = Vo, At.create = function(t, n) {
            var r = en(t);
            return n ? Qt(r, n) : r
        }, At.curry = Ae, At.curryRight = Oe, At.debounce = ke, At.defaults = yi, At.defaultsDeep = bi, At.defer = ni, At.delay = ri, At.difference = Io, At.differenceBy = So, At.differenceWith = Ro, At.drop = fe, At.dropRight = ce, At.dropRightWhile = function(t, n) {
            return t && t.length ? Yn(t, Ur(n, 3), true, true) : []
        }, At.dropWhile = function(t, n) {
            return t && t.length ? Yn(t, Ur(n, 3), true) : []
        }, At.fill = function(t, n, r, e) {
            var u = t ? t.length : 0;
            if (!u) return [];
            for (r && typeof r != "number" && Hr(t, n, r) && (r = 0, e = u), u = t.length, r = Ge(r), 0 > r && (r = -r > u ? 0 : u + r), e = e === T || e > u ? u : Ge(e), 0 > e && (e += u), e = r > e ? 0 : Je(e); e > r;) t[r++] = n;
            return t
        }, At.filter = function(t, n) {
            return (ai(t) ? f : an)(t, Ur(n, 3))
        }, At.flatMap = function(t, n) {
            return ln(xe(t, n), 1)
        }, At.flatMapDeep = function(t, n) {
            return ln(xe(t, n), q)
        }, At.flatMapDepth = function(t, n, r) {
            return r = r === T ? 1 : Ge(r), ln(xe(t, n), r)
        }, At.flatten = function(t) {
            return t && t.length ? ln(t, 1) : []
        }, At.flattenDeep = function(t) {
            return t && t.length ? ln(t, q) : []
        }, At.flattenDepth = function(t, n) {
            return t && t.length ? (n = n === T ? 1 : Ge(n), ln(t, n)) : []
        }, At.flip = function(t) {
            return Br(t, 512)
        }, At.flow = Fi, At.flowRight = $i, At.fromPairs = function(t) {
            for (var n = -1, r = t ? t.length : 0, e = {}; ++n < r;) {
                var u = t[n];
                e[u[0]] = u[1]
            }
            return e
        }, At.functions = function(t) {
            return null == t ? [] : pn(t, nu(t))
        }, At.functionsIn = function(t) {
            return null == t ? [] : pn(t, ru(t))
        }, At.groupBy = Ko, At.initial = function(t) {
            return ce(t, 1)
        }, At.intersection = Wo, At.intersectionBy = Bo, At.intersectionWith = Lo, At.invert = xi, At.invertBy = ji, At.invokeMap = Go, At.iteratee = au, At.keyBy = Jo, At.keys = nu, At.keysIn = ru, At.map = xe, At.mapKeys = function(t, n) {
            var r = {};
            return n = Ur(n, 3), sn(t, function(t, e, u) {
                r[n(t, e, u)] = t
            }), r
        }, At.mapValues = function(t, n) {
            var r = {};
            return n = Ur(n, 3), sn(t, function(t, e, u) {
                r[e] = n(t, e, u)
            }), r
        }, At.matches = function(t) {
            return In(nn(t, true))
        }, At.matchesProperty = function(t, n) {
            return Sn(t, nn(n, true))
        }, At.memoize = Ee, At.merge = mi, At.mergeWith = Ai, At.method = Ni, At.methodOf = Pi, At.mixin = lu, At.negate = function(t) {
            if (typeof t != "function") throw new du("Expected a function");
            return function() {
                return !t.apply(this, arguments)
            }
        }, At.nthArg = function(t) {
            return t = Ge(t), Ie(function(n) {
                return Wn(n, t)
            })
        }, At.omit = Oi, At.omitBy = function(t, n) {
            return n = Ur(n), Mn(t, function(t, r) {
                return !n(t, r)
            })
        }, At.once = function(t) {
            return me(2, t)
        }, At.orderBy = function(t, n, r, e) {
            return null == t ? [] : (ai(n) || (n = null == n ? [] : [n]), r = e ? T : r, ai(r) || (r = null == r ? [] : [r]), Bn(t, n, r))
        }, At.over = Zi, At.overArgs = ei, At.overEvery = Ti, At.overSome = qi, At.partial = ui, At.partialRight = oi, At.partition = Yo, At.pick = ki, At.pickBy = function(t, n) {
            return null == t ? {} : Mn(t, Ur(n))
        }, At.property = hu, At.propertyOf = function(t) {
            return function(n) {
                return null == t ? T : _n(t, n)
            }
        }, At.pull = Mo, At.pullAll = se, At.pullAllBy = function(t, n, r) {
            return t && t.length && n && n.length ? Un(t, n, Ur(r)) : t
        }, At.pullAllWith = function(t, n, r) {
            return t && t.length && n && n.length ? Un(t, n, T, r) : t
        }, At.pullAt = Co, At.range = Vi, At.rangeRight = Ki, At.rearg = ii, At.reject = function(t, n) {
            var r = ai(t) ? f : an;
            return n = Ur(n, 3), r(t, function(t, r, e) {
                return !n(t, r, e)
            })
        }, At.remove = function(t, n) {
            var r = [];
            if (!t || !t.length) return r;
            var e = -1,
                u = [],
                o = t.length;
            for (n = Ur(n, 3); ++e < o;) {
                var i = t[e];
                n(i, e, t) && (r.push(i), u.push(e))
            }
            return Dn(t, u), r
        }, At.rest = Ie, At.reverse = he, At.sampleSize = je, At.set = function(t, n, r) {
            return null == t ? t : Nn(t, n, r)
        }, At.setWith = function(t, n, r, e) {
            return e = typeof e == "function" ? e : T, null == t ? t : Nn(t, n, r, e)
        }, At.shuffle = function(t) {
            return je(t, 4294967295)
        }, At.slice = function(t, n, r) {
            var e = t ? t.length : 0;
            return e ? (r && typeof r != "number" && Hr(t, n, r) ? (n = 0, r = e) : (n = null == n ? 0 : Ge(n), r = r === T ? e : Ge(r)), Pn(t, n, r)) : []
        }, At.sortBy = Ho, At.sortedUniq = function(t) {
            return t && t.length ? Vn(t) : []
        }, At.sortedUniqBy = function(t, n) {
            return t && t.length ? Vn(t, Ur(n)) : []
        }, At.split = function(t, n, r) {
            return r && typeof r != "number" && Hr(t, n, r) && (n = r = T), r = r === T ? 4294967295 : r >>> 0, r ? (t = Qe(t)) && (typeof n == "string" || null != n && !Pe(n)) && (n = Gn(n), "" == n && Wt.test(t)) ? rr(t.match(St), 0, r) : Qu.call(t, n, r) : []
        }, At.spread = function(t, n) {
            if (typeof t != "function") throw new du("Expected a function");
            return n = n === T ? 0 : Vu(Ge(n), 0), Ie(function(e) {
                var u = e[n];
                return e = rr(e, 0, n), u && s(e, u), r(t, this, e)
            })
        }, At.tail = function(t) {
            return fe(t, 1)
        }, At.take = function(t, n, r) {
            return t && t.length ? (n = r || n === T ? 1 : Ge(n), Pn(t, 0, 0 > n ? 0 : n)) : []
        }, At.takeRight = function(t, n, r) {
            var e = t ? t.length : 0;
            return e ? (n = r || n === T ? 1 : Ge(n), n = e - n, Pn(t, 0 > n ? 0 : n, e)) : []
        }, At.takeRightWhile = function(t, n) {
            return t && t.length ? Yn(t, Ur(n, 3), false, true) : []
        }, At.takeWhile = function(t, n) {
            return t && t.length ? Yn(t, Ur(n, 3)) : []
        }, At.tap = function(t, n) {
            return n(t), t
        }, At.throttle = function(t, n, r) {
            var e = true,
                u = true;
            if (typeof t != "function") throw new du("Expected a function");
            return Ue(r) && (e = "leading" in r ? !!r.leading : e, u = "trailing" in r ? !!r.trailing : u), ke(t, n, {
                leading: e,
                maxWait: n,
                trailing: u
            })
        }, At.thru = ge, At.toArray = Ve, At.toPairs = Ei, At.toPairsIn = Ii, At.toPath = function(t) {
            return ai(t) ? l(t, ue) : Te(t) ? [t] : cr(Eo(t))
        }, At.toPlainObject = He, At.transform = function(t, n, r) {
            var e = ai(t) || qe(t);
            if (n = Ur(n, 4), null == r)
                if (e || Ue(t)) {
                    var o = t.constructor;
                    r = e ? ai(t) ? new o : [] : Me(o) ? en(Pu(Object(t))) : {}
                } else r = {};
            return (e ? u : sn)(t, function(t, e, u) {
                return n(r, t, e, u)
            }), r
        }, At.unary = function(t) {
            return we(t, 1)
        }, At.union = zo, At.unionBy = Uo, At.unionWith = Do, At.uniq = function(t) {
            return t && t.length ? Jn(t) : []
        }, At.uniqBy = function(t, n) {
            return t && t.length ? Jn(t, Ur(n)) : []
        }, At.uniqWith = function(t, n) {
            return t && t.length ? Jn(t, T, n) : []
        }, At.unset = function(t, n) {
            var r;
            if (null == t) r = true;
            else {
                r = t;
                var e = n,
                    e = Qr(e, r) ? [e] : nr(e);
                r = ee(r, e), e = ue(le(e)), r = !(null != r && dn(r, e)) || delete r[e]
            }
            return r
        }, At.unzip = pe, At.unzipWith = _e, At.update = function(t, n, r) {
            return null == t ? t : Nn(t, n, (typeof r == "function" ? r : cu)(_n(t, n)), void 0)
        }, At.updateWith = function(t, n, r, e) {
            return e = typeof e == "function" ? e : T, null != t && (t = Nn(t, n, (typeof r == "function" ? r : cu)(_n(t, n)), e)), t
        }, At.values = eu, At.valuesIn = function(t) {
            return null == t ? [] : k(t, ru(t))
        }, At.without = Fo, At.words = iu, At.wrap = function(t, n) {
            return n = null == n ? cu : n, ui(n, t)
        }, At.xor = $o, At.xorBy = No, At.xorWith = Po, At.zip = Zo, At.zipObject = function(t, n) {
            return Xn(t || [], n || [], Kt)
        }, At.zipObjectDeep = function(t, n) {
            return Xn(t || [], n || [], Nn)
        }, At.zipWith = To, At.entries = Ei, At.entriesIn = Ii, At.extend = _i, At.extendWith = vi, lu(At, At), At.add = Gi, At.attempt = Ui, At.camelCase = Si, At.capitalize = uu, At.ceil = Ji, At.clamp = function(t, n, r) {
            return r === T && (r = n, n = T), r !== T && (r = Ye(r), r = r === r ? r : 0), n !== T && (n = Ye(n), n = n === n ? n : 0), tn(Ye(t), n, r)
        }, At.clone = function(t) {
            return nn(t, false, true)
        }, At.cloneDeep = function(t) {
            return nn(t, true, true)
        }, At.cloneDeepWith = function(t, n) {
            return nn(t, true, true, n)
        }, At.cloneWith = function(t, n) {
            return nn(t, false, true, n)
        }, At.deburr = ou, At.divide = Yi, At.endsWith = function(t, n, r) {
            t = Qe(t), n = Gn(n);
            var e = t.length;
            return r = r === T ? e : tn(Ge(r), 0, e), r -= n.length, r >= 0 && t.indexOf(n, r) == r
        }, At.eq = Se, At.escape = function(t) {
            return (t = Qe(t)) && X.test(t) ? t.replace(H, B) : t
        }, At.escapeRegExp = function(t) {
            return (t = Qe(t)) && ft.test(t) ? t.replace(it, "\\$&") : t
        }, At.every = function(t, n, r) {
            var e = ai(t) ? i : fn;
            return r && Hr(t, n, r) && (n = T), e(t, Ur(n, 3))
        }, At.find = function(t, n) {
            if (n = Ur(n, 3), ai(t)) {
                var r = g(t, n);
                return r > -1 ? t[r] : T
            }
            return v(t, n, go)
        }, At.findIndex = function(t, n) {
            return t && t.length ? g(t, Ur(n, 3)) : -1
        }, At.findKey = function(t, n) {
            return v(t, Ur(n, 3), sn, true)
        }, At.findLast = function(t, n) {
            if (n = Ur(n, 3), ai(t)) {
                var r = g(t, n, true);
                return r > -1 ? t[r] : T
            }
            return v(t, n, yo)
        }, At.findLastIndex = function(t, n) {
            return t && t.length ? g(t, Ur(n, 3), true) : -1
        }, At.findLastKey = function(t, n) {
            return v(t, Ur(n, 3), hn, true)
        }, At.floor = Hi, At.forEach = ye, At.forEachRight = be, At.forIn = function(t, n) {
            return null == t ? t : bo(t, Ur(n, 3), ru)
        }, At.forInRight = function(t, n) {
            return null == t ? t : xo(t, Ur(n, 3), ru)
        }, At.forOwn = function(t, n) {
            return t && sn(t, Ur(n, 3))
        }, At.forOwnRight = function(t, n) {
            return t && hn(t, Ur(n, 3))
        }, At.get = Xe, At.gt = fi, At.gte = ci, At.has = function(t, n) {
            return null != t && Zr(t, n, dn)
        }, At.hasIn = tu, At.head = ae, At.identity = cu, At.includes = function(t, n, r, e) {
            return t = We(t) ? t : eu(t), r = r && !e ? Ge(r) : 0, e = t.length, 0 > r && (r = Vu(e + r, 0)), Ze(t) ? e >= r && -1 < t.indexOf(n, r) : !!e && -1 < d(t, n, r)
        }, At.indexOf = function(t, n, r) {
            var e = t ? t.length : 0;
            return e ? (r = Ge(r), 0 > r && (r = Vu(e + r, 0)), d(t, n, r)) : -1
        }, At.inRange = function(t, n, r) {
            return n = Ye(n) || 0, r === T ? (r = n, n = 0) : r = Ye(r) || 0, t = Ye(t), t >= Ku(n, r) && t < Vu(n, r)
        }, At.invoke = wi, At.isArguments = Re, At.isArray = ai, At.isArrayBuffer = function(t) {
            return De(t) && "[object ArrayBuffer]" == Ou.call(t)
        }, At.isArrayLike = We, At.isArrayLikeObject = Be, At.isBoolean = function(t) {
            return true === t || false === t || De(t) && "[object Boolean]" == Ou.call(t)
        }, At.isBuffer = li, At.isDate = function(t) {
            return De(t) && "[object Date]" == Ou.call(t)
        }, At.isElement = function(t) {
            return !!t && 1 === t.nodeType && De(t) && !Ne(t)
        }, At.isEmpty = function(t) {
            if (We(t) && (ai(t) || Ze(t) || Me(t.splice) || Re(t) || li(t))) return !t.length;
            if (De(t)) {
                var n = Pr(t);
                if ("[object Map]" == n || "[object Set]" == n) return !t.size
            }
            for (var r in t)
                if (wu.call(t, r)) return false;
            return !(io && nu(t).length)
        }, At.isEqual = function(t, n) {
            return wn(t, n)
        }, At.isEqualWith = function(t, n, r) {
            var e = (r = typeof r == "function" ? r : T) ? r(t, n) : T;
            return e === T ? wn(t, n, r) : !!e
        }, At.isError = Le, At.isFinite = function(t) {
            return typeof t == "number" && Zu(t)
        }, At.isFunction = Me, At.isInteger = Ce, At.isLength = ze, At.isMap = function(t) {
            return De(t) && "[object Map]" == Pr(t)
        }, At.isMatch = function(t, n) {
            return t === n || mn(t, n, Fr(n))
        }, At.isMatchWith = function(t, n, r) {
            return r = typeof r == "function" ? r : T, mn(t, n, Fr(n), r)
        }, At.isNaN = function(t) {
            return $e(t) && t != +t
        }, At.isNative = Fe, At.isNil = function(t) {
            return null == t
        }, At.isNull = function(t) {
            return null === t
        }, At.isNumber = $e, At.isObject = Ue, At.isObjectLike = De, At.isPlainObject = Ne, At.isRegExp = Pe, At.isSafeInteger = function(t) {
            return Ce(t) && t >= -9007199254740991 && 9007199254740991 >= t
        }, At.isSet = function(t) {
            return De(t) && "[object Set]" == Pr(t)
        }, At.isString = Ze, At.isSymbol = Te, At.isTypedArray = qe, At.isUndefined = function(t) {
            return t === T
        }, At.isWeakMap = function(t) {
            return De(t) && "[object WeakMap]" == Pr(t)
        }, At.isWeakSet = function(t) {
            return De(t) && "[object WeakSet]" == Ou.call(t)
        }, At.join = function(t, n) {
            return t ? Tu.call(t, n) : ""
        }, At.kebabCase = Ri, At.last = le, At.lastIndexOf = function(t, n, r) {
            var e = t ? t.length : 0;
            if (!e) return -1;
            var u = e;
            if (r !== T && (u = Ge(r), u = (0 > u ? Vu(e + u, 0) : Ku(u, e - 1)) + 1), n !== n) return M(t, u, true);
            for (; u--;)
                if (t[u] === n) return u;
            return -1
        }, At.lowerCase = Wi, At.lowerFirst = Bi, At.lt = si, At.lte = hi, At.max = function(t) {
            return t && t.length ? cn(t, cu, gn) : T
        }, At.maxBy = function(t, n) {
            return t && t.length ? cn(t, Ur(n), gn) : T
        }, At.mean = function(t) {
            return b(t, cu)
        }, At.meanBy = function(t, n) {
            return b(t, Ur(n))
        }, At.min = function(t) {
            return t && t.length ? cn(t, cu, kn) : T
        }, At.minBy = function(t, n) {
            return t && t.length ? cn(t, Ur(n), kn) : T
        }, At.multiply = Qi, At.nth = function(t, n) {
            return t && t.length ? Wn(t, Ge(n)) : T
        }, At.noConflict = function() {
            return Jt._ === this && (Jt._ = ku), this
        }, At.noop = su, At.now = Qo, At.pad = function(t, n, r) {
            t = Qe(t);
            var e = (n = Ge(n)) ? N(t) : 0;
            return !n || e >= n ? t : (n = (n - e) / 2, Or(Nu(n), r) + t + Or($u(n), r))
        }, At.padEnd = function(t, n, r) {
            t = Qe(t);
            var e = (n = Ge(n)) ? N(t) : 0;
            return n && n > e ? t + Or(n - e, r) : t
        }, At.padStart = function(t, n, r) {
            t = Qe(t);
            var e = (n = Ge(n)) ? N(t) : 0;
            return n && n > e ? Or(n - e, r) + t : t
        }, At.parseInt = function(t, n, r) {
            return r || null == n ? n = 0 : n && (n = +n), t = Qe(t).replace(ct, ""), Gu(t, n || (vt.test(t) ? 16 : 10))
        }, At.random = function(t, n, r) {
            if (r && typeof r != "boolean" && Hr(t, n, r) && (n = r = T), r === T && (typeof n == "boolean" ? (r = n, n = T) : typeof t == "boolean" && (r = t, t = T)), t === T && n === T ? (t = 0, n = 1) : (t = Ye(t) || 0, n === T ? (n = t, t = 0) : n = Ye(n) || 0), t > n) {
                var e = t;
                t = n, n = e
            }
            return r || t % 1 || n % 1 ? (r = Ju(), Ku(t + r * (n - t + Nt("1e-" + ((r + "").length - 1))), n)) : Fn(t, n)
        }, At.reduce = function(t, n, r) {
            var e = ai(t) ? h : x,
                u = 3 > arguments.length;
            return e(t, Ur(n, 4), r, u, go)
        }, At.reduceRight = function(t, n, r) {
            var e = ai(t) ? p : x,
                u = 3 > arguments.length;
            return e(t, Ur(n, 4), r, u, yo)
        }, At.repeat = function(t, n, r) {
            return n = (r ? Hr(t, n, r) : n === T) ? 1 : Ge(n), $n(Qe(t), n)
        }, At.replace = function() {
            var t = arguments,
                n = Qe(t[0]);
            return 3 > t.length ? n : Yu.call(n, t[1], t[2])
        }, At.result = function(t, n, r) {
            n = Qr(n, t) ? [n] : nr(n);
            var e = -1,
                u = n.length;
            for (u || (t = T, u = 1); ++e < u;) {
                var o = null == t ? T : t[ue(n[e])];
                o === T && (e = u, o = r), t = Me(o) ? o.call(t) : o
            }
            return t
        }, At.round = Xi, At.runInContext = Z, At.sample = function(t) {
            t = We(t) ? t : eu(t);
            var n = t.length;
            return n > 0 ? t[Fn(0, n - 1)] : T
        }, At.size = function(t) {
            if (null == t) return 0;
            if (We(t)) {
                var n = t.length;
                return n && Ze(t) ? N(t) : n
            }
            return De(t) && (n = Pr(t), "[object Map]" == n || "[object Set]" == n) ? t.size : nu(t).length
        }, At.snakeCase = Li, At.some = function(t, n, r) {
            var e = ai(t) ? _ : Zn;
            return r && Hr(t, n, r) && (n = T), e(t, Ur(n, 3))
        }, At.sortedIndex = function(t, n) {
            return Tn(t, n)
        }, At.sortedIndexBy = function(t, n, r) {
            return qn(t, n, Ur(r))
        }, At.sortedIndexOf = function(t, n) {
            var r = t ? t.length : 0;
            if (r) {
                var e = Tn(t, n);
                if (r > e && Se(t[e], n)) return e
            }
            return -1
        }, At.sortedLastIndex = function(t, n) {
            return Tn(t, n, true)
        }, At.sortedLastIndexBy = function(t, n, r) {
            return qn(t, n, Ur(r), true)
        }, At.sortedLastIndexOf = function(t, n) {
            if (t && t.length) {
                var r = Tn(t, n, true) - 1;
                if (Se(t[r], n)) return r
            }
            return -1
        }, At.startCase = Mi, At.startsWith = function(t, n, r) {
            return t = Qe(t), r = tn(Ge(r), 0, t.length), t.lastIndexOf(Gn(n), r) == r
        }, At.subtract = tf, At.sum = function(t) {
            return t && t.length ? w(t, cu) : 0
        }, At.sumBy = function(t, n) {
            return t && t.length ? w(t, Ur(n)) : 0
        }, At.template = function(t, n, r) {
            var e = At.templateSettings;
            r && Hr(t, n, r) && (n = T), t = Qe(t), n = vi({}, n, e, Tt), r = vi({}, n.imports, e.imports, Tt);
            var u, o, i = nu(r),
                f = k(r, i),
                c = 0;
            r = n.interpolate || wt;
            var a = "__p+='";
            r = gu((n.escape || wt).source + "|" + r.source + "|" + (r === rt ? pt : wt).source + "|" + (n.evaluate || wt).source + "|$", "g");
            var l = "sourceURL" in n ? "//# sourceURL=" + n.sourceURL + "\n" : "";
            if (t.replace(r, function(n, r, e, i, f, l) {
                    return e || (e = i), a += t.slice(c, l).replace(mt, L), r && (u = true, a += "'+__e(" + r + ")+'"), f && (o = true, a += "';" + f + ";\n__p+='"), e && (a += "'+((__t=(" + e + "))==null?'':__t)+'"), c = l + n.length, n
                }), a += "';", (n = n.variable) || (a = "with(obj){" + a + "}"), a = (o ? a.replace(K, "") : a).replace(G, "$1").replace(J, "$1;"), a = "function(" + (n || "obj") + "){" + (n ? "" : "obj||(obj={});") + "var __t,__p=''" + (u ? ",__e=_.escape" : "") + (o ? ",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}" : ";") + a + "return __p}", n = Ui(function() {
                    return Function(i, l + "return " + a).apply(T, f)
                }), n.source = a, Le(n)) throw n;
            return n
        }, At.times = function(t, n) {
            if (t = Ge(t), 1 > t || t > 9007199254740991) return [];
            var r = 4294967295,
                e = Ku(t, 4294967295);
            for (n = Ur(n), t -= 4294967295, e = m(e, n); ++r < t;) n(r);
            return e
        }, At.toFinite = Ke, At.toInteger = Ge, At.toLength = Je, At.toLower = function(t) {
            return Qe(t).toLowerCase()
        }, At.toNumber = Ye, At.toSafeInteger = function(t) {
            return tn(Ge(t), -9007199254740991, 9007199254740991)
        }, At.toString = Qe, At.toUpper = function(t) {
            return Qe(t).toUpperCase()
        }, At.trim = function(t, n, r) {
            return (t = Qe(t)) && (r || n === T) ? t.replace(ct, "") : t && (n = Gn(n)) ? (t = t.match(St), n = n.match(St), rr(t, I(t, n), S(t, n) + 1).join("")) : t
        }, At.trimEnd = function(t, n, r) {
            return (t = Qe(t)) && (r || n === T) ? t.replace(lt, "") : t && (n = Gn(n)) ? (t = t.match(St), n = S(t, n.match(St)) + 1, rr(t, 0, n).join("")) : t
        }, At.trimStart = function(t, n, r) {
            return (t = Qe(t)) && (r || n === T) ? t.replace(at, "") : t && (n = Gn(n)) ? (t = t.match(St), n = I(t, n.match(St)), rr(t, n).join("")) : t
        }, At.truncate = function(t, n) {
            var r = 30,
                e = "...";
            if (Ue(n)) var u = "separator" in n ? n.separator : u,
                r = "length" in n ? Ge(n.length) : r,
                e = "omission" in n ? Gn(n.omission) : e;
            t = Qe(t);
            var o = t.length;
            if (Wt.test(t)) var i = t.match(St),
                o = i.length;
            if (r >= o) return t;
            if (o = r - N(e), 1 > o) return e;
            if (r = i ? rr(i, 0, o).join("") : t.slice(0, o), u === T) return r + e;
            if (i && (o += r.length - o), Pe(u)) {
                if (t.slice(o).search(u)) {
                    var f = r;
                    for (u.global || (u = gu(u.source, Qe(_t.exec(u)) + "g")), u.lastIndex = 0; i = u.exec(f);) var c = i.index;
                    r = r.slice(0, c === T ? o : c)
                }
            } else t.indexOf(Gn(u), o) != o && (u = r.lastIndexOf(u), u > -1 && (r = r.slice(0, u)));
            return r + e
        }, At.unescape = function(t) {
            return (t = Qe(t)) && Q.test(t) ? t.replace(Y, P) : t
        }, At.uniqueId = function(t) {
            var n = ++mu;
            return Qe(t) + n
        }, At.upperCase = Ci, At.upperFirst = zi, At.each = ye, At.eachRight = be, At.first = ae, lu(At, function() {
            var t = {};
            return sn(At, function(n, r) {
                wu.call(At.prototype, r) || (t[r] = n)
            }), t
        }(), {
            chain: false
        }), At.VERSION = "4.12.0", u("bind bindKey curry curryRight partial partialRight".split(" "), function(t) {
            At[t].placeholder = At
        }), u(["drop", "take"], function(t, n) {
            zt.prototype[t] = function(r) {
                var e = this.__filtered__;
                if (e && !n) return new zt(this);
                r = r === T ? 1 : Vu(Ge(r), 0);
                var u = this.clone();
                return e ? u.__takeCount__ = Ku(r, u.__takeCount__) : u.__views__.push({
                    size: Ku(r, 4294967295),
                    type: t + (0 > u.__dir__ ? "Right" : "")
                }), u
            }, zt.prototype[t + "Right"] = function(n) {
                return this.reverse()[t](n).reverse()
            }
        }), u(["filter", "map", "takeWhile"], function(t, n) {
            var r = n + 1,
                e = 1 == r || 3 == r;
            zt.prototype[t] = function(t) {
                var n = this.clone();
                return n.__iteratees__.push({
                    iteratee: Ur(t, 3),
                    type: r
                }), n.__filtered__ = n.__filtered__ || e, n
            }
        }), u(["head", "last"], function(t, n) {
            var r = "take" + (n ? "Right" : "");
            zt.prototype[t] = function() {
                return this[r](1).value()[0]
            }
        }), u(["initial", "tail"], function(t, n) {
            var r = "drop" + (n ? "" : "Right");
            zt.prototype[t] = function() {
                return this.__filtered__ ? new zt(this) : this[r](1)
            }
        }), zt.prototype.compact = function() {
            return this.filter(cu)
        }, zt.prototype.find = function(t) {
            return this.filter(t).head()
        }, zt.prototype.findLast = function(t) {
            return this.reverse().find(t)
        }, zt.prototype.invokeMap = Ie(function(t, n) {
            return typeof t == "function" ? new zt(this) : this.map(function(r) {
                return jn(r, t, n)
            })
        }), zt.prototype.reject = function(t) {
            return t = Ur(t, 3), this.filter(function(n) {
                return !t(n)
            })
        }, zt.prototype.slice = function(t, n) {
            t = Ge(t);
            var r = this;
            return r.__filtered__ && (t > 0 || 0 > n) ? new zt(r) : (0 > t ? r = r.takeRight(-t) : t && (r = r.drop(t)), n !== T && (n = Ge(n), r = 0 > n ? r.dropRight(-n) : r.take(n - t)), r)
        }, zt.prototype.takeRightWhile = function(t) {
            return this.reverse().takeWhile(t).reverse()
        }, zt.prototype.toArray = function() {
            return this.take(4294967295)
        }, sn(zt.prototype, function(t, n) {
            var r = /^(?:filter|find|map|reject)|While$/.test(n),
                e = /^(?:head|last)$/.test(n),
                u = At[e ? "take" + ("last" == n ? "Right" : "") : n],
                o = e || /^find/.test(n);
            u && (At.prototype[n] = function() {
                function n(t) {
                    return t = u.apply(At, s([t], f)), e && h ? t[0] : t
                }
                var i = this.__wrapped__,
                    f = e ? [1] : arguments,
                    c = i instanceof zt,
                    a = f[0],
                    l = c || ai(i);
                l && r && typeof a == "function" && 1 != a.length && (c = l = false);
                var h = this.__chain__,
                    p = !!this.__actions__.length,
                    a = o && !h,
                    c = c && !p;
                return !o && l ? (i = c ? i : new zt(this), i = t.apply(i, f), i.__actions__.push({
                    func: ge,
                    args: [n],
                    thisArg: T
                }), new kt(i, h)) : a && c ? t.apply(this, f) : (i = this.thru(n), a ? e ? i.value()[0] : i.value() : i)
            })
        }), u("pop push shift sort splice unshift".split(" "), function(t) {
            var n = yu[t],
                r = /^(?:push|sort|unshift)$/.test(t) ? "tap" : "thru",
                e = /^(?:pop|shift)$/.test(t);
            At.prototype[t] = function() {
                var t = arguments;
                if (e && !this.__chain__) {
                    var u = this.value();
                    return n.apply(ai(u) ? u : [], t)
                }
                return this[r](function(r) {
                    return n.apply(ai(r) ? r : [], t)
                })
            }
        }), sn(zt.prototype, function(t, n) {
            var r = At[n];
            if (r) {
                var e = r.name + "";
                (fo[e] || (fo[e] = [])).push({
                    name: n,
                    func: r
                })
            }
        }), fo[jr(T, 2).name] = [{
            name: "wrapper",
            func: T
        }], zt.prototype.clone = function() {
            var t = new zt(this.__wrapped__);
            return t.__actions__ = cr(this.__actions__), t.__dir__ = this.__dir__, t.__filtered__ = this.__filtered__, t.__iteratees__ = cr(this.__iteratees__), t.__takeCount__ = this.__takeCount__, t.__views__ = cr(this.__views__), t
        }, zt.prototype.reverse = function() {
            if (this.__filtered__) {
                var t = new zt(this);
                t.__dir__ = -1, t.__filtered__ = true
            } else t = this.clone(), t.__dir__ *= -1;
            return t
        }, zt.prototype.value = function() {
            var t, n = this.__wrapped__.value(),
                r = this.__dir__,
                e = ai(n),
                u = 0 > r,
                o = e ? n.length : 0;
            t = o;
            for (var i = this.__views__, f = 0, c = -1, a = i.length; ++c < a;) {
                var l = i[c],
                    s = l.size;
                switch (l.type) {
                    case "drop":
                        f += s;
                        break;
                    case "dropRight":
                        t -= s;
                        break;
                    case "take":
                        t = Ku(t, f + s);
                        break;
                    case "takeRight":
                        f = Vu(f, t - s)
                }
            }
            if (t = {
                    start: f,
                    end: t
                }, i = t.start, f = t.end, t = f - i, u = u ? f : i - 1, i = this.__iteratees__, f = i.length, c = 0, a = Ku(t, this.__takeCount__), !e || 200 > o || o == t && a == t) return Hn(n, this.__actions__);
            e = [];
            t: for (; t-- && a > c;) {
                for (u += r, o = -1, l = n[u]; ++o < f;) {
                    var h = i[o],
                        s = h.type,
                        h = (0, h.iteratee)(l);
                    if (2 == s) l = h;
                    else if (!h) {
                        if (1 == s) continue t;
                        break t
                    }
                }
                e[c++] = l
            }
            return e
        }, At.prototype.at = qo, At.prototype.chain = function() {
            return ve(this)
        }, At.prototype.commit = function() {
            return new kt(this.value(), this.__chain__)
        }, At.prototype.next = function() {
            this.__values__ === T && (this.__values__ = Ve(this.value()));
            var t = this.__index__ >= this.__values__.length,
                n = t ? T : this.__values__[this.__index__++];
            return {
                done: t,
                value: n
            }
        }, At.prototype.plant = function(t) {
            for (var n, r = this; r instanceof Ot;) {
                var e = ie(r);
                e.__index__ = 0, e.__values__ = T, n ? u.__wrapped__ = e : n = e;
                var u = e,
                    r = r.__wrapped__
            }
            return u.__wrapped__ = t, n
        }, At.prototype.reverse = function() {
            var t = this.__wrapped__;
            return t instanceof zt ? (this.__actions__.length && (t = new zt(this)), t = t.reverse(), t.__actions__.push({
                func: ge,
                args: [he],
                thisArg: T
            }), new kt(t, this.__chain__)) : this.thru(he)
        }, At.prototype.toJSON = At.prototype.valueOf = At.prototype.value = function() {
            return Hn(this.__wrapped__, this.__actions__)
        }, Cu && (At.prototype[Cu] = de), At
    }
    var T, q = 1 / 0,
        V = NaN,
        K = /\b__p\+='';/g,
        G = /\b(__p\+=)''\+/g,
        J = /(__e\(.*?\)|\b__t\))\+'';/g,
        Y = /&(?:amp|lt|gt|quot|#39|#96);/g,
        H = /[&<>"'`]/g,
        Q = RegExp(Y.source),
        X = RegExp(H.source),
        tt = /<%-([\s\S]+?)%>/g,
        nt = /<%([\s\S]+?)%>/g,
        rt = /<%=([\s\S]+?)%>/g,
        et = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,
        ut = /^\w*$/,
        ot = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,
        it = /[\\^$.*+?()[\]{}|]/g,
        ft = RegExp(it.source),
        ct = /^\s+|\s+$/g,
        at = /^\s+/,
        lt = /\s+$/,
        st = /[a-zA-Z0-9]+/g,
        ht = /\\(\\)?/g,
        pt = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,
        _t = /\w*$/,
        vt = /^0x/i,
        gt = /^[-+]0x[0-9a-f]+$/i,
        dt = /^0b[01]+$/i,
        yt = /^\[object .+?Constructor\]$/,
        bt = /^0o[0-7]+$/i,
        xt = /^(?:0|[1-9]\d*)$/,
        jt = /[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,
        wt = /($^)/,
        mt = /['\n\r\u2028\u2029\\]/g,
        At = "[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?)*",
        Ot = "(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])" + At,
        kt = "(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]?|[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])",
        Et = RegExp("['â]", "g"),
        It = RegExp("[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]", "g"),
        St = RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|" + kt + At, "g"),
        Rt = RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['â](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['â](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['â](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['â](?:D|LL|M|RE|S|T|VE))?|\\d+", Ot].join("|"), "g"),
        Wt = RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),
        Bt = /[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,
        Lt = "Array Buffer DataView Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Promise Reflect RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),
        Mt = {};
    Mt["[object Float32Array]"] = Mt["[object Float64Array]"] = Mt["[object Int8Array]"] = Mt["[object Int16Array]"] = Mt["[object Int32Array]"] = Mt["[object Uint8Array]"] = Mt["[object Uint8ClampedArray]"] = Mt["[object Uint16Array]"] = Mt["[object Uint32Array]"] = true, Mt["[object Arguments]"] = Mt["[object Array]"] = Mt["[object ArrayBuffer]"] = Mt["[object Boolean]"] = Mt["[object DataView]"] = Mt["[object Date]"] = Mt["[object Error]"] = Mt["[object Function]"] = Mt["[object Map]"] = Mt["[object Number]"] = Mt["[object Object]"] = Mt["[object RegExp]"] = Mt["[object Set]"] = Mt["[object String]"] = Mt["[object WeakMap]"] = false;
    var Ct = {};
    Ct["[object Arguments]"] = Ct["[object Array]"] = Ct["[object ArrayBuffer]"] = Ct["[object DataView]"] = Ct["[object Boolean]"] = Ct["[object Date]"] = Ct["[object Float32Array]"] = Ct["[object Float64Array]"] = Ct["[object Int8Array]"] = Ct["[object Int16Array]"] = Ct["[object Int32Array]"] = Ct["[object Map]"] = Ct["[object Number]"] = Ct["[object Object]"] = Ct["[object RegExp]"] = Ct["[object Set]"] = Ct["[object String]"] = Ct["[object Symbol]"] = Ct["[object Uint8Array]"] = Ct["[object Uint8ClampedArray]"] = Ct["[object Uint16Array]"] = Ct["[object Uint32Array]"] = true, Ct["[object Error]"] = Ct["[object Function]"] = Ct["[object WeakMap]"] = false;
    var zt = {
            "Ã": "A",
            "Ã": "A",
            "Ã": "A",
            "Ã": "A",
            "Ã": "A",
            "Ã": "A",
            "Ã ": "a",
            "Ã¡": "a",
            "Ã¢": "a",
            "Ã£": "a",
            "Ã¤": "a",
            "Ã¥": "a",
            "Ã": "C",
            "Ã§": "c",
            "Ã": "D",
            "Ã°": "d",
            "Ã": "E",
            "Ã": "E",
            "Ã": "E",
            "Ã": "E",
            "Ã¨": "e",
            "Ã©": "e",
            "Ãª": "e",
            "Ã«": "e",
            "Ã": "I",
            "Ã": "I",
            "Ã": "I",
            "Ã": "I",
            "Ã¬": "i",
            "Ã­": "i",
            "Ã®": "i",
            "Ã¯": "i",
            "Ã": "N",
            "Ã±": "n",
            "Ã": "O",
            "Ã": "O",
            "Ã": "O",
            "Ã": "O",
            "Ã": "O",
            "Ã": "O",
            "Ã²": "o",
            "Ã³": "o",
            "Ã´": "o",
            "Ãµ": "o",
            "Ã¶": "o",
            "Ã¸": "o",
            "Ã": "U",
            "Ã": "U",
            "Ã": "U",
            "Ã": "U",
            "Ã¹": "u",
            "Ãº": "u",
            "Ã»": "u",
            "Ã¼": "u",
            "Ã": "Y",
            "Ã½": "y",
            "Ã¿": "y",
            "Ã": "Ae",
            "Ã¦": "ae",
            "Ã": "Th",
            "Ã¾": "th",
            "Ã": "ss"
        },
        Ut = {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#39;",
            "`": "&#96;"
        },
        Dt = {
            "&amp;": "&",
            "&lt;": "<",
            "&gt;": ">",
            "&quot;": '"',
            "&#39;": "'",
            "&#96;": "`"
        },
        Ft = {
            "function": true,
            object: true
        },
        $t = {
            "\\": "\\",
            "'": "'",
            "\n": "n",
            "\r": "r",
            "\u2028": "u2028",
            "\u2029": "u2029"
        },
        Nt = parseFloat,
        Pt = parseInt,
        Zt = Ft[typeof exports] && exports && !exports.nodeType ? exports : T,
        Tt = Ft[typeof module] && module && !module.nodeType ? module : T,
        qt = Tt && Tt.exports === Zt ? Zt : T,
        Vt = R(Ft[typeof self] && self),
        Kt = R(Ft[typeof window] && window),
        Gt = R(Ft[typeof this] && this),
        Jt = R(Zt && Tt && typeof global == "object" && global) || Kt !== (Gt && Gt.window) && Kt || Vt || Gt || Function("return this")(),
        Yt = Z();
    (Kt || Vt || {})._ = Yt, typeof define == "function" && typeof define.amd == "object" && define.amd ? define(function() {
        return Yt
    }) : Zt && Tt ? (qt && ((Tt.exports = Yt)._ = Yt), Zt._ = Yt) : Jt._ = Yt
}).call(this);
var swfobject = function() {
    var D = "undefined",
        r = "object",
        S = "Shockwave Flash",
        W = "ShockwaveFlash.ShockwaveFlash",
        q = "application/x-shockwave-flash",
        R = "SWFObjectExprInst",
        x = "onreadystatechange",
        O = window,
        j = document,
        t = navigator,
        T = false,
        U = [h],
        o = [],
        N = [],
        I = [],
        l, Q, E, B, J = false,
        a = false,
        n, G, m = true,
        M = function() {
            var aa = typeof j.getElementById != D && typeof j.getElementsByTagName != D && typeof j.createElement != D,
                ah = t.userAgent.toLowerCase(),
                Y = t.platform.toLowerCase(),
                ae = Y ? /win/.test(Y) : /win/.test(ah),
                ac = Y ? /mac/.test(Y) : /mac/.test(ah),
                af = /webkit/.test(ah) ? parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/, "$1")) : false,
                X = !+"1",
                ag = [0, 0, 0],
                ab = null;
            if (typeof t.plugins != D && typeof t.plugins[S] == r) {
                ab = t.plugins[S].description;
                if (ab && !(typeof t.mimeTypes != D && t.mimeTypes[q] && !t.mimeTypes[q].enabledPlugin)) {
                    T = true;
                    X = false;
                    ab = ab.replace(/^.*\s+(\S+\s+\S+$)/, "$1");
                    ag[0] = parseInt(ab.replace(/^(.*)\..*$/, "$1"), 10);
                    ag[1] = parseInt(ab.replace(/^.*\.(.*)\s.*$/, "$1"), 10);
                    ag[2] = /[a-zA-Z]/.test(ab) ? parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/, "$1"), 10) : 0
                }
            } else {
                if (typeof O.ActiveXObject != D) {
                    try {
                        var ad = new ActiveXObject(W);
                        if (ad) {
                            ab = ad.GetVariable("$version");
                            if (ab) {
                                X = true;
                                ab = ab.split(" ")[1].split(",");
                                ag = [parseInt(ab[0], 10), parseInt(ab[1], 10), parseInt(ab[2], 10)]
                            }
                        }
                    } catch (Z) {}
                }
            }
            return {
                w3: aa,
                pv: ag,
                wk: af,
                ie: X,
                win: ae,
                mac: ac
            }
        }(),
        k = function() {
            if (!M.w3) {
                return
            }
            if (typeof j.readyState != D && j.readyState == "complete" || typeof j.readyState == D && (j.getElementsByTagName("body")[0] || j.body)) {
                f()
            }
            if (!J) {
                if (typeof j.addEventListener != D) {
                    j.addEventListener("DOMContentLoaded", f, false)
                }
                if (M.ie && M.win) {
                    j.attachEvent(x, function() {
                        if (j.readyState == "complete") {
                            j.detachEvent(x, arguments.callee);
                            f()
                        }
                    });
                    if (O == top) {
                        (function() {
                            if (J) {
                                return
                            }
                            try {
                                j.documentElement.doScroll("left")
                            } catch (X) {
                                setTimeout(arguments.callee, 0);
                                return
                            }
                            f()
                        })()
                    }
                }
                if (M.wk) {
                    (function() {
                        if (J) {
                            return
                        }
                        if (!/loaded|complete/.test(j.readyState)) {
                            setTimeout(arguments.callee, 0);
                            return
                        }
                        f()
                    })()
                }
                s(f)
            }
        }();

    function f() {
        if (J) {
            return
        }
        try {
            var Z = j.getElementsByTagName("body")[0].appendChild(C("span"));
            Z.parentNode.removeChild(Z)
        } catch (aa) {
            return
        }
        J = true;
        var X = U.length;
        for (var Y = 0; Y < X; Y++) {
            U[Y]()
        }
    }

    function K(X) {
        if (J) {
            X()
        } else {
            U[U.length] = X
        }
    }

    function s(Y) {
        if (typeof O.addEventListener != D) {
            O.addEventListener("load", Y, false)
        } else {
            if (typeof j.addEventListener != D) {
                j.addEventListener("load", Y, false)
            } else {
                if (typeof O.attachEvent != D) {
                    i(O, "onload", Y)
                } else {
                    if (typeof O.onload == "function") {
                        var X = O.onload;
                        O.onload = function() {
                            X();
                            Y()
                        }
                    } else {
                        O.onload = Y
                    }
                }
            }
        }
    }

    function h() {
        if (T) {
            V()
        } else {
            H()
        }
    }

    function V() {
        var X = j.getElementsByTagName("body")[0];
        var aa = C(r);
        aa.setAttribute("type", q);
        var Z = X.appendChild(aa);
        if (Z) {
            var Y = 0;
            (function() {
                if (typeof Z.GetVariable != D) {
                    var ab = Z.GetVariable("$version");
                    if (ab) {
                        ab = ab.split(" ")[1].split(",");
                        M.pv = [parseInt(ab[0], 10), parseInt(ab[1], 10), parseInt(ab[2], 10)]
                    }
                } else {
                    if (Y < 10) {
                        Y++;
                        setTimeout(arguments.callee, 10);
                        return
                    }
                }
                X.removeChild(aa);
                Z = null;
                H()
            })()
        } else {
            H()
        }
    }

    function H() {
        var ag = o.length;
        if (ag > 0) {
            for (var af = 0; af < ag; af++) {
                var Y = o[af].id;
                var ab = o[af].callbackFn;
                var aa = {
                    success: false,
                    id: Y
                };
                if (M.pv[0] > 0) {
                    var ae = c(Y);
                    if (ae) {
                        if (F(o[af].swfVersion) && !(M.wk && M.wk < 312)) {
                            w(Y, true);
                            if (ab) {
                                aa.success = true;
                                aa.ref = z(Y);
                                ab(aa)
                            }
                        } else {
                            if (o[af].expressInstall && A()) {
                                var ai = {};
                                ai.data = o[af].expressInstall;
                                ai.width = ae.getAttribute("width") || "0";
                                ai.height = ae.getAttribute("height") || "0";
                                if (ae.getAttribute("class")) {
                                    ai.styleclass = ae.getAttribute("class")
                                }
                                if (ae.getAttribute("align")) {
                                    ai.align = ae.getAttribute("align")
                                }
                                var ah = {};
                                var X = ae.getElementsByTagName("param");
                                var ac = X.length;
                                for (var ad = 0; ad < ac; ad++) {
                                    if (X[ad].getAttribute("name").toLowerCase() != "movie") {
                                        ah[X[ad].getAttribute("name")] = X[ad].getAttribute("value")
                                    }
                                }
                                P(ai, ah, Y, ab)
                            } else {
                                p(ae);
                                if (ab) {
                                    ab(aa)
                                }
                            }
                        }
                    }
                } else {
                    w(Y, true);
                    if (ab) {
                        var Z = z(Y);
                        if (Z && typeof Z.SetVariable != D) {
                            aa.success = true;
                            aa.ref = Z
                        }
                        ab(aa)
                    }
                }
            }
        }
    }

    function z(aa) {
        var X = null;
        var Y = c(aa);
        if (Y && Y.nodeName == "OBJECT") {
            if (typeof Y.SetVariable != D) {
                X = Y
            } else {
                var Z = Y.getElementsByTagName(r)[0];
                if (Z) {
                    X = Z
                }
            }
        }
        return X
    }

    function A() {
        return !a && F("6.0.65") && (M.win || M.mac) && !(M.wk && M.wk < 312)
    }

    function P(aa, ab, X, Z) {
        a = true;
        E = Z || null;
        B = {
            success: false,
            id: X
        };
        var ae = c(X);
        if (ae) {
            if (ae.nodeName == "OBJECT") {
                l = g(ae);
                Q = null
            } else {
                l = ae;
                Q = X
            }
            aa.id = R;
            if (typeof aa.width == D || !/%$/.test(aa.width) && parseInt(aa.width, 10) < 310) {
                aa.width = "310"
            }
            if (typeof aa.height == D || !/%$/.test(aa.height) && parseInt(aa.height, 10) < 137) {
                aa.height = "137"
            }
            j.title = j.title.slice(0, 47) + " - Flash Player Installation";
            var ad = M.ie && M.win ? "ActiveX" : "PlugIn",
                ac = "MMredirectURL=" + O.location.toString().replace(/&/g, "%26") + "&MMplayerType=" + ad + "&MMdoctitle=" + j.title;
            if (typeof ab.flashvars != D) {
                ab.flashvars += "&" + ac
            } else {
                ab.flashvars = ac
            }
            if (M.ie && M.win && ae.readyState != 4) {
                var Y = C("div");
                X += "SWFObjectNew";
                Y.setAttribute("id", X);
                ae.parentNode.insertBefore(Y, ae);
                ae.style.display = "none";
                (function() {
                    if (ae.readyState == 4) {
                        ae.parentNode.removeChild(ae)
                    } else {
                        setTimeout(arguments.callee, 10)
                    }
                })()
            }
            u(aa, ab, X)
        }
    }

    function p(Y) {
        if (M.ie && M.win && Y.readyState != 4) {
            var X = C("div");
            Y.parentNode.insertBefore(X, Y);
            X.parentNode.replaceChild(g(Y), X);
            Y.style.display = "none";
            (function() {
                if (Y.readyState == 4) {
                    Y.parentNode.removeChild(Y)
                } else {
                    setTimeout(arguments.callee, 10)
                }
            })()
        } else {
            Y.parentNode.replaceChild(g(Y), Y)
        }
    }

    function g(ab) {
        var aa = C("div");
        if (M.win && M.ie) {
            aa.innerHTML = ab.innerHTML
        } else {
            var Y = ab.getElementsByTagName(r)[0];
            if (Y) {
                var ad = Y.childNodes;
                if (ad) {
                    var X = ad.length;
                    for (var Z = 0; Z < X; Z++) {
                        if (!(ad[Z].nodeType == 1 && ad[Z].nodeName == "PARAM") && !(ad[Z].nodeType == 8)) {
                            aa.appendChild(ad[Z].cloneNode(true))
                        }
                    }
                }
            }
        }
        return aa
    }

    function u(ai, ag, Y) {
        var X, aa = c(Y);
        if (M.wk && M.wk < 312) {
            return X
        }
        if (aa) {
            if (typeof ai.id == D) {
                ai.id = Y
            }
            if (M.ie && M.win) {
                var ah = "";
                for (var ae in ai) {
                    if (ai[ae] != Object.prototype[ae]) {
                        if (ae.toLowerCase() == "data") {
                            ag.movie = ai[ae]
                        } else {
                            if (ae.toLowerCase() == "styleclass") {
                                ah += ' class="' + ai[ae] + '"'
                            } else {
                                if (ae.toLowerCase() != "classid") {
                                    ah += " " + ae + '="' + ai[ae] + '"'
                                }
                            }
                        }
                    }
                }
                var af = "";
                for (var ad in ag) {
                    if (ag[ad] != Object.prototype[ad]) {
                        af += '<param name="' + ad + '" value="' + ag[ad] + '" />'
                    }
                }
                aa.outerHTML = '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"' + ah + ">" + af + "</object>";
                N[N.length] = ai.id;
                X = c(ai.id)
            } else {
                var Z = C(r);
                Z.setAttribute("type", q);
                for (var ac in ai) {
                    if (ai[ac] != Object.prototype[ac]) {
                        if (ac.toLowerCase() == "styleclass") {
                            Z.setAttribute("class", ai[ac])
                        } else {
                            if (ac.toLowerCase() != "classid") {
                                Z.setAttribute(ac, ai[ac])
                            }
                        }
                    }
                }
                for (var ab in ag) {
                    if (ag[ab] != Object.prototype[ab] && ab.toLowerCase() != "movie") {
                        e(Z, ab, ag[ab])
                    }
                }
                aa.parentNode.replaceChild(Z, aa);
                X = Z
            }
        }
        return X
    }

    function e(Z, X, Y) {
        var aa = C("param");
        aa.setAttribute("name", X);
        aa.setAttribute("value", Y);
        Z.appendChild(aa)
    }

    function y(Y) {
        var X = c(Y);
        if (X && X.nodeName == "OBJECT") {
            if (M.ie && M.win) {
                X.style.display = "none";
                (function() {
                    if (X.readyState == 4) {
                        b(Y)
                    } else {
                        setTimeout(arguments.callee, 10)
                    }
                })()
            } else {
                X.parentNode.removeChild(X)
            }
        }
    }

    function b(Z) {
        var Y = c(Z);
        if (Y) {
            for (var X in Y) {
                if (typeof Y[X] == "function") {
                    Y[X] = null
                }
            }
            Y.parentNode.removeChild(Y)
        }
    }

    function c(Z) {
        var X = null;
        try {
            X = j.getElementById(Z)
        } catch (Y) {}
        return X
    }

    function C(X) {
        return j.createElement(X)
    }

    function i(Z, X, Y) {
        Z.attachEvent(X, Y);
        I[I.length] = [Z, X, Y]
    }

    function F(Z) {
        var Y = M.pv,
            X = Z.split(".");
        X[0] = parseInt(X[0], 10);
        X[1] = parseInt(X[1], 10) || 0;
        X[2] = parseInt(X[2], 10) || 0;
        return Y[0] > X[0] || Y[0] == X[0] && Y[1] > X[1] || Y[0] == X[0] && Y[1] == X[1] && Y[2] >= X[2] ? true : false
    }

    function v(ac, Y, ad, ab) {
        if (M.ie && M.mac) {
            return
        }
        var aa = j.getElementsByTagName("head")[0];
        if (!aa) {
            return
        }
        var X = ad && typeof ad == "string" ? ad : "screen";
        if (ab) {
            n = null;
            G = null
        }
        if (!n || G != X) {
            var Z = C("style");
            Z.setAttribute("type", "text/css");
            Z.setAttribute("media", X);
            n = aa.appendChild(Z);
            if (M.ie && M.win && typeof j.styleSheets != D && j.styleSheets.length > 0) {
                n = j.styleSheets[j.styleSheets.length - 1]
            }
            G = X
        }
        if (M.ie && M.win) {
            if (n && typeof n.addRule == r) {
                n.addRule(ac, Y)
            }
        } else {
            if (n && typeof j.createTextNode != D) {
                n.appendChild(j.createTextNode(ac + " {" + Y + "}"))
            }
        }
    }

    function w(Z, X) {
        if (!m) {
            return
        }
        var Y = X ? "visible" : "hidden";
        if (J && c(Z)) {
            c(Z).style.visibility = Y
        } else {
            v("#" + Z, "visibility:" + Y)
        }
    }

    function L(Y) {
        var Z = /[\\\"<>\.;]/;
        var X = Z.exec(Y) != null;
        return X && typeof encodeURIComponent != D ? encodeURIComponent(Y) : Y
    }
    var d = function() {
        if (M.ie && M.win) {
            window.attachEvent("onunload", function() {
                var ac = I.length;
                for (var ab = 0; ab < ac; ab++) {
                    I[ab][0].detachEvent(I[ab][1], I[ab][2])
                }
                var Z = N.length;
                for (var aa = 0; aa < Z; aa++) {
                    y(N[aa])
                }
                for (var Y in M) {
                    M[Y] = null
                }
                M = null;
                for (var X in swfobject) {
                    swfobject[X] = null
                }
                swfobject = null
            })
        }
    }();
    return {
        registerObject: function(ab, X, aa, Z) {
            if (M.w3 && ab && X) {
                var Y = {};
                Y.id = ab;
                Y.swfVersion = X;
                Y.expressInstall = aa;
                Y.callbackFn = Z;
                o[o.length] = Y;
                w(ab, false)
            } else {
                if (Z) {
                    Z({
                        success: false,
                        id: ab
                    })
                }
            }
        },
        getObjectById: function(X) {
            if (M.w3) {
                return z(X)
            }
        },
        embedSWF: function(ab, ah, ae, ag, Y, aa, Z, ad, af, ac) {
            var X = {
                success: false,
                id: ah
            };
            if (M.w3 && !(M.wk && M.wk < 312) && ab && ah && ae && ag && Y) {
                w(ah, false);
                K(function() {
                    ae += "";
                    ag += "";
                    var aj = {};
                    if (af && typeof af === r) {
                        for (var al in af) {
                            aj[al] = af[al]
                        }
                    }
                    aj.data = ab;
                    aj.width = ae;
                    aj.height = ag;
                    var am = {};
                    if (ad && typeof ad === r) {
                        for (var ak in ad) {
                            am[ak] = ad[ak]
                        }
                    }
                    if (Z && typeof Z === r) {
                        for (var ai in Z) {
                            if (typeof am.flashvars != D) {
                                am.flashvars += "&" + ai + "=" + Z[ai]
                            } else {
                                am.flashvars = ai + "=" + Z[ai]
                            }
                        }
                    }
                    if (F(Y)) {
                        var an = u(aj, am, ah);
                        if (aj.id == ah) {
                            w(ah, true)
                        }
                        X.success = true;
                        X.ref = an
                    } else {
                        if (aa && A()) {
                            aj.data = aa;
                            P(aj, am, ah, ac);
                            return
                        } else {
                            w(ah, true)
                        }
                    }
                    if (ac) {
                        ac(X)
                    }
                })
            } else {
                if (ac) {
                    ac(X)
                }
            }
        },
        switchOffAutoHideShow: function() {
            m = false
        },
        ua: M,
        getFlashPlayerVersion: function() {
            return {
                major: M.pv[0],
                minor: M.pv[1],
                release: M.pv[2]
            }
        },
        hasFlashPlayerVersion: F,
        createSWF: function(Z, Y, X) {
            if (M.w3) {
                return u(Z, Y, X)
            } else {
                return undefined
            }
        },
        showExpressInstall: function(Z, aa, X, Y) {
            if (M.w3 && A()) {
                P(Z, aa, X, Y)
            }
        },
        removeSWF: function(X) {
            if (M.w3) {
                y(X)
            }
        },
        createCSS: function(aa, Z, Y, X) {
            if (M.w3) {
                v(aa, Z, Y, X)
            }
        },
        addDomLoadEvent: K,
        addLoadEvent: s,
        getQueryParamValue: function(aa) {
            var Z = j.location.search || j.location.hash;
            if (Z) {
                if (/\?/.test(Z)) {
                    Z = Z.split("?")[1]
                }
                if (aa == null) {
                    return L(Z)
                }
                var Y = Z.split("&");
                for (var X = 0; X < Y.length; X++) {
                    if (Y[X].substring(0, Y[X].indexOf("=")) == aa) {
                        return L(Y[X].substring(Y[X].indexOf("=") + 1))
                    }
                }
            }
            return ""
        },
        expressInstallCallback: function() {
            if (a) {
                var X = c(R);
                if (X && l) {
                    X.parentNode.replaceChild(l, X);
                    if (Q) {
                        w(Q, true);
                        if (M.ie && M.win) {
                            l.style.display = "block"
                        }
                    }
                    if (E) {
                        E(B)
                    }
                }
                a = false
            }
        }
    }
}();
! function(t, e) {
    "function" == typeof define && define.amd ? define(e) : "object" == typeof exports ? module.exports = e(require, exports, module) : t.Tether = e()
}(this, function(t, e, o) {
    "use strict";

    function n(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function i(t) {
        var e = t.getBoundingClientRect(),
            o = {};
        for (var n in e) o[n] = e[n];
        if (t.ownerDocument !== document) {
            var r = t.ownerDocument.defaultView.frameElement;
            if (r) {
                var s = i(r);
                o.top += s.top, o.bottom += s.top, o.left += s.left, o.right += s.left
            }
        }
        return o
    }

    function r(t) {
        var e = getComputedStyle(t) || {},
            o = e.position,
            n = [];
        if ("fixed" === o) return [t];
        for (var i = t;
            (i = i.parentNode) && i && 1 === i.nodeType;) {
            var r = void 0;
            try {
                r = getComputedStyle(i)
            } catch (s) {}
            if ("undefined" == typeof r || null === r) return n.push(i), n;
            var a = r,
                f = a.overflow,
                l = a.overflowX,
                h = a.overflowY;
            /(auto|scroll)/.test(f + h + l) && ("absolute" !== o || ["relative", "absolute", "fixed"].indexOf(r.position) >= 0) && n.push(i)
        }
        return n.push(t.ownerDocument.body), t.ownerDocument !== document && n.push(t.ownerDocument.defaultView), n
    }

    function s() {
        A && document.body.removeChild(A), A = null
    }

    function a(t) {
        var e = void 0;
        t === document ? (e = document, t = document.documentElement) : e = t.ownerDocument;
        var o = e.documentElement,
            n = i(t),
            r = P();
        return n.top -= r.top, n.left -= r.left, "undefined" == typeof n.width && (n.width = document.body.scrollWidth - n.left - n.right), "undefined" == typeof n.height && (n.height = document.body.scrollHeight - n.top - n.bottom), n.top = n.top - o.clientTop, n.left = n.left - o.clientLeft, n.right = e.body.clientWidth - n.width - n.left, n.bottom = e.body.clientHeight - n.height - n.top, n
    }

    function f(t) {
        return t.offsetParent || document.documentElement
    }

    function l() {
        var t = document.createElement("div");
        t.style.width = "100%", t.style.height = "200px";
        var e = document.createElement("div");
        h(e.style, {
            position: "absolute",
            top: 0,
            left: 0,
            pointerEvents: "none",
            visibility: "hidden",
            width: "200px",
            height: "150px",
            overflow: "hidden"
        }), e.appendChild(t), document.body.appendChild(e);
        var o = t.offsetWidth;
        e.style.overflow = "scroll";
        var n = t.offsetWidth;
        o === n && (n = e.clientWidth), document.body.removeChild(e);
        var i = o - n;
        return {
            width: i,
            height: i
        }
    }

    function h() {
        var t = arguments.length <= 0 || void 0 === arguments[0] ? {} : arguments[0],
            e = [];
        return Array.prototype.push.apply(e, arguments), e.slice(1).forEach(function(e) {
            if (e)
                for (var o in e)({}).hasOwnProperty.call(e, o) && (t[o] = e[o])
        }), t
    }

    function u(t, e) {
        if ("undefined" != typeof t.classList) e.split(" ").forEach(function(e) {
            e.trim() && t.classList.remove(e)
        });
        else {
            var o = new RegExp("(^| )" + e.split(" ").join("|") + "( |$)", "gi"),
                n = c(t).replace(o, " ");
            g(t, n)
        }
    }

    function d(t, e) {
        if ("undefined" != typeof t.classList) e.split(" ").forEach(function(e) {
            e.trim() && t.classList.add(e)
        });
        else {
            u(t, e);
            var o = c(t) + (" " + e);
            g(t, o)
        }
    }

    function p(t, e) {
        if ("undefined" != typeof t.classList) return t.classList.contains(e);
        var o = c(t);
        return new RegExp("(^| )" + e + "( |$)", "gi").test(o)
    }

    function c(t) {
        return t.className instanceof t.ownerDocument.defaultView.SVGAnimatedString ? t.className.baseVal : t.className
    }

    function g(t, e) {
        t.setAttribute("class", e)
    }

    function m(t, e, o) {
        o.forEach(function(o) {
            -1 === e.indexOf(o) && p(t, o) && u(t, o)
        }), e.forEach(function(e) {
            p(t, e) || d(t, e)
        })
    }

    function n(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function v(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
    }

    function y(t, e) {
        var o = arguments.length <= 2 || void 0 === arguments[2] ? 1 : arguments[2];
        return t + o >= e && e >= t - o
    }

    function b() {
        return "undefined" != typeof performance && "undefined" != typeof performance.now ? performance.now() : +new Date
    }

    function w() {
        for (var t = {
                top: 0,
                left: 0
            }, e = arguments.length, o = Array(e), n = 0; e > n; n++) o[n] = arguments[n];
        return o.forEach(function(e) {
            var o = e.top,
                n = e.left;
            "string" == typeof o && (o = parseFloat(o, 10)), "string" == typeof n && (n = parseFloat(n, 10)), t.top += o, t.left += n
        }), t
    }

    function C(t, e) {
        return "string" == typeof t.left && -1 !== t.left.indexOf("%") && (t.left = parseFloat(t.left, 10) / 100 * e.width), "string" == typeof t.top && -1 !== t.top.indexOf("%") && (t.top = parseFloat(t.top, 10) / 100 * e.height), t
    }

    function O(t, e) {
        return "scrollParent" === e ? e = t.scrollParents[0] : "window" === e && (e = [pageXOffset, pageYOffset, innerWidth + pageXOffset, innerHeight + pageYOffset]), e === document && (e = e.documentElement), "undefined" != typeof e.nodeType && ! function() {
            var t = e,
                o = a(e),
                n = o,
                i = getComputedStyle(e);
            if (e = [n.left, n.top, o.width + n.left, o.height + n.top], t.ownerDocument !== document) {
                var r = t.ownerDocument.defaultView;
                e[0] += r.pageXOffset, e[1] += r.pageYOffset, e[2] += r.pageXOffset, e[3] += r.pageYOffset
            }
            $.forEach(function(t, o) {
                t = t[0].toUpperCase() + t.substr(1), "Top" === t || "Left" === t ? e[o] += parseFloat(i["border" + t + "Width"]) : e[o] -= parseFloat(i["border" + t + "Width"])
            })
        }(), e
    }
    var E = function() {
            function t(t, e) {
                for (var o = 0; o < e.length; o++) {
                    var n = e[o];
                    n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                }
            }
            return function(e, o, n) {
                return o && t(e.prototype, o), n && t(e, n), e
            }
        }(),
        x = void 0;
    "undefined" == typeof x && (x = {
        modules: []
    });
    var A = null,
        T = function() {
            var t = 0;
            return function() {
                return ++t
            }
        }(),
        S = {},
        P = function() {
            var t = A;
            t || (t = document.createElement("div"), t.setAttribute("data-tether-id", T()), h(t.style, {
                top: 0,
                left: 0,
                position: "absolute"
            }), document.body.appendChild(t), A = t);
            var e = t.getAttribute("data-tether-id");
            return "undefined" == typeof S[e] && (S[e] = i(t), M(function() {
                delete S[e]
            })), S[e]
        },
        W = [],
        M = function(t) {
            W.push(t)
        },
        _ = function() {
            for (var t = void 0; t = W.pop();) t()
        },
        k = function() {
            function t() {
                n(this, t)
            }
            return E(t, [{
                key: "on",
                value: function(t, e, o) {
                    var n = arguments.length <= 3 || void 0 === arguments[3] ? !1 : arguments[3];
                    "undefined" == typeof this.bindings && (this.bindings = {}), "undefined" == typeof this.bindings[t] && (this.bindings[t] = []), this.bindings[t].push({
                        handler: e,
                        ctx: o,
                        once: n
                    })
                }
            }, {
                key: "once",
                value: function(t, e, o) {
                    this.on(t, e, o, !0)
                }
            }, {
                key: "off",
                value: function(t, e) {
                    if ("undefined" != typeof this.bindings && "undefined" != typeof this.bindings[t])
                        if ("undefined" == typeof e) delete this.bindings[t];
                        else
                            for (var o = 0; o < this.bindings[t].length;) this.bindings[t][o].handler === e ? this.bindings[t].splice(o, 1) : ++o
                }
            }, {
                key: "trigger",
                value: function(t) {
                    if ("undefined" != typeof this.bindings && this.bindings[t]) {
                        for (var e = 0, o = arguments.length, n = Array(o > 1 ? o - 1 : 0), i = 1; o > i; i++) n[i - 1] = arguments[i];
                        for (; e < this.bindings[t].length;) {
                            var r = this.bindings[t][e],
                                s = r.handler,
                                a = r.ctx,
                                f = r.once,
                                l = a;
                            "undefined" == typeof l && (l = this), s.apply(l, n), f ? this.bindings[t].splice(e, 1) : ++e
                        }
                    }
                }
            }]), t
        }();
    x.Utils = {
        getActualBoundingClientRect: i,
        getScrollParents: r,
        getBounds: a,
        getOffsetParent: f,
        extend: h,
        addClass: d,
        removeClass: u,
        hasClass: p,
        updateClasses: m,
        defer: M,
        flush: _,
        uniqueId: T,
        Evented: k,
        getScrollBarSize: l,
        removeUtilElements: s
    };
    var B = function() {
            function t(t, e) {
                var o = [],
                    n = !0,
                    i = !1,
                    r = void 0;
                try {
                    for (var s, a = t[Symbol.iterator](); !(n = (s = a.next()).done) && (o.push(s.value), !e || o.length !== e); n = !0);
                } catch (f) {
                    i = !0, r = f
                } finally {
                    try {
                        !n && a["return"] && a["return"]()
                    } finally {
                        if (i) throw r
                    }
                }
                return o
            }
            return function(e, o) {
                if (Array.isArray(e)) return e;
                if (Symbol.iterator in Object(e)) return t(e, o);
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }
        }(),
        E = function() {
            function t(t, e) {
                for (var o = 0; o < e.length; o++) {
                    var n = e[o];
                    n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                }
            }
            return function(e, o, n) {
                return o && t(e.prototype, o), n && t(e, n), e
            }
        }(),
        z = function(t, e, o) {
            for (var n = !0; n;) {
                var i = t,
                    r = e,
                    s = o;
                n = !1, null === i && (i = Function.prototype);
                var a = Object.getOwnPropertyDescriptor(i, r);
                if (void 0 !== a) {
                    if ("value" in a) return a.value;
                    var f = a.get;
                    if (void 0 === f) return;
                    return f.call(s)
                }
                var l = Object.getPrototypeOf(i);
                if (null === l) return;
                t = l, e = r, o = s, n = !0, a = l = void 0
            }
        };
    if ("undefined" == typeof x) throw new Error("You must include the utils.js file before tether.js");
    var j = x.Utils,
        r = j.getScrollParents,
        a = j.getBounds,
        f = j.getOffsetParent,
        h = j.extend,
        d = j.addClass,
        u = j.removeClass,
        m = j.updateClasses,
        M = j.defer,
        _ = j.flush,
        l = j.getScrollBarSize,
        s = j.removeUtilElements,
        Y = function() {
            if ("undefined" == typeof document) return "";
            for (var t = document.createElement("div"), e = ["transform", "WebkitTransform", "OTransform", "MozTransform", "msTransform"], o = 0; o < e.length; ++o) {
                var n = e[o];
                if (void 0 !== t.style[n]) return n
            }
        }(),
        L = [],
        D = function() {
            L.forEach(function(t) {
                t.position(!1)
            }), _()
        };
    ! function() {
        var t = null,
            e = null,
            o = null,
            n = function i() {
                return "undefined" != typeof e && e > 16 ? (e = Math.min(e - 16, 250), void(o = setTimeout(i, 250))) : void("undefined" != typeof t && b() - t < 10 || (null != o && (clearTimeout(o), o = null), t = b(), D(), e = b() - t))
            };
        "undefined" != typeof window && "undefined" != typeof window.addEventListener && ["resize", "scroll", "touchmove"].forEach(function(t) {
            window.addEventListener(t, n)
        })
    }();
    var X = {
            center: "center",
            left: "right",
            right: "left"
        },
        F = {
            middle: "middle",
            top: "bottom",
            bottom: "top"
        },
        H = {
            top: 0,
            left: 0,
            middle: "50%",
            center: "50%",
            bottom: "100%",
            right: "100%"
        },
        N = function(t, e) {
            var o = t.left,
                n = t.top;
            return "auto" === o && (o = X[e.left]), "auto" === n && (n = F[e.top]), {
                left: o,
                top: n
            }
        },
        U = function(t) {
            var e = t.left,
                o = t.top;
            return "undefined" != typeof H[t.left] && (e = H[t.left]), "undefined" != typeof H[t.top] && (o = H[t.top]), {
                left: e,
                top: o
            }
        },
        V = function(t) {
            var e = t.split(" "),
                o = B(e, 2),
                n = o[0],
                i = o[1];
            return {
                top: n,
                left: i
            }
        },
        R = V,
        q = function(t) {
            function e(t) {
                var o = this;
                n(this, e), z(Object.getPrototypeOf(e.prototype), "constructor", this).call(this), this.position = this.position.bind(this), L.push(this), this.history = [], this.setOptions(t, !1), x.modules.forEach(function(t) {
                    "undefined" != typeof t.initialize && t.initialize.call(o)
                }), this.position()
            }
            return v(e, t), E(e, [{
                key: "getClass",
                value: function() {
                    var t = arguments.length <= 0 || void 0 === arguments[0] ? "" : arguments[0],
                        e = this.options.classes;
                    return "undefined" != typeof e && e[t] ? this.options.classes[t] : this.options.classPrefix ? this.options.classPrefix + "-" + t : t
                }
            }, {
                key: "setOptions",
                value: function(t) {
                    var e = this,
                        o = arguments.length <= 1 || void 0 === arguments[1] ? !0 : arguments[1],
                        n = {
                            offset: "0 0",
                            targetOffset: "0 0",
                            targetAttachment: "auto auto",
                            classPrefix: "tether"
                        };
                    this.options = h(n, t);
                    var i = this.options,
                        s = i.element,
                        a = i.target,
                        f = i.targetModifier;
                    if (this.element = s, this.target = a, this.targetModifier = f, "viewport" === this.target ? (this.target = document.body, this.targetModifier = "visible") : "scroll-handle" === this.target && (this.target = document.body, this.targetModifier = "scroll-handle"), ["element", "target"].forEach(function(t) {
                            if ("undefined" == typeof e[t]) throw new Error("Tether Error: Both element and target must be defined");
                            "undefined" != typeof e[t].jquery ? e[t] = e[t][0] : "string" == typeof e[t] && (e[t] = document.querySelector(e[t]))
                        }), d(this.element, this.getClass("element")), this.options.addTargetClasses !== !1 && d(this.target, this.getClass("target")), !this.options.attachment) throw new Error("Tether Error: You must provide an attachment");
                    this.targetAttachment = R(this.options.targetAttachment), this.attachment = R(this.options.attachment), this.offset = V(this.options.offset), this.targetOffset = V(this.options.targetOffset), "undefined" != typeof this.scrollParents && this.disable(), "scroll-handle" === this.targetModifier ? this.scrollParents = [this.target] : this.scrollParents = r(this.target), this.options.enabled !== !1 && this.enable(o)
                }
            }, {
                key: "getTargetBounds",
                value: function() {
                    if ("undefined" == typeof this.targetModifier) return a(this.target);
                    if ("visible" === this.targetModifier) {
                        if (this.target === document.body) return {
                            top: pageYOffset,
                            left: pageXOffset,
                            height: innerHeight,
                            width: innerWidth
                        };
                        var t = a(this.target),
                            e = {
                                height: t.height,
                                width: t.width,
                                top: t.top,
                                left: t.left
                            };
                        return e.height = Math.min(e.height, t.height - (pageYOffset - t.top)), e.height = Math.min(e.height, t.height - (t.top + t.height - (pageYOffset + innerHeight))), e.height = Math.min(innerHeight, e.height), e.height -= 2, e.width = Math.min(e.width, t.width - (pageXOffset - t.left)), e.width = Math.min(e.width, t.width - (t.left + t.width - (pageXOffset + innerWidth))), e.width = Math.min(innerWidth, e.width), e.width -= 2, e.top < pageYOffset && (e.top = pageYOffset), e.left < pageXOffset && (e.left = pageXOffset), e
                    }
                    if ("scroll-handle" === this.targetModifier) {
                        var t = void 0,
                            o = this.target;
                        o === document.body ? (o = document.documentElement, t = {
                            left: pageXOffset,
                            top: pageYOffset,
                            height: innerHeight,
                            width: innerWidth
                        }) : t = a(o);
                        var n = getComputedStyle(o),
                            i = o.scrollWidth > o.clientWidth || [n.overflow, n.overflowX].indexOf("scroll") >= 0 || this.target !== document.body,
                            r = 0;
                        i && (r = 15);
                        var s = t.height - parseFloat(n.borderTopWidth) - parseFloat(n.borderBottomWidth) - r,
                            e = {
                                width: 15,
                                height: .975 * s * (s / o.scrollHeight),
                                left: t.left + t.width - parseFloat(n.borderLeftWidth) - 15
                            },
                            f = 0;
                        408 > s && this.target === document.body && (f = -11e-5 * Math.pow(s, 2) - .00727 * s + 22.58), this.target !== document.body && (e.height = Math.max(e.height, 24));
                        var l = this.target.scrollTop / (o.scrollHeight - s);
                        return e.top = l * (s - e.height - f) + t.top + parseFloat(n.borderTopWidth), this.target === document.body && (e.height = Math.max(e.height, 24)), e
                    }
                }
            }, {
                key: "clearCache",
                value: function() {
                    this._cache = {}
                }
            }, {
                key: "cache",
                value: function(t, e) {
                    return "undefined" == typeof this._cache && (this._cache = {}), "undefined" == typeof this._cache[t] && (this._cache[t] = e.call(this)), this._cache[t]
                }
            }, {
                key: "enable",
                value: function() {
                    var t = this,
                        e = arguments.length <= 0 || void 0 === arguments[0] ? !0 : arguments[0];
                    this.options.addTargetClasses !== !1 && d(this.target, this.getClass("enabled")), d(this.element, this.getClass("enabled")), this.enabled = !0, this.scrollParents.forEach(function(e) {
                        e !== t.target.ownerDocument && e.addEventListener("scroll", t.position)
                    }), e && this.position()
                }
            }, {
                key: "disable",
                value: function() {
                    var t = this;
                    u(this.target, this.getClass("enabled")), u(this.element, this.getClass("enabled")), this.enabled = !1, "undefined" != typeof this.scrollParents && this.scrollParents.forEach(function(e) {
                        e.removeEventListener("scroll", t.position)
                    })
                }
            }, {
                key: "destroy",
                value: function() {
                    var t = this;
                    this.disable(), L.forEach(function(e, o) {
                        e === t && L.splice(o, 1)
                    }), 0 === L.length && s()
                }
            }, {
                key: "updateAttachClasses",
                value: function(t, e) {
                    var o = this;
                    t = t || this.attachment, e = e || this.targetAttachment;
                    var n = ["left", "top", "bottom", "right", "middle", "center"];
                    "undefined" != typeof this._addAttachClasses && this._addAttachClasses.length && this._addAttachClasses.splice(0, this._addAttachClasses.length), "undefined" == typeof this._addAttachClasses && (this._addAttachClasses = []);
                    var i = this._addAttachClasses;
                    t.top && i.push(this.getClass("element-attached") + "-" + t.top), t.left && i.push(this.getClass("element-attached") + "-" + t.left), e.top && i.push(this.getClass("target-attached") + "-" + e.top), e.left && i.push(this.getClass("target-attached") + "-" + e.left);
                    var r = [];
                    n.forEach(function(t) {
                        r.push(o.getClass("element-attached") + "-" + t), r.push(o.getClass("target-attached") + "-" + t)
                    }), M(function() {
                        "undefined" != typeof o._addAttachClasses && (m(o.element, o._addAttachClasses, r), o.options.addTargetClasses !== !1 && m(o.target, o._addAttachClasses, r), delete o._addAttachClasses)
                    })
                }
            }, {
                key: "position",
                value: function() {
                    var t = this,
                        e = arguments.length <= 0 || void 0 === arguments[0] ? !0 : arguments[0];
                    if (this.enabled) {
                        this.clearCache();
                        var o = N(this.targetAttachment, this.attachment);
                        this.updateAttachClasses(this.attachment, o);
                        var n = this.cache("element-bounds", function() {
                                return a(t.element)
                            }),
                            i = n.width,
                            r = n.height;
                        if (0 === i && 0 === r && "undefined" != typeof this.lastSize) {
                            var s = this.lastSize;
                            i = s.width, r = s.height
                        } else this.lastSize = {
                            width: i,
                            height: r
                        };
                        var h = this.cache("target-bounds", function() {
                                return t.getTargetBounds()
                            }),
                            u = h,
                            d = C(U(this.attachment), {
                                width: i,
                                height: r
                            }),
                            p = C(U(o), u),
                            c = C(this.offset, {
                                width: i,
                                height: r
                            }),
                            g = C(this.targetOffset, u);
                        d = w(d, c), p = w(p, g);
                        for (var m = h.left + p.left - d.left, v = h.top + p.top - d.top, y = 0; y < x.modules.length; ++y) {
                            var b = x.modules[y],
                                O = b.position.call(this, {
                                    left: m,
                                    top: v,
                                    targetAttachment: o,
                                    targetPos: h,
                                    elementPos: n,
                                    offset: d,
                                    targetOffset: p,
                                    manualOffset: c,
                                    manualTargetOffset: g,
                                    scrollbarSize: S,
                                    attachment: this.attachment
                                });
                            if (O === !1) return !1;
                            "undefined" != typeof O && "object" == typeof O && (v = O.top, m = O.left)
                        }
                        var E = {
                                page: {
                                    top: v,
                                    left: m
                                },
                                viewport: {
                                    top: v - pageYOffset,
                                    bottom: pageYOffset - v - r + innerHeight,
                                    left: m - pageXOffset,
                                    right: pageXOffset - m - i + innerWidth
                                }
                            },
                            A = this.target.ownerDocument,
                            T = A.defaultView,
                            S = void 0;
                        return A.body.scrollWidth > T.innerWidth && (S = this.cache("scrollbar-size", l), E.viewport.bottom -= S.height), A.body.scrollHeight > T.innerHeight && (S = this.cache("scrollbar-size", l), E.viewport.right -= S.width), (-1 === ["", "static"].indexOf(A.body.style.position) || -1 === ["", "static"].indexOf(A.body.parentElement.style.position)) && (E.page.bottom = A.body.scrollHeight - v - r, E.page.right = A.body.scrollWidth - m - i), "undefined" != typeof this.options.optimizations && this.options.optimizations.moveElement !== !1 && "undefined" == typeof this.targetModifier && ! function() {
                            var e = t.cache("target-offsetparent", function() {
                                    return f(t.target)
                                }),
                                o = t.cache("target-offsetparent-bounds", function() {
                                    return a(e)
                                }),
                                n = getComputedStyle(e),
                                i = o,
                                r = {};
                            if (["Top", "Left", "Bottom", "Right"].forEach(function(t) {
                                    r[t.toLowerCase()] = parseFloat(n["border" + t + "Width"])
                                }), o.right = A.body.scrollWidth - o.left - i.width + r.right, o.bottom = A.body.scrollHeight - o.top - i.height + r.bottom, E.page.top >= o.top + r.top && E.page.bottom >= o.bottom && E.page.left >= o.left + r.left && E.page.right >= o.right) {
                                var s = e.scrollTop,
                                    l = e.scrollLeft;
                                E.offset = {
                                    top: E.page.top - o.top + s - r.top,
                                    left: E.page.left - o.left + l - r.left
                                }
                            }
                        }(), this.move(E), this.history.unshift(E), this.history.length > 3 && this.history.pop(), e && _(), !0
                    }
                }
            }, {
                key: "move",
                value: function(t) {
                    var e = this;
                    if ("undefined" != typeof this.element.parentNode) {
                        var o = {};
                        for (var n in t) {
                            o[n] = {};
                            for (var i in t[n]) {
                                for (var r = !1, s = 0; s < this.history.length; ++s) {
                                    var a = this.history[s];
                                    if ("undefined" != typeof a[n] && !y(a[n][i], t[n][i])) {
                                        r = !0;
                                        break
                                    }
                                }
                                r || (o[n][i] = !0)
                            }
                        }
                        var l = {
                                top: "",
                                left: "",
                                right: "",
                                bottom: ""
                            },
                            u = function(t, o) {
                                var n = "undefined" != typeof e.options.optimizations,
                                    i = n ? e.options.optimizations.gpu : null;
                                if (i !== !1) {
                                    var r = void 0,
                                        s = void 0;
                                    t.top ? (l.top = 0, r = o.top) : (l.bottom = 0, r = -o.bottom), t.left ? (l.left = 0, s = o.left) : (l.right = 0, s = -o.right), l[Y] = "translateX(" + Math.round(s) + "px) translateY(" + Math.round(r) + "px)", "msTransform" !== Y && (l[Y] += " translateZ(0)")
                                } else t.top ? l.top = o.top + "px" : l.bottom = o.bottom + "px", t.left ? l.left = o.left + "px" : l.right = o.right + "px"
                            },
                            d = !1;
                        if ((o.page.top || o.page.bottom) && (o.page.left || o.page.right) ? (l.position = "absolute", u(o.page, t.page)) : (o.viewport.top || o.viewport.bottom) && (o.viewport.left || o.viewport.right) ? (l.position = "fixed", u(o.viewport, t.viewport)) : "undefined" != typeof o.offset && o.offset.top && o.offset.left ? ! function() {
                                l.position = "absolute";
                                var n = e.cache("target-offsetparent", function() {
                                    return f(e.target)
                                });
                                f(e.element) !== n && M(function() {
                                    e.element.parentNode.removeChild(e.element), n.appendChild(e.element)
                                }), u(o.offset, t.offset), d = !0
                            }() : (l.position = "absolute", u({
                                top: !0,
                                left: !0
                            }, t.page)), !d) {
                            for (var p = !0, c = this.element.parentNode; c && 1 === c.nodeType && "BODY" !== c.tagName;) {
                                if ("static" !== getComputedStyle(c).position) {
                                    p = !1;
                                    break
                                }
                                c = c.parentNode
                            }
                            p || (this.element.parentNode.removeChild(this.element), this.element.ownerDocument.body.appendChild(this.element))
                        }
                        var g = {},
                            m = !1;
                        for (var i in l) {
                            var v = l[i],
                                b = this.element.style[i];
                            b !== v && (m = !0, g[i] = v)
                        }
                        m && M(function() {
                            h(e.element.style, g)
                        })
                    }
                }
            }]), e
        }(k);
    q.modules = [], x.position = D;
    var I = h(q, x),
        B = function() {
            function t(t, e) {
                var o = [],
                    n = !0,
                    i = !1,
                    r = void 0;
                try {
                    for (var s, a = t[Symbol.iterator](); !(n = (s = a.next()).done) && (o.push(s.value), !e || o.length !== e); n = !0);
                } catch (f) {
                    i = !0, r = f
                } finally {
                    try {
                        !n && a["return"] && a["return"]()
                    } finally {
                        if (i) throw r
                    }
                }
                return o
            }
            return function(e, o) {
                if (Array.isArray(e)) return e;
                if (Symbol.iterator in Object(e)) return t(e, o);
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }
        }(),
        j = x.Utils,
        a = j.getBounds,
        h = j.extend,
        m = j.updateClasses,
        M = j.defer,
        $ = ["left", "top", "right", "bottom"];
    x.modules.push({
        position: function(t) {
            var e = this,
                o = t.top,
                n = t.left,
                i = t.targetAttachment;
            if (!this.options.constraints) return !0;
            var r = this.cache("element-bounds", function() {
                    return a(e.element)
                }),
                s = r.height,
                f = r.width;
            if (0 === f && 0 === s && "undefined" != typeof this.lastSize) {
                var l = this.lastSize;
                f = l.width, s = l.height
            }
            var u = this.cache("target-bounds", function() {
                    return e.getTargetBounds()
                }),
                d = u.height,
                p = u.width,
                c = [this.getClass("pinned"), this.getClass("out-of-bounds")];
            this.options.constraints.forEach(function(t) {
                var e = t.outOfBoundsClass,
                    o = t.pinnedClass;
                e && c.push(e), o && c.push(o)
            }), c.forEach(function(t) {
                ["left", "top", "right", "bottom"].forEach(function(e) {
                    c.push(t + "-" + e)
                })
            });
            var g = [],
                v = h({}, i),
                y = h({}, this.attachment);
            return this.options.constraints.forEach(function(t) {
                var r = t.to,
                    a = t.attachment,
                    l = t.pin;
                "undefined" == typeof a && (a = "");
                var h = void 0,
                    u = void 0;
                if (a.indexOf(" ") >= 0) {
                    var c = a.split(" "),
                        m = B(c, 2);
                    u = m[0], h = m[1]
                } else h = u = a;
                var b = O(e, r);
                ("target" === u || "both" === u) && (o < b[1] && "top" === v.top && (o += d, v.top = "bottom"), o + s > b[3] && "bottom" === v.top && (o -= d, v.top = "top")), "together" === u && ("top" === v.top && ("bottom" === y.top && o < b[1] ? (o += d, v.top = "bottom", o += s, y.top = "top") : "top" === y.top && o + s > b[3] && o - (s - d) >= b[1] && (o -= s - d, v.top = "bottom", y.top = "bottom")), "bottom" === v.top && ("top" === y.top && o + s > b[3] ? (o -= d, v.top = "top", o -= s, y.top = "bottom") : "bottom" === y.top && o < b[1] && o + (2 * s - d) <= b[3] && (o += s - d, v.top = "top", y.top = "top")), "middle" === v.top && (o + s > b[3] && "top" === y.top ? (o -= s, y.top = "bottom") : o < b[1] && "bottom" === y.top && (o += s, y.top = "top"))), ("target" === h || "both" === h) && (n < b[0] && "left" === v.left && (n += p, v.left = "right"), n + f > b[2] && "right" === v.left && (n -= p, v.left = "left")), "together" === h && (n < b[0] && "left" === v.left ? "right" === y.left ? (n += p, v.left = "right", n += f, y.left = "left") : "left" === y.left && (n += p, v.left = "right", n -= f, y.left = "right") : n + f > b[2] && "right" === v.left ? "left" === y.left ? (n -= p, v.left = "left", n -= f, y.left = "right") : "right" === y.left && (n -= p, v.left = "left", n += f, y.left = "left") : "center" === v.left && (n + f > b[2] && "left" === y.left ? (n -= f, y.left = "right") : n < b[0] && "right" === y.left && (n += f, y.left = "left"))), ("element" === u || "both" === u) && (o < b[1] && "bottom" === y.top && (o += s, y.top = "top"), o + s > b[3] && "top" === y.top && (o -= s, y.top = "bottom")), ("element" === h || "both" === h) && (n < b[0] && ("right" === y.left ? (n += f, y.left = "left") : "center" === y.left && (n += f / 2, y.left = "left")), n + f > b[2] && ("left" === y.left ? (n -= f, y.left = "right") : "center" === y.left && (n -= f / 2, y.left = "right"))), "string" == typeof l ? l = l.split(",").map(function(t) {
                    return t.trim()
                }) : l === !0 && (l = ["top", "left", "right", "bottom"]), l = l || [];
                var w = [],
                    C = [];
                o < b[1] && (l.indexOf("top") >= 0 ? (o = b[1], w.push("top")) : C.push("top")), o + s > b[3] && (l.indexOf("bottom") >= 0 ? (o = b[3] - s, w.push("bottom")) : C.push("bottom")), n < b[0] && (l.indexOf("left") >= 0 ? (n = b[0], w.push("left")) : C.push("left")), n + f > b[2] && (l.indexOf("right") >= 0 ? (n = b[2] - f, w.push("right")) : C.push("right")), w.length && ! function() {
                    var t = void 0;
                    t = "undefined" != typeof e.options.pinnedClass ? e.options.pinnedClass : e.getClass("pinned"), g.push(t), w.forEach(function(e) {
                        g.push(t + "-" + e)
                    })
                }(), C.length && ! function() {
                    var t = void 0;
                    t = "undefined" != typeof e.options.outOfBoundsClass ? e.options.outOfBoundsClass : e.getClass("out-of-bounds"), g.push(t), C.forEach(function(e) {
                        g.push(t + "-" + e)
                    })
                }(), (w.indexOf("left") >= 0 || w.indexOf("right") >= 0) && (y.left = v.left = !1), (w.indexOf("top") >= 0 || w.indexOf("bottom") >= 0) && (y.top = v.top = !1), (v.top !== i.top || v.left !== i.left || y.top !== e.attachment.top || y.left !== e.attachment.left) && (e.updateAttachClasses(y, v), e.trigger("update", {
                    attachment: y,
                    targetAttachment: v
                }))
            }), M(function() {
                e.options.addTargetClasses !== !1 && m(e.target, g, c), m(e.element, g, c)
            }), {
                top: o,
                left: n
            }
        }
    });
    var j = x.Utils,
        a = j.getBounds,
        m = j.updateClasses,
        M = j.defer;
    x.modules.push({
        position: function(t) {
            var e = this,
                o = t.top,
                n = t.left,
                i = this.cache("element-bounds", function() {
                    return a(e.element)
                }),
                r = i.height,
                s = i.width,
                f = this.getTargetBounds(),
                l = o + r,
                h = n + s,
                u = [];
            o <= f.bottom && l >= f.top && ["left", "right"].forEach(function(t) {
                var e = f[t];
                (e === n || e === h) && u.push(t)
            }), n <= f.right && h >= f.left && ["top", "bottom"].forEach(function(t) {
                var e = f[t];
                (e === o || e === l) && u.push(t)
            });
            var d = [],
                p = [],
                c = ["left", "top", "right", "bottom"];
            return d.push(this.getClass("abutted")), c.forEach(function(t) {
                d.push(e.getClass("abutted") + "-" + t)
            }), u.length && p.push(this.getClass("abutted")), u.forEach(function(t) {
                p.push(e.getClass("abutted") + "-" + t)
            }), M(function() {
                e.options.addTargetClasses !== !1 && m(e.target, p, d), m(e.element, p, d)
            }), !0
        }
    });
    var B = function() {
        function t(t, e) {
            var o = [],
                n = !0,
                i = !1,
                r = void 0;
            try {
                for (var s, a = t[Symbol.iterator](); !(n = (s = a.next()).done) && (o.push(s.value), !e || o.length !== e); n = !0);
            } catch (f) {
                i = !0, r = f
            } finally {
                try {
                    !n && a["return"] && a["return"]()
                } finally {
                    if (i) throw r
                }
            }
            return o
        }
        return function(e, o) {
            if (Array.isArray(e)) return e;
            if (Symbol.iterator in Object(e)) return t(e, o);
            throw new TypeError("Invalid attempt to destructure non-iterable instance")
        }
    }();
    return x.modules.push({
        position: function(t) {
            var e = t.top,
                o = t.left;
            if (this.options.shift) {
                var n = this.options.shift;
                "function" == typeof this.options.shift && (n = this.options.shift.call(this, {
                    top: e,
                    left: o
                }));
                var i = void 0,
                    r = void 0;
                if ("string" == typeof n) {
                    n = n.split(" "), n[1] = n[1] || n[0];
                    var s = n,
                        a = B(s, 2);
                    i = a[0], r = a[1], i = parseFloat(i, 10), r = parseFloat(r, 10)
                } else i = n.top, r = n.left;
                return e += i, o += r, {
                    top: e,
                    left: o
                }
            }
        }
    }), I
});
var VIVO = {};
VIVO.namespace = function namespace(ns_string) {
    var parts = ns_string.split("."),
        parent = VIVO,
        i;
    for (i = 0; i < parts.length; i++) {
        if (typeof parent[parts[i]] === "undefined") {
            parent[parts[i]] = {}
        }
        parent = parent[parts[i]]
    }
    return parent
};
if (!Object.create) {
    Object.create = function() {
        function F() {}
        return function(o) {
            if (arguments.length != 1) {
                throw new Error("Object.create implementation only accepts one parameter.")
            }
            F.prototype = o;
            return new F
        }
    }()
}(function() {
    var method;
    var noop = function() {};
    var methods = ["assert", "clear", "count", "debug", "dir", "dirxml", "error", "exception", "group", "groupCollapsed", "groupEnd", "info", "log", "markTimeline", "profile", "profileEnd", "table", "time", "timeEnd", "timeStamp", "trace", "warn"];
    var length = methods.length;
    var console = window.console = window.console || {};
    while (length--) {
        method = methods[length];
        if (!console[method]) {
            console[method] = noop
        }
    }
})();
$(document).ready(function() {
    $("#ldProgressBar").progressbar({
        value: 5
    });
    var lineNumLookup = {};
    console.log("document is ready...");
    if (VIVO.model.config === undefined) {
        VIVO.model.config = VIVO.model.Config(function() {
            var MainApplication = new VIVO.ui.Main(VIVO)
        });
        window.onerror = function(msg, url, lineNo, col, error) {
            var stack = "";
            if (error && error.stack) stack = error.stack;
            var errorMsg = "Exception msg, url, lineNo: " + msg + ", " + url + ", " + lineNo + "," + stack;
            if (lineNumLookup[lineNo] !== undefined) {
                console.error(errorMsg);
                return
            }
            lineNumLookup[lineNo] = true;
            try {
                VIVO.model.config.sendError(errorMsg)
            } catch (e) {
                console.log("Error in global error handler sending error to server. " + msg);
                throw e
            }
        }
    }
});
VIVO.namespace("ui.Main");
VIVO.ui.Main = function(vivo) {
    "use strict";
    var frame, config = vivo.model.config,
        _tableId = config.urlParams.tableId,
        params = config.urlParams,
        startTime = (new Date).getTime(),
        webService = vivo.utils.webservice,
        clientVersion = config.clientVersion,
        _hasResized = false,
        playerAspectRatio = {
            width: 1184,
            height: 820
        },
        dealerAspectRatio = {
            width: 2e3,
            height: 1e3
        },
        bjDealerAspectRatio = {
            width: 1600,
            height: 1e3
        },
        bjclassicFSAspectRatio = {
            width: 1184,
            height: 820
        },
        width = playerAspectRatio.width,
        height = playerAspectRatio.height,
        model, loginTimeOutObj, progressbarUpdateObj, longWarinningDisplayed = false,
        promises = [];
    $("#body").addClass("configLoaded");
    if (config.isDealerMonitor) {
        width = dealerAspectRatio.width;
        height = dealerAspectRatio.height;
        if (config.urlParams.gameType === "bjep" && config.isDealerScreenOne || config.urlParams.gameType === "bjclassic" && config.isDealerScreenOne) {
            width = bjDealerAspectRatio.width;
            height = bjDealerAspectRatio.height
        }
    } else {
        if (config.urlParams.gameType === "bjclassic") promises = preloadFSImages();
        else if (config.urlParams.gameType === "baccarat") promises = preloadBaccaratFSImages();
        else if (config.urlParams.gameType === "roulette") promises = preloadRouletteFSImages();
        else if (config.urlParams.gameType === "bjep") promises = preloadBJEPFSImages()
    }
    $("#ldProgressBar").progressbar({
        value: 10
    });
    var loadingPanel = vivo.ui.LoadingPanel(vivo, this);
    var playerSession = params.playerSessionID;
    var ws = new vivo.utils.webservice.NetAccess(clientVersion, config.UUID, params.tableId, params.limitLevel, params.currency, playerSession, playerSession + "Name", playerSession, playerSession + "@blar.com");
    VIVO.namespace("ws");
    VIVO.ws = ws;
    var gsPromis = new Promise(function(resolve, reject) {
        var callback = function() {
            ws.removeEventListener(config.gameStateMessage, callback);
            $("#ldProgressBar").progressbar({
                value: 40
            });
            progressbarUpdateObj = config.setTimeout(updateProgressBar, .5);
            resolve()
        };
        ws.addEventListener(config.gameStateMessage, callback)
    });
    promises.unshift(gsPromis);
    Promise.all(promises).then(function() {
        startTheGame()
    }).catch(function(err) {
        console.error(err)
    });
    vivo.namespace("model.state");
    vivo.model.state = new VIVO.model.State(vivo, this);
    model = vivo.model.state;
    model.addEventListener(model.HEART_BEAT_EVENT, onHeartBeat);
    loginTimeOutObj = config.setTimeout(onLoginTimeout, 40);
    setFrameRatio();
    resizeText();
    if (config.isDealerMonitor) vivo.model.cm = new VIVO.model.ConnectionMonitor(vivo, this);
    $("#tipButton").addClass("tipFont_" + config.urlParams.language);
    vivo.namespace("ui.frame");
    try {
        frame = new vivo.ui.Frame(vivo, this);
        vivo.ui.frame = frame;
        ws.connect()
    } catch (error) {
        config.sendError("Error loading client: '" + error + "' version: [" + config.clientVersion + "] userAgent: " + navigator.userAgent);
        throw error
    }
    $(window).resize(onWindowResize);

    function updateProgressBar() {
        if (!promises[0].isFulfilled()) return;
        if (promises.length <= 2) return;
        var doneArray = _.filter(promises, function(p) {
            return p.isFulfilled()
        });
        var total = promises.length - 1,
            done = doneArray.length - 1,
            avalablePercent = 60,
            remaningPercent = 40;
        var percentDone = done / total * avalablePercent + remaningPercent;
        progressbarUpdateObj = config.setTimeout(updateProgressBar, .5);
        $("#ldProgressBar").progressbar({
            value: percentDone
        })
    }

    function startTheGame(e) {
        if (longWarinningDisplayed) config.closeAlert();
        else {
            try {
                config.clearInterval(loginTimeOutObj);
                cnofig.clearInterval(progressbarUpdateObj)
            } catch (error) {}
        }
        $("#loadingDialog").remove();
        loadingPanel = null;
        FastClick.attach(document.body);
        $("#frame").show();
        config.sendLog("1066", "Game Started! total loadtime: " + ((new Date).getTime() - startTime) + "ms")
    }

    function onLoginTimeout() {
        if ($("#alertOverlay").is(":visible")) return;
        longWarinningDisplayed = true;
        config.displayAlert(config.getLocale("initial_loading_title"), config.getLocale("login_warning_text") + " " + ws.getCurrentLoginState(), config.getLocale("continue", "Continue"), continueWaiting, config.getLocale("exit", "Exit"), config.closeAlertAndWindow)
    }

    function continueWaiting() {
        config.closeAlert();
        longWarinningDisplayed = false;
        loginTimeOutObj = config.setTimeout(onLoginTimeout, 5)
    }

    function onWindowResize() {
        _hasResized = true
    }
    window.onunload = function() {
        ws.disconnect()
    };

    function onHeartBeat() {
        if (_hasResized) {
            setFrameRatio();
            resizeText();
            _hasResized = false
        }
    }

    function toggleFullScreen() {
        var doc = window.document;
        var docEl = doc.documentElement;
        var requestFullScreen = docEl.requestFullscreen || docEl.mozRequestFullScreen || docEl.webkitRequestFullScreen || docEl.msRequestFullscreen;
        var cancelFullScreen = doc.exitFullscreen || doc.mozCancelFullScreen || doc.webkitExitFullscreen || doc.msExitFullscreen;
        if (!doc.fullscreenElement && !doc.mozFullScreenElement && !doc.webkitFullscreenElement && !doc.msFullscreenElement) {
            requestFullScreen.call(docEl)
        } else {
            cancelFullScreen.call(doc)
        }
    }

    function hideAddressBar() {
        if (window.location.hash) return;
        if (document.height <= window.outerHeight + 10) {
            document.body.style.height = window.outerHeight + 50 + "px";
            setTimeout(function() {
                window.scrollTo(0, 1)
            }, 50)
        } else {
            setTimeout(function() {
                window.scrollTo(0, 1)
            }, 0)
        }
    }

    function setFrameRatio() {
        var windowWidth = Math.min($("#body").width(), window.innerWidth),
            windowHeight = Math.min($("#body").height(), window.innerHeight),
            widthRatio = windowWidth / width,
            heightRatio = windowHeight / height;
        console.log("windowHeight: " + windowHeight + ", windowWidth: " + windowWidth + "widthRatio : " + widthRatio + ", heightRatio: " + heightRatio);
        var w, h, lm = 0,
            tm = 0;
        if (widthRatio < heightRatio) {
            w = windowWidth;
            h = Math.floor(windowWidth * height / width);
            tm = Math.floor((windowHeight - h) / 2)
        } else {
            w = Math.floor(windowHeight * width / height);
            h = windowHeight;
            lm = Math.floor((windowWidth - w) / 2)
        }
        var frame = document.getElementById("frame");
        frame.style.height = h + "px";
        frame.style.width = w + "px";
        frame.style.marginTop = tm + "px";
        frame.style.marginLeft = lm + "px";
        window.scrollTo(0, 0)
    }

    function resizeText() {
        var preferredFontSize = 22;
        var preferredSize = 1337 * 943;
        var f = $("#frame");
        var currentSize = f.width() * f.height();
        var scalePercentage = Math.sqrt(currentSize) / Math.sqrt(preferredSize);
        var newFontSize = preferredFontSize * scalePercentage;
        $("body").css("font-size", newFontSize + "px")
    }

    function preloadRouletteFSImages() {
        var preloadImages = ["resources/html5Images/bjclassic/fullScreen/backgrounds/fscontrolsBackground.svg", "resources/html5Images/bjclassic/fullScreen/backgrounds/fstooltipBackground.svg", "resources/html5Images/bjclassic/fullScreen/backgrounds/fstooltipWarningBackground.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsalertboxClose.svg", "resources/html5Images/bjclassic/fullScreen/others/fstips.png", "resources/html5Images/bjclassic/fullScreen/backgrounds/fsheaderBackground.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsbackToLobby.svg", "resources/html5Images/bjclassic/fullScreen/others/fsheaderRightLineDivisor.svg", "resources/html5Images/bjclassic/fullScreen/others/fsheaderDots.svg", "resources/html5Images/bjclassic/fullScreen/others/fsheaderDots.svg", "resources/html5Images/bjclassic/fullScreen/backgrounds/fscontrolsBackgroundStraight.png", "resources/html5Images/bjclassic/fullScreen/backgrounds/fscounterBackground.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsrebet.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsrebetHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsclearBets.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsclearBetsHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsundo.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsundoHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsautoRebet.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsautoRebetHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsautoRebetPressed.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsrules.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsrulesHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/fssettings.svg", "resources/html5Images/bjclassic/fullScreen/icons/fssettingsHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/limits.svg", "resources/html5Images/bjclassic/fullScreen/icons/limitsHover.svg"],
            promises = [];
        _.forEach(preloadImages, function(path) {
            promises.push(loadImageAsync(path))
        });
        return promises
    }

    function preloadBaccaratFSImages() {
        var preloadImages = ["resources/html5Images/bjclassic/fullScreen/backgrounds/fscontrolsBackground.svg", "resources/html5Images/bjclassic/fullScreen/backgrounds/fstooltipBackground.svg", "resources/html5Images/bjclassic/fullScreen/backgrounds/fstooltipWarningBackground.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsalertboxClose.svg", "resources/html5Images/bjclassic/fullScreen/others/fstips.png", "resources/html5Images/bjclassic/fullScreen/backgrounds/fsheaderBackground.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsbackToLobby.svg", "resources/html5Images/bjclassic/fullScreen/others/fsheaderRightLineDivisor.svg", "resources/html5Images/bjclassic/fullScreen/others/fsheaderDots.svg", "resources/html5Images/bjclassic/fullScreen/others/fsheaderDots.svg", "resources/html5Images/bjclassic/fullScreen/backgrounds/fscontrolsBackgroundStraight.png", "resources/html5Images/bjclassic/fullScreen/backgrounds/fscounterBackground.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsrebet.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsrebetHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsclearBets.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsclearBetsHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsundo.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsundoHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsautoRebet.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsautoRebetHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsautoRebetPressed.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsrules.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsrulesHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/fssettings.svg", "resources/html5Images/bjclassic/fullScreen/icons/fssettingsHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/limits.svg", "resources/html5Images/bjclassic/fullScreen/icons/limitsHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/dragonPayouts.svg", "resources/html5Images/bjclassic/fullScreen/icons/dragonPayoutsHover.svg"],
            promises = [];
        _.forEach(preloadImages, function(path) {
            promises.push(loadImageAsync(path))
        });
        return promises
    }

    function preloadBJEPFSImages() {
        return preloadFSImages()
    }

    function preloadFSImages() {
        var preloadImages = ["resources/html5Images/bjclassic/fullScreen/backgrounds/fscontrolsBackground.svg", "resources/html5Images/bjclassic/fullScreen/backgrounds/fstooltipBackground.svg", "resources/html5Images/bjclassic/fullScreen/backgrounds/fstooltipWarningBackground.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsalertboxClose.svg", "resources/html5Images/bjclassic/fullScreen/backgrounds/fsnoVideoBackDrop.jpg", "resources/html5Images/bjclassic/fullScreen/others/fstips.png", "resources/html5Images/bjclassic/fullScreen/backgrounds/fsheaderBackground.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsbackToLobby.svg", "resources/html5Images/bjclassic/fullScreen/others/fsheaderRightLineDivisor.svg", "resources/html5Images/bjclassic/fullScreen/others/fsheaderDots.svg", "resources/html5Images/bjclassic/fullScreen/others/fsheaderDots.svg", "resources/html5Images/bjclassic/fullScreen/backgrounds/fscontrolsBackgroundStraight.png", "resources/html5Images/bjclassic/fullScreen/backgrounds/fscounterBackground.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsrebet.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsrebetHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsclearBets.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsclearBetsHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsundo.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsundoHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsstandUp.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsstandUpHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsautoRebet.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsautoRebetHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsautoRebetPressed.svg", "resources/html5Images/bjclassic/fullScreen/icons/fshit.png", "resources/html5Images/bjclassic/fullScreen/icons/fshitHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsstand.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsstandHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsdouble.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsdoubleHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/fssplit.png", "resources/html5Images/bjclassic/fullScreen/icons/fssplitHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/fssurrender.svg", "resources/html5Images/bjclassic/fullScreen/icons/fssurrenderHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/myHit.png", "resources/html5Images/bjclassic/fullScreen/icons/myStand.png", "resources/html5Images/bjclassic/fullScreen/icons/myDouble.png", "resources/html5Images/bjclassic/fullScreen/icons/mySplit.png", "resources/html5Images/bjclassic/fullScreen/icons/mySurrender.png", "resources/html5Images/bjclassic/fullScreen/icons/myHitHover.png", "resources/html5Images/bjclassic/fullScreen/icons/myStandHover.png", "resources/html5Images/bjclassic/fullScreen/icons/myDoubleHover.png", "resources/html5Images/bjclassic/fullScreen/icons/mySplitHover.png", "resources/html5Images/bjclassic/fullScreen/icons/mySurrenderHover.png", "resources/html5Images/bjclassic/fullScreen/icons/fshitDisabled.png", "resources/html5Images/bjclassic/fullScreen/icons/fshitPressed.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsstandDisabled.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsstandPressed.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsdoubleDisabled.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsdoublePressed.svg", "resources/html5Images/bjclassic/fullScreen/icons/fssplitDisabled.svg", "resources/html5Images/bjclassic/fullScreen/icons/fssplitPressed.svg", "resources/html5Images/bjclassic/fullScreen/icons/fssurrenderDisabled.svg", "resources/html5Images/bjclassic/fullScreen/icons/fssurrenderPressed.svg", "resources/html5Images/bjclassic/fullScreen/icons/fschat.svg", "resources/html5Images/bjclassic/fullScreen/icons/fschatOpen.svg", "resources/html5Images/bjclassic/fullScreen/icons/fschatClose.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsemoticon.svg", "resources/html5Images/bjclassic/fullScreen/icons/fssendMessage.svg", "resources/html5Images/bjclassic/fullScreen/icons/fssendMessageHover.svg", "resources/html5Images/bjclassic/fullScreen/backgrounds/fsjackpotBackground.png", "resources/html5Images/bjclassic/fullScreen/backgrounds/fsintroGraphicWithHeader.svg", "resources/html5Images/bjclassic/fullScreen/intro/fsloading.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsemptySeat.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsemptySeatHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/fscurrentUser.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsmainBet.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsmainBetHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsmainBet.png", "resources/html5Images/bjclassic/fullScreen/icons/fsmainBetHover.png", "resources/html5Images/bjclassic/fullScreen/icons/fspairBet.svg", "resources/html5Images/bjclassic/fullScreen/icons/fspairBetHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsrummyBet.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsrummyBetHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/fstipBet.svg", "resources/html5Images/bjclassic/fullScreen/icons/fstipBetHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsrules.svg", "resources/html5Images/bjclassic/fullScreen/icons/fsrulesHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/fssettings.svg", "resources/html5Images/bjclassic/fullScreen/icons/fssettingsHover.svg", "resources/html5Images/bjclassic/fullScreen/icons/limits.svg", "resources/html5Images/bjclassic/fullScreen/icons/limitsHover.svg", "resources/html5Images/bjclassic/fullScreen/backgrounds/tooltipBackgroundLeft.svg", "resources/html5Images/bjclassic/fullScreen/backgrounds/tooltipWarningBackgroundLeft.svg"],
            promises = [];
        _.forEach(preloadImages, function(path) {
            promises.push(loadImageAsync(path))
        });
        return promises
    }

    function loadImageAsync(url) {
        return new Promise(function(resolve, reject) {
            var image = new Image;
            image.onload = function() {
                resolve(image)
            };
            image.onerror = function() {
                reject(new Error("Could not load image at: " + url))
            };
            image.src = url
        })
    }
};
VIVO.namespace("utils.EventDispatcher");
VIVO.utils.EventDispatcher = function() {};
VIVO.utils.EventDispatcher.prototype = {
    constructor: VIVO.utils.EventDispatcher,
    addEventListener: function(type, listener) {
        if (this._listeners === undefined) this._listeners = {};
        var listeners = this._listeners;
        if (listeners[type] === undefined) {
            listeners[type] = []
        }
        if (listeners[type].indexOf(listener) === -1) {
            listeners[type].push(listener)
        }
    },
    hasEventListener: function(type, listener) {
        if (this._listeners === undefined) return false;
        var listeners = this._listeners;
        if (listeners[type] !== undefined && listeners[type].indexOf(listener) !== -1) {
            return true
        }
        return false
    },
    removeEventListener: function(type, listener) {
        if (this._listeners === undefined) return;
        var listeners = this._listeners;
        var index = listeners[type].indexOf(listener);
        if (index !== -1) {
            listeners[type].splice(index, 1)
        }
    },
    dispatchEvent: function() {
        return function(event) {
            if (this._listeners === undefined) return;
            var listeners = this._listeners;
            var listenerArray = listeners[event.type];
            if (listenerArray !== undefined) {
                event.target = this;
                for (var i = listenerArray.length - 1; i >= 0; i--) {
                    if (la === listenerArray[i]) {
                        console.error("This shouldn't happen but can if removeEventListener is called inside a function on a listener other than its self. " + event.type);
                        continue
                    }
                    var la = listenerArray[i];
                    if (typeof la === "undefined") console.error("This shouldn't happen but can if the function calls removeEventListener inside the funciton!!! event.type: " + event.type);
                    else {
                        try {
                            la.call(this, _.cloneDeep(event))
                        } catch (e) {
                            console.error("Error: " + e.message + " dispatching the event: " + event + "\n" + e.stack);
                            VIVO.model.config.sendError("ClientException " + e.message + ", \n" + e.stack)
                        }
                    }
                }
            }
        }
    }()
};
VIVO.namespace("ui.Autoplay");
VIVO.ui.Autoplay = function(vivo, frame) {
    "use strict";
    var ws = vivo.ws,
        config = vivo.model.config,
        tableId = config.urlParams.tableId,
        language = config.urlParams.language,
        autoplayConfig = config.getConfigParam("autoplay"),
        imageArray = autoplayConfig.images,
        resourceDirectory = config.getConfigParam("resourceDirectory"),
        imageRootDir = resourceDirectory + autoplayConfig.imageRootDir,
        videoWrapper = $("#videoWrapper"),
        LEFT_ARROW = String.fromCharCode(9668),
        RIGHT_ARROW = String.fromCharCode(9658),
        autoplayWrapper, image, btnLeft, btnRight, showDetails, details, messageReel, detailsVisible = false,
        currentImageIndex = 0,
        isVisible = false;
    videoWrapper.on("click", onAutoplayClick);

    function getAutoplayMessage() {
        var tableMessages = autoplayConfig.messages[tableId];
        if (tableMessages === undefined) {
            console.log("Error in config table " + tableId + " needs auto play messages configured in AppConfig.json.");
            return ""
        }
        var message = tableMessages[language];
        if (message === undefined) message = tableMessages.en;
        return message
    }

    function createAutoPlay() {
        if (autoplayWrapper !== undefined) {
            videoWrapper.append(autoplayWrapper);
            return
        }
        image = document.createElement("div");
        autoplayWrapper = document.createElement("div");
        btnLeft = document.createElement("div");
        btnRight = document.createElement("div");
        autoplayWrapper.id = "autoplayWrapper";
        image.id = "autoplayImage";
        btnLeft.id = "autoplayBtnLeft";
        btnRight.id = "autoplayBtnRight";
        $(autoplayWrapper).addClass("autoplayWrapper");
        $(image).addClass("autoplayImage");
        $(btnLeft).addClass("autoplayBtnLeft");
        $(btnRight).addClass("autoplayBtnRight");
        btnLeft.innerHTML = LEFT_ARROW;
        btnRight.innerHTML = RIGHT_ARROW;
        videoWrapper.append(autoplayWrapper);
        autoplayWrapper.appendChild(image);
        autoplayWrapper.appendChild(btnLeft);
        autoplayWrapper.appendChild(btnRight)
    }

    function onAutoplayClick(e) {
        if (!isVisible) return;
        e = e || window.event;
        var src = e.target || e.srcElement;
        switch (src.id) {
            case image.id:
                break;
            case btnLeft.id:
                scrole(-1);
                break;
            case btnRight.id:
                scrole(1);
                break;
            case showDetails.id:
            case details.id:
                toggleDetails();
                break;
            default:
                break
        }
    }

    function scrole(increment) {
        var newIndex = currentImageIndex + increment;
        if (newIndex >= imageArray.length) newIndex = 0;
        else if (newIndex < 0) newIndex = imageArray.length - 1;
        currentImageIndex = newIndex;
        display(currentImageIndex)
    }

    function display(imageIndex) {
        $(image).css("background-image", 'url("' + imageRootDir + imageArray[imageIndex].filename + '")');
        $(details).text(imageArray[imageIndex].details)
    }

    function toggleDetails() {
        detailsVisible = !detailsVisible;
        console.log("toggleDetails detailsVisible:" + detailsVisible);
        if (detailsVisible) {
            showDetails.innerHTML = config.getLocale("hide_details");
            $(details).show()
        } else {
            showDetails.innerHTML = config.getLocale("show_details");
            $(details).hide()
        }
    }

    function onDisplayAnimationFinished() {
        $(messageReel).removeClass("showNewsText").addClass("hideNewsText");
        var blar = $(messageReel).css("left");
        if (isVisible) $(messageReel).removeClass("hideNewsText").addClass("showNewsText")
    }

    function show() {
        createAutoPlay();
        display(currentImageIndex);
        $(messageReel).removeClass("hideNewsText").addClass("showNewsText");
        isVisible = true
    }

    function hide() {
        isVisible = false;
        $(messageReel).removeClass("showNewsText").addClass("hideNewsText")
    }
    return {
        show: show,
        hide: hide
    }
};
VIVO.namespace("ui.Balance");
VIVO.ui.Balance = function(vivo, isFS) {
    "use strict";
    var model = vivo.model.state,
        config = vivo.model.config,
        balanceStr, betStr, lastWinStr, currentlastWin, _isAnimationRunning = false,
        clientImageUrl = "" + config.getConfigParam("resourceDirectory") + "/images/client-specific/" + config.urlParams.client + "/logo.svg",
        decimalBalanceCutOff = config.getConfigParam("decimalBalanceCutOff"),
        hasSentWarningAlready = false,
        animationQueue = [];
    if (config.inIframe()) {
        $("#balanceColChips").hide();
        $("#headerDivider").hide()
    }
    $("#balanceColChips").on("click", config.closeAlertAndWindow);
    $("#balanceColClientLogo").on("error", onErrorLoadingLogo);
    $("#balanceColClientLogo").attr("src", clientImageUrl);

    function onErrorLoadingLogo() {
        if (config.urlParams.client !== "v247" && config.urlParams.client !== "DelRio") config.sendError("Error loading logo.svg: '" + clientImageUrl + "', user agent: " + navigator.userAgent);
        $("#balanceColClientLogo").off();
        $("#balanceColClientLogo").attr("src", clientImageUrl.replace(/logo.svg/g, "loading.png"))
    }
    var onBalanceUpdate = function() {
        balanceStr = config.getLocale("balance") + ": ";
        betStr = config.getLocale("bet") + ": ";
        lastWinStr = config.getLocale("last_win") + ": ";
        onBalanceUpdate = function() {
            var balance = model.getCurrentBalance();
            if (balance < 0 || !hasSentWarningAlready && balance === 0) {
                balance = 0;
                hasSentWarningAlready = true;
                config.sendError("Error: Low balance " + model.getCurrentBalance() + ", currentGame=" + model.getGameId() + ", playerName=" + model.getPlayerName())
            }
            var animation = function() {
                var isNewWin = model.getLastWinChanged(),
                    bal = model.getCurrentBalance(),
                    bet = model.getBetAmount(),
                    win = model.getLastWin();
                return function() {
                    doAnimation(bal, bet, win, isNewWin)
                }
            };
            if (_isAnimationRunning) animationQueue.push(animation());
            else animation()()
        };
        onBalanceUpdate()
    };

    function setText(elem, text, amount) {
        elem.html('<div class="tableWrapper"><span class="headerLabel">' + text + '<span class="headerAmount">' + formatMoney(amount) + "</span></span></div>")
    }

    function doAnimation(bal, bet, win, isNewWin) {
        setText($("#balance"), balanceStr, bal);
        setText($("#bet"), betStr, bet);
        setText($("#lastWin"), lastWinStr, win);
        if (win > 0 && isNewWin) {
            _isAnimationRunning = true;
            $("#lastWin .headerAmount").css("color", "red");
            $("#lastWin").animate({
                "font-size": "1.5em"
            }, 600, "linear", function() {
                setTimeout(function() {
                    $("#lastWin").animate({
                        "font-size": "1em"
                    }, 400, "linear", function() {
                        $("#lastWin .headerAmount").css("color", "none");
                        var nextAnimation = animationQueue.shift(animationQueue);
                        if (nextAnimation !== undefined) nextAnimation();
                        else _isAnimationRunning = false
                    })
                }, 800)
            })
        } else if (_isAnimationRunning) {
            var nextAnimation = animationQueue.shift(animationQueue);
            if (nextAnimation !== undefined) nextAnimation();
            else _isAnimationRunning = false
        }
        currentlastWin = win
    }

    function formatMoney(amount) {
        if (!decimalBalanceCutOff) return amount.toMoney();
        var balance = model.getCurrentBalance();
        if (balance >= decimalBalanceCutOff) return amount.toMoney(0);
        else return amount.toMoney()
    }
    model.addEventListener(model.BALANCE_UPDATE_EVENT, onBalanceUpdate)
};
VIVO.namespace("ui.BetManagement");
VIVO.ui.BetManagement = function(vivo, frame) {
    var ws = vivo.ws,
        messages = vivo.ws.messageTypes,
        config = vivo.model.config,
        model = vivo.model.state,
        $rb = $("#rebetButton"),
        $cb = $("#clearButton"),
        $ub = $("#undoButton");
    $("#autoRebetCheckBox").prop("checked", model.isAutoRebet());
    $rb.text(config.getLocale("rebet"));
    $rb.on("click", onRebetButtonClicked);
    $rb.addClass("rebetButton_" + config.urlParams.language);
    $cb.text(config.getLocale("clear_bets"));
    $cb.addClass("clearButton_" + config.urlParams.language);
    $cb.on("click", onClearButtonClicked);
    $ub.text(config.getLocale("undo_last_button", "Undo Last"));
    $ub.addClass("undoButton_" + config.urlParams.language);
    $ub.on("click", onUndoButtonClicked);
    $("#autoRebetLabel").text(config.getLocale("auto_rebet"));
    $("#autoRebetLabel").on("click", toggleAutoRebet);
    $("#autoRebetCheckBox").on("click", toggleAutoRebet);

    function isBetStateValid() {
        if (!model.isBetStateValid()) {
            frame.gameState.flash();
            return false
        }
        return true
    }

    function onUndoButtonClicked(e) {
        if (!isBetStateValid()) return;
        model.undoLastBet()
    }

    function onClearButtonClicked(e) {
        if (!isBetStateValid()) return;
        if (model.isAutoRebet()) toggleAutoRebet();
        model.clearAllBets(clearAllBetsCallback)
    }

    function clearAllBetsCallback() {
        frame.betArea.clearChips()
    }

    function onRebetButtonClicked(e) {
        if (!isBetStateValid()) return;
        if (model.getBetAmount() > 0 || rebetClicked === true) {
            console.log("Ignoring rebet request BJC doesn't support rebets with bets on the table. Or if rebet has been clicked already: " + rebetClicked);
            return
        }
        model.rebet()
    }

    function toggleAutoRebet(e) {
        var ar = !model.isAutoRebet();
        model.setAutoRebet(ar);
        $("#autoRebetCheckBox").prop("checked", ar);
        console.log("toggleAutoRebet: ar = " + ar)
    }
};
VIVO.namespace("ui.CardHandler");
VIVO.ui.CardHandler = function(vivo, frame, displayCardAnimations) {
    "use strict";
    var ws = vivo.ws,
        messages = vivo.ws.messageTypes,
        config = vivo.model.config,
        noVideoDelay = config.getConfigParam("noVideoDelay") === true && config.urlParams.gameType === "bjclassic",
        model = vivo.model.state,
        betTypes = vivo.model.BetTypes,
        _GSM = config.gameStateMessage,
        that = this,
        oldSeatMap = {},
        oldDealerHand, isBJEP = config.urlParams.gameType === "bjep",
        activeSeat = -1,
        activeHand, animationQueue = [],
        animationRunning = false,
        animationsRun = {},
        dealNextCardMap = {},
        currentState, removeCardsDelayOnGameStart = 2,
        isFirstGameStartedEvent = true,
        tableCode = config.urlParams.tableId[0];
    ws.addEventListener(messages[_GSM], onGSMessage);
    model.addEventListener(model.ACTIVE_SEAT_UPDATE, onActiveSeatChanged);
    model.addEventListener(model.HEART_BEAT_EVENT, onHardBeatProcessAnimations);
    if (isBJEP) ws.addEventListener(messages.WagerResponse, function() {
        _.defer(onWagerResponse)
    });
    model.addEventListener(model.GAME_STARTED, function() {
        if (isFirstGameStartedEvent) {
            isFirstGameStartedEvent = false;
            return
        }
        animationsRun = {};
        dealNextCardMap = {}
    });
    if (config.isDealerMonitor) {
        ws.addEventListener(messages.DealerNextCard, onDealerNextCard);
        if (noVideoDelay) ws.addEventListener(messages.HandUpdate, onDealerHandUpdate);
        removeCardsDelayOnGameStart = 5
    }
    this.getHand = function(seatNumber) {
        return _.clone(oldSeatMap[seatNumber], true)
    };
    this.is777Active = function(seatNumber) {
        var is777Active = $("#seat" + seatNumber).find("*[class*='jackpotPulseElement']").length > 0;
        return is777Active
    };
    this.getTextScore = function(seatNumber) {
        return oldSeatMap[seatNumber].score
    };
    this.getScore = function(seatNumber, aceAs11) {
        var score = oldSeatMap[seatNumber].score;
        if (!isSplitHand(score)) {
            if (aceAs11 && score.indexOf("/") !== -1) return parseInt(score.split("/")[1]);
            else return parseInt(score, 10)
        }
        var scores = score.split("|");
        if (model.getActiveHand() === "Right") return parseInt(scores[1], 10);
        return parseInt(scores[0], 10)
    };
    var EMPTY_BJEP_OT = {
            s1: {
                h1: [],
                h2: [],
                active: false
            },
            s2: {
                h1: [],
                h2: [],
                active: false
            },
            s3: {
                h1: [],
                h2: [],
                active: false
            }
        },
        bjepOT = _.cloneDeep(EMPTY_BJEP_OT);
    this.bjepOptionTracking = function(seat, hand, didFollow) {
        console.log("bjepOptionTracking: seat=" + seat + ", hand=" + hand + ", didFollow=" + didFollow);
        var s = bjepOT["s" + seat];
        s.active = true;
        s["h" + hand].push(didFollow)
    };

    function onDealerHandUpdate(e) {
        var s = e.data.HandUpdate,
            DEALER_HAND = -1;
        var msg = {
            dealerHand: {},
            playerHands: []
        };
        if (s.seat === DEALER_HAND) {
            msg.dealerHand = s;
            msg.playerHands = _.values(oldSeatMap)
        } else {
            s.outcomes = ["", "", "", ""];
            if (oldSeatMap[s.seat]) s.outcomes = oldSeatMap[s.seat].outcomes;
            msg.playerHands.push(s);
            _.forEach(_.keys(oldSeatMap), function(seat) {
                if (seat != s.seat) msg.playerHands.push(oldSeatMap[seat])
            });
            msg.dealerHand = oldDealerHand
        }
        updateHands(msg)
    }

    function onDealerNextCard(e) {
        var dn = e.data.DealerNextCard;
        if (dealNextCardMap[dn.nextCardLocation] !== undefined) return;
        dealNextCardMap[dn.nextCardLocation] = "true";
        var locStr = dn.nextCardLocation,
            card = "red:",
            loc = parseInt(locStr.split("-")[0].split(".")[1]),
            seatNum, handLoc, cardNum;
        cardNum = parseInt(locStr.split("-")[1].split(".")[1]);
        if (loc === 8) {
            if (cardNum === 1 || oldDealerHand && oldDealerHand.cards.length === cardNum) return;
            createDealerCard($("#dealerHand"), card, cardNum);
            return
        }
        seatNum = Math.floor(loc / 10);
        handLoc = loc % 10;
        if (handLoc !== 0) card += handLoc + "-";
        card += cardNum;
        var seat = oldSeatMap[seatNum];
        if (seat && seat.cards) {
            for (var i = 0; i < seat.cards.length; i++) {
                var cardLoc = seat.cards[i].split(":")[1].replace(".", "-");
                if (cardLoc === card.split(":")[1]) {
                    console.log("Card already dealt ignoring red card");
                    return
                }
            }
        }
        if (cardNum > 1) model.setActiveSeat(seatNum);
        createPlayerCard($("#seat" + seatNum), seatNum, card, true)
    }

    function onHardBeatProcessAnimations() {
        if (animationQueue.length > 0 && animationRunning === false) {
            var animationToRun = animationQueue.shift();
            animationToRun()
        }
    }

    function onActiveSeatChanged(e) {
        var newSeatMap = jQuery.extend(true, {}, oldSeatMap);
        if (activeSeat != -1 && newSeatMap[activeSeat] !== undefined) newSeatMap[activeSeat].isActive = false;
        activeSeat = model.getActiveSeat();
        if (activeSeat != -1 && newSeatMap[activeSeat] !== undefined) newSeatMap[activeSeat].isActive = true;
        updatePlayerHandsInner(newSeatMap)
    }

    function onGSMessage(e) {
        var msg = e.data[_GSM];
        if (msg.state === model.PYB && currentState !== model.PYB) {
            bjepOT = _.cloneDeep(EMPTY_BJEP_OT);
            config.setTimeout(function() {
                updateHands(msg);
                for (var i = 1; i < 8; i++) cleanHand(i, false)
            }, removeCardsDelayOnGameStart)
        } else if (config.isDealerMonitor && noVideoDelay) {
            console.log("ignoring on the DM.")
        } else updateHands(msg);
        currentState = msg.state
    }

    function updateHands(msg) {
        var s, i, seatElem;
        updatePlayerHands(msg.playerHands);
        if (seatHasChanged(oldDealerHand, msg.dealerHand)) {
            model.setActiveSeat(-1);
            model.setActiveHand(undefined);
            var dealerHand = $("#dealerHand").clone();
            dealerHand.find("*[class^='card']").remove();
            dealerHand.find("#dealerScore").remove();
            for (i = 0; i < msg.dealerHand.cards.length; i++) {
                createDealerCard(dealerHand, msg.dealerHand.cards[i], i)
            }
            if (msg.dealerHand.score !== undefined) {
                var ds = document.createElement("div");
                ds.id = "dealerScore";
                $(ds).addClass("dealerScore");
                if (msg.dealerHand.score === null || msg.dealerHand.score === "0") {
                    ds.innerHTML = "";
                    $(ds).addClass("noDealerScore")
                } else {
                    $(ds).removeClass("noDealerScore");
                    ds.innerHTML = centeredTextLabel(msg.dealerHand.score)
                }
                if (config.isDealerMonitor && tableCode !== "X") dealerHand.prepend(ds);
                else dealerHand.append(ds)
            }
            $("#dealerHand").replaceWith(dealerHand);
            if (msg.dealerHand.cards.length === 1 && isBJEP) checkForRummies(msg, msg.dealerHand.cards[0]);
            else if (msg.dealerHand.cards.length === 2 && !isBJEP) checkForRummies(msg, msg.dealerHand.cards[1])
        }
        oldDealerHand = msg.dealerHand
    }

    function checkForRummies(msg, dealerCard) {
        for (var i = 0; i < msg.playerHands.length; i++) {
            var s = msg.playerHands[i];
            if (isRummy(dealerCard, s.cards)) createRummyAnimationEvent(s.seat)
        }
    }

    function createRummyAnimationEvent(seatNum) {
        if (animationsRun["rummy" + seatNum] !== undefined) return;
        var closure = function(sNum) {
            return function() {
                animateRummy(sNum)
            }
        };
        console.log("pushing Rummy : " + JSON.stringify(animationsRun) + " seatNum: " + seatNum);
        var e = config.newEvent(model.RUMMY_CARDS_EVENT);
        e.data = {
            seat: seatNum
        };
        model.dispatchEvent(e);
        animationQueue.push(closure(seatNum));
        animationsRun["rummy" + seatNum] = true
    }

    function centeredTextLabel(text) {
        return '<div class="tableWrapper"><div class="vCenterElement">' + text + "</div></div>"
    }

    function isRummy(dealerCard, playerCards) {
        if (!playerCards || !dealerCard || playerCards.length !== 2) return false;
        var rank1 = playerCards[0].split(":")[0].slice(0, -1),
            rank2 = playerCards[1].split(":")[0].slice(0, -1),
            rank3 = dealerCard.split(":")[0].slice(0, -1);
        if (rank1 === rank2 && rank2 === rank3) return true;
        var suit1 = playerCards[0].split(":")[0].slice(-1),
            suit2 = playerCards[1].split(":")[0].slice(-1),
            suit3 = dealerCard.split(":")[0].slice(-1);
        if (suit1 === suit2 && suit2 === suit3) return true;
        var values = [getRankValue(rank1), getRankValue(rank2), getRankValue(rank3)];
        var sorted = _.sortBy(values);
        if (sorted[0] + 1 === sorted[1] && sorted[1] + 1 === sorted[2]) return true;
        values = _.map(values, function(n) {
            if (n === 1) return 14;
            else return n
        });
        sorted = _.sortBy(values);
        if (sorted[0] + 1 === sorted[1] && sorted[1] + 1 === sorted[2]) return true;
        return false
    }

    function getRankValue(rank) {
        if (rank === "A") return 1;
        if (rank === "J") return 11;
        if (rank === "Q") return 12;
        if (rank === "K") return 13;
        return parseInt(rank, 10)
    }

    function isPair(cards) {
        if (!cards || cards.length !== 2) return false;
        var rank1 = cards[0].split(":")[0].slice(0, -1),
            rank2 = cards[1].split(":")[0].slice(0, -1);
        return rank1 === rank2
    }

    function updatePlayerHands(newPlayerHands) {
        var s, i, newMap = {};
        for (i = 0; i < newPlayerHands.length; i++) {
            s = newPlayerHands[i];
            s.isActive = model.getActiveSeat() === s.seat;
            s.score = fixPlayerScore(s.score);
            newMap[s.seat] = _.cloneDeep(s)
        }
        updatePlayerHandsInner(newMap)
    }

    function updatePlayerHandsInner(newMap) {
        var s, i, seatElem;
        for (i = 1; i < 8; i++) {
            if (seatHasChanged(oldSeatMap[i], newMap[i])) {
                seatElem = $("#seat" + i);
                var is777Active = seatElem.find("*[class*='jackpotPulseElement']").length > 0;
                cleanHand(i, is777Active);
                s = newMap[i];
                if (s !== undefined) updatePlayerHand(seatElem, i, s.cards, s.score, s.isActive, s.outcomes, is777Active);
                else console.log("New hand is null in cardHandler")
            }
        }
        oldSeatMap = newMap
    }

    function cleanHand(seatNum, is777Active) {
        var seatElem = $("#seat" + seatNum);
        if (is777Active) $("#jackpotText").removeClass("jackpotPulseElement");
        seatElem.find("*[class^='card ']").remove();
        seatElem.find("*[class^='activeGlow']").remove();
        seatElem.find("*[class^='bust']").remove();
        seatElem.find("*[class^='blackJack']").remove();
        seatElem.find("#seatScore" + seatNum).html("").addClass("noSeatScore")
    }

    function seatHasChanged(oldHand, newHand) {
        if (oldHand === undefined && newHand === undefined) return false;
        if (oldHand === undefined && newHand !== undefined || oldHand !== undefined && newHand === undefined) return true;
        if (oldHand.isActive !== newHand.isActive) return true;
        if (oldHand.cards === undefined || newHand.cards === undefined) console.log("cards are empty..");
        if (oldHand.cards.length !== newHand.cards.length) return true;
        if (oldHand.score !== newHand.score) return true;
        return false
    }

    function getScore(cards) {}

    function updatePlayerHand(seatElem, seatId, cards, score, isActive, outcomes, is777Active) {
        var activeCards = getActiveCards(score, cards, isActive);
        var scoreElem = seatElem.find("#seatScore" + seatId);
        scoreElem.html(centeredTextLabel(score));
        var bjepScoredCards = [];
        for (var j = 0; j < cards.length; j++) {
            var gs = createPlayerCard(seatElem, seatId, cards[j], activeCards.indexOf(cards[j]) !== -1, is777Active);
            if (gs === "") bjepScoredCards.push(cards[j])
        }
        if (isBJEP && bjepScoredCards.length !== cards.length) {
            var frozenScore = new HandScore(bjepScoredCards).getScore();
            console.log("actual score: " + score + " frozenScore: " + frozenScore);
            scoreElem.html(centeredTextLabel(frozenScore));
            addBustedStamp(seatElem, seatId, frozenScore)
        } else addBustedStamp(seatElem, seatId, score);
        addBlackJackStamp(seatElem, seatId, score, cards);
        if (score == "") scoreElem.addClass("noSeatScore");
        else scoreElem.removeClass("noSeatScore");
        handleScorePostion(scoreElem, score, cards, isActive);
        if (isPair(cards) && animationsRun["pair" + seatId] === undefined) {
            animationQueue.push(function() {
                animatePairs(seatId)
            });
            animationsRun["pair" + seatId] = true;
            var e = config.newEvent(model.PAIR_CARDS_EVENT);
            e.data = {
                seat: seatId
            };
            model.dispatchEvent(e)
        }
        if (isBJEP && oldDealerHand && oldDealerHand.cards.length === 1 && cards.length === 2 && isRummy(oldDealerHand.cards[0], cards)) createRummyAnimationEvent(seatId)
    }

    function fixPlayerScore(score) {
        if (config.isDealerMonitor) return score;
        if (!isSplitHand(score)) return score;
        var newScoreArr = score.split("|");
        return newScoreArr[1] + "|" + newScoreArr[0]
    }

    function handleScorePostion(scoreElem, score, cards, isActive) {
        if (!config.isDealerMonitor) return;
        var cardsDeep = cards.length;
        if (isSplitHand(score)) {
            var hands = splitCardsIntoHands(cards);
            cardsDeep = Math.max(hands[0].length, hands[1].length)
        }
        if (isActive) scoreElem.removeClass().addClass("seatScore dealerSeatScoreActiveLoc" + cardsDeep);
        else scoreElem.removeClass().addClass("seatScore dealerSeatScoreLoc" + cardsDeep)
    }

    function addBustedStamp(seatElem, seatId, score) {
        if (isSplitHand(score)) {
            var scores = score.split("|");
            if (parseInt(scores[0]) > 21) {
                createBustStamp(seatElem, seatId, "bustLeftHandLoc");
                bustSplitHands(seatId, "left")
            }
            if (parseInt(scores[1]) > 21) {
                createBustStamp(seatElem, seatId, "bustRightHandLoc");
                bustSplitHands(seatId, "right")
            }
        } else if (parseInt(score) > 21) createBustStamp(seatElem, seatId, "bustHandLoc")
    }

    function bustSplitHands(seatId, hand) {
        that.dispatchEvent(config.newEvent("BUST-" + seatId + "-" + hand))
    }

    function addBlackJackStamp(seatElem, seatId, score, cards) {
        if (isSplitHand(score)) return;
        else if (parseInt(score) === 21 && cards.length === 2) createBlackJackStamp(seatElem, seatId, "bjHandLoc")
    }

    function createBustStamp(seatElem, seatId, stylePosition) {
        var bustElem = document.createElement("div");
        bustElem.id = "bust" + seatId + stylePosition;
        $(bustElem).addClass("bust " + stylePosition);
        seatElem.append(bustElem);
        if (!animationsRun[model.BUST_EVENT + seatId + stylePosition]) {
            animationsRun[model.BUST_EVENT + seatId + stylePosition] = true;
            var e = config.newEvent(model.BUST_EVENT);
            e.data = {};
            e.data.seat = seatId;
            e.data.stylePosition = stylePosition;
            model.dispatchEvent(e)
        }
    }

    function createBlackJackStamp(seatElem, seatId, stylePosition) {
        var bustElem = document.createElement("div");
        bustElem.id = "blackJack" + seatId + stylePosition;
        $(bustElem).addClass("blackJack " + stylePosition);
        seatElem.append(bustElem);
        if (!animationsRun[model.BLACK_JACK_EVENT + seatId]) {
            animationsRun[model.BLACK_JACK_EVENT + seatId] = true;
            var e = config.newEvent(model.BLACK_JACK_EVENT);
            e.data = {};
            e.data.seat = seatId;
            e.data.stylePosition = stylePosition;
            model.dispatchEvent(e)
        }
    }

    function splitCardsIntoHands(cards) {
        var handTwoCards = [],
            handOneCards = [];
        for (var i = 0; i < cards.length; i++) {
            var val = cards[i];
            if (isHandTwoCard(val)) handTwoCards.push(val);
            else handOneCards.push(val)
        }
        return [handOneCards, handTwoCards]
    }

    function getActiveCards(score, cards, isActive) {
        if (!isActive) return [];
        if (!isSplitHand(score)) return cards;
        var handCards = splitCardsIntoHands(cards);
        if (handCards[1].length >= 2) {
            model.setActiveHand("Left");
            return handCards[1]
        } else {
            model.setActiveHand("Right");
            return handCards[0]
        }
    }

    function isHandTwoCard(card) {
        return card.indexOf("2.") !== -1
    }

    function isSplitHand(score) {
        return score.indexOf("|") !== -1
    }

    function animateRummy(seatId) {
        if (displayCardAnimations === false) return;
        console.log("animateRummy - started");
        animationRunning = true;
        var dealerCard, dcOffset, c1Offset, c2Offset, c1, c2, c1Top, c2Top, dTop, c1Left, c2Left, dLeft, cardWidth, cardHeight;
        var bjepDealerCardPositions = {
            1: {
                top: 10,
                left: 60
            },
            2: {
                top: 190,
                left: 60
            },
            3: {
                top: 190,
                left: 60
            }
        };
        if (isBJEP) dealerCard = $("#dealerCard0");
        else dealerCard = $("#dealerCard1");
        c1 = $("#" + seatId + "playerCardLoc1");
        c2 = $("#" + seatId + "playerCardLoc2");
        dcOffset = dealerCard.offset();
        c1Offset = c1.offset();
        c2Offset = c2.offset();
        c1Top = parseFloat(c1.css("top").slice(0, -2));
        c2Top = parseFloat(c2.css("top").slice(0, -2));
        dTop = dcOffset.top;
        c1Left = parseFloat(c1.css("left").slice(0, -2));
        c2Left = parseFloat(c2.css("left").slice(0, -2));
        dLeft = dcOffset.left;
        cardWidth = parseFloat(c1.css("width").slice(0, -2));
        cardHeight = parseFloat(c1.css("height").slice(0, -2));
        c1.animate({
            top: c2Top + "px",
            left: c1Left - cardWidth / 2 + "px"
        }, 400, "linear", function() {
            setTimeout(function() {
                c1.animate({
                    top: c1Top + "px",
                    left: c1Left + "px"
                }, 400, "linear", function() {
                    cleanUpAnimationStyles(c1)
                })
            }, 400)
        });
        c2.animate({
            left: c1Left + cardWidth / 2 + "px"
        }, 400, "linear", function() {
            setTimeout(function() {
                c2.animate({
                    left: c2Left + "px"
                }, 400, "linear", function() {
                    cleanUpAnimationStyles(c2)
                })
            }, 400)
        });
        var dCardNewTop = c2Offset.top - dTop - cardHeight + "px";
        var dCardNewLeft = c1Offset.left - dLeft + "px";
        if (config.isDealerMonitor) {
            if (isBJEP) {
                dCardNewTop = bjepDealerCardPositions[seatId].top + "%";
                dCardNewLeft = bjepDealerCardPositions[seatId].left + "%";
                dealerCard.addClass("bjepRummyAnmiation");
                dealerCard.offset();
                dealerCard.addClass("rummySeat" + seatId);
                setTimeout(function() {
                    dealerCard.removeClass("rummySeat1 rummySeat2 rummySeat3");
                    setTimeout(function() {
                        animationRunning = false;
                        dealerCard.removeClass("bjepRummyAnmiation")
                    }, 510)
                }, 500);
                return
            }
            dCardNewTop = c2Offset.top - dTop + cardHeight + "px"
        }
        dealerCard.animate({
            top: dCardNewTop,
            left: dCardNewLeft
        }, 400, "linear", function() {
            setTimeout(function() {
                dealerCard.animate({
                    top: 0 + "px",
                    left: 0 + "px"
                }, 400, "linear", function() {
                    dealerCard.removeAttr("style");
                    dealerCard.removeClass("rummySeat" + seatId);
                    animationRunning = false;
                    console.log("animateRummy - finished");
                    cleanUpAnimationStyles(dealerCard)
                })
            }, 500)
        })
    }

    function animatePairs(seatId) {
        if (displayCardAnimations === false) return;
        console.log("animatePairs - started");
        animationRunning = true;
        var c1, c2, c1Top, c2Top, c1Left, c2Left, cardWidth;
        c1 = $("#" + seatId + "playerCardLoc1");
        c2 = $("#" + seatId + "playerCardLoc2");
        try {
            c1Top = parseFloat(c1.css("top").slice(0, -2))
        } catch (e) {
            return
        }
        c2Top = parseFloat(c2.css("top").slice(0, -2));
        c1Left = parseFloat(c1.css("left").slice(0, -2));
        c2Left = parseFloat(c2.css("left").slice(0, -2));
        cardWidth = parseFloat(c1.css("width").slice(0, -2));
        c1.animate({
            top: c2Top + "px",
            left: c1Left - cardWidth / 2 + "px"
        }, 400, "linear", function() {
            c1.addClass("cardRotateAnimationNeg");
            setTimeout(function() {
                c1.addClass("rotate20Neg");
                c1.removeClass("cardRotateAnimationNeg");
                c1.addClass("cardRotateAnimationPos");
                setTimeout(function() {
                    c1.removeClass("rotate20Neg");
                    c1.removeClass("cardRotateAnimationPos");
                    c1.animate({
                        top: c1Top + "px",
                        left: c1Left + "px"
                    }, 400, "linear", function() {
                        cleanUpAnimationStyles(c1)
                    })
                }, 400)
            }, 400)
        });
        c2.animate({
            left: c2Left + cardWidth / 2 + "px"
        }, 400, "linear", function() {
            c2.addClass("cardRotateAnimationPos");
            setTimeout(function() {
                c2.addClass("rotate20Pos");
                c2.removeClass("cardRotateAnimationPos");
                c2.addClass("cardRotateAnimationNeg");
                setTimeout(function() {
                    c2.removeClass("rotate20Pos");
                    c2.removeClass("cardRotateAnimationNeg");
                    c2.animate({
                        top: c2Top + "px",
                        left: c2Left + "px"
                    }, 400, "linear", function() {
                        animationRunning = false;
                        console.log("animatePairs - finished");
                        cleanUpAnimationStyles(c2)
                    })
                }, 400)
            }, 400)
        })
    }

    function cleanUpAnimationStyles(jqueryElement) {
        jqueryElement.removeAttr("style")
    }

    function onWagerResponse() {
        for (var i = 1; i < 8; i++) {
            var s = oldSeatMap[i];
            var seatElem = $("#seat" + i);
            cleanHand(i, false);
            if (s !== undefined) updatePlayerHand(seatElem, i, s.cards, s.score, s.isActive, s.outcomes, false)
        }
    }

    function getBJEPGhostCardStyles(seatId, cardLoc, isSplit) {
        if (!isBJEP) return "";
        var pos = cardLoc,
            hand = 1,
            bt = betTypes["Win_H" + seatId],
            splitHand = "",
            amountOnSeat = model.getBJEPAmountForSlot(bt);
        if (amountOnSeat <= 0) return "";
        if (isSplit) {
            var arr = cardLoc.split("-");
            hand = parseInt(arr[0], 10);
            pos = arr[1];
            splitHand = "_" + hand
        }
        pos = parseInt(pos, 10);
        if (pos === 30) pos = 3;
        var index = -100;
        _.forEach([0, 1, 2, 3, 4, 5], function(i) {
            var bt = betTypes["Win_H" + seatId + splitHand + "_" + i + "H"];
            if (i === 0) bt = betTypes["Win_H" + seatId + splitHand];
            var amount = model.getBetAmount(bt);
            if (i === 1) {
                var btDouble = betTypes["Win_H" + seatId + splitHand + "_" + i + "D"];
                amount = Math.max(amount, model.getBetAmount(btDouble))
            }
            if (amount > 0) {
                index = i;
                return false
            }
        });
        var cardBTIndex = pos - 2;
        if (cardBTIndex <= index) return "";
        else return "bjepGhostCard"
    }

    function createPlayerCard(seatElem, seatId, card, isActive, is777Active) {
        var cardArray = card.split(":"),
            cardCode = cardArray[0],
            cardLoc = cardArray[1].replace(".", "-"),
            cardLocStyle = "playerCardLoc",
            isSplit = cardLoc.indexOf("-") !== -1,
            cardWrapperIndex = 1;
        var ghostStyles = getBJEPGhostCardStyles(seatId, cardLoc, isSplit);
        var cardElem = document.createElement("div");
        cardElem.id = seatId + cardLocStyle + cardLoc;
        $(cardElem).addClass("card");
        $(cardElem).addClass(ghostStyles);
        if (isSplit) {
            cardWrapperIndex = parseInt(cardLoc[0], 10);
            $(cardElem).addClass("cardSplit")
        }
        if (isActive) {
            if (cardLoc.slice(-1) === "1") {
                var activeSpotLight = document.createElement("div");
                $(activeSpotLight).addClass("activeGlow");
                $(activeSpotLight).addClass("activeGlowLoc" + cardLoc);
                seatElem.append(activeSpotLight)
            }
            $(cardElem).addClass("cardActive");
            cardLocStyle = "playerCardActiveLoc"
        }
        $(cardElem).addClass(cardLocStyle + cardLoc + " card-" + cardCode);
        if (is777Active) {
            $(cardElem).addClass("jackpotPulseElement");
            $("#jackpotText").addClass("jackpotPulseElement")
        }
        var cardWrappers = seatElem.find(".cardWrapper");
        var cardWrapper = cardWrappers[cardWrapperIndex - 1];
        $(cardWrapper).append(cardElem);
        return ghostStyles
    }

    function createDealerCard(dealerHand, card, cardNum) {
        var cardArray = card.split(":"),
            cardCode = cardArray[0],
            cardLoc = cardArray[1].replace(".", "-"),
            cardLocStyle = "dealerCardLoc";
        if (cardCode === "?C") cardCode = "holeCard";
        var cardElem = document.createElement("div");
        cardElem.id = "dealerCard" + cardNum;
        $(cardElem).addClass("card dealerCardLoc card-" + cardCode);
        if (config.isDealerMonitor && tableCode === "X") dealerHand.append(cardElem);
        else dealerHand.prepend(cardElem)
    }
};
VIVO.ui.CardHandler.prototype = Object.create(VIVO.utils.EventDispatcher.prototype);
VIVO.namespace("ui.Chat");
VIVO.ui.Chat = function(vivo, frame) {
    "use strict";
    var ws = vivo.ws,
        messages = vivo.ws.messageTypes,
        model = vivo.model.state,
        config = vivo.model.config,
        tableId = config.urlParams.tableId,
        appendChatMessage = appendChatMessage,
        getColorFunction, colours = config.getConfigParam("dealerMonitorChatColors"),
        coloursLength = colours.length,
        playerToColorMap = {},
        MAX_CHAT_HISTORY_LENGTH = 400,
        MAX_CHAT_LENGTH = 400,
        ORIGINAL_WELCOME_MSG = " just joined the table",
        NEW_WELCOME_MSG = config.getLocale("chatWelcomeMessage", "Welcome") + " ",
        playerIndex = 0,
        chatHistoryElement = document.getElementById("chatHistory"),
        $chatHistoryElem = $("#chatHistory"),
        isResizingAlready = false,
        isDM = config.isDealerMonitor,
        isChatVisible = true,
        skypeEmoticons, $wr = $("#emoticonWindowRapper"),
        overrideEmoticonReplace = playerEmoticonHTML,
        $chatText = $("#chatText"),
        useTextEmoticons = $chatText.is("input");
    if ($("#chatButton").hasClass("sendChatIcon") === false) $("#chatButton").text(config.getLocale("submit"));
    $("#chatButton").click(onChatClick);
    $chatText.keydown(function(e) {
        if (e.keyCode === 13) onChatClick()
    });
    $("#emoticon").on("click", onEmoticonClick);
    $("#showHideChatBar").on("click", onChatToggleOpenClose);
    var v = Cookies.get(tableId + "configChatWindowOpen");
    if (config.urlParams.gameType === "baccarat" || config.urlParams.gameType === "roulette" || config.urlParams.gameType === "americanroulette" || config.urlParams.gameType === "bjep") {
        v = "true";
        $("#chatOpenCloseButton").hide();
        $("#showHideChatBar").off("click", onChatToggleOpenClose)
    }
    if (v && v !== "true") onChatToggleOpenClose();
    $(window).resize(function() {
        if (isResizingAlready) return;
        isResizingAlready = true;
        setTimeout(function() {
            isResizingAlready = false;
            chatHistoryElement.scrollTop = chatHistoryElement.scrollHeight
        }, 500)
    });
    $(chatHistoryElement).niceScroll(config.scrollConfig);
    chatHistoryElement.value = "";
    setText("");
    if (!useTextEmoticons) {
        setText = setDivText;
        getText = getDivText
    }
    ws.addEventListener(messages.BroadcastChatMessage, onBroadcastChatMessage);
    ws.addEventListener(messages.TipBetSettled, onTipBetSettled);
    getColorFunction = getPlayerColors;
    if (isDM) {
        getColorFunction = getDealerColors;
        overrideEmoticonReplace = dealerMonitorEmoticonHTML
    }

    function switchWelcomMessage(msg) {
        if (msg.indexOf(ORIGINAL_WELCOME_MSG) === -1) return msg;
        return NEW_WELCOME_MSG + msg.replace(ORIGINAL_WELCOME_MSG, "")
    }

    function onTipBetSettled(e) {
        var tbs = e.data.TipBetSettled;
        var chatMsg, alias = fixPlayerAlias(tbs.playerAlias);
        if (tbs.payout > 0) chatMsg = alias + " tip bet and " + model.getDealerName() + " WON " + tbs.payout.toMoney() + "!";
        else if (tbs.settlement > 0) chatMsg = alias + " tip bet " + tbs.amount.toMoney() + " but pushed.";
        else chatMsg = alias + " tip bet " + tbs.amount.toMoney() + " but lost.";
        appendChatMessage(chatMsg, "red")
    }

    function fixPlayerAlias(pipedAlias) {
        return pipedAlias.split("|")[0]
    }

    function onBroadcastChatMessage(e) {
        var newChat = e.data.BroadcastChatMessage.content;
        newChat = newChat.replace(/<br>/g, "\n");
        newChat = newChat.replace(/<font.*<\/font>/g, "");
        newChat = newChat.replace(/^\s\s*/, "").replace(/\s\s*$/, "");
        newChat = cleanPlayerName(newChat);
        newChat = switchWelcomMessage(newChat);
        var colour = getColorFunction(newChat);
        if (isRestrictedWarning(newChat)) newChat = config.getLocale("restrictedLanguageWarning", newChat);
        else if (isMakeADepositWarning(newChat)) {
            if (newChat.indexOf("chat") !== -1) newChat = config.getLocale("makeDepositWarningChat", newChat);
            else newChat = config.getLocale("makeDepositWarningTips", newChat)
        }
        appendChatMessage(newChat, colour)
    }

    function revertEmoticons(msg) {
        console.log("msg=" + msg);
        return msg.replace(/<div class="emoticon.*?"><div.*?">/g, "").replace(/<\/div><\/div>/g, "").replace(/<br>/g, "")
    }

    function dealerMonitorEmoticonHTML(name, code, title) {
        return '<div class="emoticonWrapper"><div class="emoticon dealerMonitor emoticon-' + name + '" title="' + title + '">' + code + "</div></div>"
    }

    function playerEmoticonHTML(name, code, title) {
        return '<div class="emoticonWrapper"><div class="emoticon emoticon-' + name + '" title="' + title + '">' + code + "</div></div>"
    }

    function appendChatMessage(newChat, colour) {
        var newChatElem = document.createElement("div");
        $(newChatElem).addClass("chatLine");
        if (isDM) $(newChatElem).addClass("DMChatLine");
        newChatElem.style.color = colour;
        newChat = $.emoticons.replace(newChat, overrideEmoticonReplace);
        newChatElem.innerHTML = newChat;
        chatHistoryElement.appendChild(newChatElem);
        setTimeout(function() {
            chatHistoryElement.scrollTop = chatHistoryElement.scrollHeight
        }, 10);
        if ($chatHistoryElem.children() > MAX_CHAT_HISTORY_LENGTH) $chatHistoryElem.children().first().remove()
    }

    function getDealerColors(newChatMsg, node) {
        var playerName = newChatMsg.split(":")[0];
        if (isTip(newChatMsg) || isRestrictedWarning(newChatMsg)) {
            return "red"
        }
        if (newChatMsg.indexOf(NEW_WELCOME_MSG) !== -1) {
            playerName = newChatMsg.substring(NEW_WELCOME_MSG.length, newChatMsg.length);
            addPlayerToMap(playerName)
        }
        var colour = playerToColorMap[playerName];
        if (colour === undefined) {
            addPlayerToMap(playerName);
            colour = playerToColorMap[playerName]
        }
        return colour
    }

    function getPlayerColors(newChatMsg, node) {
        if (isTip(newChatMsg) || isRestrictedWarning(newChatMsg) || isBlocked(newChatMsg) || isMakeADepositWarning(newChatMsg) || isAccountNotFound(newChatMsg) || isInlineHTMLWarning(newChatMsg) || isTransferFundsWarning(newChatMsg)) {
            return "red"
        }
        return "white"
    }

    function isMakeADepositWarning(message) {
        if (message.indexOf("Make a deposit to enable ") === 0) return true;
        return false
    }

    function cleanPlayerName(message) {
        var pipeIndex = message.indexOf("|");
        if (pipeIndex === -1) return message;
        var colonIndex = message.indexOf(":");
        if (colonIndex !== -1 && colonIndex < pipeIndex) return message;
        var a = message.split("|");
        message = a[0];
        if (a.length < 3) {
            console.log("Invalid screen alias expecting only the form 'streetglide|19.00000|USD' or 'streetglide'");
            return message
        }
        message += String(a[2]).substr(3);
        for (var i = 3; i < a.length; i++) message += "|" + a[i];
        return message
    }

    function isBlocked(newChatMsg) {
        if (newChatMsg.indexOf("You are currently blocked from using chat. You will be unblocked in ") === 0) return true;
        return false
    }

    function isRestrictedWarning(newChatMsg) {
        if (newChatMsg === "Your chat contains restricted language") return true;
        return false
    }

    function isAccountNotFound(newChatMsg) {
        if (newChatMsg === "Your account couldn't be found please login again") return true;
        return false
    }

    function isInlineHTMLWarning(newChatMsg) {
        if (newChatMsg === "You cannot use inline HTML in chat messages") return true;
        return false
    }

    function isTransferFundsWarning(newChatMsg) {
        if (newChatMsg === "You must transfer funds into the live casino to enable chat") return true;
        return false
    }

    function isTip(newChatMsg) {
        if (newChatMsg.indexOf(": ") !== -1) return false;
        var msgArray = newChatMsg.split(" ");
        if (msgArray.length > 2 && msgArray[1] === "tipped" && !isNaN(parseFloat(msgArray[2]))) return true;
        return false
    }

    function addPlayerToMap(playerName) {
        playerToColorMap[playerName] = "#" + colours[playerIndex % coloursLength];
        playerIndex++
    }

    function onChatTextLineClick() {
        window.setTimeout(function() {
            $chatHistoryElem.focus();
            window.setTimeout(function() {
                $chatText.focus()
            }, 50)
        }, 50)
    }

    function onChatClick() {
        var $ct = $chatText;
        var chatText = getText();
        if (chatText.length === 0) return;
        ws.sendChatRequest(chatText.substring(0, Math.min(chatText.length, MAX_CHAT_LENGTH)));
        setText("");
        $("#emoticonWindow").addClass("closed");
        window.setTimeout(function() {
            $ct.focus();
            setText("");
            moveSelectionToTheEnd()
        }, 100)
    }

    function setText(text) {
        $chatText.val(text)
    }

    function setDivText(text) {
        $chatText.html(text)
    }

    function getText() {
        return $chatText.val()
    }

    function getDivText() {
        var text = revertEmoticons($chatText.html());
        return text
    }

    function onChatToggleOpenClose() {
        if (isChatVisible) {
            $("#chatWrapper").addClass("closed");
            $("#jackpot,#beadPlate,#bigRoad,#bigRoadButton").addClass("closed");
            $("#chatOpenCloseButton").removeClass("chatCloseIcon").addClass("chatOpenIcon");
            $("#emoticonWindow").addClass("closed")
        } else {
            $("#chatWrapper").removeClass("closed");
            $("#jackpot,#beadPlate,#bigRoad,#bigRoadButton").removeClass("closed");
            $("#chatOpenCloseButton").removeClass("chatOpenIcon").addClass("chatCloseIcon")
        }
        isChatVisible = !isChatVisible;
        Cookies.set(tableId + "configChatWindowOpen", "" + isChatVisible, {
            expires: 50
        })
    }

    function onEmoticonClick() {
        if ($("#emoticonWindow").hasClass("closed")) $("#emoticonWindow").removeClass("closed");
        else $("#emoticonWindow").addClass("closed")
    }

    function moveSelectionToTheEnd() {
        return
    }

    function onEmoticonSelection(e) {
        var button = $(this);
        var $ct = $chatText,
            chatText = getText(),
            key = button.data("key");
        chatText = chatText + " " + skypeEmoticons[key].codes[0];
        if (!useTextEmoticons) {
            chatText += "&nbsp;";
            chatText = $.emoticons.replace(chatText, overrideEmoticonReplace)
        }
        setText(chatText);
        window.setTimeout(function() {
            $ct.focus();
            moveSelectionToTheEnd()
        }, 100)
    }

    function createEmoticonPopup() {
        _.forOwn(skypeEmoticons, function(value, key) {
            $wr.append('<div data-key="' + key + '" class="emoticonPopupButton emoticon emoticon-' + key + '" title="' + value.title + '"></div>')
        });
        $("#emoticonWindowRapper .emoticonPopupButton").on("click", onEmoticonSelection);
        $wr.niceScroll(config.scrollConfig)
    }
    skypeEmoticons = {
        smile: {
            title: "Smile",
            codes: [":)", ":=)", ":-)"]
        },
        "sad-smile": {
            title: "Sad Smile",
            codes: [":(", ":=(", ":-("]
        },
        "big-smile": {
            title: "Big Smile",
            codes: [":D", ":=D", ":-D", ":d", ":=d", ":-d"]
        },
        cool: {
            title: "Cool",
            codes: ["8)", "8=)", "8-)", "B)", "B=)", "B-)", "(cool)"]
        },
        wink: {
            title: "Wink",
            codes: [";)", ":o", ":=o", ":-o", ":O", ":=O", ":-O"]
        },
        crying: {
            title: "Crying",
            codes: [";(", ";-(", ";=("]
        },
        sweating: {
            title: "Sweating",
            codes: ["(sweat)", "(:|"]
        },
        speechless: {
            title: "Speechless",
            codes: [":|", ":=|", ":-|"]
        },
        kiss: {
            title: "Kiss",
            codes: [":*", ":=*", ":-*"]
        },
        "tongue-out": {
            title: "Tongue Out",
            codes: [":P", ":=P", ":-P", ":p", ":=p", ":-p"]
        },
        blush: {
            title: "Blush",
            codes: ["(blush)", ":$", ":-$", ":=$", ':">']
        },
        wondering: {
            title: "Wondering",
            codes: [":^)"]
        },
        sleepy: {
            title: "Sleepy",
            codes: ["|-)", "I-)", "I=)", "(snooze)"]
        },
        dull: {
            title: "Dull",
            codes: ["|(", "|-(", "|=("]
        },
        "in-love": {
            title: "In love",
            codes: ["(inlove)"]
        },
        "evil-grin": {
            title: "Evil grin",
            codes: ["]:)", ">:)", "(grin)"]
        },
        talking: {
            title: "Talking",
            codes: ["(talk)"]
        },
        yawn: {
            title: "Yawn",
            codes: ["(yawn)", "|-()"]
        },
        puke: {
            title: "Puke",
            codes: ["(puke)", ":&", ":-&", ":=&"]
        },
        "doh!": {
            title: "Doh!",
            codes: ["(doh)"]
        },
        angry: {
            title: "Angry",
            codes: [":@", ":-@", ":=@", "x(", "x-(", "x=(", "X(", "X-(", "X=("]
        },
        "it-wasnt-me": {
            title: "It wasn't me",
            codes: ["(wasntme)"]
        },
        party: {
            title: "Party!!!",
            codes: ["(party)"]
        },
        worried: {
            title: "Worried",
            codes: [":S", ":-S", ":=S", ":s", ":-s", ":=s"]
        },
        mmm: {
            title: "Mmm...",
            codes: ["(mm)"]
        },
        nerd: {
            title: "Nerd",
            codes: ["8-|", "B-|", "8|", "B|", "8=|", "B=|", "(nerd)"]
        },
        "lips-sealed": {
            title: "Lips Sealed",
            codes: [":x", ":-x", ":X", ":-X", ":#", ":-#", ":=x", ":=X", ":=#"]
        },
        hi: {
            title: "Hi",
            codes: ["(hi)"]
        },
        call: {
            title: "Call",
            codes: ["(call)"]
        },
        devil: {
            title: "Devil",
            codes: ["(devil)"]
        },
        angel: {
            title: "Angel",
            codes: ["(angel)"]
        },
        envy: {
            title: "Envy",
            codes: ["(envy)"]
        },
        wait: {
            title: "Wait",
            codes: ["(wait)"]
        },
        bear: {
            title: "Bear",
            codes: ["(bear)", "(hug)"]
        },
        "make-up": {
            title: "Make-up",
            codes: ["(makeup)", "(kate)"]
        },
        "covered-laugh": {
            title: "Covered Laugh",
            codes: ["(giggle)", "(chuckle)"]
        },
        "clapping-hands": {
            title: "Clapping Hands",
            codes: ["(clap)"]
        },
        thinking: {
            title: "Thinking",
            codes: ["(think)", ":?", ":-?", ":=?"]
        },
        bow: {
            title: "Bow",
            codes: ["(bow)"]
        },
        rofl: {
            title: "Rolling on the floor laughing",
            codes: ["(rofl)"]
        },
        whew: {
            title: "Whew",
            codes: ["(whew)"]
        },
        happy: {
            title: "Happy",
            codes: ["(happy)"]
        },
        smirking: {
            title: "Smirking",
            codes: ["(smirk)"]
        },
        nodding: {
            title: "Nodding",
            codes: ["(nod)"]
        },
        shaking: {
            title: "Shaking",
            codes: ["(shake)"]
        },
        punch: {
            title: "Punch",
            codes: ["(punch)"]
        },
        emo: {
            title: "Emo",
            codes: ["(emo)"]
        },
        yes: {
            title: "Yes",
            codes: ["(y)", "(Y)", "(ok)"]
        },
        no: {
            title: "No",
            codes: ["(n)", "(N)"]
        },
        handshake: {
            title: "Shaking Hands",
            codes: ["(handshake)"]
        },
        skype: {
            title: "Skype",
            codes: ["(skype)", "(ss)"]
        },
        heart: {
            title: "Heart",
            codes: ["(h)", "<3", "(H)", "(l)", "(L)"]
        },
        "broken-heart": {
            title: "Broken heart",
            codes: ["(u)", "(U)"]
        },
        mail: {
            title: "Mail",
            codes: ["(e)", "(m)"]
        },
        flower: {
            title: "Flower",
            codes: ["(f)", "(F)"]
        },
        rain: {
            title: "Rain",
            codes: ["(rain)", "(london)", "(st)"]
        },
        sun: {
            title: "Sun",
            codes: ["(sun)"]
        },
        time: {
            title: "Time",
            codes: ["(o)", "(O)", "(time)"]
        },
        music: {
            title: "Music",
            codes: ["(music)"]
        },
        movie: {
            title: "Movie",
            codes: ["(~)", "(film)", "(movie)"]
        },
        phone: {
            title: "Phone",
            codes: ["(mp)", "(ph)"]
        },
        coffee: {
            title: "Coffee",
            codes: ["(coffee)"]
        },
        pizza: {
            title: "Pizza",
            codes: ["(pizza)", "(pi)"]
        },
        cash: {
            title: "Cash",
            codes: ["(cash)", "(mo)", "($)"]
        },
        muscle: {
            title: "Muscle",
            codes: ["(muscle)", "(flex)"]
        },
        cake: {
            title: "Cake",
            codes: ["(^)", "(cake)"]
        },
        beer: {
            title: "Beer",
            codes: ["(beer)"]
        },
        drink: {
            title: "Drink",
            codes: ["(d)", "(D)"]
        },
        dance: {
            title: "Dance",
            codes: ["(dance)", "\\o/", "\\:D/", "\\:d/"]
        },
        ninja: {
            title: "Ninja",
            codes: ["(ninja)"]
        },
        star: {
            title: "Star",
            codes: ["(*)"]
        },
        mooning: {
            title: "Mooning",
            codes: ["(mooning)"]
        },
        finger: {
            title: "Finger",
            codes: ["(finger)"]
        },
        bandit: {
            title: "Bandit",
            codes: ["(bandit)"]
        },
        drunk: {
            title: "Drunk",
            codes: ["(drunk)"]
        },
        smoking: {
            title: "Smoking",
            codes: ["(smoking)", "(smoke)", "(ci)"]
        },
        toivo: {
            title: "Toivo",
            codes: ["(toivo)"]
        },
        rock: {
            title: "Rock",
            codes: ["(rock)"]
        },
        headbang: {
            title: "Headbang",
            codes: ["(headbang)", "(banghead)"]
        },
        bug: {
            title: "Bug",
            codes: ["(bug)"]
        },
        fubar: {
            title: "Fubar",
            codes: ["(fubar)"]
        },
        poolparty: {
            title: "Poolparty",
            codes: ["(poolparty)"]
        },
        swearing: {
            title: "Swearing",
            codes: ["(swear)"]
        },
        tmi: {
            title: "TMI",
            codes: ["(tmi)"]
        },
        heidy: {
            title: "Heidy",
            codes: ["(heidy)"]
        },
        myspace: {
            title: "MySpace",
            codes: ["(MySpace)"]
        },
        malthe: {
            title: "Malthe",
            codes: ["(malthe)"]
        },
        tauri: {
            title: "Tauri",
            codes: ["(tauri)"]
        },
        priidu: {
            title: "Priidu",
            codes: ["(priidu)"]
        }
    };
    $.emoticons.define(skypeEmoticons);
    createEmoticonPopup();
    return {
        appendChatMessage: appendChatMessage
    }
};
VIVO.namespace("ui.ChipSelection");
VIVO.ui.ChipSelection = function(vivo, frame) {
    "use strict";
    var messages = vivo.ws.messageTypes,
        model = vivo.model.state,
        config = vivo.model.config,
        _chipArray, lastSelectedChip;
    model.addEventListener(model.ENTER_TABLE_PROCESSED, onEnterTableResponse);

    function onEnterTableResponse(e) {
        _chipArray = model.getChipArray();
        var oldNode = $("#gameStateColChips"),
            newNode = oldNode.clone();
        newNode.empty();
        for (var i = 0; i < _chipArray.length; i++) {
            var amount = _chipArray[i];
            var chip = config.createChip(amount);
            chip.id = "chipSelection" + i;
            $(chip).addClass("chipSelection");
            chip.draggable = "true";
            chip.ondragstart = getOnDragstartFunction(amount);
            newNode.append(chip);
            if (i == 1) {
                lastSelectedChip = chip.id;
                model.setSelectedChipAmount(amount)
            }
        }
        newNode.on("click", ".chipSelection", onChipSelected);
        oldNode.replaceWith(newNode);
        $("#" + lastSelectedChip).addClass("selectedChip").animate({
            top: "10%"
        }, 400)
    }

    function onDragStart(ev) {
        ev.dataTransfer.setData("Text", ev.target.id)
    }

    function getOnDragstartFunction(amount) {
        return function(ev) {
            console.log("getOnDragstartFunction:  amount =" + amount);
            ev.dataTransfer.setData("amount", amount)
        }
    }

    function onChipSelected(e) {
        var src = this;
        console.log(" src: " + src + " src.id=" + src.id);
        if (src.id === lastSelectedChip) return;
        if (!src.id.startsWith("chipSelection")) return;
        var index = parseInt(src.id.slice(13));
        var amount = _chipArray[index];
        if (lastSelectedChip !== undefined) {
            $("#" + lastSelectedChip).removeClass("selectedChip").animate({
                top: "20%"
            }, 400)
        }
        lastSelectedChip = src.id;
        $("#" + lastSelectedChip).addClass("selectedChip").animate({
            top: "10%"
        }, 400);
        model.setSelectedChipAmount(amount)
    }
};
VIVO.namespace("model.Config");
VIVO.model.Config = function(loadedCallBack, isLobbyWidget) {
    var _urlParams = parseURLParams(),
        _localeMap = {},
        _centerLookUp = {},
        _isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),
        _isIPad8_1 = navigator.userAgent.indexOf("Mozilla/5.0 (iPad; CPU OS 8_1") === 0,
        _isiOS = /(iPad|iPhone|iPod)/g.test(navigator.userAgent),
        _isFlashSupported = swfobject.hasFlashPlayerVersion("9.0.0"),
        _isConfigXMLLoaded = false,
        _isLocaleLoaded = false,
        _useChipStacks = false,
        _UUID = getGuid(),
        _isFullScreenBJC = location.pathname.indexOf("bjclassicFS") !== -1,
        _specialCaseSlotPositions = !_isFullScreenBJC,
        _configParams, _loggingServerURL = "activity.php",
        _loggingServerConnected = false,
        _clientVersion = getNumericVersion(),
        _heartbeatDurationMS = 500,
        _isListeningToHeartBeat = false,
        _heartbeatCallbackQueue = [],
        _gameTypes = {
            roulette: "RouletteMessage",
            americanroulette: "RouletteMessage",
            baccarat: "BaccaratMessage",
            bjclassic: "BJCMessage",
            bjep: "BJEPMessage"
        },
        _gameSubType = _urlParams.subtype,
        _gameStateMessageKey = _gameTypes[_urlParams.gameType],
        _dealerImagePath = "/photos/dealer/thumb/",
        _isDealerMonitor = $("#frame #DMScreen1").length === 1 || $("#frame #DMScreen2").length === 1,
        _isDealerScreenOne = $("#frame #DMScreen1").length === 1,
        _chipSound = VIVO.ui.Sound(),
        _nullAsianText = false,
        _goldStatus = [false, false, false, false, false, false, false],
        _allowedJPType = -1,
        _scrollConfig = {
            scrollspeed: 80,
            mousescrollstep: 65
        },
        _chipURLMap;
    try {
        _isIPad8_1 = navigator.userAgent.indexOf("Mozilla/5.0 (iPad; CPU OS 8_1") === 0
    } catch (e) {
        sendError("Error getting isIPat8.1 test " + e);
        _isIPad8_1 = true
    }
    if (window.WebSocket === undefined) displayAlertAndClose("Your browser is not supported.\nWe recommend upgrading to current versions of Chrome or Firefox.");
    if (isLobbyWidget === undefined) isLobbyWidget = false;
    if (_urlParams.locale === undefined) displayAlertAndClose("Error: url param 'locale' is required");
    try {
        var localeArray = _urlParams.locale.split("_");
        _urlParams.language = localeArray[0];
        _urlParams.country = localeArray[1];
        _urlParams.client = _urlParams.locale.replace(localeArray[0] + "_" + localeArray[1] + "_", "");
        var tableSymbolArray = _urlParams.tableSymbol.split("-");
        _urlParams.tableId = tableSymbolArray[0];
        _urlParams.limitLevel = tableSymbolArray[1];
        _urlParams.currency = tableSymbolArray[2];
        _nullAsianText = _urlParams.gameType === "baccarat" && ["zh", "ko", "th", "vi"].indexOf(_urlParams.language) !== -1
    } catch (error) {
        if (!isLobbyWidget) displayAlertAndClose("Error: locale or tableSymbol url parameter badly formatted or missing.")
    }
    if (!isLobbyWidget) {
        subscribeToLoggingServer();
        if (typeof _urlParams.gameType === "undefined") {
            displayAlertAndClose("Error: url param 'gameType' is required")
        }
        if (typeof _gameStateMessageKey === "undefined") {
            displayAlertAndClose("Error: url param 'gameType' is probably wrong '" + _urlParams.gameType + "'' or isn't supported.\nNo game state message type found for that game type.")
        }
    }
    Object.freeze(_urlParams);
    loadConfig("config/AppConfig.json");

    function newEvent(eventType) {
        var e;
        try {
            e = jQuery.Event(eventType)
        } catch (error) {
            e = document.createEvent("CustomEvent");
            e.initCustomEvent(eventType, false, false, {})
        }
        return e
    }
    Number.prototype.toMoney = function(decimals, decimal_sep, thousands_sep) {
        var n = this,
            c = isNaN(decimals) ? 2 : Math.abs(decimals),
            d = decimal_sep || ".",
            t = typeof thousands_sep === "undefined" ? "," : thousands_sep,
            sign = n < 0 ? "-" : "",
            i = parseInt(n = Math.abs(n).toFixed(c)) + "",
            j = (j = i.length) > 3 ? j % 3 : 0;
        return sign + (j ? i.substr(0, j) + t : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : "")
    };
    if (typeof String.prototype.startsWith != "function") {
        String.prototype.startsWith = function(str) {
            return this.slice(0, str.length) == str
        }
    }

    function loadConfig(url) {
        var startTime = $.now();
        $.ajax({
            url: url,
            type: "GET",
            async: true,
            dataType: "text",
            complete: function(result) {
                if (result.statusText !== "OK") {
                    sendError("Error loading config json at: " + url + " error: " + result.statusText);
                    return
                }
                try {
                    console.log("Reponse text was " + result.responseText);
                    _configParams = JSON.parse(result.responseText);
                    checkAllRequiredConfig();
                    loadLocale(_urlParams.language)
                } catch (error) {
                    displayAlertAndClose("Error: parsing AppConfig.json check for syntax errors. The url is: " + url);
                    return
                }
                Object.freeze(_configParams);
                _isConfigXMLLoaded = true;
                console.log("config load time " + ($.now() - startTime) + "ms");
                configLoaded()
            }
        })
    }

    function checkAllRequiredConfig() {
        if (_urlParams.tableId[0] !== "X" && (_configParams.gameStateDurationSec[_urlParams.tableId] === undefined || _configParams.gameStateDurationSec[_urlParams.tableId].pyb === undefined)) displayAlertAndClose("Error: AppConfig.json is required to specify the PYB duration for this table " + _urlParams.tableId);
        if (_configParams.ports.wss === undefined || _configParams.ports.ws === undefined) displayAlertAndClose("Error: AppConfig.json is required to specify the ports for both wss and ws.");
        if (_configParams.resourceDirectory === undefined) displayAlertAndClose("Error: AppConfig.json is required to specify the versioned resources directory for locale strings and dealerImages.");
        else _dealerImagePath = _configParams.resourceDirectory + _dealerImagePath
    }

    function isBetTypeValid(betType) {
        var btString = "" + betType;
        console.log("Is type valid " + betType + " map " + JSON.stringify(_configParams.disabledBetTypes));
        if (_configParams.disabledBetTypes === undefined) {
            console.log("none defined ");
            return true
        }
        if (_configParams.disabledBetTypes[_urlParams.tableId] === undefined) {
            console.log("none defined for table ");
            return true
        }
        if (_configParams.disabledBetTypes[_urlParams.tableId][btString] === undefined) {
            console.log("none defined for this bet type ");
            return true
        }
        return false
    }

    function isBJCBetBehind() {
        return _gameSubType === "betbehind"
    }

    function inIframe() {
        var result = false;
        try {
            result = window.self !== window.top
        } catch (e) {
            result = true
        }
        console.log("Is the window in an Iframe: " + result);
        return result
    }

    function getGuid() {
        function _p8(s) {
            var p = (Math.random().toString(16) + "000000000").substr(2, 8);
            return s ? "-" + p.substr(0, 4) + "-" + p.substr(4, 4) : p
        }
        return _p8() + _p8(true) + _p8(true) + _p8()
    }

    function getConfigParam(config) {
        return _configParams[config]
    }

    function subscribeToLoggingServer() {
        console.log("Subscribing to the Logging server");
        $.ajax({
            url: _loggingServerURL,
            type: "POST",
            async: true,
            data: {
                method: "Subscribe",
                psid: _urlParams.playerSessionID,
                fcid: _urlParams.clientId,
                md5: _UUID,
                iplocal: _urlParams.localIp
            },
            complete: function(result) {
                if (result.statusText !== "OK") console.error("Error sending the log message to the server " + result.statusText);
                else {
                    _loggingServerConnected = true;
                    sendLog("1001", "HTML5 App Release: " + getVersionStr() + ", host: " + location.host + ", tableSymbol: " + _urlParams.tableSymbol + ", locale: " + _urlParams.locale + ", userAgent: " + navigator.userAgent)
                }
            }
        })
    }

    function getVersionStr() {
        var src = $("#vivoScript").attr("src");
        console.log("js source =" + src);
        src = src.substring(0, src.length - 3);
        var versionStr = src.split("-")[2] + "-" + src.split("-")[3];
        return versionStr
    }

    function getNumericVersion() {
        try {
            var vsList = getVersionStr().split("-")[0].split(".");
            return new VIVO.utils.webservice.VersionObject(parseInt(vsList[0]), parseInt(vsList[1]), parseInt(vsList[2]))
        } catch (e) {}
        return new VIVO.utils.webservice.VersionObject(1, 0, 0)
    }

    function sendError(errorMsg) {
        console.error(errorMsg);
        postToServer("Errorlog", _clientVersion + ": " + errorMsg, "99999")
    }

    function sendLog(typeId, logMsg) {
        console.log($.now() + ":- Sending log msg to the server: " + logMsg);
        postToServer("Sendlog", logMsg, typeId)
    }
    var isErrorSendingLogReported = false;

    function postToServer(method, logMsg, typeId) {
        $.ajax({
            url: _loggingServerURL,
            type: "POST",
            async: true,
            data: {
                method: method,
                psid: "",
                md5: _UUID,
                data: logMsg,
                type: typeId
            },
            complete: function(result) {
                if (result.statusText !== "OK" && !isErrorSendingLogReported) {
                    console.error("Error sending the log message to the server " + result.statusText);
                    isErrorSendingLogReported = true
                }
            }
        })
    }

    function loadLocale(language) {
        var startTime = $.now();
        $.ajax({
            url: _configParams.resourceDirectory + "/html5Locale/" + language + "/mainBundle.properties",
            type: "GET",
            async: true,
            success: function(result) {
                var lines = result.split("\n");
                for (var i = 0; i < lines.length; i++) {
                    var line = lines[i];
                    if (line[0] === "#") continue;
                    var equalsIndex = line.indexOf("=");
                    if (equalsIndex !== -1) {
                        var key = line.substring(0, equalsIndex).trim();
                        var value = line.substring(equalsIndex + 1);
                        if (value === "&zwnj;") value = " ";
                        _localeMap[key] = value
                    }
                }
                _isLocaleLoaded = true;
                console.log("locale load time " + ($.now() - startTime) + "ms");
                configLoaded()
            },
            complete: function(result) {
                if (result.statusText !== "OK") displayAlertAndClose("Error loading locale strings: " + result.statusText)
            }
        })
    }

    function setUseChipStacks(useChipStacks) {
        _useChipStacks = useChipStacks
    }

    function displayAlertAndClose(text) {
        sendError(text);
        if ($("#alertOverlay").is(":visible")) {
            VIVO.ws.disconnect();
            return
        }
        displayAlert2(getLocale("client_alert_title_info", "Info:"), text, closeAlertAndWindow);
        VIVO.ws.disconnect()
    }

    function displayAlert2(title, text, defaultCallback, button1Text, button1Callback, button2Text, button2Callback) {
        if (["zh", "vi", "ko", "th"].indexOf(_urlParams.language) !== -1 && _urlParams.gameType === "baccarat") return;
        $("#alertOverlay").off();
        $("#alertButton1").off();
        $("#alertButton2").off();
        $("#alertHeader").html('<div class="alertTitle">' + title + '</div><div class="alertCloseIcon vigIcon alertCrossIcon"></div>');
        $("#alertText").html(text.replace(/\\n/g, "<br />"));
        $("#alertButton1").hide();
        $("#alertButton2").hide();
        if (button1Text !== undefined) {
            $("#alertButton1").html(button1Text);
            $("#alertButton1").on("click", button1Callback);
            $("#alertButton1").show()
        } else {
            $("#alertOverlay").on("click", defaultCallback)
        }
        if (button2Text !== undefined) {
            $("#alertButton2").html(button2Text);
            $("#alertButton2").on("click", button2Callback);
            $("#alertButton2").show()
        }
        $("#alertOverlay").show()
    }

    function displayAlert(title, text, button1Text, button1Callback, button2Text, button2Callback) {
        if (["zh", "vi", "ko", "th"].indexOf(_urlParams.language) !== -1 && _urlParams.gameType === "baccarat") return;
        $("#alertOverlay").off();
        $("#alertButton1").off();
        $("#alertButton2").off();
        $("#alertHeader").html('<div class="alertTitle">' + title + '</div><div class="alertCloseIcon vigIcon alertCrossIcon"></div>');
        $("#alertText").html(text.replace(/\\n/g, "<br />"));
        $("#alertButton1").html(button1Text);
        $("#alertButton1").on("click", button1Callback);
        $("#alertButton1").show();
        if (button2Text !== undefined) {
            $("#alertButton2").html(button2Text);
            $("#alertButton2").on("click", button2Callback);
            $("#alertButton2").show()
        } else $("#alertButton2").hide();
        $("#alertOverlay").show()
    }

    function closeAlert() {
        $("#alertOverlay").hide();
        $("#alertButton1").off();
        $("#alertButton2").off()
    }

    function closeAlertAndWindow() {
        try {
            if (VIVO.ws !== undefined) VIVO.ws.disconnect();
            window.close()
        } catch (e) {
            displayAlertAndClose("Your window needs to close please close it manually or refresh.")
        }
        $("#alertOverlay").empty()
    }

    function configLoaded() {
        if (_isLocaleLoaded && _isConfigXMLLoaded) loadedCallBack();
        else if (_isLocaleLoaded) console.log("Waiting for config xml to be loaded.");
        else if (_isConfigXMLLoaded) console.log("Waiting for locale text to be loaded.")
    }

    function getWSURL() {
        var wsURL, host = location.host,
            protocol = "ws://",
            tableId = _urlParams.tableId,
            port = _configParams.ports.ws,
            wlPrefix = _configParams.ports.wlPrefix;
        if (_configParams.overrideWSUrl !== undefined && _configParams.overrideWSUrl[tableId] !== undefined) {
            console.log("WebSocket url overridden for table " + tableId);
            wsURL = _configParams.overrideWSUrl[tableId];
            return wsURL
        }
        if (!wlPrefix) wlPrefix = "";
        if (location.protocol.indexOf("https") !== -1) {
            protocol = "wss://";
            port = _configParams.ports.wss
        }
        wsURL = protocol + host + ":" + port + "/" + tableId + wlPrefix;
        return wsURL
    }

    function parseURLParams() {
        var search = location.search.substring(1);
        if (search === "") {
            return {}
        }
        console.log(search);
        var json = '{"' + decodeURI(search).replace(/"/g, '\\"').replace(/&/g, '","').replace(/=/g, '":"') + '"}';
        console.log(json);
        return $.parseJSON(json)
    }

    function isChipsetFriendly(chipSet) {
        for (var i = 0; i < chipSet.length; i++) {
            for (var j = 0; j < chipSet.length; j++) {
                if (i === j) continue;
                var y = chipSet[i],
                    x = chipSet[j];
                if (y > x / 2 && y < 2 * x) return false
            }
        }
        return true
    }

    function isInt(n) {
        return n % 1 === 0
    }

    function getMinChips(chips, target) {
        console.log("getMinChips: [" + chips + "], amount: " + target);
        if (!isInt(target) || !isInt(chips[0])) {
            var newChips = $.map(chips, function(val) {
                return parseInt(val * 100)
            });
            var newTarget = parseInt(target * 100);
            if (newTarget % newChips[0] !== 0) newTarget = newTarget - newTarget % newChips[0];
            var result = getMinChips(newChips, newTarget);
            return $.map(result, function(val) {
                return val / 100
            })
        }
        var costs = [0],
            coins_used = [NaN];
        for (var i = 1; i < target + 1; i++) {
            if (i % 1e3 === 0) console.log("...");
            var bestCost = Number.MAX_VALUE,
                bestCoin = -1;
            for (var j = 0; j < chips.length; j++) {
                var coin = chips[j];
                if (coin <= i) {
                    cost = 1 + costs[i - coin];
                    if (cost < bestCost) {
                        bestCost = cost;
                        bestCoin = coin
                    }
                }
            }
            costs.push(bestCost);
            coins_used.push(bestCoin)
        }
        var ret = [];
        while (target > 0) {
            ret.unshift(coins_used[target]);
            target -= coins_used[target]
        }
        console.log("chips: [" + chips + "], chipStack: [" + ret + "]");
        return ret
    }
    var missingLocaleMaps = {
        th: {
            auto_rebet: true,
            kickout_code_f: true,
            message_insuffient_funds: true,
            message_timeout_transfer: true,
            max: true,
            hot: true,
            cold: true,
            player_letter: true,
            banker_letter: true,
            tie_letter: true,
            welcome: true,
            hello: true,
            get_started: true,
            screen_name: true,
            fundTransfer_description: true,
            new_user_notification: true,
            funds_available: true,
            amount_transfer: true,
            remaining_funds: true,
            make_transfer: true,
            cancel: true,
            cancel_exit: true,
            enter_game: true,
            screen_alias_error: true,
            insufficient_funds_transfer: true,
            fund_transfer_error: true,
            player_session_invalid: true,
            option_surrender: true,
            bjclassic_insurance: true,
            bjclassic_standup: true,
            loading_punto2000: true,
            new_dragon_bets: true,
            dragon_payouts: true,
            dragon_outcome: true,
            dragon_outcome_payout: true,
            dragon_outcome_natural: true,
            dragon_outcome_4: true,
            dragon_outcome_5: true,
            dragon_outcome_6: true,
            dragon_outcome_7: true,
            dragon_outcome_8: true,
            dragon_outcome_9: true,
            bjc_hit_warning: true,
            toggle_chat_visible: true,
            "stats_#players": true,
            client_alert1: true,
            client_alert3: true,
            client_alert4: true,
            client_alert5: true,
            client_alert_enter_table: true,
            client_alert_title_error: true,
            client_alert_title_info: true,
            initial_loading_title: true,
            baccarat_tie_slot: true,
            baccarat_banker_slot: true,
            baccarat_player_slot: true,
            baccarat_either_slot: true,
            baccarat_player_pair_slot: true,
            baccarat_banker_pair_slot: true,
            baccarat_player_dragon_slot: true,
            baccarat_banker_dragon_slot: true,
            roulette_slot_2_to_1: true,
            roulette_slot_1st_12: true,
            roulette_slot_2nd_12: true,
            roulette_slot_3rd_12: true,
            roulette_slot_1_to_18: true,
            roulette_slot_even: true,
            roulette_slot_odd: true,
            roulette_slot_19_to_36: true,
            roulette_slot_tiers: true,
            roulette_slot_orphelins: true,
            roulette_slot_voisins_du_zero: true,
            okLabel: true,
            loading_super6: true,
            super6_bet: true,
            seat_open: true,
            jackpot_mouseover_normal: true,
            jackpot_mouseover_active: true,
            jackpot_win_title: true,
            jackpot_win_text: true,
            bjc_dealerhit_text: true,
            bjc_insurancepays_text: true,
            tip_label: true,
            baccarat_big_road_button: true,
            highLowButtonText: true,
            oddEvenButtonText: true,
            redBlackButtonText: true,
            "continue": true,
            restrictedLanguageWarning: true,
            undo_last_button: true,
            bjclassicRulesText: true,
            chatWelcomeMessage: true,
            playerSettingsHeader: true,
            rulesHeader: true,
            gameInProgress: true,
            depositMoneyWarning: true,
            makeDepositWarningChat: true,
            makeDepositWarningTips: true,
            takeSeatMaxLimit: true,
            takeSeatErrorZeroBalance: true,
            configShowVideo: true,
            configShowJackAnimations: true,
            configAutoHit8orLess: true,
            configAutoStand18orMore: true,
            standUpToolTip: true,
            seat: true,
            dealerSeat: true,
            initialDeal: true,
            yourTurn: true,
            timerInsuranceText: true,
            pairsSlot: true,
            rummySlot: true,
            insuranceSlot: true,
            tipSlot: true,
            mainSlotNoMoney: true,
            pairsSlotNoMoney: true,
            rummySlotNoMoney: true,
            tipSlotNoMoney: true,
            limitStandTT: true,
            playerSettingsTT: true,
            tipButtonTT: true,
            chooseAheadText: true,
            mainBetFirstWarning: true
        },
        vi: {
            kickout_code_f: true,
            message_insuffient_funds: true,
            message_timeout_transfer: true,
            min: true,
            max: true,
            settings: true,
            hot: true,
            cold: true,
            player: true,
            banker: true,
            player_letter: true,
            banker_letter: true,
            tie_letter: true,
            player_bet: true,
            banker_bet: true,
            tie_bet: true,
            baccaratRoadHistoryTypes: true,
            hands: true,
            first_second_half: true,
            sectors: true,
            bet_tooltip: true,
            welcome: true,
            hello: true,
            get_started: true,
            screen_name: true,
            fundTransfer_description: true,
            new_user_notification: true,
            funds_available: true,
            amount_transfer: true,
            remaining_funds: true,
            make_transfer: true,
            cancel: true,
            cancel_exit: true,
            enter_game: true,
            screen_alias_error: true,
            insufficient_funds_transfer: true,
            fund_transfer_error: true,
            player_session_invalid: true,
            option_ep: true,
            option_insurance: true,
            option_surrender: true,
            bjclassic_insurance: true,
            loading_punto2000: true,
            new_dragon_bets: true,
            dragon_payouts: true,
            dragon_outcome: true,
            dragon_outcome_payout: true,
            dragon_outcome_natural: true,
            dragon_outcome_4: true,
            dragon_outcome_5: true,
            dragon_outcome_6: true,
            dragon_outcome_7: true,
            dragon_outcome_8: true,
            dragon_outcome_9: true,
            bjc_hit_warning: true,
            toggle_chat_visible: true,
            "stats_#players": true,
            client_alert1: true,
            client_alert3: true,
            client_alert4: true,
            client_alert5: true,
            client_alert_enter_table: true,
            client_alert_title_error: true,
            client_alert_title_info: true,
            initial_loading_title: true,
            baccarat_tie_slot: true,
            baccarat_banker_slot: true,
            baccarat_player_slot: true,
            baccarat_either_slot: true,
            baccarat_player_pair_slot: true,
            baccarat_banker_pair_slot: true,
            baccarat_player_dragon_slot: true,
            baccarat_banker_dragon_slot: true,
            roulette_slot_2_to_1: true,
            roulette_slot_1st_12: true,
            roulette_slot_2nd_12: true,
            roulette_slot_3rd_12: true,
            roulette_slot_1_to_18: true,
            roulette_slot_even: true,
            roulette_slot_odd: true,
            roulette_slot_19_to_36: true,
            roulette_slot_tiers: true,
            roulette_slot_orphelins: true,
            roulette_slot_voisins_du_zero: true,
            okLabel: true,
            loading_super6: true,
            super6_bet: true,
            seat_open: true,
            jackpot_mouseover_normal: true,
            jackpot_mouseover_active: true,
            jackpot_win_title: true,
            jackpot_win_text: true,
            bjc_dealerhit_text: true,
            bjc_insurancepays_text: true,
            tip_label: true,
            baccarat_big_road_button: true,
            highLowButtonText: true,
            oddEvenButtonText: true,
            redBlackButtonText: true,
            "continue": true,
            restrictedLanguageWarning: true,
            undo_last_button: true,
            bjclassicRulesText: true,
            chatWelcomeMessage: true,
            playerSettingsHeader: true,
            rulesHeader: true,
            gameInProgress: true,
            depositMoneyWarning: true,
            makeDepositWarningChat: true,
            makeDepositWarningTips: true,
            takeSeatMaxLimit: true,
            takeSeatErrorZeroBalance: true,
            configShowVideo: true,
            configShowJackAnimations: true,
            configAutoHit8orLess: true,
            configAutoStand18orMore: true,
            standUpToolTip: true,
            seat: true,
            dealerSeat: true,
            initialDeal: true,
            yourTurn: true,
            timerInsuranceText: true,
            pairsSlot: true,
            rummySlot: true,
            insuranceSlot: true,
            tipSlot: true,
            mainSlotNoMoney: true,
            pairsSlotNoMoney: true,
            rummySlotNoMoney: true,
            tipSlotNoMoney: true,
            limitStandTT: true,
            playerSettingsTT: true,
            tipButtonTT: true,
            chooseAheadText: true,
            mainBetFirstWarning: true
        },
        zh: {
            kickout_code_f: true,
            message_insuffient_funds: true,
            message_timeout_transfer: true,
            loading_americanroulette: true,
            welcome: true,
            hello: true,
            get_started: true,
            screen_name: true,
            fundTransfer_description: true,
            new_user_notification: true,
            funds_available: true,
            amount_transfer: true,
            remaining_funds: true,
            make_transfer: true,
            cancel: true,
            cancel_exit: true,
            enter_game: true,
            screen_alias_error: true,
            insufficient_funds_transfer: true,
            fund_transfer_error: true,
            player_session_invalid: true,
            loading_bjep: true,
            option_surrender: true,
            loading_bjclassic: true,
            bjclassic_insurance: true,
            bjclassic_insurance_yes: true,
            bjclassic_insurance_no: true,
            bjclassic_kickoffwarning: true,
            loading_punto2000: true,
            new_dragon_bets: true,
            dragon_payouts: true,
            dragon_outcome: true,
            dragon_outcome_payout: true,
            dragon_outcome_natural: true,
            dragon_outcome_4: true,
            dragon_outcome_5: true,
            dragon_outcome_6: true,
            dragon_outcome_7: true,
            dragon_outcome_8: true,
            dragon_outcome_9: true,
            bjc_hit_warning: true,
            toggle_chat_visible: true,
            "stats_#players": true,
            client_alert1: true,
            client_alert3: true,
            client_alert4: true,
            client_alert5: true,
            client_alert_enter_table: true,
            client_alert_title_error: true,
            client_alert_title_info: true,
            initial_loading_title: true,
            okLabel: true,
            loading_super6: true,
            super6_bet: true,
            seat_open: true,
            jackpot_mouseover_normal: true,
            jackpot_mouseover_active: true,
            jackpot_win_title: true,
            jackpot_win_text: true,
            bjc_dealerhit_text: true,
            bjc_insurancepays_text: true,
            baccarat_big_road_button: true,
            "continue": true,
            restrictedLanguageWarning: true,
            undo_last_button: true,
            bjclassicRulesText: true,
            chatWelcomeMessage: true,
            playerSettingsHeader: true,
            rulesHeader: true,
            gameInProgress: true,
            depositMoneyWarning: true,
            makeDepositWarningChat: true,
            makeDepositWarningTips: true,
            takeSeatMaxLimit: true,
            takeSeatErrorZeroBalance: true,
            configShowVideo: true,
            configShowJackAnimations: true,
            configAutoHit8orLess: true,
            configAutoStand18orMore: true,
            standUpToolTip: true,
            seat: true,
            dealerSeat: true,
            initialDeal: true,
            yourTurn: true,
            timerInsuranceText: true,
            pairsSlot: true,
            rummySlot: true,
            insuranceSlot: true,
            tipSlot: true,
            mainSlotNoMoney: true,
            pairsSlotNoMoney: true,
            rummySlotNoMoney: true,
            tipSlotNoMoney: true,
            limitStandTT: true,
            playerSettingsTT: true,
            tipButtonTT: true,
            chooseAheadText: true,
            mainBetFirstWarning: true
        },
        ko: {
            kickout_code_f: true,
            you_win: true,
            last_win: true,
            play_real: true,
            coming_soon: true,
            hot: true,
            cold: true,
            last_10: true,
            player_letter: true,
            banker_letter: true,
            tie_letter: true,
            option_surrender: true,
            bjc_hit_warning: true,
            "stats_#players": true,
            client_alert1: true,
            client_alert3: true,
            client_alert4: true,
            client_alert5: true,
            client_alert_enter_table: true,
            client_alert_title_error: true,
            client_alert_title_info: true,
            initial_loading_title: true,
            roulette_slot_2_to_1: true,
            roulette_slot_1st_12: true,
            roulette_slot_2nd_12: true,
            roulette_slot_3rd_12: true,
            roulette_slot_1_to_18: true,
            roulette_slot_even: true,
            roulette_slot_odd: true,
            roulette_slot_19_to_36: true,
            roulette_slot_tiers: true,
            roulette_slot_orphelins: true,
            roulette_slot_voisins_du_zero: true,
            okLabel: true,
            loading_super6: true,
            super6_bet: true,
            seat_open: true,
            jackpot_mouseover_normal: true,
            jackpot_mouseover_active: true,
            jackpot_win_title: true,
            jackpot_win_text: true,
            bjc_dealerhit_text: true,
            bjc_insurancepays_text: true,
            baccarat_big_road_button: true,
            highLowButtonText: true,
            oddEvenButtonText: true,
            redBlackButtonText: true,
            "continue": true,
            restrictedLanguageWarning: true,
            undo_last_button: true,
            bjclassicRulesText: true,
            chatWelcomeMessage: true,
            playerSettingsHeader: true,
            rulesHeader: true,
            gameInProgress: true,
            depositMoneyWarning: true,
            makeDepositWarningChat: true,
            makeDepositWarningTips: true,
            takeSeatMaxLimit: true,
            takeSeatErrorZeroBalance: true,
            configShowVideo: true,
            configShowJackAnimations: true,
            configAutoHit8orLess: true,
            configAutoStand18orMore: true,
            standUpToolTip: true,
            seat: true,
            dealerSeat: true,
            initialDeal: true,
            yourTurn: true,
            timerInsuranceText: true,
            pairsSlot: true,
            rummySlot: true,
            insuranceSlot: true,
            tipSlot: true,
            mainSlotNoMoney: true,
            pairsSlotNoMoney: true,
            rummySlotNoMoney: true,
            tipSlotNoMoney: true,
            limitStandTT: true,
            playerSettingsTT: true,
            tipButtonTT: true,
            chooseAheadText: true,
            mainBetFirstWarning: true
        }
    };

    function getLocale(key, defaultText) {
        if (_nullAsianText && missingLocaleMaps[_urlParams.language][key] === true) return "";
        var text = _localeMap[key];
        if (text === undefined) text = defaultText;
        return text
    }

    function loadChipURLMap() {
        var cssText;
        _chipURLMap = {};
        for (var i = 0; i < _chipArray.length; i++) {
            try {
                cssText = getSytleCssText("." + ("chip" + _chipArray[i]).replace(".", "_"));
                _chipURLMap[_chipArray[i] + ""] = cssText.match(/url\("?(.*.(png|svgz|svg))"?\)/)[1]
            } catch (error) {
                sendError("Could not find chip: '" + _chipArray[i] + "' in css resources is it a valid chip?");
                _chipURLMap[_chipArray[i] + ""] = "noStyleFound"
            }
        }
        cssText = getSytleCssText(".dealerMonitorChip");
        _chipURLMap.dealerMonitorChip = cssText.match(/url\("?(.*.(png|svgz))"?\)/)[1]
    }

    function getChipURLMap() {
        getChipStack();
        if (_chipURLMap === undefined) loadChipURLMap();
        return _chipURLMap
    }

    function getSytleCssText(selectorText) {
        for (var s = 0; s < document.styleSheets.length; s++) {
            var styleSheetRules = document.styleSheets[s].cssRules;
            for (var r = 0; r < styleSheetRules.length; r++) {
                var rule = styleSheetRules[r];
                if (rule.selectorText === selectorText) {
                    return rule.cssText
                }
            }
        }
        return ""
    }

    function getChipStyle(amount) {
        var chipStyleAmount = amount;
        if (!_chipArray) _chipArray = VIVO.model.state.getChipArray();
        if (_chipArray.indexOf(amount) === -1) {
            for (var i = _chipArray.length - 1; i >= 0; i--) {
                if (amount - _chipArray[i] > 0) {
                    chipStyleAmount = _chipArray[i];
                    break
                }
            }
        }
        return ("chip" + chipStyleAmount).replace(".", "_")
    }

    function convertAmountToMoney(amount) {
        if (isInt(amount)) return amount + "";
        else return amount.toMoney()
    }

    function getChipAmountText(amount) {
        var textAmount;
        if (amount >= 1e6) textAmount = convertAmountToMoney(amount / 1e6) + "M";
        else if (amount >= 1e3) textAmount = convertAmountToMoney(amount / 1e3) + "K";
        else if (isInt(amount)) textAmount = amount.toMoney(0);
        else textAmount = amount.toMoney();
        return textAmount
    }

    function createChip(amount) {
        var newChip, style = getChipStyle(amount),
            textAmount = getChipAmountText(amount);
        newChip = document.createElement("div");
        $(newChip).addClass(style);
        $(newChip).addClass("chip horizontal");
        chipWrapper = document.createElement("div");
        $(chipWrapper).addClass("chipWrapper");
        chipText = document.createElement("div");
        $(chipText).addClass("chipText").addClass("chipTextLength" + textAmount.length);
        if (textAmount.length > 4) $(chipText).addClass("chipTextLength5Plus");
        $(chipText).text(textAmount);
        $(chipWrapper).append(chipText);
        $(newChip).append(chipWrapper);
        if (_isDealerMonitor) $(newChip).addClass("dealerMonitorChip");
        return newChip
    }

    function unfriendlyChipStack(amount) {
        var values = getMinChips(_chipArray, amount);
        var chipStack = [];
        for (var i = 0; i < values.length; i++) {
            chipStack.push(createChip(values[i]))
        }
        return chipStack
    }

    function friendlyChipStack(amount) {
        var chipStack = [];
        for (var i = _chipArray.length - 1; i >= 0; i--) {
            var diff = amount - _chipArray[i];
            while (diff >= 0 || Math.abs(diff) < 1e-5) {
                chipStack.push(createChip(_chipArray[i]));
                amount = amount - _chipArray[i];
                diff = amount - _chipArray[i]
            }
        }
        return chipStack
    }

    function fullScreenBJCChipStack(amount) {
        var chipStack = [];
        if (amount > 0) chipStack.push(createChip(amount));
        return chipStack
    }
    var _chipArray;
    var getChipStack = function(amount) {
        _chipArray = VIVO.model.state.getChipArray();
        if (!_useChipStacks) this.getChipStack = fullScreenBJCChipStack;
        else if (isChipsetFriendly(_chipArray)) this.getChipStack = friendlyChipStack;
        else {
            sendError("WARNING: Chipstack IS NOT Friendly!! using costly chipStack calculation. " + _urlParams.tableSymbol + ", chipSet: " + _chipArray);
            this.getChipStack = unfriendlyChipStack
        }
        return this.getChipStack(amount)
    };

    function _setTimeout(callback, timeoutSeconds) {
        if (_isListeningToHeartBeat === false) {
            VIVO.model.state.addEventListener(VIVO.model.state.HEART_BEAT_EVENT, onHeartBeat);
            _isListeningToHeartBeat = true
        }
        var timerObj = {
            count: timeoutSeconds * 1e3 / _heartbeatDurationMS,
            callback: callback
        };
        _heartbeatCallbackQueue.push(timerObj);
        return timerObj
    }

    function _clearInterval(timerObj) {
        var index = jQuery.inArray(timerObj, _heartbeatCallbackQueue);
        if (index !== -1) _heartbeatCallbackQueue.splice(index, 1)
    }

    function onHeartBeat() {
        for (var i = _heartbeatCallbackQueue.length - 1; i >= 0; i--) {
            _heartbeatCallbackQueue[i].count -= 1;
            if (_heartbeatCallbackQueue[i].count < 0) {
                try {
                    _heartbeatCallbackQueue[i].callback()
                } catch (e) {
                    sendError("Error calling timer callback: " + e)
                }
            }
        }
        _heartbeatCallbackQueue = $.grep(_heartbeatCallbackQueue, function(obj) {
            return obj.count >= 0
        })
    }

    function getCenterPointPercent(tableElem, parent, elem) {
        var bottom, top, left, right;
        var box = getCoordinateBox(elem);
        var pbox = getCoordinateBox(parent);
        var tbox = getCoordinateBox(tableElem);
        left = (pbox.left - tbox.left + pbox.width / 2 - box.width / 2) / tbox.width * 100;
        if (tbox.top === undefined) bottom = (pbox.bottom - tbox.bottom + pbox.height / 2 - box.height / 2) / tbox.height * 100;
        else top = (pbox.top - tbox.top + pbox.height / 2 - box.height / 2) / tbox.height * 100;
        if (_specialCaseSlotPositions && parent.id.indexOf("pairsSlot") === 0 && elem.id.indexOf("chip") === 0) {
            if (_isDealerMonitor) centerPoint = {
                left: 52,
                right: 5,
                top: 30,
                bottom: bottom
            };
            else centerPoint = {
                left: -70,
                right: right,
                top: 30,
                bottom: bottom
            }
        } else if (_specialCaseSlotPositions && parent.id.indexOf("rummySlot") === 0 && elem.id.indexOf("chip") === 0) {
            if (_isDealerMonitor) centerPoint = {
                left: 10,
                right: right,
                top: 30,
                bottom: bottom
            };
            else centerPoint = {
                left: 116.5,
                right: right,
                top: 30,
                bottom: bottom
            }
        } else if (_specialCaseSlotPositions && parent.id.indexOf("mainSlot") === 0 && elem.id.indexOf("chip") === 0 && !_isDealerMonitor) {
            centerPoint = {
                left: 25,
                right: right,
                top: 30,
                bottom: bottom
            }
        } else if (_specialCaseSlotPositions && parent.id.indexOf("insuranceSlot") === 0 && elem.id.indexOf("chip") === 0 && !_isDealerMonitor && _urlParams.gameType === "bjep") {
            centerPoint = {
                left: -62,
                top: -120
            }
        } else if (_specialCaseSlotPositions && (parent.id.indexOf("slot-0") === 0 || parent.id.indexOf("slot-197") === 0) && elem.id.indexOf("chip") === 0) {
            centerPoint = {
                left: 4.4,
                right: right,
                top: top,
                bottom: bottom
            }
        } else if (_specialCaseSlotPositions && _isDealerMonitor && parent.id.indexOf("tipSlot") === 0 && elem.id.indexOf("chip") === 0) {
            centerPoint = {
                left: 30,
                right: right,
                top: 4,
                bottom: bottom
            };
            $(elem).addClass("tipChip")
        } else centerPoint = {
            left: left,
            right: right,
            top: top,
            bottom: bottom
        };
        _centerLookUp[parent.id + "-" + elem.id] = centerPoint;
        return centerPoint
    }

    function getCoordinateBox(obj) {
        var box = {
            left: 0,
            top: 0
        };
        try {
            box = obj.getBoundingClientRect()
        } catch (e) {
            sendError("Error getting bounding box: " + e)
        }
        var doc = document,
            docElem = doc.documentElement,
            body = document.body,
            win = window,
            clientTop = docElem.clientTop || body.clientTop || 0,
            clientLeft = docElem.clientLeft || body.clientLeft || 0,
            scrollTop = win.pageYOffset || jQuery.support.boxModel && docElem.scrollTop || body.scrollTop,
            scrollLeft = win.pageXOffset || jQuery.support.boxModel && docElem.scrollLeft || body.scrollLeft,
            top = box.top + scrollTop - clientTop,
            left = box.left + scrollLeft - clientLeft;
        var result = {};
        result.top = top;
        result.left = left;
        result.width = box.width;
        result.height = box.height;
        return result
    }

    function displayChipStack(parent, chips, isPending, chipId) {
        console.log("ConfigDisplayChipSlot " + parent.id + " " + chips.id + " " + chipId);
        if (parent.id.indexOf("tipSlot") === 0) $(chips).addClass("tipChip");
        var cp = getCenterPointPercent(parent.parentNode, parent, document.getElementById("chipSizeTest"));
        for (var i = 0; i < chips.length; i++) {
            chips[i].style.left = cp.left + "%";
            chips[i].style.top = cp.top - i * 1 + "%";
            chips[i].style["z-order"] = i + 10 + "";
            chips[i].id = "chip" + i + "-" + chipId;
            if (isPending === true) $(chips[i]).addClass("chipPending");
            parent.parentNode.appendChild(chips[i])
        }
    }

    function getDealerImagePath() {
        return _dealerImagePath
    }

    function isTipEnabled() {
        var v = getConfigParam("restrictTipAmount");
        return v !== undefined && v > 0 || v === undefined
    }

    function setAllowedJPType(jpType) {
        _allowedJPType = jpType
    }

    function getAllowedJPType() {
        return _allowedJPType
    }

    function getHeartBeatDuration() {
        return _heartbeatDurationMS
    }

    function setIsGoldMainChip(seat, goldStatus) {
        _goldStatus[seat - 1] = goldStatus;
        console.log("Setting gold status for " + seat + " to " + goldStatus + " now " + JSON.stringify(_goldStatus))
    }

    function hasNoGoldChip() {
        for (var i = 0; i < _goldStatus.length; i++)
            if (_goldStatus[i]) return false;
        return true
    }

    function getIsGoldMainChip(seat) {
        console.log("Returning gold status for " + seat + " to " + _goldStatus[seat - 1] + " now " + JSON.stringify(_goldStatus));
        return _goldStatus[seat - 1]
    }
    return {
        urlParams: _urlParams,
        getLocale: getLocale,
        getWSURL: getWSURL,
        getConfigParam: getConfigParam,
        getChipStack: getChipStack,
        createChip: createChip,
        displayChipStack: displayChipStack,
        getCenterPointPercent: getCenterPointPercent,
        getCoordinateBox: getCoordinateBox,
        isMobile: _isMobile,
        isFlashSupported: _isFlashSupported,
        UUID: _UUID,
        clientVersion: _clientVersion,
        sendLog: sendLog,
        sendError: sendError,
        displayAlert: displayAlert,
        displayAlert2: displayAlert2,
        displayAlertAndClose: displayAlertAndClose,
        setIsGoldMainChip: setIsGoldMainChip,
        getIsGoldMainChip: getIsGoldMainChip,
        hasNoGoldChip: hasNoGoldChip,
        closeAlert: closeAlert,
        closeAlertAndWindow: closeAlertAndWindow,
        getHeartBeatDuration: getHeartBeatDuration,
        setTimeout: _setTimeout,
        clearInterval: _clearInterval,
        gameStateMessage: _gameStateMessageKey,
        getDealerImagePath: getDealerImagePath,
        playChipSound: _chipSound.play,
        newEvent: newEvent,
        isDealerMonitor: _isDealerMonitor,
        isDealerScreenOne: _isDealerScreenOne,
        gameSubType: _gameSubType,
        getChipURLMap: getChipURLMap,
        isIPad8_1: _isIPad8_1,
        isiOS: _isiOS,
        scrollConfig: _scrollConfig,
        setUseChipStacks: setUseChipStacks,
        isFullScreenBJC: _isFullScreenBJC,
        getChipAmountText: getChipAmountText,
        inIframe: inIframe,
        isBJCBetBehind: isBJCBetBehind,
        isBetTypeValid: isBetTypeValid,
        isTipEnabled: isTipEnabled,
        getAllowedJPType: getAllowedJPType,
        setAllowedJPType: setAllowedJPType
    }
};
VIVO.namespace("model.ConnectionMonitor");
VIVO.model.ConnectionMonitor = function(vivo, frame) {
    "use strict";
    var ws = vivo.ws,
        messages = vivo.ws.messageTypes,
        model = vivo.model.state,
        config = vivo.model.config,
        _GSM = config.gameStateMessage,
        pingWaitTime = config.getConfigParam("pingWaitTimeMS"),
        PING_TIME_BUFFER_MS = 5e3,
        PING_TIME_BUFFER_PYB_MS = 2e4,
        PLAYER_PING_TIME_BUFFER_MS = 6e4,
        PING_WAIT_TIME = 1e3,
        lastMessageFromMW, pingSendTime, waitingForPingResponce = false;
    if (pingWaitTime === undefined) pingWaitTime = PING_WAIT_TIME;
    model.addEventListener(model.HEART_BEAT_EVENT, onHeartBeat);
    ws.addEventListener(messages.Pong, onPong);
    ws.addEventListener(messages.BroadcastChatMessage, onMSGFromMW);
    ws.addEventListener(messages.WagerResponse, onMSGFromMW);
    ws.addEventListener(messages.TipResponse, onMSGFromMW);
    ws.addEventListener(messages.TakeOfferResponse, onMSGFromMW);
    ws.addEventListener(messages.IncrementUpdate, onMSGFromMW);
    ws.addEventListener(messages.PayoutMessage, onMSGFromMW);
    ws.addEventListener(_GSM, onMSGFromMW);

    function onMSGFromMW(e) {
        lastMessageFromMW = (new Date).getTime()
    }

    function onHeartBeat() {
        var timeNow = (new Date).getTime();
        if (waitingForPingResponce) {
            if (pingSendTime < timeNow - pingWaitTime) {
                model.removeEventListener(model.HEART_BEAT_EVENT, onHeartBeat);
                config.displayAlertAndClose("Error: your client connection has stopped responding, your window will be refreshed in 2 seconds.");
                config.setTimeout(function() {
                    console.error("************************RELAODING BROWSER**************************");
                    location.reload()
                }, 2)
            }
            return
        }
        if (!config.isDealerMonitor && lastMessageFromMW < timeNow - PLAYER_PING_TIME_BUFFER_MS) sendPing();
        else if (model.isBetStateValid() && lastMessageFromMW < timeNow - PING_TIME_BUFFER_PYB_MS) sendPing();
        else if (!model.isBetStateValid() && lastMessageFromMW < timeNow - PING_TIME_BUFFER_MS) sendPing()
    }

    function sendPing() {
        pingSendTime = (new Date).getTime();
        ws.sendPing(pingSendTime + "");
        waitingForPingResponce = true
    }

    function onPong(e) {
        waitingForPingResponce = false;
        var p = e.data.Pong,
            currentTime = (new Date).getTime(),
            pingSendTime = parseInt(p.pingSendTime);
        lastMessageFromMW = currentTime;
        console.log("ping RTT: " + (currentTime - pingSendTime))
    }
};
VIVO.namespace("ui.CountDown");
VIVO.ui.CountDown = function(vivo, $canvas, $countDown, hideOnStop) {
    "use strict";
    var model = vivo.model.state,
        canvasElem = $canvas.get(0),
        canvasObj = $canvas,
        countDown = $countDown,
        baseColor = "green",
        lineColor = "yellow",
        arkEndAngle, arkIncrement, updateCounter = false,
        timeRemaining, isOptionTimer = false;
    if (hideOnStop === undefined) hideOnStop = true;

    function onHeartBeatEvent(e) {
        if (timeRemaining <= 0) stopArkAnimation();
        arkEndAngle = Math.min(arkEndAngle + arkIncrement, 2 * Math.PI);
        if (updateCounter) {
            timeRemaining = Math.max(timeRemaining - 1, 0);
            countDown.text(timeRemaining)
        }
        updateCounter = !updateCounter;
        drawArk()
    }

    function stopArkAnimation() {
        try {
            model.removeEventListener(model.HEART_BEAT_EVENT, onHeartBeatEvent)
        } catch (e) {}
        if (hideOnStop) {
            countDown.hide();
            canvasObj.hide()
        }
    }

    function startArkAnimation(durationSec, isOptTimer, startTimer, bColor, lColor) {
        baseColor = bColor;
        lineColor = lColor;
        canvasObj.show();
        isOptionTimer = isOptTimer;
        if (isOptionTimer === true) {
            arkEndAngle = 1 * Math.PI;
            arkIncrement = 1 * Math.PI / (2 * durationSec);
            countDown.show()
        } else {
            arkEndAngle = -.5 * Math.PI;
            arkIncrement = 2 * Math.PI / (2 * durationSec);
            countDown.hide()
        }
        canvasElem.width = 800;
        canvasElem.height = 800;
        timeRemaining = durationSec;
        countDown.text(timeRemaining);
        updateCounter = false;
        var context = canvasElem.getContext("2d");
        context.clearRect(0, 0, canvasElem.width, canvasElem.height);
        drawArk();
        if (startTimer) {
            model.addEventListener(model.HEART_BEAT_EVENT, onHeartBeatEvent)
        }
    }

    function drawArk() {
        var context = canvasElem.getContext("2d");
        var x = canvasElem.width / 2;
        var y = canvasElem.height / 2;
        var radius = canvasElem.width / 3;
        var startAngle = 1 * Math.PI;
        if (!isOptionTimer) startAngle = -.5 * Math.PI;
        var counterClockwise = false;
        if (!isOptionTimer) {
            context.beginPath();
            context.arc(x, y, radius, startAngle, 1.5 * Math.PI, counterClockwise);
            context.lineWidth = canvasElem.width / 10;
            context.strokeStyle = baseColor;
            context.stroke()
        }
        context.beginPath();
        context.arc(x, y, radius, startAngle, arkEndAngle, counterClockwise);
        if (isOptionTimer) context.lineWidth = canvasElem.width / 8;
        else context.lineWidth = canvasElem.width / 10;
        context.strokeStyle = lineColor;
        context.stroke()
    }
    return {
        startArkAnimation: startArkAnimation,
        stopArkAnimation: stopArkAnimation
    }
};
VIVO.namespace("model.Game");
VIVO.model.Game = function(vivo, model, gameId, tableId) {
    "use strict";
    var BACCARAT_PAIR_BET_DISABLED = 18;
    var CLIENT_ALERT_4_CONNECTION_INTERRUPTED = 4;
    var ws = vivo.ws,
        messages = vivo.ws.messageTypes,
        NetBetObject = vivo.utils.webservice.BetObject,
        config = vivo.model.config,
        betTypes = vivo.model.BetTypes,
        _pendingNotSent = [],
        _pendingBets = {},
        _bets = {},
        _isSettled = {},
        _betIds = {},
        _wagerRequests = {},
        _offerRequests = {},
        _pendingIncrementBet = {},
        _undoLastStack = [],
        SAME_BET_GROUP_DURATION_MS = 200,
        _lastBetTime = 0,
        _gameId = gameId,
        _hasPlacedBet = false,
        _paidOutBets = {},
        _pendingNotSentBetCount = 0,
        PLACE = 0,
        CLEAR_ALL = 1,
        CLEAR = 2,
        LIST = 4,
        REBET = 5,
        HEADER_MESSAGE_ID = 2,
        HEADER_IN_REPLY_TO_ID = 3,
        WR_OK = 0,
        WR_OK_AMOUNT_MODIFIED = 13;
    this.isSettled = function(betType) {
        var unsettled = _isSettled[betType.getId()] === undefined || _isSettled[betType.getId()] !== true;
        return !unsettled
    };
    this.getPendingBetAmount = function(betType) {
        if (betType === undefined) return 0;
        var total = new Big(0),
            btId = betType.getId();
        _.forEach(_pendingBets, function(bet, betId) {
            if (bet.betTypeId === betType.getId()) total = total.plus(bet.betAmount)
        });
        _.forEach(_pendingNotSent, function(bet) {
            if (bet.betTypeId === betType.getId()) total = total.plus(bet.betAmount)
        });
        return parseFloat(total)
    };
    this.getBJEPAmountForSlot = function(slotBetType) {
        if (slotBetType === undefined) return 0;
        var total = new Big(0);
        for (var key in _bets) {
            if (_isSettled[key] !== undefined && _isSettled[key] === true) continue;
            var bt = betTypes.getBetTypeForId(key);
            if (bt.getSlotBetType() === slotBetType) total = total.plus(_bets[key])
        }
        return parseFloat(total)
    };
    this.getBetAmount = gba;

    function gba(betType) {
        var total = new Big(0);
        if (betType !== undefined) {
            total = _bets[betType.getId()];
            if (total === undefined) total = 0
        } else {
            for (var key in _bets) {
                if (_isSettled[key] === undefined || _isSettled[key] !== true) total = total.plus(_bets[key])
            }
        }
        return parseFloat(total)
    }
    this.getGameId = function(e) {
        return _gameId
    };
    this.getBets = function() {
        return _bets
    };
    this.placeBet = function(betType, betAmount, callBack) {
        if (model.getCurrentBalance() < betAmount) {
            return
        }
        if (betAmount === 0) {
            return
        }
        _pendingNotSent.push(createPendingBetObject(model.getNextBetId(), betType.getId(), new Big(betAmount), callBack));
        _pendingNotSentBetCount++;
        var isBJC = config.urlParams.gameType === "bjclassic";
        if (isBJC && gba(betType) == 0 && betTypes.mainBets.indexOf(betType.getId()) !== -1 && model.getAutoJackpot() && model.getJackpotSeen()) {
            var seat = betType.getSeatNum();
            var jpBetType = betTypes["Jackpot_H" + seat];
            var callbackJP = VIVO.ui.betArea.getSlot(jpBetType.getId()).betConfirmedCallBack;
            _pendingNotSent.push(createPendingBetObject(model.getNextBetId(), jpBetType.getId(), new Big(jpBetType.getMaxLimit()), callbackJP))
        }
        setTimeout(delayedPlaceBets, 2)
    };
    this.onOfferResponse = function(e) {
        var offerId = e.data.TakeOfferResponse.offerId;
        var oReq = _offerRequests[offerId];
        delete _offerRequests[offerId];
        if (oReq === undefined) {
            return
        }
        var tor = e.data.TakeOfferResponse;
        if ((tor.status === 0 || tor.status === 5) && (tor.confirmedOption === "Double" || tor.confirmedOption === "Split")) _pendingIncrementBet[oReq.betType] = tor.confirmedOption;
        if (oReq) oReq.callback(tor.status, tor.offerId, tor.confirmedOption, tor.errorMsg)
    };

    function warnIfBalanceIsNonNeg(balance) {
        for (var prop in balance) {
            if (balance[prop] < 0) {
                var errorText = config.getLocale("client_alert" + CLIENT_ALERT_4_CONNECTION_INTERRUPTED, "Your connection has been interrupted");
                config.displayAlert2(config.getLocale("client_alert_title_info", "Info:"), errorText, config.closeAlert);
                config.sendError("ClientAlert recived code=" + CLIENT_ALERT_4_CONNECTION_INTERRUPTED + ", text=" + errorText + ", gameId=" + that.getGameId())
            }
        }
    }
    this.onIncrementUpdate = function(e) {
        console.log("Increment update ");
        var inc = e.data.IncrementUpdate;
        warnIfBalanceIsNonNeg(inc.balances);
        if (inc.amount <= 0) {
            return
        }
        _bets[inc.betType] = _bets[inc.betType].plus(inc.amount);
        var betArea = VIVO.ui.betArea;
        var oReq = _pendingIncrementBet[inc.betType];
        if (oReq === undefined) {
            if (model.isBackBettingOn() === false && !config.isFullScreenBJC) {
                return
            }
            var betName = betTypes.handBetsNamesbyId[inc.betType + ""];
            var seatNum = betTypes[betName].getSeatNum();
            var hand = vivo.ui.cardHandler.getHand(seatNum);
            var isTipBet = betTypes.tipBetTypeIds.indexOf(inc.betType) !== -1;
            if (isTipBet) oReq = "Tip";
            else if (config.isFullScreenBJC && !betArea.getSeat(seatNum).isBackbettingOn()) {
                return
            } else if (hand.score.indexOf("|") !== -1 && hand.cards.length === 2) oReq = "Split"
        }
        console.log("Increment update: test type " + oReq);
        if (oReq === "Tip") betArea.getSlot(inc.betType).betConfirmedCallBack({});
        else if (oReq === "Split") {
            console.log("Split - processing split callback ");
            betArea.getSlot(inc.betType).splitCallBack(inc.amount)
        } else {
            console.log("Game.js - bet area getslot ");
            betArea.getSlot(inc.betType).doubleCallBack(inc.amount, model.getActiveHand())
        }
    };

    function callBetAreaClearChips() {
        if (config.urlParams.gameType !== "bjclassic") {
            VIVO.ui.betArea.clearChips();
            return
        }
        for (var btKey in _bets) {
            VIVO.ui.betArea.clearChips(btKey)
        }
        VIVO.ui.betArea.clearPendingChips()
    }
    this.onWagerResponse = function(e) {
        var wRes = e.data.WagerResponse;
        var inReplyTo = e.data.header.split(",")[HEADER_IN_REPLY_TO_ID];
        var wReq = _wagerRequests[inReplyTo];
        var maxBetId = -1;
        var unavaibleBetTypeReturned = false;
        if (wReq === undefined && _hasPlacedBet === true) {
            config.sendError("Error matching wager request not found! " + inReplyTo);
            return
        } else if (!_hasPlacedBet && wRes.action === LIST) {
            wReq = {};
            wReq.WagerRequest = {};
            wReq.WagerRequest.action = wRes.action
        } else delete _wagerRequests[inReplyTo];
        for (var am = 0; am < wRes.betAmounts.length; am++) wRes.betAmounts[am] = parseFloat(wRes.betAmounts[am], 10);
        if (wRes.action === REBET || wRes.action === LIST || wReq.action === REBET) {
            callBetAreaClearChips();
            _betIds = {};
            _bets = {};
            _paidOutBets = {}
        }
        var endTime = $.now();
        for (var i = 0; i < wRes.betStatuses.length; i++) {
            var originalBet = _pendingBets[wRes.betIds[i]];
            var bt = wRes.betTypes[i];
            if (originalBet === undefined && !(wReq.WagerRequest.action === LIST || wReq.WagerRequest.action === REBET)) config.sendError("Error original wager not found. BetId = " + wRes.betIds[i] + " betType: " + wRes.betTypes[i] + ", gameId: " + _gameId);
            if (i === 0 && originalBet !== undefined) {
                var msgEvent = config.newEvent(model.PLAYER_INTERACTION_EVENT);
                var duration = endTime - originalBet.sendTime;
                model.dispatchEvent(msgEvent.data = {
                    betDuration: duration
                })
            }
            if (wRes.betStatuses[i] === WR_OK || wRes.betStatuses[i] === WR_OK_AMOUNT_MODIFIED) {
                switch (wReq.WagerRequest.action) {
                    case CLEAR:
                        var betIndex = _betIds[bt].indexOf(originalBet.betId);
                        if (betIndex === -1) console.error("Error original bet id not found this shouldn't happen!! " + originalBet.betId);
                        else _betIds[bt].splice(betIndex, 1);
                        _bets[bt] = _bets[bt].minus(wRes.betAmounts[i]);
                        if (_bets[bt].lte(0)) delete _bets[bt];
                        break;
                    case CLEAR_ALL:
                        callBetAreaClearChips();
                        _betIds = {};
                        _bets = {};
                        _undoLastStack = [];
                        break;
                    case PLACE:
                        if (_bets[bt] === undefined) {
                            _bets[bt] = new Big(wRes.betAmounts[i]);
                            _betIds[bt] = [originalBet.betId]
                        } else {
                            _bets[bt] = _bets[bt].plus(wRes.betAmounts[i]);
                            _betIds[bt].push(originalBet.betId)
                        }
                        updateUndoLast(originalBet.betId, bt, wRes.betAmounts[i]);
                        break;
                    case REBET:
                    case LIST:
                        var newBetId = wRes.betIds[i];
                        if (_bets[bt] === undefined) {
                            _bets[bt] = new Big(wRes.betAmounts[i]);
                            _betIds[bt] = [newBetId]
                        } else {
                            _bets[bt] = _bets[bt].plus(wRes.betAmounts[i]);
                            _betIds[bt].push(newBetId)
                        }
                        maxBetId = Math.max(maxBetId, newBetId);
                        var slot = VIVO.ui.betArea.getSlot(bt);
                        if (slot) {
                            if (config.urlParams.gameType === "bjep") slot.bjepConfirmedCallBack(betTypes.getBetTypeForId(bt), wRes.betAmounts[i]);
                            else slot.betConfirmedCallBack(wRes.betAmounts[i])
                        } else {
                            config.sendError("Error no slot found for list position betType=" + bt + " skipping. gameId=" + _gameId);
                            unavaibleBetTypeReturned = true
                        }
                        _undoLastStack = [];
                        break;
                    default:
                        config.sendError("Unexpected wager action " + wReq.WagerRequest.action);
                        break
                }
                if (originalBet !== undefined) {
                    delete _pendingBets[originalBet.betId];
                    if (originalBet.betAmount !== wRes.betAmounts[i]) console.error("Bet amounts don't match requested amount= " + originalBet.betAmount + ", response amount= " + wRes.betAmounts[i] + ", betStatus= '" + wRes.betStatuses[i] + "'");
                    if (originalBet.callBack !== null) {
                        originalBet.callBack(originalBet)
                    }
                }
            } else {
                var errorMsg = decodeBetStatus(wRes.betStatuses[i]);
                if (wRes.betStatuses[i] === BACCARAT_PAIR_BET_DISABLED) {
                    config.displayAlert2(config.getLocale("client_alert_title_info", "Info:"), config.getLocale("client_alert" + BACCARAT_PAIR_BET_DISABLED, errorMsg), config.closeAlert)
                }
                config.sendError("Error: bet rejected on server, " + errorMsg + " wager Request message id=" + inReplyTo + ", gameId=" + _gameId);
                if (originalBet !== undefined) {
                    delete _pendingBets[originalBet.betId];
                    if (wReq.WagerRequest.action === PLACE) originalBet.callBack(originalBet)
                }
            }
        }
        if (wReq.WagerRequest.action === LIST || wReq.WagerRequest.action === REBET) {
            model.setLastBetId(maxBetId + 1);
            ws.updateSequenceNumber(wRes.lastRequestMessageId + 1);
            if (unavaibleBetTypeReturned) $("#clearButton").trigger("click")
        }
    };
    this.clearBets = function(betType) {
        delete _betIds[betType];
        delete _bets[betType]
    };

    function updateUndoLast(betId, betType, betAmount) {
        var newBetTime = (new Date).getTime();
        var newBet = {
            id: betId,
            type: betType,
            amount: betAmount
        };
        var betGroup;
        if (newBetTime - _lastBetTime < SAME_BET_GROUP_DURATION_MS) betGroup = _undoLastStack.pop();
        else betGroup = [];
        betGroup.push(newBet);
        _undoLastStack.push(betGroup);
        _lastBetTime = newBetTime
    }
    this.undoLastBet = function() {
        var betGroup = _undoLastStack.pop();
        if (betGroup === undefined) {
            this.clearAllBets(function() {
                callBetAreaClearChips()
            });
            return
        }
        _.forEach(betGroup, function(bet) {
            var callback = VIVO.ui.betArea.getSlot(bet.type).betConfirmedCallBack;
            _pendingNotSent = [];
            var clearBet = new NetBetObject(bet.id, bet.type, bet.amount);
            _pendingBets[clearBet.id] = createPendingBetObject(clearBet.id, bet.type, bet.amount, callback);
            var wr = vivo.ws.sendWagerRequest(gameId, [clearBet], CLEAR);
            _wagerRequests[wr.header.split(",")[HEADER_MESSAGE_ID]] = wr
        })
    };
    this.clearBackBets = function() {
        var betIdToAmount = {};
        _.forEach(_undoLastStack, function(betGroup) {
            _.forEach(betGroup, function(bet) {
                betIdToAmount[bet.id] = bet.amount
            })
        });
        _.forEach(_betIds, function(betIds, betTypeId) {
            if (betTypes.backbetNamesbyId[betTypeId + ""] === undefined) return;
            _.forEach(betIds, function(betId) {
                var callback = VIVO.ui.betArea.getSlot(betTypeId).betConfirmedCallBack;
                var amount = betIdToAmount[betId];
                _pendingNotSent = [];
                var clearBet = new NetBetObject(betId, betTypeId, amount);
                _pendingBets[clearBet.id] = createPendingBetObject(clearBet.id, betTypeId, amount, callback);
                var wr = vivo.ws.sendWagerRequest(gameId, [clearBet], CLEAR);
                _wagerRequests[wr.header.split(",")[HEADER_MESSAGE_ID]] = wr
            })
        });
        _undoLastStack = []
    };
    this.onPayoutMessage = function(e) {
        var payoutMessage = e.data.PayoutMessage,
            betIds = payoutMessage.betIds,
            winners = payoutMessage.winnings,
            losers = payoutMessage.losers,
            outcome = payoutMessage.outcome,
            i, bt;
        for (var w = 0; w < winners.length; w++) winners[w] = parseFloat(winners[w], 10);
        var winningBetTypes = [];
        var betTypeToWinAmount = {};
        var betIdToTypeId = {};
        var totalWin = 0;
        for (bt in _betIds) {
            if (_betIds[bt] === null || _betIds[bt] === undefined) continue;
            for (i = 0; i < _betIds[bt].length; i++) betIdToTypeId[_betIds[bt][i]] = parseInt(bt)
        }
        for (i = 0; i < betIds.length; i++) {
            if (winners[i] <= 0) continue;
            if (_paidOutBets[betIds[i]] !== undefined) continue;
            _paidOutBets[betIds[i]] = winners[i];
            bt = betIdToTypeId[betIds[i]];
            winningBetTypes.push(bt);
            _isSettled[bt] = true;
            if (outcome === "Unseated") {
                delete _bets[bt];
                delete _betIds[bt];
                VIVO.ui.betArea.getSlot(bt).betConfirmedCallBack()
            }
            if (bt + "" in betTypeToWinAmount) betTypeToWinAmount[bt + ""] += winners[i];
            else betTypeToWinAmount[bt + ""] = winners[i];
            totalWin += winners[i]
        }
        if ((config.urlParams.gameType === "bjclassic" || config.urlParams.gameType === "bjep") && losers !== undefined) {
            var loseingBetTypes = [];
            for (i = 0; i < losers.length; i++) {
                var betId = losers[i];
                var betType = betIdToTypeId[betId];
                if (betType === undefined) continue;
                if (loseingBetTypes.indexOf(betType) !== -1) continue;
                loseingBetTypes.push(betType);
                delete _bets[betType];
                delete _betIds[betType];
                VIVO.ui.betArea.getSlot(betType).betConfirmedCallBack()
            }
        }
        if (config.urlParams.gameType === "bjclassic" || totalWin > 0) {
            if (totalWin > 0) model.setLastWin(totalWin);
            model.dispatchEvent(config.newEvent(model.BALANCE_UPDATE_EVENT))
        }
        winningBetTypes = $.unique(winningBetTypes);
        VIVO.ui.betArea.highlightWinningChips(winningBetTypes, totalWin, e.data.PayoutMessage, betTypeToWinAmount)
    };
    this.clearAllBets = function(callBack) {
        _pendingNotSent = [];
        var clearBet = new NetBetObject(model.getNextBetId(), 0, 0);
        _pendingBets[clearBet.id] = createPendingBetObject(clearBet.id, 0, 0, callBack);
        var wr = vivo.ws.sendWagerRequest(gameId, [clearBet], CLEAR_ALL);
        _wagerRequests[wr.header.split(",")[HEADER_MESSAGE_ID]] = wr
    };
    this.takeOffer = function(offerId, option, betTypeId, callback) {
        var or = vivo.ws.sendTakeOfferRequest(offerId, option, betTypeId, offerId < 0);
        or.callback = callback;
        or.betType = betTypeId;
        _offerRequests[offerId] = or
    };
    this.rebetV2 = function() {
        var lastBets = model.getLastGamesBets();
        if (jQuery.isEmptyObject(lastBets)) return;
        var keys = _.keys(lastBets),
            isBJC = config.urlParams.gameType === "bjclassic";
        if (isBJC) {
            keys = _.sortBy(keys, function(betId) {
                var score = betId;
                if (betTypes.mainBets.indexOf(parseInt(betId)) !== -1) score -= 1e3;
                return score
            })
        }
        var betArea = VIVO.ui.betArea;
        _.forEach(keys, function(bt) {
            if (isBJC) {
                var betName = vivo.model.BetTypes.handBetsNamesbyId[bt + ""];
                var seatId = betTypes[betName].getSeatNum();
                var seat = betArea.getSeat(seatId);
                if (seat.isOpen()) return;
                if (vivo.model.BetTypes.tipBetTypeIds.indexOf(parseInt(bt, 10)) !== -1) return;
                var vb = vivo.model.BetTypes.backbetNamesbyId[bt + ""];
                if (seat.isMe()) {
                    if (vb !== undefined) return
                } else if (!seat.isMe()) {
                    if (vb === undefined) return
                }
            }
            var callback = betArea.getSlot(bt).betConfirmedCallBack;
            var newBet = createPendingBetObject(model.getNextBetId(), bt, parseFloat(lastBets[bt], 10), callback);
            _pendingBets[newBet.betId] = newBet;
            var wr = vivo.ws.sendWagerRequest(gameId, [new NetBetObject(newBet.betId, newBet.betTypeId, newBet.betAmount)], PLACE);
            _wagerRequests[wr.header.split(",")[HEADER_MESSAGE_ID]] = wr
        })
    };
    this.rebet = function() {
        var newBet = createPendingBetObject(model.getNextBetId(), 0, 0, null);
        _pendingBets[newBet.betId] = newBet;
        var wr = vivo.ws.sendWagerRequest(gameId, [new NetBetObject(newBet.betId, 0, 0)], REBET);
        _wagerRequests[wr.header.split(",")[HEADER_MESSAGE_ID]] = wr
    };
    this.placeTip = function(amount) {
        if (!config.isTipEnabled()) {
            var text = "Tipping disabled";
            text = config.getLocale("tipping_disabled_text", text);
            var header = "Info:";
            header = config.getLocale("client_alert_title_info", header);
            config.displayAlert2(header, text, config.closeAlert);
            return
        }
        var tipAmount = config.getConfigParam("restrictTipAmount");
        var tipMinChip = config.getConfigParam("tipMinChip");
        if (tipMinChip !== undefined && tipMinChip == true && amount > 1) {
            var minChip = _.first(model.getChipArray());
            amount = Math.max(minChip, 1)
        } else if (tipAmount !== undefined && tipAmount > 0) {
            amount = tipAmount
        }
        if (amount > model.getCurrentBalance()) {
            config.displayAlert(config.getLocale("client_alert_title_info", "Info:"), config.getLocale("insufficient_funds", "Insufficient funds to bet"), config.getLocale("okLabel", "OK"), config.closeAlert);
            return
        }
        config.playChipSound();
        vivo.ws.sendTipRequest(amount)
    };

    function createPendingBetObject(betId, betTypeId, betAmount, callback) {
        return {
            betId: betId,
            betTypeId: betTypeId,
            betAmount: betAmount,
            callBack: callback,
            sendTime: $.now()
        }
    }

    function decodeBetStatus(betStatusId) {
        switch (parseInt(betStatusId)) {
            case 0:
                return "OK";
            case 1:
                return "Failed: No money";
            case 2:
                return "Failed: Outside PYB";
            case 3:
                return "Failed: Bad game session";
            case 4:
                return "Failed: Broken server";
            case 5:
                return "Failed: wrong currency";
            case 6:
                return "Failed: No such bet";
            case 7:
                return "Failed: Partial clear";
            case 8:
                return "Failed: wrong table";
            case 9:
                return "Failed: below limit";
            case 10:
                return "Failed: above limit";
            case 11:
                return "Failed: wrong game id";
            case 12:
                return "Failed: invalid id";
            case 13:
                return "OK: amount modified";
            case 14:
                return "Failed: side with no main";
            case 15:
                return "Failed: insurance already taken";
            case 16:
                return "Failed: validation error";
            case 17:
                return "Failed: subgame settled";
            case BACCARAT_PAIR_BET_DISABLED:
                return "Failed: bet disabled until next shuffle";
            default:
                return "Failed: Unkonwn status " + betStatusId
        }
    }

    function delayedPlaceBets() {
        _pendingNotSentBetCount--;
        if (_pendingNotSent.length <= 0) {
            _pendingNotSentBetCount = 0;
            return
        }
        if (_pendingNotSentBetCount > 0) return;
        var consolidatedBets = {};
        _.forEach(_pendingNotSent, function(betObj) {
            var currentBet = consolidatedBets[betObj.betTypeId];
            if (currentBet === undefined) currentBet = betObj;
            else {
                currentBet.betId = Math.max(betObj.betId, currentBet.betId);
                currentBet.betAmount = currentBet.betAmount.plus(betObj.betAmount)
            }
            consolidatedBets[betObj.betTypeId] = currentBet
        });
        _.forEach(consolidatedBets, function(betObj, key) {
            _pendingBets["" + betObj.betId] = betObj;
            betObj.betAmount = parseFloat(betObj.betAmount, 10);
            var wr = vivo.ws.sendWagerRequest(gameId, [new NetBetObject(betObj.betId, betObj.betTypeId, betObj.betAmount)], PLACE);
            _wagerRequests[wr.header.split(",")[HEADER_MESSAGE_ID]] = wr
        });
        _pendingNotSent = []
    }
};
VIVO.namespace("ui.GameState");
VIVO.ui.GameState = function(vivo, roulette) {
    var config = vivo.model.config,
        model = vivo.model.state,
        ws = vivo.ws,
        messages = vivo.ws.messageTypes,
        _tableId = config.urlParams.tableId,
        pybDuration = config.getConfigParam("gameStateDurationSec")[_tableId].pyb * 1e3,
        lbDurationTotal = config.getConfigParam("gameStateDurationSec")[_tableId].lb * 1e3,
        lbTimer = lbDurationTotal * .8,
        lbFlash = lbDurationTotal * .2,
        lbTimerObj, PYB_NO_TIMER = 1,
        PYB_COUNTDOWN = 2,
        LB_TIMER = 3,
        LB_FLASH = 4,
        NMB = 5,
        GAME_IN_PROGRESS = 6;
    model.addEventListener(model.GAME_STATE_CHANGED, onGameStateChanged);

    function onGameStateChanged() {
        var state = model.getGameState();
        var event = config.newEvent(messages.TimerState);
        event.data = {
            TimerState: {
                isManyToOne: true
            }
        };
        eveTS = event.data.TimerState;
        switch (state) {
            case "Place Your Bets":
                eveTS.state = PYB_COUNTDOWN;
                eveTS.from = pybDuration;
                eveTS.duration = pybDuration;
                ws.dispatchEvent(event);
                break;
            case "Last Bets":
                eveTS.state = LB_TIMER;
                eveTS.from = lbDurationTotal;
                eveTS.duration = lbTimer;
                ws.dispatchEvent(event);
                lbTimerObj = config.setTimeout(function() {
                    lbTimerObj = undefined;
                    event = config.newEvent(messages.TimerState);
                    event.data = {};
                    event.data.TimerState = {
                        state: LB_FLASH,
                        from: lbFlash,
                        duration: lbFlash,
                        isManyToOne: true
                    };
                    ws.dispatchEvent(event)
                }, lbTimer / 1e3);
                break;
            case "No More Bets":
            case "Done":
                if (lbTimerObj !== undefined) {
                    config.clearInterval(lbTimerObj);
                    lbTimerObj = undefined
                }
                eveTS.state = NMB;
                eveTS.from = 0;
                eveTS.duration = 0;
                ws.dispatchEvent(event);
                break;
            default:
                sendError("Undefined game state: " + rm.State)
        }
    }
};
VIVO.namespace("ui.GameStateNumeric");
VIVO.ui.GameStateNumeric = function(vivo, roulette) {
    var config = vivo.model.config,
        model = vivo.model.state,
        ws = vivo.ws,
        messages = vivo.ws.messageTypes,
        pybLabel = config.getLocale("place_your_bets"),
        lbLabel = config.getLocale("last_bets"),
        nmbLabel = config.getLocale("no_more_bets"),
        pybFrom = 14e3,
        pybDuration = 10,
        PYB_NO_TIMER = 1,
        PYB_COUNTDOWN = 2,
        LB_TIMER = 3,
        LB_FLASH = 4,
        NMB = 5,
        GAME_IN_PROGRESS = 6,
        NMB_DM_OPTION = 7,
        ncdt = $("#numericCountDownText"),
        gs = $("#gameState"),
        isManyToOneGameClient = config.urlParams.gameType !== "bjclassic",
        currentState = PYB_NO_TIMER,
        fromSec = 0,
        durationSec = 0,
        heartBeatCount = 0,
        timerUpdateCallback, lastTimerStateMSG;
    model.addEventListener(model.HEART_BEAT_EVENT, onHeartBeat);
    if (!isManyToOneGameClient) model.addEventListener(model.GAME_STARTED, onGameStarted);
    ws.addEventListener(messages.TimerState, onTimerStateUpdate);
    gs.addClass("gameState_" + config.urlParams.language);

    function onGameStarted() {
        if (lastTimerStateMSG === undefined) {
            currentState = 1;
            startTimer(pybFrom / 1e3, pybDuration / 1e3);
            gs.text(pybLabel);
            updateClasses(gs, "PYBStatus", "PYB", "")
        } else {
            onTimerStateUpdate(lastTimerStateMSG)
        }
    }

    function onHeartBeat() {
        if (fromSec === 0 || durationSec === 0 || currentState === PYB_NO_TIMER) return;
        heartBeatCount++;
        if (heartBeatCount % 2 === 0) {
            var d = heartBeatCount / 2;
            if (d > fromSec) {
                fromSec = 0;
                ncdt.text(0);
                return
            }
            var newTime = Math.round(fromSec - d);
            if (timerUpdateCallback) timerUpdateCallback(newTime);
            ncdt.text(newTime)
        }
    }

    function startTimer(fromSecIn, durationSecIn, onTimerUpdate) {
        fromSec = fromSecIn;
        durationSec = durationSecIn;
        heartBeatCount = 0;
        timerUpdateCallback = onTimerUpdate;
        ncdt.text(Math.round(fromSec))
    }

    function onTimerStateUpdate(e) {
        lastTimerStateMSG = e;
        var stateObj = e.data.TimerState;
        if (isManyToOneGameClient && !stateObj.isManyToOne) return;
        currentState = stateObj.state;
        if (model.getGameState() === model.PYB && currentState === PYB_NO_TIMER || currentState !== PYB_NO_TIMER) startTimer(stateObj.from / 1e3, stateObj.duration / 1e3);
        switch (currentState) {
            case PYB_NO_TIMER:
                pybDuration = stateObj.duration;
                pybFrom = stateObj.from;
                if (model.getGameState() === model.PYB) {
                    gs.text(pybLabel);
                    updateClasses(gs, "PYBStatus", "PYB", "")
                }
                break;
            case PYB_COUNTDOWN:
                gs.text(pybLabel);
                updateClasses(gs, "PYBStatus", "PYB", "");
                break;
            case LB_TIMER:
                gs.text(lbLabel);
                updateClasses(gs, "LBStatus", "LB", "");
                break;
            case LB_FLASH:
                gs.text(lbLabel);
                updateClasses(gs, "LBStatus", "LB", "pulsateAnimation");
                break;
            case NMB:
            case GAME_IN_PROGRESS:
                if (vivo.ui.frame.actionPanel && !vivo.ui.frame.actionPanel.isInitialDeal()) return;
                gs.text(nmbLabel);
                updateClasses(gs, "NMBStatus", "NMB", "");
                break;
            case NMB_DM_OPTION:
                var countDown = $("#numericCountDown");
                countDown.addClass("optionTimer");
                break;
            default:
                sendError("Undifined game state: " + rm.State)
        }
    }

    function updateClasses(gs, style, countDownStyle, countDownTextStyle) {
        gs.removeClass("PYBStatus");
        gs.removeClass("LBStatus");
        gs.removeClass("NMBStatus");
        gs.addClass(style);
        var countDown = $("#numericCountDown");
        countDown.removeClass("PYB");
        countDown.removeClass("LB");
        countDown.removeClass("NMB");
        countDown.addClass(countDownStyle);
        if (countDownTextStyle === "" || countDownTextStyle === undefined) {
            ncdt.removeClass("pulsateAnimation")
        } else ncdt.addClass("pulsateAnimation")
    }
    this.updateClasses = updateClasses;
    this.startTimer = startTimer;
    this.PYB_NO_TIMER = PYB_NO_TIMER;
    this.PYB_COUNTDOWN = PYB_COUNTDOWN;
    this.LB_TIMER = LB_TIMER;
    this.LB_FLASH = LB_FLASH;
    this.NMB = NMB;
    this.GAME_IN_PROGRESS = GAME_IN_PROGRESS;
    this.flash = function() {
        gs.fadeTo("fast", .1).fadeTo("fast", 1)
    };
    this.getState = function() {
        return currentState
    }
};
VIVO.namespace("ui.JWVideo");
VIVO.ui.JWVideo = function(vivo, frame, autoplay) {
    "use strict";
    var ws = vivo.ws,
        messages = vivo.ws.messageTypes,
        model = vivo.model.state,
        config = vivo.model.config,
        _htmlVideoElement, _jwPlayerObj, _videoWebSocket, _audioWebSocket, _interactionTimer, _userIsIdle = true,
        _isAutoPlay = false,
        _isServerConnectionClosed = false,
        _winkMute = false,
        _winkPlaying = true,
        _winkVolumeButton, _winkPlayPauseButton, RIGHT_ARROW = String.fromCharCode(9658),
        PAUSE = "||",
        _tableId = config.urlParams.tableId;
    if (autoplay !== undefined) model.addEventListener(model.DEALER_UPDATE_EVENT, onDealerNameChanged);
    model.addEventListener(model.PLAYER_INTERACTION_EVENT, onPlayerInteraction);
    ws.addEventListener(messages.ConnectionClosed, onServerConnectionClosed);
    $("#videoWrapper").on("click", onPlayerInteraction);
    onPlayerInteraction();

    function onDealerNameChanged() {
        var oldValue = _isAutoPlay;
        _isAutoPlay = model.getDealerName().toLowerCase() === "autoplay";
        if (oldValue !== _isAutoPlay) {
            if (!_isAutoPlay) {
                autoplay.hide();
                loadVideo()
            } else {
                clearVideo();
                autoplay.show()
            }
        }
    }

    function clearVideo() {
        $("#videoWrapper").empty();
        if (_jwPlayerObj !== undefined) _jwPlayerObj.stop();
        _jwPlayerObj = undefined
    }

    function onPlayerInteraction() {
        if (_isAutoPlay) return;
        if (_interactionTimer !== undefined) config.clearInterval(_interactionTimer);
        if (config.isDealerMonitor !== true) _interactionTimer = config.setTimeout(onUserIdle, config.getConfigParam("videoTimeoutSec"));
        if (_userIsIdle) {
            _userIsIdle = false;
            loadVideo()
        }
    }

    function loadVideo() {
        _htmlVideoElement = document.createElement("video");
        _htmlVideoElement.id = "jwplayerElement";
        $("#videoWrapper").append(_htmlVideoElement);
        var hlsURLs = config.getConfigParam("HLSVideo")[_tableId];
        config.sendLog("1015", "Video connect started (HTML5) url: " + hlsURLs[0]);
        _jwPlayerObj = jwplayer("jwplayerElement").setup({
            androidhls: true,
            autostart: true,
            controls: true,
            repeat: false,
            sources: [{
                file: hlsURLs[0]
            }],
            width: "100%",
            height: "100%"
        });
        _jwPlayerObj.onPlay(onPlaying);
        _jwPlayerObj.onError(onJWError)
    }

    function onPlaying() {}

    function onJWError(e) {
        config.sendError("Error JW player had an error loading the video: " + e)
    }

    function onServerConnectionClosed(e) {
        _isServerConnectionClosed = true;
        onUserIdle()
    }

    function onUserIdle() {
        if (_isAutoPlay) return;
        if (model.getBetAmount() <= 0 || _isServerConnectionClosed) {
            clearVideo();
            $("#videoWrapper").html("<br/><br/><br/>" + config.getLocale("video_timeout_message").replace(/\\n/g, "<br/>"));
            _userIsIdle = true
        } else onPlayerInteraction()
    }
};
VIVO.namespace("ui.JackpotHandler");
VIVO.ui.JackpotHandler = function(vivo, roulette) {
    var config = vivo.model.config,
        model = vivo.model.state,
        ws = vivo.ws,
        messages = vivo.ws.messageTypes,
        NOT_AVAILABLE = 0,
        AVAILABLE = 1,
        ACTIVE = 2,
        WON = 3,
        HIDE = 4,
        WON_MINI = 5,
        JACKPOT_UPDATE_FREQUENCY = 300,
        status = -1,
        jackpotAmount, jackpotAnimation, jackpotWrapper = $("#jackpot"),
        jackpotElement = jackpotWrapper.get(0),
        youWinInterval, youWinTimeRemaining = 10;
    jackpotElement = document.createElement("div");
    jackpotElement.id = "jackpotText";
    jackpotElement.className = "jackpotText";
    jackpotWrapper.append(jackpotElement);
    ws.addEventListener(messages.JackpotUpdate, onJackpotUpdate);
    ws.addEventListener(messages.JackpotResult, onJackpotResult);
    if (config.isDealerMonitor) {
        status = AVAILABLE;
        ws.addEventListener(messages.JackpotAlert, onJackpotAlertDM);
        model.addEventListener(model.GAME_STARTED, onGameStartedDMOnly)
    } else {
        ws.addEventListener(messages.JackpotAlert, onJackpotAlertPlayer)
    }

    function onJackpotResult(e) {
        var jpr = e.data.JackpotResult;
        var amt = jpr.amount;
        console.log("Jackpot result of " + amt);
        model.setLastWin(amt)
    }

    function onJackpotUpdate(e) {
        var jp = e.data.JackpotUpdate;
        if (jackpotAmount === undefined || jackpotAmount > jp.amount) {
            jackpotAmount = jp.amount
        } else if (jackpotAmount === jp.amount) {
            return
        }
        var options = {
            useEasing: false,
            useGrouping: true,
            separator: ",",
            decimal: ".",
            fixedWidthFontFix: true
        };
        if (jackpotAnimation !== undefined) jackpotAnimation.stop();
        jackpotAnimation = new countUp(jackpotElement, jackpotAmount, jp.amount, 2, JACKPOT_UPDATE_FREQUENCY, options);
        jackpotAnimation.start();
        jackpotAmount = jp.amount
    }

    function addPulseEffectToCards(seats) {
        _.forEach(seats, function(seat) {
            $("#seat" + seat).find(".card-7H").addClass("jackpotPulseElement");
            $("#seat" + seat).find(".card-7C").addClass("jackpotPulseElement");
            $("#seat" + seat).find(".card-7S").addClass("jackpotPulseElement");
            $("#seat" + seat).find(".card-7D").addClass("jackpotPulseElement");
            $("#playerCards" + seat).find(".card-7H").addClass("jackpotPulseElement");
            $("#playerCards" + seat).find(".card-7C").addClass("jackpotPulseElement");
            $("#playerCards" + seat).find(".card-7S").addClass("jackpotPulseElement");
            $("#playerCards" + seat).find(".card-7D").addClass("jackpotPulseElement")
        })
    }

    function unmakeGoldCoin(seats) {
        _.forEach(seats, function(seat) {
            config.setIsGoldMainChip(seat, false);
            $("#seat" + seat).find(".bjcMainChipLoc0").addClass("tipChip");
            $("#seat" + seat).find(".bjcMainChipLoc0").removeClass("tipChip")
        })
    }

    function makeGoldCoin(seats) {
        _.forEach(seats, function(seat) {
            config.setIsGoldMainChip(seat, true);
            $("#seat" + seat).find(".bjcMainChipLoc0").removeClass("tipChip");
            $("#seat" + seat).find(".bjcMainChipLoc0").addClass("tipChip")
        })
    }

    function removePulseEffectToCards(seats) {
        _.forEach(seats, function(seat) {
            $("#seat" + seat).find(".card-7H").removeClass("jackpotPulseElement");
            $("#seat" + seat).find(".card-7C").removeClass("jackpotPulseElement");
            $("#seat" + seat).find(".card-7S").removeClass("jackpotPulseElement");
            $("#seat" + seat).find(".card-7D").removeClass("jackpotPulseElement");
            $("#playerCards" + seat).find(".card-7H").removeClass("jackpotPulseElement");
            $("#playerCards" + seat).find(".card-7C").removeClass("jackpotPulseElement");
            $("#playerCards" + seat).find(".card-7S").removeClass("jackpotPulseElement");
            $("#playerCards" + seat).find(".card-7D").removeClass("jackpotPulseElement")
        })
    }

    function removePulseEffectFromCards() {
        $(".jackpotPulseElement").removeClass("jackpotPulseElement")
    }
    var dmActiveSeats = [],
        pulseTimer;

    function onGameStartedDMOnly() {
        dmActiveSeats = [];
        if (pulseTimer !== undefined) {
            config.clearInterval(pulseTimer);
            pulseTimer = undefined
        }
    }

    function onJackpotAlertDM(e) {
        var jp = e.data.JackpotAlert,
            seats = jp.seats;
        console.log("---->JP Seats are " + JSON.stringify(seats));
        switch (jp.activationType) {
            case ACTIVE:
                removePulseEffectFromCards();
                dmActiveSeats = _.union(dmActiveSeats, seats);
                if (pulseTimer !== undefined) config.clearInterval(pulseTimer);
                pulseTimer = config.setTimeout(function() {
                    pulseTimer = undefined;
                    addPulseEffectToCards(dmActiveSeats)
                }, 2);
                break;
            case NOT_AVAILABLE:
                if (pulseTimer !== undefined) {
                    config.clearInterval(pulseTimer);
                    pulseTimer = undefined
                }
                dmActiveSeats = _.pullAll(dmActiveSeats, seats);
                removePulseEffectToCards(seats);
                unmakeGoldCoin(seats);
                break;
            case AVAILABLE:
                if (pulseTimer !== undefined) {
                    config.clearInterval(pulseTimer);
                    pulseTimer = undefined
                }
                dmActiveSeats = _.pullAll(dmActiveSeats, seats);
                removePulseEffectToCards(seats);
                console.log("Making chip go gold ");
                makeGoldCoin(seats);
                break;
            default:
                console.log("jp.activationType: " + jp.activationType + " is being ignored. seats = " + JSON.stringify(seats));
                break
        }
    }

    function onJackpotAlertPlayer(e) {
        var jp = e.data.JackpotAlert,
            seats = jp.seats;
        _.forEach(seats, function(seat) {
            if (jp.activationType == NOT_AVAILABLE) config.setIsGoldMainChip(seat, false);
            else if (jp.activationType == AVAILABLE) config.setIsGoldMainChip(seat, true)
        });
        if (config.hasNoGoldChip()) {
            jackpotWrapper.removeClass("jackpotTextYellow");
            $(jackpotElement).removeClass("jackpotPulseElement")
        }
        jackpotWrapper.addClass("jackpotVisible");
        config.setAllowedJPType(jp.jackpotTypeId);
        console.log("JackpotHandler: set jackpot type id to " + jp.jackpotTypeId);
        removePulseEffectFromCards();
        switch (jp.activationType) {
            case NOT_AVAILABLE:
                jackpotWrapper.prop("title", config.getLocale("jackpot_mouseover_normal"));
                if (jp.jackpotTypeId == 2) model.setJackpotSeen(true);
                break;
            case AVAILABLE:
                jackpotWrapper.prop("title", config.getLocale("jackpot_mouseover_active"));
                jackpotWrapper.addClass("jackpotTextYellow");
                if (jp.jackpotTypeId == 2) model.setJackpotSeen(true);
                break;
            case ACTIVE:
                if (jp.jackpotTypeId == 2) model.setJackpotSeen(true);
                jackpotWrapper.prop("title", config.getLocale("jackpot_mouseover_firedup"));
                jackpotWrapper.addClass("jackpotTextYellow");
                config.setTimeout(function() {
                    $(jackpotElement).addClass("jackpotPulseElement");
                    addPulseEffectToCards(seats)
                }, 3);
                break;
            case WON:
                if (jp.jackpotTypeId == 2) model.setJackpotSeen(true);
                var e2 = config.newEvent(model.JACKPOT_WON_EVENT);
                e2.data = {
                    seat: seats[0]
                };
                model.dispatchEvent(e2);
                jackpotWrapper.addClass("jackpotTextYellow");
                youWinTimeRemaining = 15;
                config.displayAlert(config.getLocale("jackpot_win_title"), config.getLocale("jackpot_win_text") + "<br/>Time left: 15 seconds.", config.getLocale("okLabel", "OK"), function() {
                    config.closeAlert();
                    clearInterval(youWinInterval)
                });
                updateAlertText("jackpot_win_text");
                youWinInterval = setInterval(function() {
                    youWinTimeRemaining--;
                    updateAlertText("jackpot_win_text")
                }, 1e3);
                config.setTimeout(function() {
                    config.closeAlert();
                    clearInterval(youWinInterval)
                }, 15);
                break;
            case WON_MINI:
                if (jp.jackpotTypeId == 2) model.setJackpotSeen(true);
                var e2 = config.newEvent(model.JACKPOT_WON_EVENT);
                e2.data = {
                    seat: seats[0]
                };
                model.dispatchEvent(e2);
                jackpotWrapper.addClass("jackpotTextYellow");
                break;
            case HIDE:
                jackpotWrapper.removeClass("jackpotVisible");
                break
        }
    }

    function updateAlertText(resource, msg) {
        var txt = config.getLocale(resource, msg).replace(/\\n/g, "<br />");
        $("#alertText").html("<br />" + txt + "<br/>Time left: " + youWinTimeRemaining + " seconds." + "<br />")
    }
};
VIVO.namespace("ui.LoadingPanel");
VIVO.ui.LoadingPanel = function(vivo, roulette) {
    "use strict";
    var config = vivo.model.config;
    var clientImageUrl = config.getConfigParam("resourceDirectory") + "/images/client-specific/" + config.urlParams.client + "/loading.png";
    console.log("clientImageUrl = " + clientImageUrl);
    $("#ldClientImage").css("background-image", "url(" + clientImageUrl + ")");
    var backgroundUrl = config.getConfigParam("resourceDirectory") + "/html5Images/preloaders/" + config.urlParams.gameType + ".svg";
    if (config.urlParams.isEnhanced) backgroundUrl = config.getConfigParam("resourceDirectory") + "/html5Images/preloaders/enhancedroulette.svg";
    $("#ldRoundedBox").css("background-image", "url(" + backgroundUrl + ")");
    $("#ldLoadingText").text(config.getLocale("loading_" + config.urlParams.gameType));
    if (config.urlParams.gameType.toLowerCase() === "baccarat" && config.urlParams.subtype !== undefined) $("#ldLoadingText").text(config.getLocale("loading_" + config.urlParams.subtype.toLowerCase()))
};
VIVO.namespace("model.State");
VIVO.model.State = function(vivo, roulette) {
    "use strict";
    var ws = vivo.ws,
        messages = vivo.ws.messageTypes,
        config = vivo.model.config,
        betTypes = vivo.model.BetTypes,
        account = {},
        currentGame, lastBetId = 1,
        that = this,
        _lastWin = 0,
        _lastWinChanged = false,
        _selectedChipAmount = 1,
        _chipArray, _gameState, _dealerName = "default",
        _lastGamesBets = {},
        _isAutoRebet = false,
        _isBackBettingOn = false,
        _gsMessagesQueue = [],
        _jackpotSeen = false,
        _isGameStateTimerRunning = false,
        haveSeenABetResponse = false,
        _GSM = config.gameStateMessage,
        _activeSeat = -1,
        _activeHand, _autoJackpot = false,
        _showVideo = true,
        _showJackAnimations = true,
        _AutoHit8orLess = true,
        _AutoStand18orMore = true,
        _autoOpenBigRoad = config.getConfigParam("autoOpenBaccaratRoadHistory") === undefined || config.getConfigParam("autoOpenBaccaratRoadHistory") !== false,
        oldState, _betClassToLimit = {},
        PLAYER_INTERACTION_EVENT = "PlayerInteractionEvent",
        BALANCE_UPDATE_EVENT = "BalanceUpateEvent",
        GAME_STARTED = "GameStarted",
        GAME_FINISHED = "GameFinished",
        GAME_STATE_CHANGED = "GameStateChanged",
        INITIAL_DEAL_FINISHED = "initialDealFinished",
        HEART_BEAT_EVENT = "HeartBeatEvent",
        ACTIVE_SEAT_UPDATE = "ActiveSeatUpdate",
        DEALER_UPDATE_EVENT = "DealerNameChanged",
        ENTER_TABLE_PROCESSED = "EnterTableProcessed",
        BACKBET_UPDATE = "BackbetClicked",
        BUST_EVENT = "BustEvent",
        BLACK_JACK_EVENT = "BlackJackEvent",
        FS_CONFIG_CHANGED = "FullScreenBJCConfigChanged",
        HIT_TO_21_EVENT = "HitTo21Event",
        HIT_TO_20_EVENT = "HitTo20Event",
        PAIR_CARDS_EVENT = "PairCardsEvent",
        RUMMY_CARDS_EVENT = "RummyCardsEvent",
        DEALER_BUST_EVENT = "DealerBustEvent",
        SURRENDER_EVENT = "PlayerSurrenderEvent",
        OPTION_TIMER_FINISHED = "OptionTimerFinished",
        JACKPOT_WON_EVENT = "JackpotWon",
        ZERRO_BALANCE_ERROR_CODE = 5,
        ANIMATION_DELAY_SEC = 3,
        PYB = "Place Your Bets",
        LB = "Last Bets",
        NMB = "No More Bets",
        D = "Done";
    ws.addEventListener(_GSM, initGameStateMessage);
    ws.addEventListener(messages.EnterTableResponse, onEnterTableResponse);
    ws.addEventListener(messages.WagerResponse, onWagerResponse);
    ws.addEventListener(messages.TipResponse, onTipResponse);
    ws.addEventListener(messages.TakeOfferResponse, onOfferResponse);
    ws.addEventListener(messages.IncrementUpdate, onIncrementUpdate);
    ws.addEventListener(messages.PayoutMessage, onPayoutMessage);
    ws.addEventListener(messages.ClientAlertMessage, onClientAlertMessage);
    ws.addEventListener(messages.BalanceUpdate, onBalanceUpdate);
    setInterval(function() {
        that.dispatchEvent(config.newEvent(HEART_BEAT_EVENT))
    }, config.getHeartBeatDuration());

    function initGameStateMessage(e) {
        var gsm = e.data[_GSM];
        _gameState = gsm.state;
        _dealerName = gsm.dealername;
        config.sendLog("1011", "Table session update (game state message) received: " + gsm.gameId);
        that.dispatchEvent(config.newEvent(DEALER_UPDATE_EVENT));
        currentGame = new VIVO.model.Game(vivo, that, gsm.gameId, gsm.tableId);
        that.dispatchEvent(config.newEvent(GAME_STARTED));
        that.dispatchEvent(config.newEvent(BALANCE_UPDATE_EVENT));
        var gs = config.newEvent(GAME_STATE_CHANGED);
        gs.data = gsm;
        that.dispatchEvent(gs);
        ws.addEventListener(_GSM, onGameStateMessage);
        ws.removeEventListener(_GSM, initGameStateMessage);
        oldState = gsm.state
    }

    function onGameStateMessage(e) {
        var gsm = e.data[_GSM];
        if (_gameState === gsm.state && _gameState === PYB && gsm.gameId === that.getGameId()) {
            updateDealerName(gsm.dealername);
            console.log("Ignoring duplicate PYB game state update!!");
            return
        }
        _gsMessagesQueue.push(gsm);
        if (_isGameStateTimerRunning === true) return;
        else if (gsm.state === PYB) {
            that.dispatchEvent(config.newEvent(GAME_FINISHED));
            _isGameStateTimerRunning = true;
            config.setTimeout(handleGameStateMessage, ANIMATION_DELAY_SEC)
        } else handleGameStateMessage()
    }

    function updateDealerName(newDealerName) {
        if (_dealerName !== newDealerName) {
            _dealerName = newDealerName;
            that.dispatchEvent(config.newEvent(DEALER_UPDATE_EVENT))
        }
    }

    function handleGameStateMessage() {
        _isGameStateTimerRunning = false;
        while (_gsMessagesQueue.length > 0) {
            var gsm = _gsMessagesQueue.shift();
            _gameState = gsm.state;
            updateDealerName(gsm.dealername);
            switch (gsm.state) {
                case PYB:
                    currentGame = new VIVO.model.Game(vivo, that, gsm.gameId, gsm.tableId);
                    _activeSeat = -1;
                    console.log("dispatching Event GAME_STARTED after animation delay " + ANIMATION_DELAY_SEC + " this will trigger chips/bets to be cleared.");
                    that.dispatchEvent(config.newEvent(GAME_STARTED));
                    that.dispatchEvent(config.newEvent(BALANCE_UPDATE_EVENT));
                    if (_isAutoRebet) {
                        if (config.urlParams.gameType === "bjclassic" || config.urlParams.gameType === "baccarat") currentGame.rebetV2();
                        else currentGame.rebet()
                    }
                    break;
                case LB:
                    break;
                case NMB:
                    if (oldState === LB || oldState === PYB) {
                        _lastWin = 0;
                        that.dispatchEvent(config.newEvent(BALANCE_UPDATE_EVENT));
                        copyLastBets()
                    }
                    break;
                case D:
                    break;
                default:
                    config.sendError("Undifined game state: " + gsm.state)
            }
            if (oldState !== gsm.state) {
                var gs = config.newEvent(GAME_STATE_CHANGED);
                gs.data = gsm;
                that.dispatchEvent(gs)
            }
            oldState = gsm.state
        }
    }

    function copyLastBets() {
        var lastBets = currentGame.getBets();
        if (jQuery.isEmptyObject(lastBets)) return;
        _lastGamesBets = jQuery.extend(true, {}, lastBets);
        if (config.urlParams.gameType === "bjclassic") {
            for (var key in _lastGamesBets) {
                if (betTypes.insuranceBetTypeIds.indexOf(key) !== -1) delete _lastGamesBets[key]
            }
        }
    }

    function onEnterTableResponse(e) {
        loadChips(e.data.EnterTableResponse.limitLevel.chips);
        var limitLevels;
        for (var prop in e.data.EnterTableResponse.limits) limitLevels = e.data.EnterTableResponse.limits[prop];
        for (var i = 0; i < limitLevels.length; i++) {
            var name = limitLevels[i].betClass.toLowerCase() + "";
            var value = {
                max: limitLevels[i].max,
                min: limitLevels[i].min
            };
            console.log("limitLevel: name=" + name + ", value=" + JSON.stringify(value));
            _betClassToLimit[name] = value
        }
        account = e.data.EnterTableResponse.account;
        setBalance(account.balances);
        that.dispatchEvent(config.newEvent(PLAYER_INTERACTION_EVENT));
        that.dispatchEvent(config.newEvent(ENTER_TABLE_PROCESSED))
    }

    function loadChips(chipsString) {
        _chipArray = chipsString.split(",");
        for (var i = 0; i < _chipArray.length; i++) _chipArray[i] = parseFloat(_chipArray[i]);
        _chipArray.sort(function(a, b) {
            return a - b
        })
    }

    function onClientAlertMessage(e) {
        var clientAlert = e.data.ClientAlertMessage;
        var button1Text = config.getLocale("okLabel");
        if (button1Text === undefined) button1Text = "OK";
        var buttonCallback, header;
        header = config.getLocale("client_alert_title_info", "Info:");
        if (clientAlert.severity === 10) {
            buttonCallback = config.closeAlertAndWindow;
            VIVO.ws.disconnect()
        } else buttonCallback = config.closeAlert;
        var text = config.getLocale("client_alert" + clientAlert.messageCode, clientAlert.messageText);
        if (ZERRO_BALANCE_ERROR_CODE === clientAlert.messageCode) config.setTimeout(function() {
            config.closeAlert()
        }, 2);
        config.displayAlert2(header, text, buttonCallback);
        config.sendError("ClientAlert recived code=" + clientAlert.messageCode + ", text=" + text + ", gameId=" + that.getGameId())
    }

    function onWagerResponse(e) {
        if (haveSeenABetResponse && e.data.WagerResponse.betStatuses[0] === 0 && e.data.WagerResponse.betAmounts[0] > 0) {
            confing.sendLog("1014", "Received first non 0 position update amount" + e.data.WagerResponse.betAmounts[0]);
            haveSeenABetResponse = true
        }
        currentGame.onWagerResponse(e);
        setBalance(e.data.WagerResponse.balances);
        that.dispatchEvent(config.newEvent(BALANCE_UPDATE_EVENT));
        that.dispatchEvent(config.newEvent(PLAYER_INTERACTION_EVENT))
    }

    function onTipResponse(e) {
        setBalance(e.data.TipResponse.balances);
        that.dispatchEvent(config.newEvent(BALANCE_UPDATE_EVENT));
        that.dispatchEvent(config.newEvent(PLAYER_INTERACTION_EVENT))
    }

    function onIncrementUpdate(e) {
        currentGame.onIncrementUpdate(e);
        setBalance(e.data.IncrementUpdate.balances);
        that.dispatchEvent(config.newEvent(BALANCE_UPDATE_EVENT))
    }

    function onOfferResponse(e) {
        currentGame.onOfferResponse(e);
        that.dispatchEvent(config.newEvent(PLAYER_INTERACTION_EVENT))
    }

    function onBalanceUpdate(e) {
        setBalance(e.data.BalanceUpdate.balances);
        that.dispatchEvent(config.newEvent(BALANCE_UPDATE_EVENT))
    }

    function onPayoutMessage(e) {
        setBalance(e.data.PayoutMessage.balances);
        currentGame.onPayoutMessage(e)
    }

    function setBalance(accountBalanceObj) {
        for (var prop in accountBalanceObj) {
            var newAmount = parseFloat(accountBalanceObj[prop], 10);
            if (newAmount >= 0) accountBalanceObj[prop] = newAmount
        }
        account.balances = accountBalanceObj
    }
    this.getSelectedChipAmount = function() {
        return _selectedChipAmount
    };
    this.setSelectedChipAmount = function(chipAmount) {
        _selectedChipAmount = parseFloat(chipAmount)
    };
    this.getLastWinChanged = function() {
        return _lastWinChanged
    };
    this.getLastWin = function() {
        _lastWinChanged = false;
        return _lastWin
    };
    this.setLastWin = function(lastWin) {
        _lastWin = lastWin;
        _lastWinChanged = true
    };
    this.getCurrentBalance = function() {
        for (var prop in account.balances) {
            if (account.balances[prop] < 0) return 0;
            return account.balances[prop]
        }
    };
    this.isSettled = function(betType) {
        if (currentGame === undefined) return true;
        return currentGame.isSettled(betType)
    };
    this.getPendingBetAmount = function(betType) {
        if (currentGame === undefined) return 0;
        return currentGame.getPendingBetAmount(betType)
    };
    this.getBJEPAmountForSlot = function(slotBetType) {
        if (currentGame === undefined) return 0;
        return currentGame.getBJEPAmountForSlot(slotBetType)
    };
    this.getBetAmount = function(betType) {
        if (currentGame === undefined) return 0;
        return currentGame.getBetAmount(betType)
    };
    this.placeTip = function(amount) {
        currentGame.placeTip(amount)
    };
    this.placeBet = function(betType, betAmount, callBack) {
        if (lastBetId === 1) config.sendLog("1013", "First Position request Sent amount = " + betAmount);
        else if (lastBetId === 11) config.sendLog("1016", "10 Bet requests made");
        else if (lastBetId === 50) config.sendLog("1017", "50 Bet requests made");
        currentGame.placeBet(betType, betAmount, callBack)
    };
    this.takeOffer = function(offerId, option, betTypeId, callBack) {
        currentGame.takeOffer(offerId, option, betTypeId, callBack)
    };
    this.clearAllBets = function(callBack) {
        currentGame.clearAllBets(callBack)
    };
    this.undoLastBet = function() {
        currentGame.undoLastBet()
    };
    this.clearBackBets = function() {
        currentGame.clearBackBets()
    };
    this.rebet = function() {
        currentGame.rebet()
    };
    this.rebetV2 = function() {
        currentGame.rebetV2()
    };
    this.getNextBetId = function() {
        return lastBetId++
    };
    this.setLastBetId = function(betId) {
        lastBetId = betId
    };
    this.getChipArray = function() {
        return _chipArray
    };
    this.isBetStateValid = function() {
        return _gameState === "Place Your Bets" || _gameState === "Last Bets"
    };
    this.getGameId = function() {
        if (currentGame === undefined) return 0;
        return currentGame.getGameId()
    };
    this.getDealerName = function() {
        return _dealerName
    };
    this.getClassLimits = function(betClass) {
        return _betClassToLimit[betClass]
    };
    this.getLastGamesBets = function() {
        return _lastGamesBets
    };
    this.setBackBettingOn = function(isBackBettingOn) {
        _isBackBettingOn = isBackBettingOn;
        that.dispatchEvent(config.newEvent(BACKBET_UPDATE))
    };
    this.isBackBettingOn = function() {
        return _isBackBettingOn
    };
    this.setAutoRebet = function(isAutoRebet) {
        _isAutoRebet = isAutoRebet
    };
    this.isAutoRebet = function() {
        return _isAutoRebet
    };
    this.getGameState = function() {
        return _gameState
    };
    this.getPlayerName = function() {
        return account.name
    };
    this.getActiveSeat = function() {
        return _activeSeat
    };
    this.getActiveHand = function() {
        return _activeHand
    };
    this.clearBets = function(betType) {
        if (currentGame === undefined) return;
        currentGame.clearBets(betType)
    };
    this.setActiveSeat = function(activeSeat) {
        if (activeSeat !== _activeSeat) {
            _activeSeat = activeSeat;
            that.dispatchEvent(config.newEvent(ACTIVE_SEAT_UPDATE))
        }
    };
    this.setActiveHand = function(activeHand) {
        if (activeHand !== _activeHand) {
            _activeHand = activeHand
        }
    };
    this.getAnimationDelaySec = function() {
        return ANIMATION_DELAY_SEC
    };
    this.setShowVideo = function(show) {
        _showVideo = show
    };
    this.setShowJackAnimations = function(show) {
        _showJackAnimations = show
    };
    this.setAutoJackpot = function(autoSet) {
        _autoJackpot = autoSet
    };
    this.setJackpotSeen = function() {
        _jackpotSeen = true
    };
    this.getJackpotSeen = function() {
        return _jackpotSeen
    };
    this.showJackAnimations = function() {
        return _showJackAnimations
    };
    this.setAutoHit8orLess = function(autoHit) {
        _AutoHit8orLess = autoHit
    };
    this.getAutoOpenBigRoad = function() {
        return _autoOpenBigRoad
    };
    this.getAutoJackpot = function() {
        return _autoJackpot
    };
    this.setAutoOpenBigRoad = function(autoOpen) {
        _autoOpenBigRoad = autoOpen
    };
    this.getAutoHit8orLess = function() {
        return _AutoHit8orLess
    };
    this.setAutoStand18orMore = function(autoStand) {
        _AutoStand18orMore = autoStand
    };
    this.getAutoStand18orMore = function() {
        return _AutoStand18orMore
    };
    this.showVideo = function() {
        return _showVideo
    };
    this.PLAYER_INTERACTION_EVENT = PLAYER_INTERACTION_EVENT;
    this.BALANCE_UPDATE_EVENT = BALANCE_UPDATE_EVENT;
    this.GAME_STARTED = GAME_STARTED;
    this.GAME_FINISHED = GAME_FINISHED;
    this.GAME_STATE_CHANGED = GAME_STATE_CHANGED;
    this.INITIAL_DEAL_FINISHED = INITIAL_DEAL_FINISHED;
    this.HEART_BEAT_EVENT = HEART_BEAT_EVENT;
    this.ACTIVE_SEAT_UPDATE = ACTIVE_SEAT_UPDATE;
    this.DEALER_UPDATE_EVENT = DEALER_UPDATE_EVENT;
    this.ENTER_TABLE_PROCESSED = ENTER_TABLE_PROCESSED;
    this.BACKBET_UPDATE = BACKBET_UPDATE;
    this.BUST_EVENT = BUST_EVENT;
    this.BLACK_JACK_EVENT = BLACK_JACK_EVENT;
    this.FS_CONFIG_CHANGED = FS_CONFIG_CHANGED;
    this.HIT_TO_21_EVENT = HIT_TO_21_EVENT;
    this.HIT_TO_20_EVENT = HIT_TO_20_EVENT;
    this.PAIR_CARDS_EVENT = PAIR_CARDS_EVENT;
    this.RUMMY_CARDS_EVENT = RUMMY_CARDS_EVENT;
    this.DEALER_BUST_EVENT = DEALER_BUST_EVENT;
    this.SURRENDER_EVENT = SURRENDER_EVENT;
    this.OPTION_TIMER_FINISHED = OPTION_TIMER_FINISHED;
    this.JACKPOT_WON_EVENT = JACKPOT_WON_EVENT;
    this.PYB = PYB;
    this.LB = LB;
    this.NMB = NMB;
    this.D = D
};
VIVO.model.State.prototype = Object.create(VIVO.utils.EventDispatcher.prototype);
VIVO.namespace("ui.NewsTicker");
VIVO.ui.NewsTicker = function(vivo, frame, isAboveVideo) {
    "use strict";
    var ws = vivo.ws,
        messages = vivo.ws.messageTypes,
        model = vivo.model.state,
        config = vivo.model.config,
        isShowing = false,
        nt = $("#newsTicker"),
        v = $("#videoWrapper"),
        f = $("#frame"),
        vCordinates = v.offset(),
        animationInProgress = false,
        staticNewsMessages = config.getConfigParam("staticNewsMessages"),
        messageQueue = [],
        queuedMessage = null;
    var staticMsg;
    if (staticNewsMessages) {
        var staticMsg = staticNewsMessages[config.urlParams.gameType]
    }
    nt.on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend", dropDownAnimationFinished);
    nt.on("webkitAnimationEnd oanimationend msAnimationEnd animationend", messageDisplayAnimationFinished);
    if (staticMsg !== undefined) {
        if (staticMsg.trim() !== "") {
            var currDate = new Date;
            onNewsEvent({
                data: {
                    ClientNewsEvent: {
                        expireTime: currDate.getTime() + 1e6,
                        publishTime: currDate.getTime(),
                        numberOfIterations: 2,
                        htmlText: staticMsg
                    }
                }
            })
        }
    } else {
        ws.addEventListener(messages.ClientNewsEvent, onNewsEvent);
        ws.addEventListener(messages.ClientDeleteNewsEvent, onDeleteNewsEvent)
    }
    model.addEventListener(model.GAME_STATE_CHANGED, onGameStateChanged);

    function onNewsEvent(e) {
        var newsEvent = e.data.ClientNewsEvent;
        var currDate = new Date;
        console.log("NewsTicker.onNewsEvent currDate=" + currDate + " currTime=" + currDate.getTime() + " publishDate:" + new Date(newsEvent.publishTime));
        if ((new Date).getTime() > newsEvent.expireTime) return;
        config.setTimeout(function() {
            messageQueue.push(newsEvent);
            showNextMessage()
        }, 1)
    }

    function onDeleteNewsEvent(e) {
        var GUIDtoRemove = e.data.ClientDeleteNewsEvent.GUID;
        messageQueue = $.grep(messageQueue, function(newsEvent) {
            return GUIDtoRemove !== newsEvent.GUID
        })
    }

    function onGameStateChanged(e) {
        if (model.getGameState() === model.PYB) showNextMessage();
        else if (model.getGameState() === model.NMB || model.getGameState() === model.D) hideNewsTicker()
    }

    function dropDownNewsTicker() {
        nt.removeClass("hideNewsTicker").addClass("showNewsTicker")
    }

    function hideNewsTicker() {
        nt.html("");
        nt.removeClass("showNewsTicker").addClass("hideNewsTicker")
    }

    function dropDownAnimationFinished() {
        console.log("NewsTicker dropDownAnimationFinished");
        isShowing = nt.hasClass("showNewsTicker");
        if (isShowing) {
            if (queuedMessage !== null) {
                showNewsEvent(queuedMessage);
                queuedMessage = null
            } else showNextMessage()
        }
    }

    function messageDisplayAnimationFinished() {
        animationInProgress = false;
        nt.html("").removeClass("showNewsText").addClass("hideNewsText");
        showNextMessage()
    }

    function showNextMessage() {
        if (animationInProgress) return;
        if (model.getGameState() !== model.PYB) {
            hideNewsTicker();
            return
        }
        var currTime = (new Date).getTime();
        var numberEventsIgnored = 0;
        while (messageQueue.length > numberEventsIgnored) {
            var newsEvent = messageQueue.shift();
            if (newsEvent.numberOfIterations <= 0) continue;
            if (currTime > newsEvent.expireTime) continue;
            if (currTime < newsEvent.publishTime) {
                messageQueue.push(newsEvent);
                numberEventsIgnored++;
                continue
            }
            newsEvent.numberOfIterations--;
            messageQueue.push(newsEvent);
            if (isShowing) showNewsEvent(newsEvent);
            else {
                dropDownNewsTicker();
                queuedMessage = newsEvent
            }
            return
        }
        hideNewsTicker()
    }

    function showNewsEvent(newsEvent) {
        animationInProgress = true;
        nt.removeClass("hideNewsText").html(newsEvent.htmlText);
        console.log("This is required to ensure that the class is fully rendered and hence the animation is triggered." + nt.css("text-indent"));
        nt.addClass("showNewsText")
    }
};
VIVO.namespace("ui.Slot");
VIVO.ui.Slot = function(vivo, betArea, slotElement, betType, chipStyleIn, slotLabel) {
    "use strict";
    var model = vivo.model.state,
        config = vivo.model.config,
        gameType = config.urlParams.gameType,
        betTypes = vivo.model.BetTypes,
        cardHandler = vivo.ui.cardHandler,
        _pendingAmount = 0,
        _betLimitMax, _betLimitMin, _toolTip, _isRaceTrack = false,
        _isMouseOver = false,
        _alertOffset = 10,
        _tableElement = slotElement.parentNode,
        _otherPlayersBetAmount = 0,
        _slotChipStyle = chipStyleIn,
        _rummyOutcomeSettled = false,
        _hasSplit = false,
        _hasDoubledLeft = false,
        _hasDoubledRight = false,
        _mainBetType, _noBetToolTipText, _isBackBetSlot = false,
        _hasBustLeft = false,
        _alertOriantation = "top",
        _isFullScreenBJC = config.isFullScreenBJC,
        that = this;
    if (slotLabel === undefined) slotLabel = config.getLocale("bet");
    this.chipStacks = {
        chipStack: [],
        doubleOrSplitChipStack: [],
        splitAndDoubleChipStack1: [],
        splitAndDoubleChipStack2: []
    };
    this.slotStyle = chipStyleIn;
    this.slotElement = slotElement;
    this.betTypeId = betType.getId();
    this.betType = betType;
    if (config.urlParams.gameType === "bjclassic" && betType.getBetClass() === "hand") {
        if (config.isDealerMonitor) {
            cardHandler.addEventListener("BUST-" + betType.getSeatNum() + "-left", function() {
                _hasBustLeft = true
            });
            cardHandler.addEventListener("BUST-" + betType.getSeatNum() + "-right", function() {
                if (_hasBustLeft) that.clearChips()
            })
        } else {
            cardHandler.addEventListener("BUST-" + betType.getSeatNum() + "-left", handleSplitBustLeft);
            cardHandler.addEventListener("BUST-" + betType.getSeatNum() + "-right", handleSplitBustRight)
        }
    }
    if (config.urlParams.gameType === "bjep" && betType.getBetClass() === "hand") {
        innerGetBetAmount = BJEPInnerGetBetAmount
    }
    this.hasDoubledRight = function() {
        return _hasDoubledRight
    };
    this.isRaceTrackSlot = function() {
        return _isRaceTrack
    };
    this.setIsBackBetSlot = function(isBackbet) {
        _isBackBetSlot = isBackbet
    };
    this.setNoBetToolTipText = function(text) {
        _noBetToolTipText = text
    };
    this.setAsSideBet = function(mainBetType) {
        _mainBetType = mainBetType
    };
    this.setSlotChipStyle = function setSlotChipStyle(style) {
        _slotChipStyle = style
    };
    this.setAlertOriantation = function(o) {
        _alertOriantation = o
    };
    this.setTableElement = function setTableElement(te) {
        _tableElement = te
    };
    this.setRummyOutcomeSettled = function setRummyOutcomeSettled() {
        _rummyOutcomeSettled = true
    };
    this.showDragonAlert = function showDragonAlert(hideDragonPayouts) {
        config.setTimeout(function() {
            if (hideDragonPayouts) createAlert("newToolTip", config.getLocale("coming_soon"));
            else createAlert("comingSoonTip", config.getLocale("new_dragon_bets"))
        }, .5)
    };
    this.setIsRaceTrackSlot = function setIsRaceTrackSlot(isRaceTrack) {
        _isRaceTrack = isRaceTrack;
        if (_isRaceTrack) this.onClick = function() {
            console.error("Error clicking events shouldn't be passed to racetrack slots.")
        }
    };
    this.bjepConfirmedCallBack = function bjepConfirmedCallBack(betType, amount) {
        var isPending = _pendingAmount > 0,
            isDouble = betType.isDouble();
        if (isDouble) amount = amount / 2;
        if (isPending) {
            config.setTimeout(displayAlert, 2);
            displayChipStack(slotElement, config.getChipStack(_pendingAmount), isPending, betType, "chipStack")
        } else {
            if (amount === betType.getMaxLimit() && _otherPlayersBetAmount === 0) displayAlert();
            _hasSplit = betType.isSplitRight() || betType.isSplitLeft();
            if (_hasSplit || isDouble) $(slotElement).addClass("doubleOrSplit");
            if (betType.isSplitRight()) {
                displayChipStack(slotElement, config.getChipStack(amount), false, betType, "doubleOrSplitChipStack");
                applyStyleToChipStack(that.chipStacks.doubleOrSplitChipStack, "chipSplitRight");
                if (isDouble) {
                    _hasDoubledRight = true;
                    displayChipStack(slotElement, config.getChipStack(amount), false, betType, "splitAndDoubleChipStack1");
                    applyStyleToChipStack(that.chipStacks.splitAndDoubleChipStack1, "chipSplitRight");
                    applyStyleToChipStack(that.chipStacks.splitAndDoubleChipStack1, "chipDoubleDown");
                    applyStyleToChipStack(that.chipStacks.doubleOrSplitChipStack, "chipDoubleUp")
                }
            } else if (betType.isSplitLeft()) {
                displayChipStack(slotElement, config.getChipStack(amount), false, betType, "chipStack");
                applyStyleToChipStack(that.chipStacks.chipStack, "chipSplitLeft");
                if (isDouble) {
                    _hasDoubledRight = true;
                    var stack = "splitAndDoubleChipStack1";
                    if (_hasDoubledRight) stack = "splitAndDoubleChipStack2";
                    displayChipStack(slotElement, config.getChipStack(amount), false, betType, stack);
                    applyStyleToChipStack(that.chipStacks[stack], "chipSplitLeft");
                    applyStyleToChipStack(that.chipStacks[stack], "chipDoubleDown");
                    applyStyleToChipStack(that.chipStacks.chipStack, "chipDoubleUp")
                }
            } else {
                displayChipStack(slotElement, config.getChipStack(amount), false, betType, "chipStack");
                if (isDouble) {
                    displayChipStack(slotElement, config.getChipStack(amount), false, betType, "doubleOrSplitChipStack");
                    applyStyleToChipStack(that.chipStacks.doubleOrSplitChipStack, "chipDoubleDown");
                    applyStyleToChipStack(that.chipStacks.chipStack, "chipDoubleUp")
                }
            }
        }
    };
    this.betConfirmedCallBack = function betConfirmedCallBack(betObj, amountOverride) {
        var chipStack;
        var isPending = false;
        if (_pendingAmount > 0) {
            chipStack = config.getChipStack(_pendingAmount);
            isPending = true;
            config.setTimeout(displayAlert, 2)
        } else {
            var mo = _isMouseOver;
            that.clearChips();
            _isMouseOver = mo;
            var amount = getAmount(amountOverride);
            chipStack = config.getChipStack(amount);
            if (amount === betType.getMaxLimit() && _otherPlayersBetAmount === 0) displayAlert();
            if (_isBackBetSlot) {
                if (_isFullScreenBJC) {
                    betArea.getSeat(betType.getSeatNum()).toggleBackBetMode(true)
                } else {
                    if (!model.isBackBettingOn()) return
                }
            }
        }
        displayChipStack(slotElement, chipStack, isPending, betType, "chipStack");
        if (_isMouseOver) displayAlert()
    };
    this.splitCallBack = function splitCallBack(amount) {
        if (model.getBetAmount(betType) !== amount * 2) config.sendError("Error: increment bet (split) amount didn't match the original amount.");
        _hasSplit = true;
        $(slotElement).addClass("doubleOrSplit");
        var chips = config.getChipStack(amount);
        displayChipStack(slotElement, chips, false, betType, "doubleOrSplitChipStack");
        $(".bjcMainChipLoc0").css("text-indent");
        applyStyleToChipStack(that.chipStacks.doubleOrSplitChipStack, "chipSplitRight");
        applyStyleToChipStack(that.chipStacks.chipStack, "chipSplitLeft")
    };

    function handleSplitBustRight() {
        that.clearChips("doubleOrSplitChipStack");
        if (_hasDoubledRight) that.clearChips("splitAndDoubleChipStack1")
    }

    function handleSplitBustLeft() {
        that.clearChips("chipStack");
        if (_hasDoubledRight && _hasDoubledLeft) that.clearChips("splitAndDoubleChipStack2");
        else if (_hasDoubledLeft) that.clearChips("splitAndDoubleChipStack1")
    }
    this.updateDoubleSplitChips = function updateDoubleSplitChips(totalMainBetAmount, isSplitHand, doubleResult) {
        if (!isSplitHand && !doubleResult.hand) return;
        this.clearChips();
        $(slotElement).addClass("doubleOrSplit");
        var amount;
        if (isSplitHand && !doubleResult.hand || !isSplitHand && doubleResult.hand) amount = totalMainBetAmount / 2;
        else if (isSplitHand && doubleResult.left && doubleResult.right) amount = totalMainBetAmount / 4;
        else if (isSplitHand && doubleResult.hand) amount = totalMainBetAmount / 3;
        var chips = config.getChipStack(amount);
        displayChipStack(slotElement, chips, false, betType, "chipStack");
        if (isSplitHand) that.splitCallBack(amount);
        if (doubleResult.right) that.doubleCallBack(amount, "Right");
        if (doubleResult.left || doubleResult.hand && !isSplitHand) that.doubleCallBack(amount, "Left")
    };
    this.doubleCallBack = function doubleCallBack(amount, hand) {
        if (model.getBetAmount(betType) !== amount * 2 && that.chipStacks.doubleOrSplitChipStack.length === 0) config.sendError("Error: increment bet (double) amount didn't match the original amount.");
        $(slotElement).addClass("doubleOrSplit");
        var chipStack = "doubleOrSplitChipStack";
        var style = "chipDouble";
        var leftOrRight = "";
        if (_hasSplit && _hasDoubledRight) chipStack = "splitAndDoubleChipStack2";
        else if (_hasSplit) chipStack = "splitAndDoubleChipStack1";
        if (_hasSplit) leftOrRight = "chipSplit" + hand;
        var chips = config.getChipStack(amount);
        displayChipStack(slotElement, chips, false, betType, chipStack);
        $("#pairsSlot4").css("text-indent");
        $(".bjcMainChipLoc0").css("text-indent");
        if (hand === "Right") {
            _hasDoubledRight = true;
            applyStyleToChipStack(that.chipStacks.doubleOrSplitChipStack, style + "Up")
        } else {
            _hasDoubledLeft = true;
            applyStyleToChipStack(that.chipStacks.chipStack, style + "Up")
        }
        applyStyleToChipStack(that.chipStacks[chipStack], style + "Down");
        applyStyleToChipStack(that.chipStacks[chipStack], leftOrRight)
    };

    function applyStyleToChipStack(chipStack, style) {
        _.forEach(chipStack, function(chip) {
            $(chip).addClass(style)
        })
    }

    function innerGetBetAmount() {
        return model.getBetAmount(betType)
    }

    function BJEPInnerGetBetAmount() {
        return model.getBJEPAmountForSlot(betType)
    }

    function getAmount(amountOverride) {
        var amount;
        if (amountOverride === undefined) {
            amount = innerGetBetAmount();
            _otherPlayersBetAmount = 0;
            return amount
        }
        if (amountOverride !== 0) {
            amountOverride = Math.min(betType.getMaxLimit(), amountOverride);
            amountOverride = Math.max(betType.getMinLimit(), amountOverride)
        }
        _otherPlayersBetAmount = amountOverride;
        amount = amountOverride;
        return amount
    }
    this.getAmount = getAmount;
    this.setAlertOffset = function(alertOffset) {
        _alertOffset = alertOffset
    };
    this.glowChipStack = function() {
        for (var key in that.chipStacks) {
            var stack = that.chipStacks[key];
            for (var j = 0; j < stack.length; j++) {
                $(stack[j]).addClass("glowEffect")
            }
        }
    };
    this.hideChipStack = function(displayStyle) {
        for (var key in that.chipStacks) {
            var stack = that.chipStacks[key];
            for (var j = 0; j < stack.length; j++) {
                stack[j].style.display = displayStyle
            }
        }
    };
    this.onClick = function(amount) {
        if (!validateActive()) return;
        if (!isSideBetValid()) return;
        config.playChipSound();
        incrementBet(amount);
        if (_pendingAmount > 0) that.betConfirmedCallBack()
    };
    this.onMouseEnter = function() {
        _isMouseOver = true;
        betArea.highlightNeighbors(betType, true, _isRaceTrack);
        displayAlert()
    };
    this.onMouseExit = function() {
        _isMouseOver = false;
        betArea.highlightNeighbors(betType, false, _isRaceTrack);
        hideAlert()
    };
    this.clearChips = function(chipStackName) {
        var j;
        if (chipStackName !== undefined) {
            if (that.chipStacks[chipStackName] === undefined) return;
            for (j = 0; j < that.chipStacks[chipStackName].length; j++) {
                try {
                    that.chipStacks[chipStackName][j].parentNode.removeChild(that.chipStacks[chipStackName][j])
                } catch (e) {
                    console.log("Error removing chip stack ok in dm because of Surrender.")
                }
            }
            that.chipStacks[chipStackName].length = 0;
            return
        }
        if (that.slotStyle == "jackpotSlot") {
            $(slotElement).removeClass("jackpotSlotIconActive");
            $(slotElement).addClass("jackpotSlotIcon")
        }
        for (var key in that.chipStacks) {
            var stack = that.chipStacks[key];
            for (j = 0; j < stack.length; j++) {
                try {
                    stack[j].parentNode.removeChild(stack[j])
                } catch (e) {
                    console.log("Error removing chips ok in DM because of Surrender")
                }
            }
            stack.length = 0
        }
        _pendingAmount = 0;
        this.onMouseExit()
    };
    this.clearPendingChips = function() {
        if (_pendingAmount > 0) that.clearChips();
        _pendingAmount = 0;
        hideAlert()
    };
    this.endOfGame = function() {
        that.clearChips();
        _pendingAmount = 0;
        _rummyOutcomeSettled = false;
        _hasSplit = false;
        _hasDoubledLeft = false;
        _hasDoubledRight = false;
        _hasBustLeft = false;
        $(slotElement).removeClass("doubleOrSplit");
        hideAlert()
    };

    function doDisplayAlert() {
        if (config.urlParams.gameType !== "bjclassic") return true;
        return _pendingAmount > 0 || model.getBetAmount(that.betType) > 0
    }

    function displayAlert() {
        var bgImageStyle = "normalToolTip";
        var amount = 0;
        var text;
        if (_pendingAmount > 0) {
            bgImageStyle = "warningToolTip";
            text = config.getLocale("min");
            amount = betType.getMinLimit()
        } else if (_isMouseOver === false) return;
        else {
            amount = innerGetBetAmount()
        }
        if (amount === betType.getMaxLimit()) {
            bgImageStyle = "warningToolTip";
            text = config.getLocale("max")
        } else if (_pendingAmount <= 0) text = config.getLocale("bet");
        if (amount > 0) {
            if (that.slotStyle == "jackpotSlot") createAlert(bgImageStyle, "Jackpot active, good luck!");
            else createAlert(bgImageStyle, that.getAlertText(text, amount, slotLabel))
        } else if (_otherPlayersBetAmount > 0) {} else if (_noBetToolTipText) {
            createAlert(bgImageStyle, _noBetToolTipText)
        } else if (_toolTip !== undefined) {
            $("#" + _toolTip.id).hide()
        }
    }
    this.getAlertText = function(text, amount, slotLabel) {
        if (text === config.getLocale("bet")) text = slotLabel + " $";
        else text += " $";
        return text + amount
    };

    function createAlert(bgImageStyle, text) {
        if (_toolTip === undefined) {
            _toolTip = document.createElement("div");
            _toolTip.id = "toolTip-" + betType.getId();
            $(_tableElement).append(_toolTip)
        }
        _toolTip.className = "toolTip " + bgImageStyle;
        _toolTip.innerHTML = text;
        $(_toolTip).show();
        var targetElement = slotElement;
        if (that.chipStacks.chipStack.length > 0 && _slotChipStyle != "jackpotSlot") targetElement = that.chipStacks.chipStack[0];
        if (_alertOriantation === "right") {
            $(_toolTip).addClass("right");
            new Tether({
                element: _toolTip,
                target: targetElement,
                attachment: "middle left",
                targetAttachment: "middle right"
            })
        } else {
            new Tether({
                element: _toolTip,
                target: targetElement,
                attachment: "bottom middle",
                targetAttachment: "top middle"
            })
        }
    }

    function hideAlert() {
        if (_toolTip !== undefined) {
            if (_toolTip.innerHTML === config.getLocale("coming_soon") || _toolTip.innerHTML === config.getLocale("new_dragon_bets")) return;
            $(_toolTip).hide()
        }
    }

    function validateActive() {
        var valid = config.isBetTypeValid(that.betTypeId);
        if (!valid) createAlert("warningToolTip", config.getLocale("blockedBetType", "This bet type is disabled"));
        return valid
    }

    function isSideBetValid() {
        if (_mainBetType === undefined) return true;
        var isFunUser = config.urlParams.currency.toLowerCase() === "fun";
        if (isFunUser && betType.getBetClass() === "tipbet") {
            createAlert("warningToolTip", config.getLocale("depositMoneyWarning", "Please deposit money to activate this feature"));
            return false
        }
        if (betType.getBetClass() === "tipbet" && betArea.getSeat(betType.getSeatNum()).isBackbettingOn()) return true;
        if (model.getBetAmount(_mainBetType) > 0) return true;
        createAlert("warningToolTip", config.getLocale("mainBetFirstWarning", "Place main bet first"));
        return false
    }

    function incrementBet(betIncrement) {
        if (betIncrement <= 0) return 0;
        if (model.getCurrentBalance() <= 0) {
            config.displayAlert(config.getLocale("client_alert_title_info", "Info:"), config.getLocale("insufficient_funds", "Insufficient funds to bet"), config.getLocale("okLabel", "OK"), config.closeAlert);
            return 0
        }
        if (_betLimitMax === undefined) {
            _betLimitMax = betType.getMaxLimit();
            _betLimitMin = betType.getMinLimit()
        }
        betIncrement = _pendingAmount + betIncrement;
        var initialBetAmout = model.getBetAmount(betType) + model.getPendingBetAmount(betType);
        var totalAmount = initialBetAmout + betIncrement;
        if (totalAmount > _betLimitMax) {
            totalAmount = _betLimitMax;
            betIncrement = Math.max(0, _betLimitMax - initialBetAmout)
        }
        if (totalAmount + 1e-6 < _betLimitMin) {
            _pendingAmount = totalAmount
        } else {
            if (model.getCurrentBalance() < betIncrement) {
                betIncrement = model.getCurrentBalance()
            }
            if (betIncrement === 0) return betIncrement;
            that.clearPendingChips();
            model.placeBet(betType, betIncrement, that.betConfirmedCallBack)
        }
        return betIncrement
    }

    function displayChipStack(parent, chips, isPending, bt, chipStackName) {
        that.clearChips(chipStackName);
        displayChipStackInner(parent, chips, isPending, bt.getId());
        for (var i = 0; i < chips.length; i++) that.chipStacks[chipStackName].push(chips[i])
    }

    function displayChipStackInner(parent, chips, isPending, chipId) {
        if (_slotChipStyle === undefined) {
            config.displayChipStack(parent, chips, isPending, chipId);
            return
        } else if (_slotChipStyle == "jackpotSlot") {
            $(slotElement).removeClass("jackpotSlotIcon");
            $(slotElement).removeClass("jackpotSlotIconActive");
            if (chips.length > 0) {
                $(slotElement).addClass("jackpotSlotIconActive")
            } else {
                $(slotElement).addClass("jackpotSlotIcon")
            }
            return
        }
        var backbetChipStyle = "";
        if (_isBackBetSlot) backbetChipStyle = "backbetSlot";
        var isBJC = config.urlParams.gameType === "bjclassic";
        for (var i = 0; i < chips.length; i++) {
            $(chips[i]).addClass(_slotChipStyle + i + " " + backbetChipStyle);
            if (_rummyOutcomeSettled) $(chips[i]).addClass(_slotChipStyle + "Centered" + i);
            chips[i].id = "chip" + i + "-" + chipId;
            if (isBJC && betTypes.mainBets.indexOf(that.betTypeId) !== -1) {
                var seatNum = that.betType.getSeatNum();
                if (config.getIsGoldMainChip(seatNum)) {
                    $(chips[i]).addClass("tipChip")
                }
            }
            if (isPending === true) $(chips[i]).addClass("chipPending");
            parent.parentNode.appendChild(chips[i])
        }
    }
};
VIVO.namespace("ui.Sound");
VIVO.ui.Sound = function() {
    "use strict";
    var _soundIssuesReported = false;
    var clickSound = new Howl({
        urls: ["resources/sounds/placeChip.ogg", "resources/sounds/placeChip.mp3", "resources/sounds/placeChip.wav"]
    });

    function play() {
        try {
            clickSound.stop();
            clickSound.play();
            console.log("Chip sound playing.")
        } catch (error) {
            if (!_soundIssuesReported) {
                sendError("Error playing sound " + error);
                _soundIssuesReported = true
            }
        }
    }
    return {
        play: play
    }
};
VIVO.namespace("ui.DealerPanel");
VIVO.ui.DealerPanel = function(vivo, roulette) {
    "use strict";
    var ws = vivo.ws,
        messages = vivo.ws.messageTypes,
        config = vivo.model.config,
        model = vivo.model.state,
        betTypes = vivo.model.BetTypes,
        _dealerName, _dealerAlias, _dealerImagePath = config.getDealerImagePath();
    model.addEventListener(model.GAME_STARTED, onGameStarted);
    model.addEventListener(model.DEALER_UPDATE_EVENT, onDealerNameChanged);

    function onGameStarted(e) {
        updateDealerName();
        setText(_dealerAlias, model.getGameId())
    }

    function onDealerNameChanged(e) {
        updateDealerName()
    }

    function setText(dealerName, GameId) {
        $("#dealerNameGNText").html(dealerName + "<br/>" + GameId)
    }

    function updateDealerName() {
        var dn = model.getDealerName();
        if (_dealerName === dn) return;
        _dealerName = dn;
        var dnArray = dn.split(" ");
        _dealerAlias = dnArray[0];
        setText(_dealerAlias, model.getGameId());
        if (dnArray[0] === "Autoplay") dnArray[0] = "default";
        var imagePath = _dealerImagePath + dnArray[0].toLowerCase();
        if (dnArray.length >= 2) {
            imagePath += "_" + name_parts[1].toLowerCase()
        }
        imagePath += ".png";
        $("#fsDealerImage").empty();
        $("#fsDealerImage").html("<div style='background-image: url(" + imagePath + "); width: 2.3em; height: 2.3em; background-size: 100% 100%;'></div>")
    }
};
VIVO.namespace("ui.FSNewsTicker");
VIVO.ui.FSNewsTicker = function(vivo, frame, isAboveVideo) {
    "use strict";
    var ws = vivo.ws,
        messages = vivo.ws.messageTypes,
        model = vivo.model.state,
        config = vivo.model.config,
        nt = $("#newsTicker"),
        messageQueue = [],
        MESSAGE_DELIMITER = "&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;",
        messageText = "",
        isAnimationPlaying = false,
        marqueeConfig = {
            duration: 12e3
        },
        TIP_LEVEL = 1;
    ws.addEventListener(messages.ClientNewsEvent, onNewsEvent);
    ws.addEventListener(messages.ClientDeleteNewsEvent, onDeleteNewsEvent);
    nt.on("finished", onAnimationFinished);
    model.addEventListener(model.HEART_BEAT_EVENT, _.throttle(displayMessages, 3e4, {
        trailing: true
    }));

    function onNewsEvent(e) {
        var newsEvent = e.data.ClientNewsEvent;
        var currDate = new Date;
        console.log("NewsTicker.onNewsEvent currDate=" + currDate + " currTime=" + currDate.getTime() + " publishDate:" + new Date(newsEvent.publishTime) + ", expireDate:" + new Date(newsEvent.expireTime));
        if ((new Date).getTime() > newsEvent.expireTime) return;
        messageQueue.push(newsEvent);
        if (isAnimationPlaying) {
            newsEvent.numberOfIterations++;
            return
        }
        _.debounce(displayMessages, 100, false)()
    }

    function displayMessages() {
        if (isAnimationPlaying) return;
        if (messageQueue.length === 0) return;
        var time = (new Date).getTime();
        updateMessageText(time)
    }

    function onAnimationFinished() {
        var time = (new Date).getTime(),
            len = messageQueue.length;
        _.remove(messageQueue, function(newsEvent) {
            var remove = time > newsEvent.expireTime && newsEvent.level !== TIP_LEVEL;
            newsEvent.numberOfIterations--;
            return remove || newsEvent.numberOfIterations <= 0
        });
        updateMessageText(time)
    }

    function updateMessageText(time) {
        var validMessages = _.filter(messageQueue, function(newsEvent) {
            return newsEvent.publishTime < time || newsEvent.level === TIP_LEVEL
        });
        var messageArray = new Array(validMessages.length);
        for (var i = 0; i < validMessages.length; i++) {
            if (validMessages[i].level === TIP_LEVEL) messageArray[i] = '<font color="red">' + validMessages[i].htmlText + "</font>";
            else if (i % 2 !== 0) messageArray[i] = '<font color="#fdb913">' + validMessages[i].htmlText + "</font>";
            else messageArray[i] = validMessages[i].htmlText
        }
        isAnimationPlaying = messageArray.length > 0;
        messageText = messageArray.join(MESSAGE_DELIMITER);
        nt.html(messageText);
        if (messageArray.length > 0) nt.marquee(marqueeConfig)
    }

    function onDeleteNewsEvent(e) {
        var GUIDtoRemove = e.data.ClientDeleteNewsEvent.GUID;
        _.remove(messageQueue, {
            GUID: GUIDtoRemove
        })
    }
};
(function(global) {
    "use strict";
    var HandScore = function() {
        function HandScore(cards) {
            this.cards = cards.map(function(c) {
                return c.toUpperCase()
            })
        }
        HandScore.getCardScore = function(card, total) {
            var cardIndex = card[0];
            switch (cardIndex) {
                case "A":
                    console.log("total: " + total);
                    if (total + 11 > 21) return 1;
                    return 11;
                case "1":
                case "J":
                case "Q":
                case "K":
                    return 10;
                default:
                    return parseInt(cardIndex, 10)
            }
        };
        HandScore.getHandOne = function(cards) {
            return _.filter(cards, function(c) {
                return c.indexOf("2.") === -1
            })
        };
        HandScore.getHandTwo = function(cards) {
            return _.filter(cards, function(c) {
                return c.indexOf("2.") !== -1
            })
        };
        HandScore.getHandScore = function(hand) {
            var score = 0;
            hand.sort(function(a, b) {
                if (a[0] === "A" && b[0] === "A") return 0;
                else if (a[0] === "A") return 1;
                else if (b[0] === "A") return -1;
                else return 0
            });
            console.log("hand:" + JSON.stringify(hand));
            _.forEach(hand, function(c) {
                score += HandScore.getCardScore(c, score)
            });
            return score
        };
        HandScore.prototype.getScore = function() {
            var h1 = HandScore.getHandOne(this.cards),
                h2 = HandScore.getHandTwo(this.cards),
                score = "";
            if (h2.length > 0) return HandScore.getHandScore(h2) + "|" + HandScore.getHandScore(h1);
            else return HandScore.getHandScore(h1) + ""
        };
        return HandScore
    }();
    global.HandScore = HandScore
})(this);
VIVO.namespace("ui.Video");
VIVO.ui.Video = function(vivo, frame, autoplay, noTimeOut) {
    "use strict";
    var ws = vivo.ws,
        messages = vivo.ws.messageTypes,
        model = vivo.model.state,
        config = vivo.model.config,
        _winkVideoObject, _htmlVideoElement, _videoWebSocket, _audioWebSocket, _interactionTimer, _userIsIdle = true,
        _isAutoPlay = false,
        _isServerConnectionClosed = false,
        _winkMute = false,
        _winkPlaying = true,
        _winkVolumeButton, _initialWinkVolume = 50,
        _winkVideoStream, _winkPlayPauseButton, _winkCookies, _hlsCustomControls, RIGHT_ARROW = String.fromCharCode(9658),
        PAUSE = "||",
        _tableId = config.urlParams.tableId;
    if (autoplay !== undefined) {
        model.addEventListener(model.DEALER_UPDATE_EVENT, onDealerNameChanged);
        model.addEventListener(model.FS_CONFIG_CHANGED, onDealerNameChanged)
    }
    model.addEventListener(model.PLAYER_INTERACTION_EVENT, onPlayerInteraction);
    ws.addEventListener(messages.ConnectionClosed, onServerConnectionClosed);
    $("#videoWrapper").on("click", function() {
        onPlayerInteraction(true)
    });
    onPlayerInteraction(false);

    function placeTipSlot(autoplay) {
        var seatConfig = config.getConfigParam("bjcSeatPositions");
        if (seatConfig !== undefined) {
            var sConfig;
            if (!autoplay) sConfig = seatConfig[config.urlParams.tableId];
            else sConfig = seatConfig.autoplay;
            if (sConfig !== undefined) {
                console.log("Slot locations defined for " + config.urlParams.tableId);
                var tipSlotX = 22;
                var tipSlotY = 52;
                if (sConfig.tipSlot !== undefined && sConfig.tipSlot.x !== undefined && sConfig.tipSlot.y !== undefined) {
                    tipSlotX = sConfig.tipSlot.x;
                    tipSlotY = sConfig.tipSlot.y
                }
                $("#fsTipWrapper").css("top", tipSlotY + "%");
                $("#fsTipWrapper").css("left", tipSlotX + "%")
            }
        }
    }

    function onDealerNameChanged() {
        var oldValue = _isAutoPlay;
        _isAutoPlay = model.getDealerName().toLowerCase() === "autoplay" || !model.showVideo();
        if (oldValue !== _isAutoPlay) {
            if (!_isAutoPlay) {
                autoplay.hide();
                loadVideo(false);
                $("#betArea, #dealerHand").addClass("videoMode").removeClass("autoplayMode");
                placeTipSlot(false)
            } else {
                clearVideo();
                autoplay.show();
                $("#betArea, #dealerHand").removeClass("videoMode").addClass("autoplayMode");
                placeTipSlot(true)
            }
        }
    }

    function loadWinkVideo() {
        if (config.isFlashSupported) loadWinkVideoSWFObject();
        else {
            $("#videoWrapper").empty().removeClass("loaded");
            $("#videoWrapper").css({
                opacity: "1"
            });
            var winkWrapper = document.createElement("div");
            winkWrapper.id = "winkWrapper";
            $(winkWrapper).addClass("winkWrapper");
            $("#videoWrapper").append(winkWrapper);
            var htmlCode = '<object type="application/x-shockwave-flash" ' + 'data="' + config.getConfigParam("winkVideo").winkWrapper + '" width="100%" height="100%" ' + 'id="videoElem" style="visibility:visible;">' + '<param name="scale" value="exactFit">' + '<param name="wmode" value="opaque">' + '<param name="allowscriptaccess" value="always">' + '<a href="http://www.adobe.com/go/getflash">' + '<img src="resources/html5Images/getflash.png" alt="Get Flash"></img></a></object>';
            $("#winkWrapper").html(htmlCode)
        }
    }

    function loadWinkVideoSWFObject() {
        console.log("Load Wink Vid SWF Object");
        $("#videoWrapper").empty().removeClass("loaded");
        $("#videoWrapper").css({
            opacity: "1"
        });
        var videoURL = config.getConfigParam("winkVideo")[_tableId];
        if (config.getConfigParam("winkVideo")[_tableId] === undefined) config.displayAlertAndClose("Check wink video is configured in the AppConfig.json for this table '" + _tableId + "'");
        config.sendLog("1015", "Video connect started (Wink) url:" + videoURL);
        var winkWrapper = document.createElement("div");
        winkWrapper.id = "winkWrapper";
        $(winkWrapper).addClass("winkWrapper");
        var videoElem = document.createElement("div");
        videoElem.id = "videoElem";
        winkWrapper.appendChild(videoElem);
        $("#videoWrapper").append(winkWrapper);
        swfobject.embedSWF(config.getConfigParam("winkVideo").winkWrapper, "videoElem", "100%", "100%", "9.0.0", undefined, {}, {
            scale: "exactFit",
            wmode: "opaque",
            allowscriptaccess: "always"
        }, {}, onflashVideoLoaded);
        window.swfWrapperLoaded = swfWrapperLoaded;
        window.winkVideoLoaded = winkVideoLoaded
    }

    function swfWrapperLoaded(winkCookies) {
        _winkCookies = winkCookies;
        var videoURL = config.getConfigParam("winkVideo")[_tableId];
        var app = $("#videoElem").get(0);
        var absolutePath = location.protocol + "//" + location.host + "/" + location.pathname.replace(/[^\/]*$/, "") + videoURL;
        _initialWinkVolume = 50;
        if (_winkCookies && _winkCookies.key_volume) {
            _initialWinkVolume = parseInt(_winkCookies.key_volume, 10);
            if (_initialWinkVolume === 0) _winkMute = true
        }
        app.loadVideo(absolutePath)
    }

    function winkVideoLoaded() {
        config.sendLog("1020", "Wink flash object loaded");
        setupWinkControls();
        $("#videoWrapper").addClass("loaded")
    }

    function setupWinkControls() {
        var section = document.createElement("section"),
            controlsWrapper = document.createElement("div"),
            tooltip = document.createElement("tooltip"),
            slider = document.createElement("div"),
            volumeButton = document.createElement("span"),
            playPause = document.createElement("div"),
            swfApp = $("#videoElem").get(0);
        $("#winkWrapper").append(controlsWrapper);
        controlsWrapper.appendChild(playPause);
        controlsWrapper.appendChild(section);
        section.appendChild(tooltip);
        section.appendChild(slider);
        section.appendChild(volumeButton);
        slider.id = "winkVolumnSlider";
        tooltip.id = "winkVolumnToolTip";
        volumeButton.id = "winkVolumnButton";
        playPause.id = "winkPlayPause";
        controlsWrapper.id = "winkControlsWrapper";
        $(controlsWrapper).addClass("winkControlsWrapper");
        $(section).addClass("winkVolumnControls");
        $(tooltip).addClass("winkVolumnToolTip");
        $(slider).addClass("winkVolumnSlider");
        $(volumeButton).addClass("winkVolumnButton");
        $(playPause).addClass("winkPlayPause");
        $(tooltip).hide();
        _winkVolumeButton = $(volumeButton);
        _winkPlayPauseButton = $(playPause);
        setPlayPauseSymbol();
        setMuteButtonBackground();
        _winkVolumeButton.on("click", function() {
            if (_winkMute) swfApp.unmute();
            else swfApp.mute();
            _winkMute = !_winkMute;
            setMuteButtonBackground()
        });
        _winkPlayPauseButton.on("click", function() {
            if (_winkPlaying) swfApp.pause();
            else swfApp.play();
            _winkPlaying = !_winkPlaying;
            setPlayPauseSymbol()
        });
        var vol = 50;
        if (_initialWinkVolume !== 0) vol = _initialWinkVolume;
        $(slider).slider({
            range: "min",
            min: 0,
            value: vol,
            start: function(event, ui) {
                $(tooltip).fadeIn("fast")
            },
            change: function(event, ui) {
                var value = $(slider).slider("value");
                swfApp.setVolume(value);
                setVolumeImage(value)
            },
            slide: function(event, ui) {
                var value = $(slider).slider("value");
                swfApp.setVolume(value);
                setVolumeImage(value);
                $(tooltip).css("left", value).text(ui.value)
            },
            stop: function(event, ui) {
                $(tooltip).fadeOut("fast")
            }
        });
        $("#winkWrapper").append(controlsWrapper)
    }

    function setupHLSControls() {
        var html = '<div id="winkControlsWrapper" class="winkControlsWrapper">' + '	<div id="winkPlayPause" class="winkPlayPause">||</div>' + '	<section class="winkVolumnControls">' + '		<tooltip id="winkVolumnToolTip" class="winkVolumnToolTip" style="display: none;"></tooltip>' + '		<div id="winkVolumnSlider" class="winkVolumnSlider"></div>' + '		<span id="winkVolumnButton" class="winkVolumnButton"></span>' + "	</section>" + '	<div id="bbVideoStream" class="videoStreamButton"></div>' + '	<div id="videoStreamPopup" class="videoStreamPopup">' + '	<ul id="videoStreamList" class="videoStreamList">' + '		<li><a data-stream="play">Auto</a></li>' + '		<li><a data-stream="plhi">High</a></li>' + '		<li><a data-stream="plmedium">Medium</a></li>' + '		<li><a data-stream="pllow">Low</a></li>' + "	</ul>" + "	</div>" + '	<div id="bbFullScreen" class="fullScreenButton">[ ]</div>' + "</div>";
        _winkMute = false;
        _winkPlaying = false;
        $("#videoWrapper").append(html);
        _winkVolumeButton = $("#winkVolumnButton");
        _winkPlayPauseButton = $("#winkPlayPause");
        var $tooltip = $("#winkVolumnToolTip");
        setPlayPauseSymbol();
        _winkVolumeButton.on("click", function() {
            config.sendError("winkVolumeButton clicked!!");
            if (_winkMute) {
                _htmlVideoElement.muted = false;
                _htmlVideoElement.volume = 1
            } else {
                _htmlVideoElement.muted = true;
                _htmlVideoElement.volume = 0;
                config.sendError("winkVolumeButton clicked set video muted = " + _htmlVideoElement.muted)
            }
            _winkMute = !_winkMute;
            setMuteButtonBackground()
        });
        _winkPlayPauseButton.on("click", function() {
            config.sendError("winkPlayPauseButton clicked!!");
            if (_winkPlaying) $(_htmlVideoElement).get(0).pause();
            else $(_htmlVideoElement).get(0).play();
            _winkPlaying = !_winkPlaying;
            setPlayPauseSymbol()
        });
        $("#bbVideoStream").on("click", function(e) {
            $("#videoStreamPopup").toggle()
        });
        $("#bbFullScreen").on("click", function(e) {
            config.sendError("bbFullScreen click");
            html5ToggleFullScreen(_htmlVideoElement);
            config.sendError("bbFullScreen finished..")
        });
        $("#videoStreamList a").on("click", function(e) {
            try {
                config.sendError("on li click");
                var selectedStream = $(e.target).data("stream");
                var currentSrc = _htmlVideoElement.firstChild.src;
                var newSrc = currentSrc.replace(/play.m3u8|pllow.m3u8|plhi.m3u8|plmedium.m3u8/, selectedStream + ".m3u8");
                _htmlVideoElement.firstChild.src = newSrc;
                _htmlVideoElement.load();
                _htmlVideoElement.play();
                $("#videoStreamPopup").hide()
            } catch (error) {
                config.sendError("Error changing hls streams: " + JSON.stringify(error))
            }
        });
        $("#winkVolumnSlider").slider({
            range: false,
            min: 0,
            max: 100,
            value: 50,
            start: function(event, ui) {
                $tooltip.fadeIn("fast")
            },
            change: function(event, ui) {
                var value = $(slider).slider("value");
                _htmlVideoElement.volume(value / 100)
            },
            slide: function(event, ui) {
                $tooltip.css("left", ui.value).text(ui.value)
            },
            stop: function(event, ui) {
                $tooltip.fadeOut("fast")
            }
        })
    }

    function html5ToggleFullScreen(vid) {
        if (vid.requestFullScreen) {
            config.sendError("vid.requestFullScreen(); called..");
            vid.requestFullScreen()
        } else if (vid.webkitRequestFullScreen) {
            config.sendError("vid.webkitRequestFullScreen(); called..");
            vid.webkitRequestFullScreen()
        } else if (vid.webkitEnterFullScreen) {
            config.sendError("vid.webkitEnterFullScreen(); called..");
            vid.webkitEnterFullScreen()
        } else if (vid.mozRequestFullScreen) {
            config.sendError("vid.mozRequestFullScreen(); called..");
            vid.mozRequestFullScreen()
        }
    }

    function setMuteButtonBackground() {
        if (_winkMute) _winkVolumeButton.addClass("winkVolumnButtomMute");
        else _winkVolumeButton.removeClass("winkVolumnButtomMute")
    }

    function setPlayPauseSymbol() {
        if (_winkPlaying) {
            _winkPlayPauseButton.text(PAUSE);
            _winkPlayPauseButton.removeClass("winkPlayButton")
        } else {
            _winkPlayPauseButton.text(RIGHT_ARROW);
            _winkPlayPauseButton.addClass("winkPlayButton")
        }
    }

    function setVolumeImage(value) {
        setMuteButtonBackground()
    }

    function onflashVideoLoaded(e) {
        if (e.success) {
            _winkVideoObject = e.ref
        } else config.sendError("Error Wink flash object didn't load")
    }

    function loadWebSocketVideo() {
        clearVideo();
        _htmlVideoElement = document.createElement("canvas");
        _htmlVideoElement.width = 768;
        _htmlVideoElement.height = 432;
        _htmlVideoElement.className = "video";
        var wsVideoConfig = config.getConfigParam("wsVideo")[_tableId];
        var _videoWebSocket = new WebSocket(wsVideoConfig.video);
        var Jsmpeg = jsmpeg;
        var player = new Jsmpeg(_videoWebSocket, {
            canvas: _htmlVideoElement
        });
        var _audioWebSocket = AV.Player.fromWebSocket(wsVideoConfig.audio, "msgToSendOnStartUp");
        _audioWebSocket.play();
        $("#videoWrapper").append(_htmlVideoElement)
    }

    function clearVideo() {
        if (_htmlVideoElement !== undefined && typeof _htmlVideoElement.stop === "function") {
            try {
                _htmlVideoElement.stop();
                config.sendError("Stopped HLSVido!")
            } catch (e) {
                config.sendError("Error stopping HLSVideo " + e)
            }
        }
        if (_videoWebSocket !== undefined) _videoWebSocket.close();
        _videoWebSocket = undefined;
        if (_audioWebSocket !== undefined) _audioWebSocket.stop();
        _audioWebSocket = undefined;
        if (_winkVideoObject !== undefined) swfobject.removeSWF("videoElemFlash");
        $("#videoWrapper").empty();
        _winkVideoObject = undefined
    }

    function loadHLSVideo(isClickEvent) {
        if (config.getConfigParam("HLSVideo")[_tableId] === undefined) config.displayAlertAndClose("Check hls video is configured in the AppConfig.json for this table '" + _tableId + "'");
        _hlsCustomControls = config.getConfigParam("HLSVideo").customControls;
        if (!_hlsCustomControls) _hlsCustomControls = false;
        clearVideo();
        var videoURLs = config.getConfigParam("HLSVideo")[_tableId];
        config.sendLog("1015", "Video connect started (HTML5) url: " + videoURLs[0]);
        _htmlVideoElement = document.createElement("video");
        _htmlVideoElement.oncanplay = function() {
            config.sendError("oncanplay hls video event triggered!");
            _htmlVideoElement.play()
        };
        _htmlVideoElement.autoplay = true;
        _htmlVideoElement.preload = "none";
        if (!_hlsCustomControls) _htmlVideoElement.controls = true;
        _htmlVideoElement.loop = false;
        _htmlVideoElement["webkit-playsinline"] = true;
        _htmlVideoElement.className = "video";
        _winkPlaying = true;
        for (var i = 0; i < videoURLs.length; i++) {
            var source = document.createElement("source");
            source.src = videoURLs[i];
            _htmlVideoElement.appendChild(source)
        }
        $("#videoWrapper").append(_htmlVideoElement);
        if (typeof _htmlVideoElement.load === "function") {
            if (isClickEvent) {
                _htmlVideoElement.load();
                _htmlVideoElement.play()
            } else _winkPlaying = false;
            config.setTimeout(checkHLSVideoLoaded, 2)
        } else console.log("video not supported.");
        if (_hlsCustomControls) setupHLSControls()
    }

    function checkHLSVideoLoaded() {
        if (_htmlVideoElement.networkState === HTMLMediaElement.NETWORK_LOADING) config.setTimeout(checkHLSVideoLoaded, 2);
        else if (_htmlVideoElement.networkState === HTMLMediaElement.NETWORK_NO_SOURCE) config.sendError("Error HTML5 video didn't load normally because its not supported.");
        else config.setTimeout(checkHLSVideoLoaded, 2)
    }

    function onPlayerInteraction(isClickEvent) {
        if (_isAutoPlay) return;
        if (_interactionTimer !== undefined) config.clearInterval(_interactionTimer);
        if (config.isDealerMonitor === false && (noTimeOut === undefined || noTimeOut === false)) _interactionTimer = config.setTimeout(onUserIdle, config.getConfigParam("videoTimeoutSec"));
        if (_userIsIdle) {
            _userIsIdle = false;
            loadVideo(isClickEvent)
        }
    }

    function loadVideo(isClickEvent) {
        $("#betArea, #dealerHand").addClass("videoMode");
        placeTipSlot(false);
        if (config.isMobile) loadHLSVideo(isClickEvent);
        else loadWinkVideo()
    }

    function onServerConnectionClosed(e) {
        _isServerConnectionClosed = true;
        onUserIdle()
    }

    function onUserIdle() {
        if (_isAutoPlay) return;
        if (model.getBetAmount() <= 0 || _isServerConnectionClosed) {
            clearVideo();
            if (!noTimeOut) $("#videoWrapper").html('<br/><br/><br/><div class="videoIdleText">' + config.getLocale("video_timeout_message").replace(/\\n/g, "<br/>") + "</div>");
            _userIsIdle = true
        } else onPlayerInteraction(false)
    }
};
VIVO.namespace("utils.webservice");
VIVO.utils.webservice = function ws() {
    var NetAccess = function(clientVersion, UUID, tableId, limitLevel, currency, externalAuthToken, accountIdentifier, screenAlias, accountEmail) {
        var _clientVersion = clientVersion,
            _tableId = tableId,
            _isLobby = _tableId === "lobby",
            _limitLevel = limitLevel,
            _externalAuthToken = externalAuthToken,
            _accountIdentifier = accountIdentifier,
            _screenAlias = screenAlias,
            _accountEmail = accountEmail,
            _currency = currency,
            _UUID = UUID,
            _authWS = {},
            _gatewayWS = {},
            _gatewayWSs = [],
            _mySourceId = -1,
            _myServerType = 7,
            _inReplyTo = 0,
            _messageSequenceNum = -1,
            config = VIVO.model.config,
            _isDealerMonitor = config.isDealerMonitor,
            _GSM = config.gameStateMessage,
            _loginStates = ["Connection to Auth Server", "Connection to Gateway", "Connection Response", "Auth Response", "Enter Table Response", "Game State Message", "Assets"],
            _currentLoginState = 0,
            _middlewareVersion, that = this,
            _accountSessionId = "",
            _gameSessionId = "",
            _isConnected = false;
        var _wsURL = config.getWSURL();
        var _messageNames = ["Connected", "ConnectionClosed", "Unknown", "TipRequest", "TipResponse", "RouletteMessage", "ConnectRequest", "ConnectResponse", "ChatRequest", "ChatResponse", "BroadcastChatMessage", "AuthRequest", "AuthResponse", "EnterTableRequest", "EnterTableResponse", "WagerRequest", "WagerResponse", "PayoutMessage", "ClientAlertMessage", "ClientStatisticNotice", "ClientNewsEvent", "GenericResponse", "ListPositionResponse", "BaccaratMessage", "GameHistoryMessage", "BJEPMessage", "OpenOptionMessage", "TakeOptionRequest", "TakeOptionResponse", "DepositReceivedMessage", "EnterLobbyRequest", "EnterLobbyResponse", "BJCMessage", "SeatUpdate", "TakeSeatRequest", "TakeSeatResponse", "LeaveSeatRequest", "LeaveSeatResponse", "OpenOffer", "TakeOfferRequest", "TakeOfferResponse", "TimerState", "ClientDeleteNewsEvent", "IncrementUpdate", "DealerNotice", "DealerNextCard", "JackpotUpdate", "JackpotAlert", "Ping", "Pong", "DragonPayoutTable", "BalanceUpdate", "OptionTrackingMessage", "OptionTakenNotification", "TipBetSettled", "HandUpdate", "InitialOptionTakenStatus", "JackpotResult"];
        var _messageIds = [-2, -1, 0, 8, 9, 28, 20, 21, 10, 11, 12, 13, 14, 16, 17, 18, 19, 29, 41, 42, 43, 31, 3, 45, 46, 47, 48, 49, 51, 52, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127];
        if (_messageNames.length !== _messageIds.length) {
            var msg = "Error message types not defined correctly exiting";
            console.log(msg);
            throw msg
        }
        Object.freeze(_messageNames);
        Object.freeze(_messageIds);
        var i;
        var _messageTypes = {};
        for (i = 0; i < _messageNames.length; i++) _messageTypes[_messageNames[i]] = _messageNames[i];
        var _messageNameToId = {};
        for (i = 0; i < _messageNames.length; i++) _messageNameToId[_messageNames[i]] = _messageIds[i];
        var _messageIdToName = {};
        for (i = 0; i < _messageNames.length; i++) _messageIdToName[_messageIds[i] + ""] = _messageNames[i];
        Object.freeze(_messageTypes);
        Object.freeze(_messageNameToId);
        Object.freeze(_messageIdToName);
        this.messageTypes = _messageTypes;
        this.connect = function() {
            config.closeAlert();
            if (!testInputs()) return false;
            var url = _wsURL;
            console.log("starting to connect..." + url);
            _authWS = new WebSocket(url);
            _authWS.onopen = function() {
                sendConnectRequest(_authWS);
                _currentLoginState = 1;
                _authWS.onerror = function(err) {
                    console.log("Auth Socket Error: " + JSON.stringify(err))
                }
            };
            _authWS.onmessage = function(evt) {
                onMessageReceived(_authWS, evt)
            };
            _authWS.onclose = function() {
                console.log("Auth Socket closed.")
            };
            _authWS.onerror = function(err) {
                console.log("Auth Socket Error: " + JSON.stringify(err));
                config.displayAlertAndClose("Could not connect to the server at " + url + "\nWill retry in 10seconds.");
                config.setTimeout(function() {
                    that.connect()
                }, 10)
            };
            return true
        };
        this.updateSequenceNumber = function(newMessageSequenceNum) {
            if (newMessageSequenceNum > _messageSequenceNum) {
                console.log("Updating message sequence number from: " + _messageSequenceNum + " to " + newMessageSequenceNum);
                _messageSequenceNum = newMessageSequenceNum
            }
        };
        this.disconnect = function() {
            console.log("ViG.NetAccess.disconnect(" + _isConnected + ")");
            if (_isConnected === true) {
                _gatewayWS.close()
            }
        };
        this.sendTipRequest = function(amount) {
            var message = {};
            message.header = createHeader(_messageNameToId.TipRequest);
            message.TipRequest = {};
            message.TipRequest.gameSessionId = _gameSessionId;
            message.TipRequest.currency = _currency;
            message.TipRequest.amount = parseFloat(amount);
            var msgStr = JSON.stringify(message);
            sendMessage(_gatewayWS, msgStr);
            return message
        };
        this.sendPing = function(currentTime) {
            var message = {};
            message.header = createHeader(_messageNameToId.Ping);
            message.Ping = {};
            message.Ping.sendTime = currentTime;
            var msgStr = JSON.stringify(message);
            sendMessage(_gatewayWS, msgStr);
            return message
        };
        this.sendTakeSeatRequest = function(seatNumber) {
            var message = {};
            message.header = createHeader(_messageNameToId.TakeSeatRequest);
            message.TakeSeatRequest = {};
            message.TakeSeatRequest.gameSessionId = _gameSessionId;
            message.TakeSeatRequest.tableId = _tableId;
            message.TakeSeatRequest.seatId = seatNumber;
            var msgStr = JSON.stringify(message);
            sendMessage(_gatewayWS, msgStr);
            return message
        };
        this.sendOptionTrackingMessage = function(offerId, betTypeId, state, selectedOption) {
            var message = {};
            message.header = createHeader(_messageNameToId.OptionTrackingMessage);
            message.OptionTrackingMessage = {};
            message.OptionTrackingMessage.gameSessionId = _gameSessionId;
            message.OptionTrackingMessage.offerId = offerId;
            message.OptionTrackingMessage.betTypeId = betTypeId;
            message.OptionTrackingMessage.state = state;
            message.OptionTrackingMessage.time = (new Date).getTime() + "";
            message.OptionTrackingMessage.selectedOption = selectedOption;
            var msgStr = JSON.stringify(message);
            sendMessage(_gatewayWS, msgStr);
            return message
        };
        this.sendLeaveSeatRequest = function(seatNumber) {
            var message = {};
            message.header = createHeader(_messageNameToId.LeaveSeatRequest);
            message.LeaveSeatRequest = {};
            message.LeaveSeatRequest.gameSessionId = _gameSessionId;
            message.LeaveSeatRequest.tableId = _tableId;
            message.LeaveSeatRequest.seatId = seatNumber;
            var msgStr = JSON.stringify(message);
            sendMessage(_gatewayWS, msgStr);
            return message
        };
        this.sendTakeOfferRequest = function(offerId, option, betTypeId, isChooseAhead) {
            var message = {};
            message.header = createHeader(_messageNameToId.TakeOfferRequest);
            message.TakeOfferRequest = {};
            message.TakeOfferRequest.gameSessionId = _gameSessionId;
            message.TakeOfferRequest.offerId = offerId;
            message.TakeOfferRequest.betType = betTypeId;
            message.TakeOfferRequest.isChooseAhead = isChooseAhead;
            message.TakeOfferRequest.option = option;
            var msgStr = JSON.stringify(message);
            sendMessage(_gatewayWS, msgStr);
            return message
        };
        this.sendChatRequest = function(text) {
            var message = {};
            message.header = createHeader(_messageNameToId.ChatRequest);
            message.SendChatRequest = {};
            message.SendChatRequest.tableId = _tableId;
            message.SendChatRequest.accountSessionSymbol = _accountSessionId;
            message.SendChatRequest.screenAlias = _screenAlias;
            message.SendChatRequest.content = text + "";
            var msgStr = JSON.stringify(message);
            sendMessage(_gatewayWS, msgStr);
            return message
        };
        this.sendWagerRequest = function(gameId, bets, wagerType) {
            var message = {};
            message.header = createHeader(_messageNameToId.WagerRequest);
            message.WagerRequest = {};
            message.WagerRequest.gameSessionId = _gameSessionId;
            message.WagerRequest.gameId = gameId;
            message.WagerRequest.currency = _currency;
            message.WagerRequest.action = parseInt(wagerType);
            betIds = [];
            betTypes = [];
            betAmounts = [];
            for (var i = 0; i < bets.length; i++) {
                betIds.push(bets[i].id);
                betTypes.push(bets[i].type);
                betAmounts.push(bets[i].amount)
            }
            message.WagerRequest.betIds = betIds;
            message.WagerRequest.betTypes = betTypes;
            message.WagerRequest.amounts = betAmounts;
            var msgStr = JSON.stringify(message);
            sendMessage(_gatewayWS, msgStr);
            return message
        };
        this.getAccountSession = function() {
            return _accountSessionId
        };
        this.getCurrentLoginState = function() {
            return _loginStates[_currentLoginState]
        };
        var createHeader = function(messageType) {
            _messageSequenceNum++;
            return messageType + "," + _mySourceId + "," + _messageSequenceNum + "," + _inReplyTo + "," + _myServerType
        };
        var sendConnectRequest = function(ws) {
            $("#ldProgressBar").progressbar({
                value: 15
            });
            config.sendLog("1006", "WebSocket Connected");
            _currentLoginState = 2;
            var message = {};
            message.header = createHeader(_messageNameToId.ConnectRequest);
            message.ConnectRequest = {};
            message.ConnectRequest.myId = _mySourceId;
            message.ConnectRequest.version = _clientVersion;
            message.ConnectRequest.uuid = _UUID;
            message.ConnectRequest.isDealerMonitor = _isDealerMonitor;
            var msgStr = JSON.stringify(message);
            sendMessage(ws, msgStr);
            config.sendLog("1007", "Sent connect request")
        };
        var onMessageReceived = function(ws, evt) {
            var msg, msgType;
            try {
                msg = JSON.parse(evt.data);
                msgType = getMessageType(msg)
            } catch (err) {
                config.sendError("Error parsing json message." + err.message + " message: '" + evt.data + "'");
                msg = "";
                msgType = _messageTypes.Unknown
            }
            var d = new Date;
            console.log(d.toISOString() + " " + msgType + ":- message received " + evt.data);
            try {
                switch (msgType) {
                    case _messageTypes.ConnectResponse:
                        onConnectResponse(ws, msg);
                        break;
                    case _messageTypes.AuthResponse:
                        onAuthResponse(msg);
                        break;
                    case _messageTypes.EnterTableResponse:
                        onEnterTableResponse(msg);
                        break;
                    case _messageTypes.EnterLobbyResponse:
                        onEnterLobbyResponse(msg);
                        break;
                    default:
                        break
                }
            } catch (err) {
                config.sendError("Error processing the message: " + err.message);
                throw err
            }
            var msgEvent = config.newEvent(msgType);
            if (msgType === _GSM) {
                if (msg[_GSM].tableId !== _tableId) {
                    config.sendError("Error recieved game state message for the wrong table, tableId:" + _tableId + ", msg: " + evt.data);
                    return
                }
                _currentLoginState = 6
            }
            msgEvent.data = msg;
            that.dispatchEvent(msgEvent)
        };
        var getMessageType = function(msgObj) {
            var header = msgObj.header;
            var headerArray = header.split(",");
            var id = headerArray[0];
            return _messageIdToName[headerArray[0] + ""]
        };
        var onConnectResponse = function(ws, msgObj) {
            $("#ldProgressBar").progressbar({
                value: 20
            });
            if (ws === _authWS) {
                config.sendLog("1008", "Connect Response received Auth");
                _mySourceId = msgObj.ConnectResponse.myId;
                _middlewareVersion = msgObj.ConnectResponse.version;
                sendAuthRequest(ws)
            } else {
                config.sendLog("1008", "Connect Response received Gateway");
                _currentLoginState = 3;
                for (var i = 0; i < _gatewayWSs.length; i++) {
                    if (_gatewayWSs[i] !== ws) {
                        gw.onopen = null;
                        gw.onmessage = null;
                        gw.onclose = null;
                        gw.close()
                    }
                }
                _gatewayWSs = [];
                _gatewayWS = ws;
                _isConnected = true;
                if (_isLobby) sendEnterLobbyRequest();
                else sendEnterTableRequest()
            }
        };
        var onEnterTableResponse = function(msgObj) {
            $("#ldProgressBar").progressbar({
                value: 30
            });
            _currentLoginState = 5;
            if (msgObj.EnterTableResponse.status !== 0) {
                var errorDesc = config.getLocale("client_alert_enter_table", "There was a problem entering the table please contact support.");
                if (msgObj.EnterTableResponse.errorDesc !== undefined && msgObj.EnterTableResponse.errorDesc !== "") errorDesc = msgObj.EnterTableResponse.errorDesc;
                config.sendLog("1011", "Enter table: status FAILED '" + _tableId + "': " + errorDesc);
                if (!config.isDealerMonitor) errorDesc = config.getLocale("client_alert_enter_table", "There was a problem entering the table please contact support.");
                config.displayAlertAndClose(errorDesc);
                return
            }
            _gameSessionId = msgObj.EnterTableResponse.gameSessionSymbol;
            config.sendLog("1010", "Enter table: status OK '" + _tableId + "', gameSession: " + _gameSessionId);
            var evt = config.newEvent(_messageTypes.Connected);
            evt.data = {};
            evt.data.gatewayURL = _gatewayWS.url;
            that.dispatchEvent(evt)
        };
        var onEnterLobbyResponse = function(msgObj) {
            $("#ldProgressBar").progressbar({
                value: 30
            });
            config.sendLog("1010", "Enter table: status OK '" + _tableId + "'");
            _gameSessionId = "NoGameSessionSymbolForLobby";
            var evt = config.newEvent(_messageTypes.Connected);
            evt.data = {};
            evt.data.gatewayURL = _gatewayWS.url;
            that.dispatchEvent(evt)
        };
        var onAuthResponse = function(msgObj) {
            $("#ldProgressBar").progressbar({
                value: 25
            });
            console.log("onAuthResponse _authWS = " + _authWS);
            _currentLoginState = 4;
            if (_authWS === null) {
                config.sendError("auth ws is already null ignoring event..." + _authWS);
                return
            }
            _authWS.onopen = null;
            _authWS.onmessage = null;
            _authWS.onclose = null;
            if (msgObj.AuthResponse.status > 1) {
                config.sendError("Error client not authenticated! status# " + msgObj.AuthResponse.status);
                config.displayAlert(config.getLocale("client_alert_title_info"), config.getLocale("client_alert1"), config.getLocale("okLabel"), config.closeAlertAndWindow);
                return
            }
            _accountSessionId = msgObj.AuthResponse.sessionId;
            config.sendLog("10081", "AuthResponse received accountSession: " + _accountSessionId);
            var gwWS;
            var len = msgObj.AuthResponse.gwList.length;
            if (len === 0) {
                gwWS = _authWS;
                createGateWayWebSocket(gwWS);
                _authWS = null;
                onConnectResponse(gwWS, "")
            } else {
                _authWS.close();
                _authWS = null;
                for (var i = 0; i < len; i++) {
                    var host = msgObj.AuthResponse.gwList[i];
                    var port = msgObj.AuthResponse.gwPortsList[i];
                    if (port === 2140) {
                        var address = _wsURL + host + ":" + port;
                        console.log("Opening connection to " + address);
                        gwWS = new WebSocket(address);
                        createGateWayWebSocket(gwWS)
                    }
                }
            }
        };
        var createGateWayWebSocket = function(gwWS) {
            gwWS.onopen = function() {
                sendConnectRequest(gwWS)
            };
            gwWS.onmessage = function(evt) {
                onMessageReceived(gwWS, evt)
            };
            gwWS.onclose = function() {
                onGateWayClosed(gwWS)
            };
            gwWS.onerror = function(evt) {
                onGateWayError(gwWS, evt)
            };
            _gatewayWSs.push(gwWS)
        };
        var onGateWayError = function(gwWS, evt) {
            config.sendError("GatewayWS error:" + JSON.stringify(evt));
            if (gwWS !== _gatewayWS) {
                gwWS.onclose = null;
                gwWS.close();
                var i = _gatewayWSs.indexOf(gwWS);
                if (i != -1) _gatewayWSs.splice(i, 1);
                gwWS = null
            }
        };
        var onGateWayClosed = function(gwWS) {
            if (gwWS === _gatewayWS) {
                console.log("WebSocket to gateway closed!" + gwWS);
                _isConnected = false;
                that.dispatchEvent(config.newEvent(_messageTypes.ConnectionClosed));
                if (!$("#alertOverlay").is(":visible")) config.displayAlert(config.getLocale("client_alert_title_info"), config.getLocale("connection_problem"), config.getLocale("okLabel"), config.closeAlertAndWindow)
            }
        };
        var sendMessage = function(ws, msgStr) {
            console.log("sending msg: '" + msgStr + "'");
            ws.send(msgStr)
        };
        var sendAuthRequest = function(ws) {
            _currentLoginState = 3;
            var message = {};
            message.header = createHeader(_messageNameToId.AuthRequest);
            message.AuthRequest = {};
            message.AuthRequest.externalAuthToken = _externalAuthToken;
            message.AuthRequest.accountIdentifier = _accountIdentifier;
            message.AuthRequest.screenAlias = _screenAlias;
            message.AuthRequest.accountEmail = _accountEmail;
            sendMessage(ws, JSON.stringify(message))
        };
        var sendEnterTableRequest = function() {
            _currentLoginState = 4;
            var message = {};
            message.header = createHeader(_messageNameToId.EnterTableRequest);
            message.EnterTableRequest = {};
            message.EnterTableRequest.tableId = _tableId;
            message.EnterTableRequest.limitLevelId = _limitLevel;
            message.EnterTableRequest.accountSessionId = _accountSessionId;
            message.EnterTableRequest.accountId = _accountIdentifier;
            sendMessage(_gatewayWS, JSON.stringify(message));
            config.sendLog("1009", "Sent EnterTable Request")
        };
        var sendEnterLobbyRequest = function() {
            var message = {};
            message.header = createHeader(_messageNameToId.EnterLobbyRequest);
            message.EnterLobbyRequest = {};
            message.EnterLobbyRequest.accountSessionSymbol = _accountSessionId;
            sendMessage(_gatewayWS, JSON.stringify(message))
        };
        var testInputs = function() {
            if (!(_clientVersion instanceof VersionObject)) {
                config.sendError("Error Bad Argument: clientVersion should be an instance of the Version Object");
                return false
            }
            if (typeof _externalAuthToken !== "string") {
                config.sendError("Error Bad Argument: externalAuthToken should be a string.");
                return false
            }
            if (typeof _tableId !== "string") {
                config.sendError("Error Bad Argument: tableId should be a string.");
                config.displayAlertAndClose("Check that the tableId is included in the url parameters.");
                return false
            }
            if (typeof _limitLevel !== "string") {
                config.sendError("Error Bad Argument: limitLevel should be a string.");
                config.displayAlertAndClose("Check that the limitLevel is included in the url parameters.");
                return false
            }
            return true
        }
    };
    NetAccess.prototype = Object.create(VIVO.utils.EventDispatcher.prototype);
    this.VersionObject = function(major, minor, revision) {
        this.major = parseInt(major, 10);
        this.minor = parseInt(minor, 10);
        this.revision = parseInt(revision, 10);
        this.toString = function() {
            return major + "." + minor + "." + revision
        };
        try {
            Object.seal(this)
        } catch (e) {
            console.log("Object seal not supported.")
        }
    };
    this.BetObject = function(id, type, amount) {
        this.id = parseInt(id, 10);
        this.type = parseInt(type, 10);
        this.amount = parseFloat(amount, 10)
    };
    return {
        NetAccess: NetAccess,
        VersionObject: VersionObject,
        BetObject: BetObject
    }
}();
VIVO.namespace("model.BetTypes");
VIVO.model.BetTypes = function() {
    var MAIN_BET_CLASS = "hand";
    var PAIR_BET_CLASS = "pair";
    var RUMMY_BET_CLASS = "rummy";
    var INSURANCE_BET_CLASS = "insurance";
    var TIP_BET_CLASS = "tipbet";
    var JP_CLASS = "jackpot";
    var BetType = function BetType(id, seat, betClass) {
        var _id = id;
        var _seatNum = seat;
        var _betClass = betClass;
        var _maxLimit;
        var _minLimit;
        this.getBetClass = function() {
            return _betClass
        };
        this.getId = function() {
            return _id
        };
        this.getSeatNum = function() {
            return _seatNum
        };
        this.getMaxLimit = function(currency) {
            if (_maxLimit === undefined) {
                _maxLimit = VIVO.model.state.getClassLimits(_betClass).max;
                this.getMaxLimit = function(currency) {
                    return _maxLimit
                }
            }
            return _maxLimit
        };
        this.getMinLimit = function(currency) {
            if (_minLimit === undefined) {
                _minLimit = VIVO.model.state.getClassLimits(_betClass).min;
                this.getMinLimit = function(currency) {
                    return _minLimit
                }
            }
            return _minLimit
        }
    };
    var Backbet_R1 = new BetType(2, 1, RUMMY_BET_CLASS);
    var Rummy_R1 = new BetType(3, 1, RUMMY_BET_CLASS);
    var Backbet_R2 = new BetType(4, 2, RUMMY_BET_CLASS);
    var Rummy_R2 = new BetType(5, 2, RUMMY_BET_CLASS);
    var Backbet_R3 = new BetType(6, 3, RUMMY_BET_CLASS);
    var Rummy_R3 = new BetType(7, 3, RUMMY_BET_CLASS);
    var Backbet_R4 = new BetType(8, 4, RUMMY_BET_CLASS);
    var Rummy_R4 = new BetType(9, 4, RUMMY_BET_CLASS);
    var Backbet_R5 = new BetType(10, 5, RUMMY_BET_CLASS);
    var Rummy_R5 = new BetType(11, 5, RUMMY_BET_CLASS);
    var Backbet_R6 = new BetType(12, 6, RUMMY_BET_CLASS);
    var Rummy_R6 = new BetType(13, 6, RUMMY_BET_CLASS);
    var Backbet_R7 = new BetType(14, 7, RUMMY_BET_CLASS);
    var Rummy_R7 = new BetType(15, 7, RUMMY_BET_CLASS);
    var Backbet_P1 = new BetType(16, 1, PAIR_BET_CLASS);
    var Pair_P1 = new BetType(17, 1, PAIR_BET_CLASS);
    var Backbet_P2 = new BetType(18, 2, PAIR_BET_CLASS);
    var Pair_P2 = new BetType(19, 2, PAIR_BET_CLASS);
    var Backbet_P3 = new BetType(20, 3, PAIR_BET_CLASS);
    var Pair_P3 = new BetType(21, 3, PAIR_BET_CLASS);
    var Backbet_P4 = new BetType(22, 4, PAIR_BET_CLASS);
    var Pair_P4 = new BetType(23, 4, PAIR_BET_CLASS);
    var Backbet_P5 = new BetType(24, 5, PAIR_BET_CLASS);
    var Pair_P5 = new BetType(25, 5, PAIR_BET_CLASS);
    var Backbet_P6 = new BetType(26, 6, PAIR_BET_CLASS);
    var Pair_P6 = new BetType(27, 6, PAIR_BET_CLASS);
    var Backbet_P7 = new BetType(28, 7, PAIR_BET_CLASS);
    var Pair_P7 = new BetType(29, 7, PAIR_BET_CLASS);
    var Backbet_H1 = new BetType(31, 1, MAIN_BET_CLASS);
    var Win_H1 = new BetType(32, 1, MAIN_BET_CLASS);
    var Backbet_H2 = new BetType(33, 2, MAIN_BET_CLASS);
    var Win_H2 = new BetType(34, 2, MAIN_BET_CLASS);
    var Backbet_H3 = new BetType(35, 3, MAIN_BET_CLASS);
    var Win_H3 = new BetType(36, 3, MAIN_BET_CLASS);
    var Backbet_H4 = new BetType(37, 4, MAIN_BET_CLASS);
    var Win_H4 = new BetType(38, 4, MAIN_BET_CLASS);
    var Backbet_H5 = new BetType(39, 5, MAIN_BET_CLASS);
    var Win_H5 = new BetType(40, 5, MAIN_BET_CLASS);
    var Backbet_H6 = new BetType(41, 6, MAIN_BET_CLASS);
    var Win_H6 = new BetType(42, 6, MAIN_BET_CLASS);
    var Backbet_H7 = new BetType(43, 7, MAIN_BET_CLASS);
    var Win_H7 = new BetType(44, 7, MAIN_BET_CLASS);
    var Dealer_BJ_I1 = new BetType(45, 1, INSURANCE_BET_CLASS);
    var Dealer_BJ_I2 = new BetType(46, 2, INSURANCE_BET_CLASS);
    var Dealer_BJ_I3 = new BetType(47, 3, INSURANCE_BET_CLASS);
    var Dealer_BJ_I4 = new BetType(48, 4, INSURANCE_BET_CLASS);
    var Dealer_BJ_I5 = new BetType(49, 5, INSURANCE_BET_CLASS);
    var Dealer_BJ_I6 = new BetType(50, 6, INSURANCE_BET_CLASS);
    var Dealer_BJ_I7 = new BetType(51, 7, INSURANCE_BET_CLASS);
    var Tipbet_H1 = new BetType(52, 1, TIP_BET_CLASS);
    var Tipbet_H2 = new BetType(53, 2, TIP_BET_CLASS);
    var Tipbet_H3 = new BetType(54, 3, TIP_BET_CLASS);
    var Tipbet_H4 = new BetType(55, 4, TIP_BET_CLASS);
    var Tipbet_H5 = new BetType(56, 5, TIP_BET_CLASS);
    var Tipbet_H6 = new BetType(57, 6, TIP_BET_CLASS);
    var Tipbet_H7 = new BetType(58, 7, TIP_BET_CLASS);
    var Jackpot_H1 = new BetType(59, 1, JP_CLASS);
    var Jackpot_H2 = new BetType(60, 2, JP_CLASS);
    var Jackpot_H3 = new BetType(61, 3, JP_CLASS);
    var Jackpot_H4 = new BetType(62, 4, JP_CLASS);
    var Jackpot_H5 = new BetType(63, 5, JP_CLASS);
    var Jackpot_H6 = new BetType(64, 6, JP_CLASS);
    var Jackpot_H7 = new BetType(65, 7, JP_CLASS);
    return {
        Backbet_R1: Backbet_R1,
        Rummy_R1: Rummy_R1,
        Backbet_R2: Backbet_R2,
        Rummy_R2: Rummy_R2,
        Backbet_R3: Backbet_R3,
        Rummy_R3: Rummy_R3,
        Backbet_R4: Backbet_R4,
        Rummy_R4: Rummy_R4,
        Backbet_R5: Backbet_R5,
        Rummy_R5: Rummy_R5,
        Backbet_R6: Backbet_R6,
        Rummy_R6: Rummy_R6,
        Backbet_R7: Backbet_R7,
        Rummy_R7: Rummy_R7,
        Backbet_P1: Backbet_P1,
        Pair_P1: Pair_P1,
        Backbet_P2: Backbet_P2,
        Pair_P2: Pair_P2,
        Backbet_P3: Backbet_P3,
        Pair_P3: Pair_P3,
        Backbet_P4: Backbet_P4,
        Pair_P4: Pair_P4,
        Backbet_P5: Backbet_P5,
        Pair_P5: Pair_P5,
        Backbet_P6: Backbet_P6,
        Pair_P6: Pair_P6,
        Backbet_P7: Backbet_P7,
        Pair_P7: Pair_P7,
        Backbet_H1: Backbet_H1,
        Win_H1: Win_H1,
        Backbet_H2: Backbet_H2,
        Win_H2: Win_H2,
        Backbet_H3: Backbet_H3,
        Win_H3: Win_H3,
        Backbet_H4: Backbet_H4,
        Win_H4: Win_H4,
        Backbet_H5: Backbet_H5,
        Win_H5: Win_H5,
        Backbet_H6: Backbet_H6,
        Win_H6: Win_H6,
        Backbet_H7: Backbet_H7,
        Win_H7: Win_H7,
        Dealer_BJ_I1: Dealer_BJ_I1,
        Dealer_BJ_I2: Dealer_BJ_I2,
        Dealer_BJ_I3: Dealer_BJ_I3,
        Dealer_BJ_I4: Dealer_BJ_I4,
        Dealer_BJ_I5: Dealer_BJ_I5,
        Dealer_BJ_I6: Dealer_BJ_I6,
        Dealer_BJ_I7: Dealer_BJ_I7,
        Tipbet_H1: Tipbet_H1,
        Tipbet_H2: Tipbet_H2,
        Tipbet_H3: Tipbet_H3,
        Tipbet_H4: Tipbet_H4,
        Tipbet_H5: Tipbet_H5,
        Tipbet_H6: Tipbet_H6,
        Tipbet_H7: Tipbet_H7,
        Jackpot_H1: Jackpot_H1,
        Jackpot_H2: Jackpot_H2,
        Jackpot_H3: Jackpot_H3,
        Jackpot_H4: Jackpot_H4,
        Jackpot_H5: Jackpot_H5,
        Jackpot_H6: Jackpot_H6,
        Jackpot_H7: Jackpot_H7,
        backbetNamesbyId: {
            2: "Backbet_R1",
            4: "Backbet_R2",
            6: "Backbet_R3",
            8: "Backbet_R4",
            10: "Backbet_R5",
            12: "Backbet_R6",
            14: "Backbet_R7",
            16: "Backbet_P1",
            18: "Backbet_P2",
            20: "Backbet_P3",
            22: "Backbet_P4",
            24: "Backbet_P5",
            26: "Backbet_P6",
            28: "Backbet_P7",
            31: "Backbet_H1",
            33: "Backbet_H2",
            35: "Backbet_H3",
            37: "Backbet_H4",
            39: "Backbet_H5",
            41: "Backbet_H6",
            43: "Backbet_H7"
        },
        handBetsNamesbyId: {
            2: "Backbet_R1",
            3: "Rummy_R1",
            4: "Backbet_R2",
            5: "Rummy_R2",
            6: "Backbet_R3",
            7: "Rummy_R3",
            8: "Backbet_R4",
            9: "Rummy_R4",
            10: "Backbet_R5",
            11: "Rummy_R5",
            12: "Backbet_R6",
            13: "Rummy_R6",
            14: "Backbet_R7",
            15: "Rummy_R7",
            16: "Backbet_P1",
            17: "Pair_P1",
            18: "Backbet_P2",
            19: "Pair_P2",
            20: "Backbet_P3",
            21: "Pair_P3",
            22: "Backbet_P4",
            23: "Pair_P4",
            24: "Backbet_P5",
            25: "Pair_P5",
            26: "Backbet_P6",
            27: "Pair_P6",
            28: "Backbet_P7",
            29: "Pair_P7",
            31: "Backbet_H1",
            32: "Win_H1",
            33: "Backbet_H2",
            34: "Win_H2",
            35: "Backbet_H3",
            36: "Win_H3",
            37: "Backbet_H4",
            38: "Win_H4",
            39: "Backbet_H5",
            40: "Win_H5",
            41: "Backbet_H6",
            42: "Win_H6",
            43: "Backbet_H7",
            44: "Win_H7",
            45: "Dealer_BJ_I1",
            46: "Dealer_BJ_I2",
            47: "Dealer_BJ_I3",
            48: "Dealer_BJ_I4",
            49: "Dealer_BJ_I5",
            50: "Dealer_BJ_I6",
            51: "Dealer_BJ_I7",
            52: "Tipbet_H1",
            53: "Tipbet_H2",
            54: "Tipbet_H3",
            55: "Tipbet_H4",
            56: "Tipbet_H5",
            57: "Tipbet_H6",
            58: "Tipbet_H7",
            59: "Jackpot_H1",
            60: "Jackpot_H2",
            61: "Jackpot_H3",
            62: "Jackpot_H4",
            63: "Jackpot_H5",
            64: "Jackpot_H6",
            65: "Jackpot_H7"
        },
        insuranceValidBets: [Win_H7, Win_H6, Win_H5, Win_H4, Win_H3, Win_H2, Win_H1, Backbet_H7, Backbet_H6, Backbet_H5, Backbet_H4, Backbet_H3, Backbet_H2, Backbet_H1],
        insuranceBetTypeIds: [45, 46, 47, 48, 49, 50, 51],
        tipBetTypeIds: [52, 53, 54, 55, 56, 57, 58],
        mainBets: [32, 34, 36, 38, 40, 42, 44]
    }
}();
VIVO.namespace("ui.Seat");
VIVO.ui.Seat = function(vivo, betArea, seatElement, seatNumber, childSlots) {
    "use strict";
    var model = vivo.model.state,
        config = vivo.model.config,
        betTypes = vivo.model.BetTypes,
        messages = vivo.ws.messageTypes,
        cardHandler = vivo.ui.cardHandler,
        ws = vivo.ws,
        that = this,
        _isMouseOver = false,
        _isMe = false,
        _isOpen = true,
        _seatAccountName = "",
        _seatAccountAlias = "",
        _pairsOutcomeSettled = false,
        _betAmounts = [0, 0, 0, 0],
        _hasMoneyOnTable = false,
        _hasMoneyOnMainSlot = false,
        _$seat, _$name, _$label, _$slotWrapper, _currentSeatName, _waitingForTakeSeatResponse = false,
        _isFunUser = config.urlParams.currency.toLowerCase() === "fun";
    model.addEventListener(model.BACKBET_UPDATE, onBackbetChecked);
    this.isOpen = function() {
        return _isOpen
    };
    this.clearPendingChips = function() {};
    this.clearChips = function() {};
    this.endOfGame = function() {
        $("#optionChooseaheadWrapper" + seatNumber).hide();
        _pairsOutcomeSettled = false;
        $("#seatWinningChips" + seatNumber).empty();
        $("#pairsSlot" + seatNumber).show();
        $("#rummySlot" + seatNumber).show();
        $("#jackpotSlot" + seatNumber).show();
        $("#mainSlot" + seatNumber).removeClass("hideBorder");
        $("#mainSlotBackbet" + seatNumber).removeClass("hideBorder");
        showHideBackbettingSlots(model.isBackBettingOn() && !_isMe)
    };
    this.onClick = function(amount) {
        if (!_isOpen) {
            console.log("The seat is already taken.");
            return
        }
        takeSeat(seatNumber)
    };
    this.onMouseEnter = function() {
        _isMouseOver = true;
        $("#" + seatElement.id).css("background-color", "red")
    };
    this.onMouseExit = function() {
        _isMouseOver = false;
        $("#" + seatElement.id).css("background-color", "transparent")
    };
    this.setRummyOutcomeSettled = function(hand) {
        _pairsOutcomeSettled = true;
        if (_isMe && _betAmounts[0] > 0) showChooseahead();
        config.setTimeout(function() {
            $("#pairsSlot" + seatNumber).hide();
            $("#rummySlot" + seatNumber).hide();
            $("#pairsSlotBackbet" + seatNumber).hide();
            $("#rummySlotBackbet" + seatNumber).hide();
            childSlots[1].clearChips();
            childSlots[2].clearChips();
            childSlots[4].clearChips();
            childSlots[5].clearChips();
            $("#mainSlot" + seatNumber).addClass("hideBorder");
            $("#mainSlotBackbet" + seatNumber).addClass("hideBorder");
            moveChipsUp(seatNumber)
        }, 2)
    };
    this.clearWaitingForTakeSeatResponse = function() {
        _waitingForTakeSeatResponse = false
    };

    function moveChipsUp() {
        var chipsArray = $("#slotWrapper" + seatNumber + " .chip");
        _.forEach(chipsArray, function(c) {
            var chip = $(c),
                chipIndex = c.id.split("-")[0].slice(4);
            chip.addClass("bjcMainChipLocCentered" + chipIndex)
        })
    }
    this.onSeatUpdate = function(s) {
        linkDOMElements();
        _waitingForTakeSeatResponse = false;
        _isOpen = false;
        _seatAccountName = s.name;
        _isMe = model.getPlayerName() === s.name;
        _betAmounts = s.betAmounts;
        var newName = s.alias;
        var firstPipeIndex = newName.indexOf("|");
        if (firstPipeIndex !== -1) newName = newName.substring(0, firstPipeIndex);
        if (_seatAccountAlias !== newName) {
            _$label.hide();
            _$slotWrapper.show();
            $("#pairsSlot" + seatNumber).show();
            $("#rummySlot" + seatNumber).show();
            $("#mainSlot" + seatNumber).show().removeClass("hideBorder");
            _seatAccountAlias = newName;
            _$name.text(_seatAccountAlias);
            console.log("b/c seat update . Isme:" + _isMe + " DM " + config.isDealerMonitor);
            if (!_isMe && !config.isDealerMonitor) {
                _$name.css("color", "rgba(255,255,0,1)")
            } else {
                $("#jackpotSlot" + seatNumber).hide();
                console.log("Hiding JP b/c seat update . Isme:" + _isMe + " DM " + config.isDealerMonitor);
                _$name.css("color", "rgba(255,255,255,1)")
            }
        }
        console.log("Allowed jp type :" + config.getAllowedJPType());
        if (_isMe && config.getAllowedJPType() == 2) $("#jackpotSlot" + seatNumber).show();
        updateSlotAmounts(_betAmounts)
    };
    this.standUp = function(isLeaveSeatResponse) {
        if (_isOpen) return;
        if (!isLeaveSeatResponse && _isMe) {
            var header = config.getLocale("client_alert_title_info", "Info:"),
                text = config.getLocale("bjclassic_removed");
            config.displayAlert(header, text, config.getLocale("okLabel"), config.closeAlert)
        }
        _isOpen = true;
        _isMe = false;
        _seatAccountAlias = "";
        _seatAccountName = "";
        _betAmounts = [0, 0, 0, 0];
        _hasMoneyOnTable = false;
        _hasMoneyOnMainSlot = false;
        updateSlotAmounts(_betAmounts);
        showHideBackbettingSlots(false);
        _$label.show();
        _$slotWrapper.hide();
        _$name.text("");
        _$seat.removeClass("seatActiveWithMoney seatActive seatAnotherPlayer anotherPlayer")
    };

    function showHideBackbettingSlots(show) {
        if (_$seat === undefined) linkDOMElements();
        if (show) {
            if (_hasMoneyOnMainSlot) {
                $(childSlots[3].slotElement).show();
                childSlots[3].betConfirmedCallBack({}, model.getBetAmount(childSlots[3].betType));
                $(childSlots[4].slotElement).show();
                childSlots[4].betConfirmedCallBack({}, model.getBetAmount(childSlots[4].betType));
                $(childSlots[5].slotElement).show();
                childSlots[5].betConfirmedCallBack({}, model.getBetAmount(childSlots[5].betType))
            } else {
                $(childSlots[0].slotElement).hide();
                $(childSlots[1].slotElement).hide();
                $(childSlots[2].slotElement).hide();
                $(childSlots[3].slotElement).hide();
                $(childSlots[4].slotElement).hide();
                $(childSlots[5].slotElement).hide()
            }
            if (!_isOpen) _$seat.addClass("seatBackbet")
        } else {
            $(childSlots[0].slotElement).show();
            $(childSlots[1].slotElement).show();
            $(childSlots[2].slotElement).show();
            $(childSlots[3].slotElement).hide();
            $(childSlots[4].slotElement).hide();
            $(childSlots[5].slotElement).hide();
            childSlots[3].clearChips();
            childSlots[4].clearChips();
            childSlots[5].clearChips();
            _$seat.removeClass("seatBackbet")
        }
    }

    function onBackbetChecked() {
        if (_isOpen || _isMe) return;
        if (model.isBackBettingOn()) showHideBackbettingSlots(true);
        else showHideBackbettingSlots(false);
        updateSlotAmounts(_betAmounts)
    }

    function linkDOMElements() {
        if (_$seat === undefined) {
            _$seat = $("#seat" + seatNumber);
            _$name = $("#seatName" + seatNumber);
            _$label = $("#seat" + seatNumber + "Label");
            _$slotWrapper = $("#slotWrapper" + seatNumber)
        }
    }

    function updateSlotAmounts(bets) {
        _hasMoneyOnTable = false;
        _hasMoneyOnMainSlot = false;
        _$seat.removeClass("seatAnotherPlayer");
        _$slotWrapper.removeClass("slotAnotherPlayer");
        if (!_isMe) {
            for (var j = 0; j < 5; j++) {
                if (j > 2 && childSlots.length < 8) continue;
                if (j === 3) continue;
                var childSlot = childSlots[j];
                if (j === 4) childSlot = childSlots[7];
                model.clearBets(childSlot.betType.getId());
                childSlot.clearChips();
                if (j > 0 && _pairsOutcomeSettled) continue;
                if (_betAmounts[j] !== 0) {
                    if (j === 0) _hasMoneyOnMainSlot = true;
                    _hasMoneyOnTable = true
                }
                if (model.isBackBettingOn()) continue;
                if (!config.isDealerMonitor) {
                    _$slotWrapper.addClass("slotAnotherPlayer");
                    _$seat.addClass("seatAnotherPlayer")
                }
                if (_betAmounts[j] !== 0 && config.isDealerMonitor) childSlot.betConfirmedCallBack({}, model.getChipArray()[0]);
                else childSlot.betConfirmedCallBack({}, _betAmounts[j])
            }
            if (_hasMoneyOnTable) _$seat.addClass("seatActiveWithMoney").removeClass("seatActive");
            else _$seat.removeClass("seatActiveWithMoney").addClass("seatActive");
            if (model.isBackBettingOn() && !_pairsOutcomeSettled) showHideBackbettingSlots(true)
        }
    }

    function takeSeat() {
        if (_isFunUser) {
            config.displayAlert(config.getLocale("client_alert_title_info", "Info:"), config.getLocale("depositMoneyWarning", "Please deposit money to activate this feature"), config.getLocale("okLabel"), config.closeAlert);
            return
        }
        if (_waitingForTakeSeatResponse) return;
        _waitingForTakeSeatResponse = true;
        ws.sendTakeSeatRequest(seatNumber)
    }
    this.takeSeat = takeSeat;

    function leaveSeat() {
        ws.sendLeaveSeatRequest(seatNumber)
    }
    this.leaveSeat = leaveSeat;
    this.isMe = function() {
        return _isMe
    };

    function showChooseahead() {
        if (config.getConfigParam("showChooseahead") === undefined || config.getConfigParam("showChooseahead") === false) return;
        createChooseaheadControls();
        var cards = cardHandler.getHand(seatNumber).cards;
        var score = cardHandler.getScore(seatNumber, true);
        if (isPair(cards)) $("#optionChooseaheadButtonSplit" + seatNumber).show();
        else $("#optionChooseaheadButtonSplit" + seatNumber).hide();
        $("#optionChooseaheadWrapper" + seatNumber + " li").removeClass("optionHitSelected optionStandSelected optionDoubleSelected optionSplitSelectedCA");
        if (!isBJ(cards, score)) $("#optionChooseaheadWrapper" + seatNumber).removeClass("chooseaheadChosen").show()
    }

    function createChooseaheadControls() {
        if ($("#optionChooseaheadWrapper" + seatNumber).length !== 0) return;
        var html = '<lu id="optionChooseaheadWrapper' + seatNumber + '" class="optionChooseaheadWrapper"> ' + '<li id="optionChooseaheadButtonHit' + seatNumber + '" class="optionChooseahead optionHit"></li> ' + '<li id="optionChooseaheadButtonStand' + seatNumber + '" class="optionChooseahead optionStand"></li> ' + '<li id="optionChooseaheadButtonDouble' + seatNumber + '" class="optionChooseahead optionDouble"></li> ' + '<li id="optionChooseaheadButtonSplit' + seatNumber + '" class="optionChooseahead optionSplitCA"></li>' + "</lu>";
        _$seat.append(html);
        $("#optionChooseaheadWrapper" + seatNumber).on("click", onChooseaheadSelected)
    }

    function onChooseaheadSelected(e) {
        var selectedOption = e.target.id;
        var option;
        $("#optionChooseaheadWrapper" + seatNumber + " li").removeClass("optionHitSelected optionStandSelected optionDoubleSelected optionSplitSelectedCA");
        if ("optionChooseaheadButtonHit" + seatNumber === selectedOption) {
            $(e.target).addClass("optionHitSelected");
            option = "Hit"
        } else if ("optionChooseaheadButtonStand" + seatNumber === selectedOption) {
            $(e.target).addClass("optionStandSelected");
            option = "Stand"
        } else if ("optionChooseaheadButtonDouble" + seatNumber === selectedOption) {
            $(e.target).addClass("optionDoubleSelected");
            option = "Double"
        } else if ("optionChooseaheadButtonSplit" + seatNumber === selectedOption) {
            $(e.target).addClass("optionSplitSelectedCA");
            option = "Split"
        }
        $("#optionChooseaheadWrapper" + seatNumber).addClass("chooseaheadChosen");
        model.takeOffer(-1, option, betTypes["Win_H" + seatNumber].getId(), onChooseaheadResponse)
    }

    function onChooseaheadResponse(e) {}

    function isBJ(cards, score) {
        return parseInt(score) === 21 && cards.length === 2
    }

    function isPair(cards) {
        var rank1 = cards[0].split(":")[0].slice(0, -1),
            rank2 = cards[1].split(":")[0].slice(0, -1);
        rank1 = parseInt(rank1, 10);
        rank2 = parseInt(rank2, 10);
        if (isNaN(rank1)) rank1 = 10;
        if (isNaN(rank2)) rank2 = 10;
        return rank1 === rank2
    }
};
VIVO.namespace("ui.SeatHandler");
VIVO.ui.SeatHandler = function(vivo, betArea, seats) {
    "use strict";
    var model = vivo.model.state,
        config = vivo.model.config,
        _GSM = config.gameStateMessage,
        messages = vivo.ws.messageTypes,
        ws = vivo.ws,
        that = this,
        _lastSeatUpdateStr, _lastSeatUpdate, _lastSeatUpdateTime = new Date,
        _betweenRealStartAndStart = false,
        _UpdateBetweenRealStartAndStart = false,
        _leaveSeatRequested = false,
        _hasTakenSeat = false;
    ws.addEventListener(messages.SeatUpdate, onSeatUpdate);
    ws.addEventListener(messages.TakeSeatResponse, onTakeSeatResponse);
    ws.addEventListener(messages.LeaveSeatResponse, onLeaveSeatResponse);
    model.addEventListener(model.GAME_STARTED, onGameStarted);
    model.addEventListener(model.GAME_FINISHED, onGameFinished);

    function onGameStarted(e) {
        _betweenRealStartAndStart = false;
        if (_UpdateBetweenRealStartAndStart) onSeatUpdate(_lastSeatUpdate);
        _UpdateBetweenRealStartAndStart = false;
        if (config.urlParams.takeSeat !== undefined && _hasTakenSeat === false && !config.isBJCBetBehind()) {
            _hasTakenSeat = true;
            var seatNum = parseInt(config.urlParams.takeSeat, 10);
            seats[seatNum].takeSeat()
        }
    }

    function onGameFinished(e) {
        _betweenRealStartAndStart = true
    }

    function onTakeSeatResponse(e) {
        var tsr = e.data.TakeSeatResponse;
        if (tsr.status !== 0) {
            var header = config.getLocale("client_alert_title_info", "Info:"),
                text = tsr.errorMsg,
                okButtonText = config.getLocale("okLabel");
            if (tsr.status === -8) text = config.getLocale("takeSeatErrorRetakeTimeout", "Retake blocked");
            else if (tsr.status === -7) text = config.getLocale("takeSeatErrorZeroBalance", "Insufficient funds to bet");
            else if (tsr.status === -10) {
                var maxSeats = text.replace(" seats", "").slice(-1);
                text = config.getLocale("takeSeatMaxLimit", "Players may take a maximum of XX seats at one time").replace("XX", maxSeats)
            }
            config.displayAlert2(header, text, config.closeAlert);
            _.forEach(seats, function(seat) {
                if (seat.dummyZerroPlaceholder !== true) seat.clearWaitingForTakeSeatResponse()
            })
        }
    }

    function onLeaveSeatResponse(e) {
        var lsr = e.data.LeaveSeatResponse;
        if (lsr.status !== 0) {
            var header = config.getLocale("client_alert_title_info"),
                text = lsr.errorMsg,
                okButtonText = config.getLocale("okLabel"),
                seatNum = text.slice(-1);
            if (text.indexOf("You have been removed from your seat") !== -1) text = config.getLocale("bjclassic_removed", text);
            else if (lsr.status === 4) {
                _leaveSeatRequested = true;
                return
            } else text = config.getLocale("leaveSeatResponseCode" + lsr.status, text);
            config.displayAlert2(header, text, config.closeAlert)
        }
        _leaveSeatRequested = true
    }

    function onSeatUpdate(e) {
        var su = e.data.SeatUpdate,
            s, i = 0;
        var seatFound = false;
        _UpdateBetweenRealStartAndStart = false;
        if (_betweenRealStartAndStart) _UpdateBetweenRealStartAndStart = true;
        var newSeatUpdateString = JSON.stringify(su) + model.getGameId();
        if (newSeatUpdateString === _lastSeatUpdateStr) {
            console.log("skipping redundant seat updates.");
            _leaveSeatRequested = false;
            return
        }
        var newSeatArray = [];
        for (i = 0; i < su.seats.length; i++) {
            s = su.seats[i];
            seats[s.seat].onSeatUpdate(s);
            newSeatArray.push(s.seat)
        }
        if (_lastSeatUpdate !== undefined) {
            var lsu = _lastSeatUpdate.data.SeatUpdate;
            for (i = 0; i < lsu.seats.length; i++) {
                s = lsu.seats[i];
                if (newSeatArray.indexOf(s.seat) === -1) seats[s.seat].standUp(_leaveSeatRequested)
            }
        }
        _leaveSeatRequested = false;
        _lastSeatUpdateStr = newSeatUpdateString;
        _lastSeatUpdate = e
    }
};
VIVO.namespace("ui.BetAreaFS");
VIVO.ui.BetAreaFS = function(vivo, frame) {
    "use strict";
    var ws = vivo.ws,
        messages = vivo.ws.messageTypes,
        model = vivo.model.state,
        config = vivo.model.config,
        betTypes = vivo.model.BetTypes,
        SlotClass = vivo.ui.Slot,
        SeatClass = vivo.ui.SeatFS,
        SeatHandlerClass = vivo.ui.SeatHandler,
        _slots = {},
        _betIdToSlot = {},
        _slotHighlightUrls = {},
        _lastMouseOverSlot, _slotIdsAlignLabel = [],
        that = this,
        _seatHandler, _winningSlots = {},
        _seatWinAmount = {},
        _insuranceSlots = [],
        _seats, seatConfig = config.getConfigParam("bjcSeatPositions"),
        DEFAULT_DISTANCE_FROM_BOTTOM = 15.3,
        DEFAULT_DISTANCE_FROM_LEFT = 50.1,
        DEFUALT_RADIUS = 1500,
        DEFAULT_DEGREES_BETWEEN_SEATS = 14,
        _LASTGAMESTATE, _RUMMYFINISHED, _GSM = config.gameStateMessage;
    createSeats();
    $("#fsTipWrapper").on("click", onTipClick);
    ws.addEventListener(messages.TipResponse, onTipResponse);
    model.addEventListener(model.GAME_FINISHED, onGameFinished);
    model.addEventListener(model.GAME_STATE_CHANGED, tabletMouseOverHack);
    if (!config.isDealerMonitor) ws.addEventListener(config.gameStateMessage, onGameStateMessage);
    model.addEventListener(model.GAME_STARTED, onGameStarted);

    function createDynamicSeatStyles2(styleFilter, seatConfig) {
        var distFromBottom = DEFAULT_DISTANCE_FROM_BOTTOM,
            distFromLeft = DEFAULT_DISTANCE_FROM_LEFT,
            radiusOfSeats = DEFUALT_RADIUS,
            degreesBetweenSeats = DEFAULT_DEGREES_BETWEEN_SEATS;
        if (seatConfig === undefined) seatConfig = {};
        if (seatConfig.distFromBottom) distFromBottom = seatConfig.distFromBottom;
        if (seatConfig.distFromLeft) distFromLeft = seatConfig.distFromLeft;
        if (seatConfig.radiusOfSeats) radiusOfSeats = seatConfig.radiusOfSeats;
        if (seatConfig.degreesBetweenSeats) degreesBetweenSeats = seatConfig.degreesBetweenSeats;
        var isAfterRummy = $(".seat").hasClass("afterRummy");
        $(".seat").addClass("showEverything").removeClass("afterRummy");
        $(".seat").css("text-indent");
        var seatSizePX = $("#seat4").height(),
            disFromOriginPX = seatSizePX * radiusOfSeats / 100,
            $bs = $("#betArea"),
            widthTablePX = $bs.width(),
            heightTablePX = $bs.height(),
            disFromTopPercent = 100 - distFromBottom - seatSizePX * 100 / heightTablePX,
            seat4LeftPX = distFromLeft * widthTablePX / 100,
            seat4TopPX = heightTablePX - distFromBottom * heightTablePX / 100 - seatSizePX;
        var sheet = document.createElement("style");
        sheet.innerHTML += "." + styleFilter + " .seat { top: " + disFromTopPercent + "%; left: " + distFromLeft + "%; }";
        var seatDegrees = [{
            degree: degreesBetweenSeats * 3,
            seat: 1
        }, {
            degree: degreesBetweenSeats * -3,
            seat: 7
        }, {
            degree: degreesBetweenSeats * 2,
            seat: 2
        }, {
            degree: degreesBetweenSeats * -2,
            seat: 6
        }, {
            degree: degreesBetweenSeats * 1,
            seat: 3
        }, {
            degree: degreesBetweenSeats * -1,
            seat: 5
        }];
        _.forEach(seatDegrees, function(s) {
            var fudgeConfig = seatConfig["seat" + s.seat];
            sheet.innerHTML += moveSeat(disFromOriginPX, seatSizePX, seat4LeftPX, seat4TopPX, widthTablePX, heightTablePX, s.degree, s.seat, false, styleFilter, fudgeConfig);
            sheet.innerHTML += updateSplitAnimations(s.seat, s.degree, seatSizePX, "chipSplitLeft", 0, -10, styleFilter);
            sheet.innerHTML += updateSplitAnimations(s.seat, s.degree, seatSizePX, "chipSplitRight", 0, 30, styleFilter);
            sheet.innerHTML += updateSplitAnimations(s.seat, s.degree, seatSizePX, "chipDoubleDown", 27, 0, styleFilter);
            sheet.innerHTML += updateSplitAnimations(s.seat, s.degree, seatSizePX, "chipDoubleDown.chipSplitRight", 27, 30, styleFilter);
            sheet.innerHTML += updateSplitAnimations(s.seat, s.degree, seatSizePX, "chipDoubleDown.chipSplitLeft", 27, -10, styleFilter)
        });
        $(".seat").addClass("afterRummy");
        $(".seat").css("text-indent");
        _.forEach(seatDegrees, function(s) {
            sheet.innerHTML += moveSeat(disFromOriginPX, seatSizePX, seat4LeftPX, seat4TopPX, widthTablePX, heightTablePX, s.degree, s.seat, true, styleFilter)
        });
        document.body.appendChild(sheet);
        $(".seat").removeClass("showEverything");
        if (!isAfterRummy) {
            $(".seat").removeClass("afterRummy")
        }
    }

    function toRadians(angle) {
        return angle * (Math.PI / 180)
    }

    function updateSplitAnimations(seatNum, degrees, seatSizePX, style, topPositionPercent, leftPositionPercent, styleFilter) {
        var x, y, xPercent, yPercent, css, mult = 1,
            radians = toRadians(degrees),
            elem = $("#mainSlot" + seatNum),
            height = elem.height() * (1.2 / 1.6),
            width = elem.width() * (1.2 / 1.6),
            parentWidth = elem.parent().width(),
            parentHeight = elem.parent().height(),
            elemPos = {
                top: topPositionPercent / 100 * parentHeight,
                left: leftPositionPercent / 100 * parentWidth
            };
        var y1 = elemPos.top + height / 2 - seatSizePX / 2,
            x1 = elemPos.left + width / 2 - seatSizePX / 2;
        if (x1 < 0) mult = -1;
        var r1 = Math.sqrt(y1 * y1 + x1 * x1),
            phi = mult * Math.acos(y1 / r1);
        var theta = radians + phi,
            y2 = r1 * Math.cos(theta),
            x2 = r1 * Math.sin(theta);
        xPercent = (x2 - width / 2 + seatSizePX / 2) / parentWidth * 100;
        yPercent = (y2 - height / 2 + seatSizePX / 2) / parentHeight * 100;
        return "." + styleFilter + " .seat" + seatNum + " ." + style + " { top:" + yPercent + "% !important; left:" + xPercent + "% !important;} "
    }

    function moveSeat(disFromOriginPX, seatSizePX, seat4LeftPX, seat4TopPX, tableWidthPX, tableHeightPX, degrees, seatNum, isRummy, styleFilter, fudgeConfig) {
        var x, y, xPercent, yPercent, css, radians = toRadians(degrees);
        x = seat4LeftPX + Math.sin(radians) * disFromOriginPX;
        y = seat4TopPX - (disFromOriginPX - Math.cos(radians) * disFromOriginPX);
        xPercent = x / tableWidthPX * 100;
        yPercent = y / tableHeightPX * 100;
        if (fudgeConfig && fudgeConfig.x) xPercent += fudgeConfig.x;
        if (fudgeConfig && fudgeConfig.y) yPercent += fudgeConfig.y;
        if (isRummy) {
            return moveSlot(disFromOriginPX, seatSizePX, radians, "seatAlias" + seatNum, seatNum, styleFilter).replace(".seat", ".afterRummy.seat")
        }
        css = "." + styleFilter + " .seat" + seatNum + " { top: " + yPercent + "%; left: " + xPercent + "%; }";
        css += moveSlot(disFromOriginPX, seatSizePX, radians, "rummySlot" + seatNum, seatNum, styleFilter);
        css += moveSlot(disFromOriginPX, seatSizePX, radians, "pairsSlot" + seatNum, seatNum, styleFilter);
        if (config.isTipEnabled()) css += moveSlot(disFromOriginPX, seatSizePX, radians, "tipSlot" + seatNum, seatNum, styleFilter);
        css += moveSlot(disFromOriginPX, seatSizePX, radians, "jackpotSlot" + seatNum, seatNum, styleFilter);
        css += moveSlot(disFromOriginPX, seatSizePX, radians, "pairsSlotBackbet" + seatNum, seatNum, styleFilter);
        css += moveSlot(disFromOriginPX, seatSizePX, radians, "rummySlotBackbet" + seatNum, seatNum, styleFilter);
        css += moveSlot(disFromOriginPX, seatSizePX, radians, "insuranceSlot" + seatNum, seatNum);
        css += moveSlot(disFromOriginPX, seatSizePX, radians, "seatWinningChips" + seatNum, seatNum, styleFilter);
        css += moveSlot(disFromOriginPX, seatSizePX, radians, "insuraceButton" + seatNum, seatNum, styleFilter);
        css += moveSlot(disFromOriginPX, seatSizePX, radians, "seatAlias" + seatNum, seatNum, styleFilter);
        css += ".seat" + seatNum + " .cardWrapper { -webkit-transform: rotateX(40deg) rotateZ(" + -1 * degrees + "deg); transform: rotateX(40deg) rotateZ(" + -1 * degrees + "deg); }";
        return css
    }

    function moveSlot(disFromOriginPX, seatSizePX, radians, slotId, seatNum, styleFilter, isRightSide) {
        var x, y, xPercent, yPercent, css, elem = $("#" + slotId),
            elemPos = $("#" + slotId).position(),
            height = elem.height(),
            width = elem.width(),
            parentWidth = elem.parent().width(),
            parentHeight = elem.parent().height();
        var mult = 1;
        var y1 = elemPos.top + height / 2 - seatSizePX / 2,
            x1 = elemPos.left + width / 2 - seatSizePX / 2;
        if (x1 < 0) mult = -1;
        var r1 = Math.sqrt(y1 * y1 + x1 * x1),
            phi = mult * Math.acos(y1 / r1);
        var theta = radians + phi,
            y2 = r1 * Math.cos(theta),
            x2 = r1 * Math.sin(theta);
        xPercent = (x2 - width / 2 + seatSizePX / 2) / parentWidth * 100;
        yPercent = (y2 - height / 2 + seatSizePX / 2) / parentHeight * 100;
        if (isNaN(xPercent)) {
            return ""
        }
        var left = "left";
        if (isRightSide) {
            left = "right";
            xPercent = 100 - (x2 + width / 2 + seatSizePX / 2) / parentWidth * 100
        }
        return "." + styleFilter + " .seat" + seatNum + " ." + slotId.slice(0, -1) + ", ." + styleFilter + " .seat" + seatNum + " ." + slotId.slice(0, -1) + "0 { top: initial; bottom: initial; top: " + yPercent + "%; " + left + ": " + xPercent + "%; }"
    }
    var isFirstGameStarted = true;

    function onGameStarted() {
        _winningSlots = {};
        _seatWinAmount = {};
        if (!isFirstGameStarted) {
            for (var elemId in _slots) _slots[elemId].endOfGame();
            $(".seat").removeClass("afterRummy")
        } else {
            var videoConfig, autoplayConfig;
            if (seatConfig !== undefined) {
                videoConfig = seatConfig[config.urlParams.tableId];
                autoplayConfig = seatConfig.autoplay
            }
            setTimeout(function() {
                var videoModeOn = $("#betArea").hasClass("videoMode");
                if (videoModeOn) {
                    $("#betArea").removeClass("videoMode")
                }
                createDynamicSeatStyles2("videoMode", videoConfig);
                createDynamicSeatStyles2("autoplayMode", autoplayConfig);
                if (videoModeOn) {
                    $("#betArea").addClass("videoMode")
                }
            }, 100)
        }
        isFirstGameStarted = false
    }

    function onGameFinished(e) {}

    function tabletMouseOverHack() {
        if (!config.isMobile) return;
        if (_lastMouseOverSlot) _lastMouseOverSlot.onMouseExit();
        _lastMouseOverSlot = undefined
    }

    function onGameStateMessage(e) {
        var gsm = e.data[_GSM];
        if (gsm.state === "No More Bets") {
            toggleBackBetOffNoMoney();
            var doClearPendingChips = _LASTGAMESTATE !== gsm.state;
            var doRummyTransition = !_RUMMYFINISHED;
            if (doRummyTransition) {
                doRummyTransition = false;
                for (var i = 0; i < gsm.playerHands.length; i++) {
                    var h = gsm.playerHands[i];
                    if (h.outcomes[2] !== "") {
                        doRummyTransition = true;
                        _RUMMYFINISHED = true;
                        break
                    }
                }
            }
            if (doRummyTransition) {
                for (var elemId in _slots) {
                    _slots[elemId].setRummyOutcomeSettled()
                }
                $(".seat").addClass("afterRummy");
                model.dispatchEvent(config.newEvent("PairAndRummySettled"))
            }
            if (doClearPendingChips) {
                for (var elemId2 in _slots) {
                    _slots[elemId2].clearPendingChips()
                }
            }
        } else {
            _RUMMYFINISHED = false
        }
        _LASTGAMESTATE = gsm.state
    }

    function createSeats() {
        var ba = $("#betArea");
        if (!config.isDealerMonitor) {
            ba.on("click", ".slot, .seat, .chip, .toolTip", onTableClick);
            ba.on("drop", ".slot, .seat, .chip, .toolTip", onTableClick)
        }
        ba.on("mouseover", ".slot, .seat, .chip, .toolTip", onTableMouseOver);
        ba.on("dragover", ".slot, .seat, .chip, .toolTip", onTableMouseOver);
        ba.on("mouseout", ".slot, .seat, .chip, .toolTip", onTableMouseOut);
        ba.on("dragleave", ".slot, .seat, .chip, .toolTip", onTableMouseOut);
        var openSeatLabel = getSlotLabel("seat_open", "SEAT\nOPEN");
        _seats = [{
            dummyZerroPlaceholder: true
        }];
        for (var i = 1; i < 8; i++) _seats.push(createSeat(ba, i, openSeatLabel));
        _seatHandler = new SeatHandlerClass(vivo, that, _seats)
    }

    function createSeat($betArea, seatId, label) {
        var tooltipText = 'open fastToolTip" data-tooltip="' + label + '" >';
        var hText = "hidden";
        if (config.isTipEnabled()) hText = "";
        var seatHTML = '<div id="seat#SEAT-NUMBER#" class="seat seat#SEAT-NUMBER# seatTransformOrigin ' + tooltipText + '	<div id="cardWrapper#SEAT-NUMBER#-1" class="cardWrapper blockWrapper" ></div>' + '	<div id="cardWrapper#SEAT-NUMBER#-2" class="cardWrapper blockWrapper" ></div>' + '	<div id="slotWrapper#SEAT-NUMBER#" class="slotWrapper" >' + '		<div id="mainSlot#SEAT-NUMBER#" class="slot mainSlot frontSlot vigIcon mainSlotIcon horizontal"></div>' + '		<div id="pairsSlot#SEAT-NUMBER#" class="slot pairsSlot frontSlot vigIcon pairsSlotIcon horizontal" ></div>' + '		<div id="rummySlot#SEAT-NUMBER#" class="slot rummySlot frontSlot vigIcon rummySlotIcon horizontal" ></div>' + '		<div id="tipSlot#SEAT-NUMBER#" class="slot tipSlot frontSlot vigIcon tipSlotIcon horizontal" ' + hText + " ></div>" + '		<div id="mainSlotBackbet#SEAT-NUMBER#" class="slot backbetSlot mainSlot vigIcon mainSlotIcon horizontal"></div>' + '		<div id="pairsSlotBackbet#SEAT-NUMBER#" class="slot backbetSlot pairsSlot vigIcon pairsSlotIcon horizontal" ></div>' + '		<div id="rummySlotBackbet#SEAT-NUMBER#" class="slot backbetSlot rummySlot vigIcon rummySlotIcon horizontal" ></div>' + '		<div id="insuranceSlot#SEAT-NUMBER#" class="slot insuranceSlot horizontal"></div>' + '		<div id="jackpotSlot#SEAT-NUMBER#" class="slot jackpotSlot frontSlot vigIcon jackpotSlotIcon horizontal " hidden ></div>' + "	</div>" + '	<label id="seatAlias#SEAT-NUMBER#" class="seatAlias horizontal"></label>' + '	<label id="seatScore#SEAT-NUMBER#" class="seatScore noSeatScore horizontal"></label>' + '	<div id="seatWinningChips#SEAT-NUMBER#" class="seatWinningChips"></div>' + '	<button id="insuraceButton#SEAT-NUMBER#" class="insuraceButton horizontal"><div class="tableWrapper"><div class="insuranceButtonText"></div></div></button>' + "</div>";
        seatHTML = seatHTML.replace(/#SEAT-NUMBER#/g, seatId + "");
        $betArea.append(seatHTML);
        var slotWrapper = $("#slotWrapper" + seatId).get(0);
        var seatElem = $("#seat" + seatId).get(0);
        var jp777Text = "  Click here to bet $1 on the Jackpot:<br>Any three 7s wins $100<br>Any three RED 7s wins $1000<br>7D-7D-7D wins the Jackpot!";
        var list = [createSlot($betArea, slotWrapper, seatId, "mainSlot", betTypes["Win_H" + seatId], config.getLocale("mainSlotNoMoney", "Main Bet"), "bjcMainChipLoc", undefined, false, config.getLocale("mainSlotNoMoney", "Main Bet")), createSlot($betArea, slotWrapper, seatId, "pairsSlot", betTypes["Pair_P" + seatId], config.getLocale("pairsSlot", "Pair Bet"), "pairsSlot", betTypes["Win_H" + seatId], false, config.getLocale("pairsSlotNoMoney", "Pair Bet 11:1"), "right"), createSlot($betArea, slotWrapper, seatId, "rummySlot", betTypes["Rummy_R" + seatId], config.getLocale("rummySlot", "Rummy Bet"), "rummySlot", betTypes["Win_H" + seatId], false, config.getLocale("rummySlotNoMoney", "Rummy Bet 9:1"), "right"), createSlot($betArea, slotWrapper, seatId, "insuranceSlot", betTypes["Dealer_BJ_I" + seatId], config.getLocale("insuranceSlot", "Insurance"), "insuranceSlot", undefined, false, ""), createSlot($betArea, slotWrapper, seatId, "tipSlot", betTypes["Tipbet_H" + seatId], config.getLocale("tipSlot", "Tip Bet"), "tipSlot", betTypes["Win_H" + seatId], false, config.getLocale("tipSlotNoMoney", "Tip Bet for the Dealer")), createSlot($betArea, slotWrapper, seatId, "mainSlotBackbet", betTypes["Backbet_H" + seatId], config.getLocale("mainSlot", "Main"), "bjcMainChipLoc", undefined, true), createSlot($betArea, slotWrapper, seatId, "pairsSlotBackbet", betTypes["Backbet_P" + seatId], config.getLocale("pairsSlot", "Pair"), "pairsSlot", undefined, true, undefined, "right"), createSlot($betArea, slotWrapper, seatId, "rummySlotBackbet", betTypes["Backbet_R" + seatId], config.getLocale("rummySlot", "Rummy"), "rummySlot", undefined, true, undefined, "right"), createSlot($betArea, slotWrapper, seatId, "jackpotSlot", betTypes["Jackpot_H" + seatId], config.getLocale("jackpotSlot", "Jackpot Active"), "jackpotSlot", betTypes["Win_H" + seatId], false, config.getLocale("jackpotSlotNoMoney", jp777Text), "right")];
        var seatObj = new SeatClass(vivo, that, seatElem, seatId, list);
        _slots[seatElem.id] = seatObj;
        _slots["seat" + seatId + "Label"] = seatObj;
        return seatObj
    }

    function getSlotLabel(localeKey, defaultText) {
        var label = config.getLocale(localeKey);
        if (label === undefined) label = defaultText;
        label = label.replace(/(\\n|\n)/g, " ");
        return label
    }

    function setText(elem, text) {}

    function createSlot($betArea, slotWrapper, seatId, slotStyleName, bt, betToolTip, slotChipStyle, mainBetType, isBackBetSlot, noBetToolTipText, alertOrientation) {
        var $slotElem = $("#" + slotStyleName + seatId);
        setText($slotElem, betToolTip);
        var slotElem = $slotElem.get(0);
        if (isBackBetSlot === undefined) isBackBetSlot = false;
        var slotObj = new SlotClass(vivo, that, slotElem, bt, slotChipStyle, betToolTip);
        slotObj.setTableElement($betArea.get(0));
        slotObj.setAlertOffset(4);
        slotObj.setAlertOriantation(alertOrientation);
        slotObj.setNoBetToolTipText(noBetToolTipText);
        slotObj.setAsSideBet(mainBetType);
        slotObj.setIsBackBetSlot(isBackBetSlot);
        _slots[slotElem.id] = slotObj;
        _betIdToSlot[bt.getId() + ""] = slotObj;
        if (slotStyleName === "insuranceSlot") _insuranceSlots.push(slotObj);
        return slotObj
    }

    function onTableMouseOut(e) {
        if (_lastMouseOverSlot === undefined) return;
        _lastMouseOverSlot.onMouseExit();
        _lastMouseOverSlot = undefined
    }

    function toggleBackBetOffNoMoney() {
        for (var i = 1; i < 8; i++) {
            var s = _slots["seat" + i];
            if (s.isBackbettingOn() && !hasPlacedBackbets(i)) s.toggleBackBetMode(false)
        }
    }

    function hasPlacedBackbets(seat) {
        var betTypeStr = "Backbet_HXX Backbet_PXX Backbet_RXX Tipbet_HXX".replace(/XX/g, seat),
            betTypeArr = betTypeStr.split(" "),
            total = 0;
        _.forEach(betTypeArr, function(btName) {
            var bt = betTypes[btName];
            total += model.getBetAmount(bt)
        });
        return total > 0
    }

    function onTableClick(e) {
        var amount, slotObj;
        var src = this;
        if (e.type === "drop") {
            e.preventDefault();
            amount = parseInt(e.originalEvent.dataTransfer.getData("amount"))
        }
        slotObj = getSlotFromMouseEvent(src, true);
        if (slotObj === undefined) return true;
        if (amount === undefined) amount = model.getSelectedChipAmount();
        if (slotObj instanceof VIVO.ui.Slot) {
            if (!model.isBetStateValid()) {
                config.displayAlert2(config.getLocale("client_alert_title_info", "Info:"), config.getLocale("client_alert13"), config.closeAlert);
                return true
            }
            var slotId = slotObj.slotElement.id;
            var seatId = "seat" + slotId.substr(slotId.length - 1);
            var seat = _slots[seatId];
            if (!seat.isMe() && !seat.isBackbettingOn()) {
                if (!seat.hasMoneyOnTable()) {
                    var text = "You have to wait for #ALIAS to wager first ";
                    text = config.getLocale("betbehind_nobet_message", text).replace(/#ALIAS/g, seat.playerAlias());
                    config.displayAlert2(config.getLocale("client_alert_title_info", "Info:"), text, config.closeAlert);
                    return true
                }
                seat.toggleBackBetMode(true);
                if (slotId.indexOf("tipSlot") === -1) {
                    slotId = slotId.slice(0, slotId.length - 1) + "Backbet" + slotId.slice(slotId.length - 1);
                    slotObj = _slots[slotId]
                }
            }
            if (betTypes.insuranceBetTypeIds.indexOf(slotObj.betTypeId) !== -1) return true
        }
        slotObj.onClick(amount);
        return true
    }

    function onTipClick(e) {
        model.placeTip(model.getSelectedChipAmount())
    }

    function onTipResponse(e) {
        if (e.data.TipResponse.status !== 0) {
            config.sendError("Error processing Tip status = " + e.data.TipResponse.status);
            return
        }
        var chipStack = config.getChipStack(e.data.TipResponse.amount);
        if (chipStack.length <= 0) return;
        $(chipStack[0]).addClass("glowEffect");
        chipStack[0].style.left = "25%";
        $("#tipButton").append(chipStack[0]);
        config.setTimeout(function() {
            $("#tipButton").children().filter("[class^=chip]").remove()
        }, 1)
    }

    function getSlotFromMouseEvent(src, ignoreToolTip) {
        if (src.id == "betArea") return undefined;
        var slotId = src.id;
        if (src.className.indexOf("chip") !== -1) return _betIdToSlot[slotId.split("-")[1]];
        else if (src.className.indexOf("toolTip") !== -1) {
            if (ignoreToolTip) return undefined;
            else return _betIdToSlot[slotId.split("-")[1]]
        }
        return _slots[slotId]
    }

    function onSeatMouseOver(srcElem) {}

    function onTableMouseOver(e) {
        if (e.type === "dragover") e.preventDefault();
        var src = this;
        if (src.id.indexOf("seat") === 0) {
            onSeatMouseOver(src);
            return
        }
        var slot = getSlotFromMouseEvent(src);
        e.preventDefault();
        if (_lastMouseOverSlot !== slot && _lastMouseOverSlot !== undefined) _lastMouseOverSlot.onMouseExit();
        if (_lastMouseOverSlot !== slot && slot !== undefined) slot.onMouseEnter();
        _lastMouseOverSlot = slot
    }

    function animateWinnigChips(totalWin, slot) {
        if (totalWin <= 0) return;
        if (_winningSlots[slot.betTypeId] !== undefined) return;
        _winningSlots[slot.betTypeId] = "done";
        var seatNum = getSeatNumForSlot(slot),
            $winningStack = $("#seatWinningChips" + seatNum),
            $body = $("#body"),
            initialLeft = $("#frame").width() * 2 / 3,
            initialTop = parseInt($("#betAreaRow").css("top"), 10),
            finalLeft = $winningStack.offset().left,
            finalTop = $winningStack.offset().top,
            chipAnimationTime = 400,
            MAX_CHIPS_TO_ANIMATE = 5,
            chips = config.getChipStack(totalWin),
            maxChips = Math.min(chips.length, MAX_CHIPS_TO_ANIMATE),
            animatedChips = [],
            isRummy = slot.slotElement.id.indexOf("rummySlot") === 0;
        for (var i = 0; i < maxChips; i++) {
            chips[i].id = "chip" + i + "-WinningChips";
            chips[i].style.left = initialLeft + "px";
            chips[i].style.top = initialTop + "px";
            $body.append(chips[i]);
            animatedChips.push(chips[i]);
            $(chips[i]).delay(chipAnimationTime * i).animate({
                left: finalLeft + "px",
                top: finalTop + "px"
            }, chipAnimationTime, "linear")
        }
        config.setTimeout(function() {
            for (var i = 0; i < animatedChips.length; i++) {
                $(animatedChips[i]).remove()
            }
            addWinningChipsToStack(totalWin, $winningStack, seatNum)
        }, maxChips * chipAnimationTime / 1e3);
        config.setTimeout(function() {
            $("#seatWinningChips" + seatNum).empty()
        }, maxChips * chipAnimationTime / 1e3 + 3)
    }

    function addWinningChipsToStack(totalWin, $winningStack, seatNum) {
        if (_seatWinAmount[seatNum] === undefined) _seatWinAmount[seatNum] = 0;
        _seatWinAmount[seatNum] += totalWin;
        var chips = config.getChipStack(_seatWinAmount[seatNum]);
        $("#seatWinningChips" + seatNum).empty();
        for (var i = 0; i < chips.length; i++) {
            chips[i].style.left = i * .2 + "%";
            chips[i].style.top = -(i * 1) + "%";
            chips[i].style["z-order"] = i + "";
            chips[i].id = "chip" + i + "-WinningChips";
            $winningStack.append(chips[i])
        }
    }

    function getSeatNumForSlot(slot) {
        var id = slot.slotElement.id;
        return parseInt(id.replace(/\D/g, ""), 10)
    }
    this.getSlot = function getSlot(betTypeId) {
        return _betIdToSlot[betTypeId + ""]
    };
    this.getSeat = function getSeat(seatNumber) {
        return _slots["seat" + seatNumber]
    };
    this.clearChips = function clearChips(betTypeId) {
        if (betTypeId === undefined) {
            for (var elemId in _slots) _slots[elemId].clearChips()
        } else {
            _betIdToSlot[betTypeId + ""].clearChips();
            if (betTypes.backbetNamesbyId[betTypeId + ""] !== undefined) {
                var btName = betTypes.backbetNamesbyId[betTypeId];
                var betTypeInstance = betTypes[btName];
                var seat = _seats[betTypeInstance.getSeatNum()];
                var sum = seat.sumChips();
                if (sum == 0) seat.toggleBackBetMode(false)
            }
        }
    };
    this.clearPendingChips = function clearPendingChips() {
        for (var elemId in _slots) {
            if (_slots[elemId].clearPendingChips !== undefined) _slots[elemId].clearPendingChips()
        }
    };
    this.highlightNeighbors = function(betType, doHighlight, isRaceTrack) {
        var slot = _betIdToSlot[betType.getId() + ""];
        return
    };
    this.highlightWinningChips = function highlightWinningChips(betTypeIds, totalWin, payoutMessage, betTypeToWinAmount) {
        var isSurrender = payoutMessage.outcome === "Surrendered";
        for (var betId in betTypeToWinAmount) {
            if (!betTypeToWinAmount.hasOwnProperty(betId)) continue;
            var slot = _betIdToSlot[betId + ""];
            if (slot === undefined) {
                console.log("Error: The bet id is " + betId);
                continue
            }
            if (isSurrender) slot.clearChips();
            else slot.glowChipStack();
            animateWinnigChips(totalWin, slot)
        }
    };
    this.clearAnyInsuranceBets = function() {
        _.forEach(_insuranceSlots, function(s) {
            if (s.slotElement.id.indexOf("insuranceSlot") === 0) s.clearChips()
        })
    }
};
VIVO.namespace("ui.Frame");
VIVO.ui.Frame = function(vivo, main) {
    "use strict";
    $("#gameStateRow").remove();
    var config = vivo.model.config;
    config.setUseChipStacks(false);
    var model = vivo.model.state,
        ws = vivo.ws,
        messages = vivo.ws.messageTypes,
        _main = main,
        _gameState = new vivo.ui.GameStateNumeric(vivo, this),
        _gameDetails = new vivo.ui.GameDetails(vivo, this);
    vivo.ui.edgeAnimations = new vivo.ui.EdgeAnimations(vivo, this);
    vivo.ui.cardHandler = new vivo.ui.CardHandler(vivo, this, false);
    var _betArea = new vivo.ui.BetAreaFS(vivo, this),
        _dealerPanel = new vivo.ui.DealerPanel(vivo, this),
        _balance = new vivo.ui.Balance(vivo, true),
        _chipSelection = new vivo.ui.ChipSelection(vivo, this),
        _jackpotHandler = new vivo.ui.JackpotHandler(vivo, this),
        _chat = new vivo.ui.Chat(vivo, this),
        _actionPanel = new vivo.ui.ActionPanel(vivo, this),
        _playerHands = new vivo.ui.PlayerDealerHands(vivo, this),
        _autoplay = new VIVO.ui.FSAutoplay(vivo, this),
        _newsTicker = new vivo.ui.FSNewsTicker(vivo, this),
        _video = new vivo.ui.Video(vivo, this, _autoplay, true);
    var _cardHandler = vivo.ui.cardHandler;
    VIVO.ui.cardHandler = _cardHandler;
    this.cardHandler = _cardHandler;
    VIVO.ui.betArea = _betArea;
    this.betArea = _betArea;
    this.gameState = _gameState;
    this.actionPanel = _actionPanel;
    $("#chatButton").text("");
    $("#fsTipButtonText").text(config.getLocale("tip_label"));
    $("#toolTipSizeTest").css("height", "4em");
    $("#toolTipSizeTest").css("width", "2em");
    if (config.isBJCBetBehind()) {
        var betBehindNotice = config.getLocale("betbehind_greeting_chat_message", "Welcome to Bet Behind Blackjack! To place a bet, click on top of " + "one or more player's bets. Rummy, Pairs and Tip Bets work too!");
        _chat.appendChatMessage(betBehindNotice, "yellow")
    }
};
VIVO.namespace("ui.GameDetails");
VIVO.ui.GameDetails = function(vivo, roulette) {
    "use strict";
    var ws = vivo.ws,
        messages = vivo.ws.messageTypes,
        config = vivo.model.config,
        model = vivo.model.state,
        betTypes = vivo.model.BetTypes,
        tableId = config.urlParams.tableId,
        _gameText = config.getLocale("game") + "<br/>",
        _dealerName, _dealerImagePath = config.getDealerImagePath(),
        _tableTypesColumn = ["", "main_bets", "pair_bets_bjep", "rummy_bets_bjep"],
        _tableBetTypes = [betTypes.Win_H1, betTypes.Pair_P1, betTypes.Rummy_R1],
        $slideOutTabs = $(".slideOutTab");
    var optChoices = !config.isBJCBetBehind();
    var fsConfig = {
            ShowVideo: {
                value: true,
                onToggle: onShowVideoToggle,
                label: config.getLocale("configShowVideo", "Show Video?")
            },
            ShowJackAnimations: {
                value: true,
                onToggle: onShowJackAnimations,
                label: config.getLocale("configShowJackAnimations", "Jack Animations?")
            },
            AutoHit8orLess: {
                value: optChoices,
                enabled: optChoices,
                onToggle: onAutoHit8orLessToggle,
                label: config.getLocale("configAutoHit8orLess", "Auto Hit 8 or less?")
            },
            AutoStand18orMore: {
                value: optChoices,
                enabled: optChoices,
                onToggle: onAutoStand18orMoreToggle,
                label: config.getLocale("configAutoStand18orMore", "Auto Stand 18 or more?")
            },
            AutoJackpotPlacement: {
                value: false,
                enabled: optChoices,
                onToggle: onAutoJackpotToggle,
                label: config.getLocale("configAutoJackpot", "Always bet on the Jackpot")
            }
        },
        openSlideOutTab, autoCloseInitialTab;
    model.addEventListener(model.GAME_STARTED, onGameStarted);
    ws.addEventListener(messages.JackpotAlert, onJackpotAlert);
    $("#limitStand").on("click", onBetLimitClick);
    $(".slideOutButton, .slideOutTab").on("click", toggleSlideOutButtons);
    $("#rulesHeader").text(config.getLocale("rulesHeader", "Rules"));
    $("#configHeader").text(config.getLocale("playerSettingsHeader", "Player Settings"));
    $("#limitsHeader").text(config.getLocale("table_limits"));
    $("#limitStand").attr("data-tooltip", config.getLocale("limitStandTT", "Show table limits"));
    $("#rulesButtonTT").text(config.getLocale("rulesHeader", "Rules"));
    $("#configButtonTT").text(config.getLocale("playerSettingsTT", "Settings"));
    $("#limitsButtonTT").text(config.getLocale("table_limits"));
    $("#fsTipWrapper").attr("data-tooltip", config.getLocale("tipButtonTT", "Tip the Dealer"));
    var htmlText = config.getLocale("bjclassicRulesText", "<ul><li>Blackjack pays 3:2</li><li>Insurance pays 2:1</li><li>Pairs pays 11:1</li><li>Rummy pays 9:1</li><li>Dealer hits on soft 17</li><li>Surrender first two cards if dealer does not have BJ</li><li>Double any two cards</li><li>One split max</li><li>Double after split allowed</li><li>Split aces receive one card each only</li><li>Tips bets for the dealer will increase for doubles and splits</li><li>Maximum 3 seats per player (some tables 2 seats)</li></ul>");
    htmlText = htmlText.replace(/\\n/g, "<br>").replace(/ol>/g, "ul>").replace(/<(\/)?p><br( )?(\/)?>|<br( )?(\/)?><p>/g, "");
    $("#rulesText").html(htmlText);
    fillConfigTab();
    if (config.isMobile && Cookies.get(tableId + "configShowVideo") === undefined) {
        onShowVideoToggle(false);
        $("#cbShowVideo").removeClass("checked")
    }
    $("#cbAutoJackpotPlacement").hide();
    $("#cbtAutoJackpotPlacement").hide();
    $(".configLine").on("click", onConfigClick);
    $(".slideOutText").niceScroll(config.scrollConfig);
    initializeOpenTab();

    function onJackpotAlert(e) {
        var jp = e.data.JackpotAlert;
        if (jp.jackpotTypeId == 2) {
            $("#cbAutoJackpotPlacement").show();
            $("#cbtAutoJackpotPlacement").show()
        }
    }

    function initializeOpenTab() {
        var defaultInitialTab = "configButton",
            lastOpenTab = Cookies.get(tableId + "configLastOpenTab");
        if (lastOpenTab !== undefined) {
            if (lastOpenTab === "undefined") $slideOutTabs.addClass("closed");
            else toggleSlideOutButtons.call($("#" + lastOpenTab))
        } else {
            toggleSlideOutButtons.call($("#" + defaultInitialTab));
            Cookies.remove(tableId + "configLastOpenTab");
            autoCloseInitialTab = config.setTimeout(function() {
                autoCloseInitialTab = undefined;
                toggleSlideOutButtons()
            }, 15)
        }
    }

    function toggleSlideOutButtons(e) {
        if (autoCloseInitialTab !== undefined) {
            autoCloseInitialTab = undefined;
            config.clearInterval(autoCloseInitialTab)
        }
        var src = $(this);
        $slideOutTabs.addClass("closed");
        var isButton = src.hasClass("slideOutButton");
        if (!isButton || openSlideOutTab === src.attr("id")) {
            openSlideOutTab = undefined
        } else {
            openSlideOutTab = src.attr("id");
            $("#" + src.data("tab")).removeClass("closed")
        }
        Cookies.set(tableId + "configLastOpenTab", "" + openSlideOutTab, {
            expires: 50
        })
    }

    function onConfigClick(e) {
        e.stopPropagation();
        var src = $(this);
        var key = src.data("config");
        var value = !fsConfig[key].value;
        if (fsConfig[key].enabled !== undefined && fsConfig[key].enabled === false) {
            return
        }
        fsConfig[key].value = value;
        Cookies.set(tableId + "config" + key, "" + value, {
            expires: 50
        });
        fsConfig[key].onToggle(value);
        var cb = src.find(".configCheckbox");
        if (value) cb.addClass("checked");
        else cb.removeClass("checked")
    }

    function createTableLimits() {
        var $newTable = $("#tableLimitsTable").clone(),
            table = $newTable.get(0);
        var cellElem, rowElem;
        for (var row = 0; row < 4; row++) {
            rowElem = table.insertRow(-1);
            for (var col = 0; col < 3; col++) {
                if (col === 0) {
                    cellElem = rowElem.insertCell(-1);
                    if (row !== 0) cellElem.innerHTML = config.getLocale(_tableTypesColumn[row]).replace(/\\n/g, "<br />")
                } else {
                    cellElem = rowElem.insertCell(-1);
                    if (col === 1) {
                        if (row === 0) cellElem.innerHTML = config.getLocale("min_bet");
                        else cellElem.innerHTML = _tableBetTypes[row - 1].getMinLimit()
                    } else if (col === 2) {
                        if (row === 0) cellElem.innerHTML = config.getLocale("max_bet");
                        else cellElem.innerHTML = _tableBetTypes[row - 1].getMaxLimit()
                    }
                }
            }
        }
        $("#tableLimitsTable").replaceWith($newTable)
    }

    function onBetLimitClick(e) {
        var alert = document.createElement("div");
        $(alert).addClass("popup-background");
        var header = document.createElement("div");
        header.innerHTML = config.getLocale("table_limits") + "<br />";
        var table = document.createElement("table");
        table.width = "100%";
        table.style.height = "80%";
        table.border = "1";
        table.style.borderSpacing = "0px";
        table.style.textAlign = "center";
        alert.appendChild(header);
        alert.appendChild(table);
        $("#betLimitOverlay").append(alert);
        $("#betLimitOverlay").on("click", closePopUp);
        $("#betLimitOverlay").show()
    }

    function onGameStarted(e) {
        var limitText = "$" + config.getChipAmountText(betTypes.Win_H1.getMinLimit()) + "-$" + config.getChipAmountText(betTypes.Win_H1.getMaxLimit());
        $("#limitStandText").text(limitText);
        createTableLimits();
        model.removeEventListener(model.GAME_STARTED, onGameStarted)
    }

    function fillConfigTab() {
        var configText = $("#configText");
        _.forIn(fsConfig, function(data, key) {
            var label = data.label;
            var checkedStyle = "";
            var value = data.value;
            var v = Cookies.get(tableId + "config" + key);
            if (v === undefined) v = value;
            else if (value != v) {
                v = v === "true";
                data.value = v;
                fsConfig[key].onToggle(v)
            } else v = value;
            if (v) checkedStyle = "checked";
            var configHTML = '<div class="configLine" data-config="' + key + '">' + '<div id="cb' + key + '" class="configCheckbox vigIcon checkbox ' + checkedStyle + '"></div>' + '<div class="configOptionText" id="cbt' + key + '">' + label + "</div>" + "</div>";
            if (data.enabled !== undefined && data.enabled === false) {
                var configHTML = '<div class="configLine" data-config="' + key + '">' + '<div id="cb' + key + '" class="configCheckbox vigIcon checkbox" disabled="true"></div>' + '<div class="configOptionText" id="cbt' + key + '">' + label + "</div>" + "</div>"
            }
            configText.append(configHTML)
        })
    }

    function onShowVideoToggle(isTrue) {
        model.setShowVideo(isTrue);
        model.dispatchEvent(config.newEvent(model.FS_CONFIG_CHANGED))
    }

    function onShowJackAnimations(isTrue) {
        model.setShowJackAnimations(isTrue);
        model.dispatchEvent(config.newEvent(model.FS_CONFIG_CHANGED))
    }

    function onAutoJackpotToggle(isTrue) {
        model.setAutoJackpot(isTrue)
    }

    function onAutoStand18orMoreToggle(isTrue) {
        var v = isTrue;
        if (config.isBJCBetBehind()) v = false;
        model.setAutoStand18orMore(v)
    }

    function onAutoHit8orLessToggle(isTrue) {
        var v = isTrue;
        if (config.isBJCBetBehind()) v = false;
        model.setAutoHit8orLess(v)
    }

    function onShowRenderedCards(isTrue) {
        if (isTrue) $("#betArea, #dealerHand").removeClass("videoMode").addClass("autoplayMode");
        else $("#betArea, #dealerHand").addClass("videoMode").removeClass("autoplayMode")
    }

    function onBetLimitClick(e) {
        var alert = document.createElement("div");
        $(alert).addClass("popup-background");
        var header = document.createElement("div");
        header.innerHTML = config.getLocale("table_limits") + "<br />";
        var table = document.createElement("table");
        table.width = "100%";
        table.style.height = "80%";
        table.border = "1";
        table.style.borderSpacing = "0px";
        table.style.textAlign = "center";
        var cellElem, rowElem;
        for (var row = 0; row < 4; row++) {
            rowElem = table.insertRow(-1);
            for (var col = 0; col < 3; col++) {
                if (col === 0) {
                    cellElem = rowElem.insertCell(-1);
                    if (row !== 0) cellElem.innerHTML = config.getLocale(_tableTypesColumn[row]).replace(/\\n/g, "<br />")
                } else {
                    cellElem = rowElem.insertCell(-1);
                    if (col === 1) {
                        if (row === 0) cellElem.innerHTML = config.getLocale("min_bet");
                        else cellElem.innerHTML = _tableBetTypes[row - 1].getMinLimit()
                    } else if (col === 2) {
                        if (row === 0) cellElem.innerHTML = config.getLocale("max_bet");
                        else cellElem.innerHTML = _tableBetTypes[row - 1].getMaxLimit()
                    }
                }
            }
        }
        alert.appendChild(header);
        alert.appendChild(table);
        $("#betLimitOverlay").append(alert);
        $("#betLimitOverlay").on("click", closePopUp);
        $("#betLimitOverlay").show()
    }

    function onHowToPlayClick(e) {
        var htmlText = config.getLocale(config.urlParams.gameType + "_instructions");
        if (htmlText === undefined) htmlText = "";
        htmlText = htmlText.replace(/\\n/g, "<br>").replace(/ol>/g, "ul>").replace(/<(\/)?p><br( )?(\/)?>|<br( )?(\/)?><p>/g, "");
        console.log(htmlText);
        var alert = document.createElement("div");
        var wrapper = document.createElement("div");
        var header = document.createElement("div");
        var text = document.createElement("div");
        $(text).addClass("howtoplayText");
        $(alert).addClass("popup-background howtoplayBackground bjcHowtoplay");
        $(wrapper).addClass("howtoplayWrapper");
        $(header).addClass("howtoplayHeader");
        text.innerHTML = htmlText;
        header.innerHTML = config.getLocale("how_to_play") + "<br /><br />";
        alert.appendChild(wrapper);
        wrapper.appendChild(header);
        wrapper.appendChild(text);
        $("#betLimitOverlay").append(alert);
        $("#betLimitOverlay").on("click", closePopUp);
        $("#betLimitOverlay").show();
        $(text).niceScroll(config.scrollConfig)
    }

    function closePopUp(e) {
        $("#betLimitOverlay").hide();
        $("#betLimitOverlay").html("")
    }

    function updateGameId() {
        $("#gameNumber").html(_gameText + model.getGameId())
    }

    function updateDealerName() {
        var dn = model.getDealerName();
        if (_dealerName === dn) return;
        _dealerName = dn;
        var dnArray = dn.split(" ");
        $("#dealerName").text(dnArray[0]);
        if (dnArray[0] === "Autoplay") dnArray[0] = "default";
        var imagePath = _dealerImagePath + dnArray[0].toLowerCase();
        if (dnArray.length >= 2) {
            imagePath += "_" + name_parts[1].toLowerCase()
        }
        imagePath += ".png";
        $("#dealerImage").empty();
        $("#dealerImage").html("<div style='background-image: url(" + imagePath + "); width: 100%; height: 100%; background-size: 100% 100%;'></div>")
    }
};
VIVO.namespace("ui.SeatFS");
VIVO.ui.SeatFS = function(vivo, betArea, seatElement, seatNumber, childSlots) {
    "use strict";
    var model = vivo.model.state,
        config = vivo.model.config,
        betTypes = vivo.model.BetTypes,
        messages = vivo.ws.messageTypes,
        cardHandler = vivo.ui.cardHandler,
        ws = vivo.ws,
        that = this,
        _isMouseOver = false,
        _isMe = false,
        _isOpen = true,
        _seatAccountAlias = "",
        _pairsOutcomeSettled = false,
        _betAmounts = [0, 0, 0, 0, 0],
        _hasMoneyOnTable = false,
        _isInBackBettingMode = false,
        _$seat = $(seatElement),
        _$name = $("#seatAlias" + seatNumber),
        _$slotWrapper = $("#slotWrapper" + seatNumber),
        MAX_ALIAS_LENGTH = 12,
        _currentSeatName, _waitingForTakeSeatResponse = false,
        _isFunUser = config.urlParams.currency.toLowerCase() === "fun";
    var betBehindBase = "Behind ";
    var noBetBehindBase = "";
    var base = noBetBehindBase;
    this.playerAlias = function() {
        return _seatAccountAlias
    };
    this.isOpen = function() {
        return _isOpen
    };
    this.hasMoneyOnTable = function() {
        return _hasMoneyOnTable
    };
    this.isBackbettingOn = function() {
        return _isInBackBettingMode
    };
    this.toggleBackBetMode = function(on) {
        if (on === _isInBackBettingMode) return;
        _isInBackBettingMode = on;
        if (_isInBackBettingMode) {
            childSlots[4].clearChips();
            _$seat.addClass("backbetting");
            base = betBehindBase;
            _$name.text(base + _seatAccountAlias.substring(0, Math.min(_seatAccountAlias.length, MAX_ALIAS_LENGTH)))
        } else {
            _$seat.removeClass("backbetting");
            base = noBetBehindBase;
            _$name.text(base + _seatAccountAlias.substring(0, Math.min(_seatAccountAlias.length, MAX_ALIAS_LENGTH)))
        }
    };
    this.clearPendingChips = function() {};
    this.clearChips = function() {};
    this.clearWaitingForTakeSeatResponse = function() {
        _waitingForTakeSeatResponse = false
    };
    this.endOfGame = function() {
        _pairsOutcomeSettled = false;
        $("#seatWinningChips" + seatNumber).empty();
        $("#seatBetAmount" + seatNumber).text("");
        that.toggleBackBetMode(false)
    };
    this.onClick = function(amount) {
        if (!_isOpen) {
            console.log("The seat is already taken.");
            return
        } else if (config.isBJCBetBehind()) {
            var text = "You cannot take a seat. Please bet behind one or more other players by clicking directly on top of their chips.";
            text = config.getLocale("betbehind_take_seat_blocked_message", text);
            var header = "Info:";
            header = config.getLocale("client_alert_title_info", header);
            config.displayAlert2(header, text, config.closeAlert);
            return
        }
        takeSeat(seatNumber)
    };
    this.onMouseEnter = function() {
        _isMouseOver = true;
        $("#" + seatElement.id).css("background-color", "red")
    };
    this.onMouseExit = function() {
        _isMouseOver = false;
        $("#" + seatElement.id).css("background-color", "transparent")
    };
    this.setRummyOutcomeSettled = function(hand) {
        _pairsOutcomeSettled = true
    };
    this.onSeatUpdate = function(s) {
        _waitingForTakeSeatResponse = false;
        _isOpen = false;
        _isMe = model.getPlayerName() === s.name;
        if (_isMe) _$seat.removeClass("anotherPlayer");
        else _$seat.addClass("anotherPlayer");
        _betAmounts = s.betAmounts;
        if (_seatAccountAlias !== s.alias) {
            _$seat.addClass("taken").removeClass("open").removeClass("unavail");
            _seatAccountAlias = s.alias;
            var firstPipeIndex = _seatAccountAlias.indexOf("|");
            if (firstPipeIndex !== -1) _seatAccountAlias = _seatAccountAlias.substring(0, firstPipeIndex);
            _$name.text(base + _seatAccountAlias.substring(0, Math.min(_seatAccountAlias.length, MAX_ALIAS_LENGTH)));
            if (!_isMe) {
                $("#jackpotSlot" + seatNumber).hide()
            }
        }
        if (_isMe && config.getAllowedJPType() == 2) $("#jackpotSlot" + seatNumber).show();
        updateSlotAmounts(_betAmounts)
    };
    this.standUp = function(isLeaveSeatResponse) {
        if (_isOpen) return;
        if (!isLeaveSeatResponse && _isMe) {
            var header = config.getLocale("client_alert_title_info"),
                text = config.getLocale("bjclassic_removed");
            config.displayAlert2(header, text, config.closeAlert)
        }
        _isOpen = true;
        _isMe = false;
        _seatAccountAlias = "";
        _betAmounts = [0, 0, 0, 0, 0];
        _hasMoneyOnTable = false;
        updateSlotAmounts(_betAmounts);
        _$name.text("");
        _$seat.removeClass("anotherPlayer backbetting taken").addClass("open")
    };

    function updateSlotAmounts(bets) {
        _hasMoneyOnTable = false;
        if (!_isMe) {
            for (var j = 0; j < 5; j++) {
                if (j === 3) continue;
                if (_isInBackBettingMode && j === 4) {
                    continue
                }
                model.clearBets(childSlots[j].betType.getId());
                childSlots[j].clearChips();
                if (_betAmounts[j] !== 0 && config.isDealerMonitor) childSlots[j].betConfirmedCallBack({}, model.getChipArray()[0]);
                else {
                    childSlots[j].betConfirmedCallBack({}, _betAmounts[j])
                }
            }
            if (_betAmounts[0] !== 0) _hasMoneyOnTable = true;
            if (config.isDealerMonitor) {
                if (_hasMoneyOnTable) _$seat.addClass("seatActiveWithMoney").removeClass("seatActive");
                else _$seat.removeClass("seatActiveWithMoney").addClass("seatActive")
            }
        }
    }

    function takeSeat() {
        if (_isFunUser) {
            config.displayAlert2(config.getLocale("client_alert_title_info", "Info:"), config.getLocale("depositMoneyWarning", "Please deposit money to activate this feature"), config.closeAlert);
            return
        }
        if (_waitingForTakeSeatResponse) return;
        _waitingForTakeSeatResponse = true;
        ws.sendTakeSeatRequest(seatNumber)
    }
    this.takeSeat = takeSeat;

    function leaveSeat() {
        ws.sendLeaveSeatRequest(seatNumber)
    }
    this.leaveSeat = leaveSeat;
    this.isMe = function() {
        return _isMe
    };

    function isBJ(cards, score) {
        return parseInt(score) === 21 && cards.length === 2
    }
    this.sumChips = function() {
        var sum = 0;
        for (var j = 0; j < 5; j++) sum += childSlots[j].getAmount();
        return sum
    };

    function isPair(cards) {
        var rank1 = cards[0].split(":")[0].slice(0, -1),
            rank2 = cards[1].split(":")[0].slice(0, -1);
        rank1 = parseInt(rank1, 10);
        rank2 = parseInt(rank2, 10);
        if (isNaN(rank1)) rank1 = 10;
        if (isNaN(rank2)) rank2 = 10;
        return rank1 === rank2
    }
};
VIVO.namespace("ui.ActionPanel");
VIVO.ui.ActionPanel = function(vivo, frame) {
    "use strict";
    var model = vivo.model.state,
        config = vivo.model.config,
        ws = vivo.ws,
        messages = vivo.ws.messageTypes,
        _GSM = config.gameStateMessage,
        betTypes = vivo.model.BetTypes,
        INITIAL_DEAL_TEXT = config.getLocale("initialDeal", "INITIAL DEAL"),
        CURRENT_SEAT_TEXT = config.getLocale("seat", "SEAT") + " ",
        CURRENT_SEAT_TEXT_CAMMEL_CASE = _.capitalize(CURRENT_SEAT_TEXT.trim().toLowerCase()),
        CURRENT_SEAT_TEXT_DEALER = config.getLocale("dealerSeat", "DEALER") + " ",
        CURRENT_YOUR_SEAT_TEXT = config.getLocale("yourTurn", "YOUR TURN") + " ",
        INSURANCE_TEXT = config.getLocale("timerInsuranceText", "Insurance"),
        bjcOptionStates = config.getConfigParam("bjcOptionStatesTimingSec"),
        betManagementPanel = $("#betManagementPanel"),
        optionPanel = $("#fsOptionPanel"),
        initialDealPanel = $("#initialDeal"),
        isAutoRebetOn = false,
        fsRebetButton = $("#fsRebetButton"),
        fsClearBetsButton = $("#fsClearBetsButton"),
        fsUndoLastButton = $("#fsUndoLastButton"),
        fsStandUpButton = $("#fsStandUpButton"),
        fsAutoBetButton = $("#fsAutoBetButton"),
        gameStateLabel = $("#gameState"),
        seats = $(".seat"),
        isInitialDeal = true,
        isDealerTurn = false,
        lastGSM, rebetClicked = false,
        currentHandRep = new vivo.ui.HandRep($("#currentHand"), false);
    $("#initialDealText").text(INITIAL_DEAL_TEXT);
    $("#optionButtonHit").attr("data-tooltip", config.getLocale("option_hit"));
    $("#optionButtonStand").attr("data-tooltip", config.getLocale("option_stand"));
    $("#optionButtonDouble").attr("data-tooltip", config.getLocale("option_double"));
    $("#optionButtonSplit").attr("data-tooltip", config.getLocale("option_split"));
    $("#optionButtonSurrender").attr("data-tooltip", config.getLocale("option_surrender", "Surrender"));
    fsRebetButton.attr("data-tooltip", config.getLocale("rebet"));
    fsClearBetsButton.attr("data-tooltip", config.getLocale("clear_bets"));
    fsUndoLastButton.attr("data-tooltip", config.getLocale("undo_last_button"));
    fsStandUpButton.attr("data-tooltip", config.getLocale("standUpToolTip", "Stand Up"));
    fsAutoBetButton.attr("data-tooltip", config.getLocale("auto_rebet"));
    fsRebetButton.on("click", onRebetClick);
    fsClearBetsButton.on("click", onClearBetsClick);
    fsUndoLastButton.on("click", onUndoLastClick);
    fsStandUpButton.on("click", onStandUpClick);
    fsAutoBetButton.on("click", onAutoBetClick);
    ws.addEventListener(messages.WagerResponse, onWagerResponse);
    ws.addEventListener(_GSM, onGameStateMessage);
    ws.addEventListener(messages.OpenOffer, onOpenOffer);
    model.addEventListener(model.ACTIVE_SEAT_UPDATE, onActiveSeatChanged);
    this.isInitialDeal = function() {
        return isInitialDeal
    };

    function onGameStateMessage(e) {
        var gsm = e.data[_GSM];
        if (gsm.state === model.PYB || gsm.state === model.LB) {
            isInitialDeal = true;
            currentHandRep.clearHand();
            seats.removeClass("active");
            isDealerTurn = false;
            $("#gameState").removeClass("pulsateAnimation")
        } else {
            var activeHand = getActiveHand(gsm);
            if (activeHand && activeHand.seat === undefined) isDealerTurn = true;
            updateCurrentHand(activeHand);
            if (lastGSM === undefined && activeHand && activeHand.cards.length > 2) {
                isInitialDeal = false;
                model.dispatchEvent(config.newEvent(model.INITIAL_DEAL_FINISHED))
            }
        }
        lastGSM = gsm
    }

    function getActiveHand(gsm) {
        var activeSeatNum = model.getActiveSeat();
        var activeHand;
        if (activeSeatNum === -1 && isInitialDeal) {
            activeHand = _.min(gsm.playerHands, "seat");
            if (activeHand === Infinity || activeHand === undefined) return undefined
        } else activeHand = _.find(gsm.playerHands, {
            seat: activeSeatNum
        });
        if (activeHand === undefined || gsm.dealerHand.cards.length > 0 && gsm.dealerHand.cards[0] !== "?C:1") return gsm.dealerHand;
        return activeHand
    }

    function isMyHand(hand) {
        return frame.betArea.getSeat(hand.seat).isMe()
    }

    function updateCurrentHand(activeHand) {
        if (activeHand === undefined) return;
        if (isInitialDeal) return;
        currentHandRep.updateHand(activeHand);
        var seat = activeHand.seat;
        seats.removeClass("active");
        $("#gameState").removeClass("pulsateAnimation");
        $("#seat" + seat).addClass("active");
        if (seat === undefined) {
            gameStateLabel.html(CURRENT_SEAT_TEXT_DEALER + "&nbsp;&nbsp;&nbsp;" + currentHandRep.getHandScoreText());
            currentHandRep.clearHand();
            frame.gameState.startTimer(0, 0, function() {})
        } else if (isMyHand(activeHand)) {
            gameStateLabel.html(CURRENT_YOUR_SEAT_TEXT + "&nbsp;&nbsp;&nbsp;" + CURRENT_SEAT_TEXT_CAMMEL_CASE + seat + "&nbsp;&nbsp;&nbsp;" + currentHandRep.getHandScoreText())
        } else gameStateLabel.text(CURRENT_SEAT_TEXT + activeHand.seat);
        frame.gameState.updateClasses(gameStateLabel, "PYBStatus", "PYB", "")
    }

    function onOpenOffer(e) {
        if (isInitialDeal) {
            isInitialDeal = false;
            model.dispatchEvent(config.newEvent(model.INITIAL_DEAL_FINISHED))
        }
        if (isDealerTurn) return;
        var currentOffer = e.data.OpenOffer;
        var betName = betTypes.handBetsNamesbyId[currentOffer.betTypeId + ""];
        var betType = betTypes[betName];
        if (lastGSM !== undefined) {
            if (currentOffer.options[0] === "Insurance") gameStateLabel.text(INSURANCE_TEXT);
            else {
                var activeHand = _.find(lastGSM.playerHands, {
                    seat: betType.getSeatNum()
                });
                updateCurrentHand(activeHand)
            }
        }
        frame.gameState.startTimer(currentOffer.durationSec, currentOffer.durationSec, onOptionTimerUpdate)
    }

    function onActiveSeatChanged(e) {
        var as = model.getActiveSeat(),
            activeHand = _.find(lastGSM.playerHands, {
                seat: as
            });
        updateCurrentHand(activeHand)
    }

    function onOptionTimerUpdate(time) {
        if (time <= 0) {
            $(".insuraceButton").hide();
            frame.gameState.startTimer(0, 0, function() {});
            model.dispatchEvent(config.newEvent(model.OPTION_TIMER_FINISHED))
        }
        if (time < bjcOptionStates.yellowFlashStart) {
            frame.gameState.updateClasses(gameStateLabel, "NMBStatus", "NMB", "pulsateAnimation")
        } else if (time < bjcOptionStates.yellowStart) frame.gameState.updateClasses(gameStateLabel, "LBStatus", "LB", "");
        else frame.gameState.updateClasses(gameStateLabel, "PYBStatus", "PYB", "")
    }

    function onRebetClick() {
        if (!model.isBetStateValid()) {
            frame.gameState.flash();
            return
        }
        if (model.getBetAmount() > 0 || rebetClicked === true) {
            console.log("Ignoring rebet request BJC doesn't support rebets with bets on the table. Or if rebet has been clicked already: " + rebetClicked);
            return
        }
        model.rebetV2();
        rebetClicked = true
    }

    function onWagerResponse(e) {
        rebetClicked = false
    }

    function onClearBetsClick() {
        if (!model.isBetStateValid()) {
            frame.gameState.flash();
            return
        }
        if (model.isAutoRebet()) onAutoBetClick();
        model.clearAllBets(clearAllBetsCallback)
    }

    function clearAllBetsCallback() {}

    function onUndoLastClick() {
        if (!model.isBetStateValid()) return;
        model.undoLastBet()
    }

    function onStandUpClick() {
        for (var i = 1; i < 8; i++) {
            var s = VIVO.ui.betArea.getSeat(i);
            if (s.isMe()) {
                s.leaveSeat();
                return
            }
        }
    }

    function onAutoBetClick() {
        var ar = !model.isAutoRebet();
        if (ar) $("#fsAutoBetButton").addClass("pressed");
        else $("#fsAutoBetButton").removeClass("pressed");
        model.setAutoRebet(ar)
    }
};
VIVO.namespace("ui.FSAutoplay");
VIVO.ui.FSAutoplay = function(vivo, frame) {
    "use strict";
    var videoWrapper = $("#videoWrapper"),
        autoPlay = $("autoPlayBackGround");

    function show() {}

    function hide() {}
    return {
        show: show,
        hide: hide
    }
};
VIVO.namespace("ui.HandRep");
VIVO.ui.HandRep = function($handElement, isDealer, seatElement, displayAllCards) {
    "use strict";
    var config = VIVO.model.config,
        model = VIVO.model.state,
        currentHand = {
            cards: [],
            score: "-1"
        },
        CURRENT_SEAT_TEXT = _.capitalize(config.getLocale("seat", "SEAT").toLowerCase()),
        DEALER_TEXT = _.capitalize(config.getLocale("dealerSeat", "DEALER").toLowerCase()),
        MAX_CARDS_RENDERED = 6,
        animationSent = {},
        _seatNum;
    this.updateHand = function(hand, seatNum) {
        _seatNum = seatNum;
        if (seatElement) {
            var handScore = getHandScoreText(hand);
            if (isDealer) seatElement.html(handScore + "&nbsp;&nbsp;&nbsp;" + DEALER_TEXT);
            else if (seatElement) seatElement.html(CURRENT_SEAT_TEXT + seatNum + "&nbsp;&nbsp;&nbsp;" + handScore)
        }
        if (hand === undefined || hand.score === undefined || hand.cards === undefined || isHandTheSame(hand, currentHand)) return;
        var isSplit = isSplitHand(hand);
        if (seatElement) {
            if (!isBJ(hand) && hand.score === "21") sendEvent(model.HIT_TO_21_EVENT, seatNum, hand);
            else if (hand.cards && hand.cards.length > 2 && hand.score === "20") sendEvent(model.HIT_TO_20_EVENT, seatNum, hand);
            else if (isSplit) doFireSplit20or21Events(hand, seatNum);
            if (isDealer && isBust(hand)) sendEvent(model.DEALER_BUST_EVENT, -1, hand)
        }
        if (!displayAllCards && (hand.cards.length >= MAX_CARDS_RENDERED || isSplit)) {
            $handElement.empty();
            renderScore($handElement, hand);
            currentHand = _.cloneDeep(hand);
            return
        }
        if (currentHand.cards.length > hand.cards.length) {
            $handElement.empty();
            currentHand.cards = []
        }
        if (isSplit) renderSplitHand(hand);
        else renderNormalHand(hand);
        currentHand = _.cloneDeep(hand)
    };

    function doFireSplit20or21Events(hand, seatNum) {
        var cards = getSplitCards(hand.cards),
            newScoreArr = hand.score.split("|"),
            leftScore = newScoreArr[1],
            rightScore = newScoreArr[0];
        if (cards.left.length > 2) {
            if (leftScore === "21") sendEvent(model.HIT_TO_21_EVENT, seatNum, hand);
            else if (leftScore === "20") sendEvent(model.HIT_TO_20_EVENT, seatNum, hand)
        } else if (cards.right.length > 2) {
            if (rightScore === "21") sendEvent(model.HIT_TO_21_EVENT, seatNum, hand);
            else if (rightScore === "20") sendEvent(model.HIT_TO_20_EVENT, seatNum, hand)
        }
    }
    this.clearHand = function() {
        $handElement.empty();
        $handElement.removeClass("doubleOrientationWrapper");
        currentHand = {
            cards: [],
            score: "-1"
        };
        animationSent = {}
    };

    function isBust(hand) {
        if (isSplitHand(hand)) {
            var scores = hand.score.split("|");
            if (parseInt(scores[0]) > 21 && parseInt(scores[1]) > 21) return true
        } else if (parseInt(hand.score) > 21) return true;
        return false
    }
    this.isBust = function() {
        return isBust(currentHand)
    };

    function isDealerTurn(hand) {
        if (!hand || !hand.cards || hand.cards.length < 2) return false;
        var firstCard = hand.cards[0].split(":")[0];
        return firstCard !== "?C"
    }

    function isHandTheSame(newH, oldH) {
        if (newH.cards.length !== oldH.cards.length) return false;
        for (var i = 0; i < oldH.cards.length; i++) {
            if (oldH.cards[i] !== newH.cards[i]) return false
        }
        return true
    }

    function sendEvent(eventName, seatNum, hand) {
        if (animationSent[eventName] !== undefined && !isSplitHand(hand)) return;
        animationSent[eventName] = true;
        var e = config.newEvent(eventName);
        e.data = {
            seat: seatNum,
            cards: hand.cards
        };
        model.dispatchEvent(e)
    }

    function getSplitCards(cards) {
        var sortedCards = _.sortBy(cards, function(card) {
            var loc = card.split(":")[1];
            return -100 * parseInt(loc[0], 10) + parseInt(loc[2], 10)
        });
        var left = [],
            right = [];
        _.forEach(sortedCards, function(card) {
            var loc = card.split(":")[1];
            if (loc[0] === "1") right.push(card);
            else left.push(card)
        });
        return {
            left: left,
            right: right
        }
    }

    function renderSplitHand(hand) {
        var hands = getSplitCards(hand.cards);
        $handElement.empty();
        currentHand.cards = [];
        var isSecondHand = true;
        _.forEach(hands.left, function(card) {
            var cardElem = createCardElem(card, 69);
            $handElement.append(cardElem)
        });
        $handElement.append('<div class="handSeperator vigIcon dividerIcon"></div>');
        _.forEach(hands.right, function(card) {
            var cardElem = createCardElem(card, 69);
            $handElement.append(cardElem)
        })
    }

    function renderNormalHand(hand) {
        for (var i = 0; i < hand.cards.length; i++) {
            if (currentHand.cards.length > i && currentHand.cards[i] === hand.cards[i]) continue;
            var card = createCardElem(hand.cards[i], i);
            if (currentHand.cards.length > i) replaceCardElem($handElement, card, i);
            else if (isDealer) $handElement.prepend(card);
            else $handElement.append(card)
        }
    }

    function getScore(hand) {
        if (!hand || !hand.score) return "";
        if (hand.score.indexOf("|") === -1) return hand.score;
        var newScoreArr = hand.score.split("|");
        return newScoreArr[1] + "|" + newScoreArr[0]
    }

    function renderScore($elem, hand) {
        $elem.html('<div class="tableWrapper"><div class="scoreLabel">' + getScore(hand) + "</div></div>")
    }

    function createCardElem(card, cardIndex) {
        var cardArray = card.split(":"),
            cardCode = cardArray[0],
            isDouble = cardArray[1].indexOf("30") !== -1;
        if (cardCode === "?C") cardCode = "holeCard";
        var cardElem = document.createElement("div");
        $(cardElem).addClass("card fsHandCard fsHandIndex" + cardIndex + " card-" + cardCode);
        if (isDouble) {
            $(cardElem).addClass("doubleOrientation");
            var doubleWrapper = document.createElement("div");
            $(doubleWrapper).addClass("doubleCardWrapper");
            $(doubleWrapper).append(cardElem);
            return doubleWrapper
        }
        return cardElem
    }

    function is8orLess(hand) {
        if (!hand || !hand.score) return false;
        var activeHand = getActiveHand(hand);
        var cards = activeHand.cards,
            score = activeHand.score,
            includesAce = score.indexOf("/") !== -1;
        if (includesAce) return false;
        if (parseInt(score) > 8) return false;
        if (isPair(activeHand)) return false;
        return true
    }

    function getActiveHand(hand, rightOrLeft) {
        if (!isSplitHand(hand)) return hand;
        var c = getSplitCards(hand.cards),
            handIndex = 1,
            s = getScore(hand).split("|"),
            h = "right";
        if (c.left.length > 1) {
            handIndex = 0;
            h = "left"
        }
        if (rightOrLeft !== undefined && rightOrLeft !== h) {
            h = rightOrLeft;
            if (h === "right") handIndex = 1;
            else if (h === "left") handIndex = 0
        }
        return {
            cards: c[h],
            score: s[handIndex]
        }
    }
    this.is8orLess = function() {
        return is8orLess(currentHand)
    };

    function is18orMore(hand) {
        if (!hand || !hand.score) return false;
        var activeHand = getActiveHand(hand);
        var cards = activeHand.cards,
            score = activeHand.score,
            includesAce = score.indexOf("/") !== -1;
        if (includesAce) return false;
        if (parseInt(score) < 18) return false;
        if (isPair(activeHand)) return false;
        return true
    }
    this.is18orMore = function() {
        return is18orMore(currentHand)
    };

    function replaceCardElem($parent, newElem, cardIndex) {
        $parent.find(".fsHandIndex" + cardIndex).replaceWith(newElem)
    }

    function isBJ(hand) {
        if (!hand) return false;
        var cards = hand.cards,
            score = hand.score;
        return parseInt(score) === 21 && cards.length === 2
    }

    function isPair(hand, isStrict) {
        if (!hand || !hand.cards || hand.cards.length !== 2) return false;
        var cards = hand.cards,
            score = hand.score;
        var rank1 = cards[0].split(":")[0].slice(0, -1),
            rank2 = cards[1].split(":")[0].slice(0, -1);
        if (isStrict) return rank1 === rank2;
        rank1 = parseInt(rank1, 10);
        rank2 = parseInt(rank2, 10);
        if (isNaN(rank1)) rank1 = 10;
        if (isNaN(rank2)) rank2 = 10;
        return rank1 === rank2
    }

    function isSplitHand(hand) {
        if (!hand || !hand.score) return false;
        return hand.score.indexOf("|") !== -1
    }

    function getHandScoreText(hand) {
        var handScore = "";
        if (hand !== undefined && hand.score !== undefined) handScore = getScore(hand);
        if (isBJ(hand)) handScore = "BJ";
        return handScore
    }
    this.getSeatNumber = function() {
        return _seatNum
    };
    this.getHandScoreText = function() {
        return getHandScoreText(currentHand)
    };

    function isDoubleValid(hand) {
        if (!hand || hand.cards.length < 2) return false;
        if (hand.cards.length === 2) return true;
        if (!isSplitHand(hand)) return false;
        if (hand.cards.length === 3) return true;
        var hands = getSplitCards(hand.cards);
        if (model.getActiveHand() === "Right") return hands.right.length === 2;
        else return hands.left.length === 2
    }

    function isDoubledHand(hand) {
        if (!hand || !hand.cards) return false;
        var isSplit = isSplitHand(hand),
            isHandLeftDoubled = false,
            isHandRightDoubled = false,
            isHandDoubled = false;
        if (isSplit) {
            isHandLeftDoubled = areCardsDoulbed(getActiveHand(hand, "left").cards);
            isHandRightDoubled = areCardsDoulbed(getActiveHand(hand, "right").cards);
            isHandDoubled = isHandLeftDoubled || isHandRightDoubled
        } else isHandDoubled = areCardsDoulbed(hand.cards);
        return {
            hand: isHandDoubled,
            left: isHandLeftDoubled,
            right: isHandRightDoubled
        }
    }

    function areCardsDoulbed(cards) {
        var result = false;
        _.forEachRight(cards, function(card) {
            if (card.indexOf(".30") !== -1 || card.indexOf(":30") !== -1) {
                result = true;
                return false
            }
        });
        return result
    }
    this.isDoubledHand = function() {
        return isDoubledHand(currentHand)
    };
    this.isDoubleValid = function() {
        return isDoubleValid(currentHand)
    };
    this.getCards = function() {
        var result = [];
        if (currentHand && currentHand.cards) result = currentHand.cards;
        return result
    };
    this.isDealerTurn = function() {
        return isDealerTurn(currentHand)
    };
    this.isBJ = function() {
        return isBJ(currentHand)
    };
    this.isPair = function(isStrict) {
        return isPair(currentHand, isStrict)
    };
    this.getScore = function() {
        return getScore(currentHand)
    };
    this.isSplitHand = function() {
        if (!currentHand || !currentHand.score) return false;
        return isSplitHand(currentHand)
    };
    this.getNumericScore = function(aceAs11) {
        if (!currentHand || !currentHand.score) return 0;
        var hand = getActiveHand(currentHand);
        var score = hand.score;
        if (aceAs11 && score.indexOf("/") !== -1) return parseInt(score.split("/")[1], 10);
        else return parseInt(score, 10)
    }
};
VIVO.namespace("ui.EdgeAnimations");
VIVO.ui.EdgeAnimations = function() {
    "use strict";
    var config = VIVO.model.config,
        model = VIVO.model.state,
        ws = VIVO.ws,
        messages = VIVO.ws.messageTypes,
        ASSET_PATH = "resources/html5Images/bjclassic/fullScreen/jackAnimations/",
        classLookup = {
            madJack: "EDGE-36318467",
            bustBurned: "EDGE-5409189",
            bustCards: "EDGE-4310574",
            blackjackStars: "EDGE-20830800",
            blackjackFlag: "EDGE-2814948",
            blackjackCards: "EDGE-9186279",
            pair: "EDGE-32073325",
            rummyCards: "EDGE-32073666",
            surrenderHandsUp: "EDGE-16284709",
            tip: "EDGE-6758828",
            tipConfetti: "EDGE-23570488",
            tipSparkle: "EDGE-22667286",
            jackpotWin: "EDGE-786122"
        },
        bustAnimations = ["bustBurned", "bustCards"],
        blackjackAnimations = ["blackjackFlag", "blackjackStars", "blackjackCards"],
        tipAnimations = ["tipConfetti", "tipSparkle"],
        loadAnimationStack = _.keys(classLookup),
        animationQueue = [],
        runningAnimations = {},
        animationRunning = {},
        tipAnimationTimer, lastEvent, _tableElement = $("#betArea").get(0);
    var styleArray = [];
    var parent = $("#betArea");
    _.forIn(classLookup, function(value, key) {
        styleArray.push(".edgeLoad-" + value + " { visibility:hidden; }");
        createElement(key, parent)
    });
    var sheet = document.createElement("style");
    sheet.innerHTML = styleArray.join(" ");
    document.body.appendChild(sheet);
    AdobeEdge.bootstrapCallback(onEdgeAnimationLoaded);
    var nextKey = loadAnimationStack.pop(),
        nextValue = classLookup[nextKey];
    loadAnimation(nextKey, nextValue);
    model.addEventListener(model.BLACK_JACK_EVENT, triggerBlackJackEvent);
    model.addEventListener(model.BUST_EVENT, triggerBustAnimation);
    model.addEventListener(model.SURRENDER_EVENT, function(e) {
        delayedShowSeatAnmation("surrenderHandsUp", e.data.seat)
    });
    model.addEventListener(model.PAIR_CARDS_EVENT, function(e) {
        delayedShowSeatAnmation("pair", e.data.seat)
    });
    model.addEventListener(model.RUMMY_CARDS_EVENT, function(e) {
        delayedShowSeatAnmation("rummyCards", e.data.seat)
    });
    model.addEventListener(model.JACKPOT_WON_EVENT, function(e) {
        delayedShowSeatAnmation("jackpotWin", e.data.seat)
    });
    ws.addEventListener(messages.TipResponse, triggerTipAnimation);
    ws.addEventListener(messages.TipBetSettled, triggerTipAnimation);
    model.addEventListener(model.HEART_BEAT_EVENT, onHardBeatProcessAnimations);
    model.addEventListener(model.GAME_STARTED, function() {
        $(".edgeAnimation").hide()
    });

    function triggerHitTo21Animation(event) {
        delayedShowSeatAnmation(_.sample(twentyOneAnimations), event.data.seat)
    }

    function triggerTipAnimation(e) {
        var tbs = e.data.TipBetSettled;
        var tr = e.data.TipResponse;
        if (tbs && tbs.payout <= 0) return;
        if (tr && tr.status !== 0) return;
        if (tipAnimationTimer) clearTimeout(tipAnimationTimer);
        showAnimation($("#fsTipButton"), "tip", false);
        tipAnimationTimer = config.setTimeout(function() {
            showAnimation($("#fsTipButton"), _.sample(tipAnimations))
        }, 2)
    }

    function onEdgeAnimationLoaded(compId) {
        console.log("onEdgeAnimationLoaded compId=" + compId);
        if (compId === classLookup.tip) $("#" + compId).hide();
        if (loadAnimationStack.length > 0) {
            var nextKey = loadAnimationStack.pop(),
                nextValue = classLookup[nextKey];
            loadAnimation(nextKey, nextValue)
        }
    }

    function triggerBlackJackEvent(event) {
        if (lastEvent && event.data.seat === lastEvent.data.seat) return;
        delayedShowSeatAnmation(_.sample(blackjackAnimations), event.data.seat)
    }

    function onDealerBust(event) {
        showAnimation($("#dealerHand"), _.sample(dealerBustAnimations))
    }

    function triggerBustAnimation(event) {
        if (lastEvent && event.data.seat === lastEvent.data.seat) return;
        delayedShowSeatAnmation(_.sample(bustAnimations), event.data.seat)
    }

    function delayedShowSeatAnmation(targetElement, animationName, centerElement) {
        config.setTimeout(function() {
            showSeatAnimation(targetElement, animationName, centerElement)
        }, 1)
    }

    function showSeatAnimation(animationName, seatNumber) {
        var $seat = $("#seat" + seatNumber);
        showAnimation($seat, animationName)
    }

    function showAnimation(targetElement, animationName, centerElement) {
        if (!model.showJackAnimations()) return;
        if (loadAnimationStack.length > 0) return;
        var animationId = classLookup[animationName],
            $elem = $("#" + animationId),
            animationTimer = runningAnimations[animationId];
        if (animationTimer) {
            animationQueue.push(function() {
                showAnimation(targetElement, animationName, centerElement)
            });
            return
        }
        animationRunning[animationId] = true;
        $elem.finish();
        $elem.show();
        scaleAnimation($elem);
        if (centerElement === undefined || centerElement === true) {
            new Tether({
                element: $elem.get(0),
                target: targetElement.get(0),
                attachment: "bottom middle",
                targetAttachment: "top middle",
                targetOffset: "12px 0"
            })
        }
        var comp = AdobeEdge.getComposition(animationId);
        if (comp === undefined) loadAnimation(animationName, animationId);
        else {
            var stage = comp.getStage();
            if (stage === undefined) {
                console.error("Error didn't load properly.. loading again..");
                loadAnimation(animationName, animationId)
            } else stage.play()
        }
        runningAnimations[animationId] = config.setTimeout(function() {
            animationRunning[animationId] = false;
            runningAnimations[animationId] = undefined;
            $("#" + animationId).fadeOut()
        }, 3)
    }

    function createElement(animationName, $parentElem) {
        var animationId = classLookup[animationName];
        var html = '<div id="' + animationId + '" class="edgeAnimation"><div class="blockWrapper"><div class="' + animationId + '"></div></div></div>';
        $parentElem.append(html)
    }

    function loadAnimation(animationName, animationId) {
        AdobeEdge.loadComposition(ASSET_PATH + animationName + "/" + animationName, animationId, {
            width: "120px"
        }, {
            dom: []
        }, {
            dom: []
        })
    }

    function scaleAnimation(wrapper) {
        var elementWidth = wrapper.width();
        var rescale = elementWidth / 80;
        var translateLeft = (84 - elementWidth) * -1;
        var translateAmount = 12;
        var actualStage = wrapper.children().children();
        actualStage.css("transform", "translate(" + translateLeft + "px, -" + translateAmount + "px) scale(" + rescale + ")");
        actualStage.css("-webkit-transform", "translate(" + translateLeft + "px, -" + translateAmount + "px) scale(" + rescale + ")");
        actualStage.css("position", "absolute")
    }

    function onHardBeatProcessAnimations() {
        if (animationQueue.length > 0) {
            var animationToRun = animationQueue.shift();
            animationToRun()
        }
    }
};
VIVO.namespace("ui.PlayerDealerHands");
VIVO.ui.PlayerDealerHands = function(vivo, frame) {
    "use strict";
    var ws = vivo.ws,
        messages = vivo.ws.messageTypes,
        config = vivo.model.config,
        model = vivo.model.state,
        _GSM = config.gameStateMessage,
        PLAYER_HAND_HTML = '<div id="playerHandSEAT#" data-seatnum="SEAT#" class="fsPlayerHand fullScreenBlackBG phFixedLocINDEX#"><div class="blockWrapper">' + '<div id="playerHandHeaderSEAT#" class="playerHandHeader"></div>' + '<div id="playerCardsSEAT#" class="playerCards handWrapper"></div>' + "</div></div>",
        betTypes = vivo.model.BetTypes,
        dealerHand = $("#fsDealerHand"),
        mySeats = [],
        cardHandlers = {},
        dealerCardHandler = new vivo.ui.HandRep($("#dealerCards"), true, $("#dealerHandHeader"), true),
        videoElm = $("#videoRowWrapper"),
        gameInProgressPanel = $("#gameInProgress"),
        optionButtons = $(".optionButton"),
        optionButtonSplit = $("#optionButtonSplit"),
        optionButtonDouble = $("#optionButtonDouble"),
        optionButtonSurrender = $("#optionButtonSurrender"),
        bottomRow = $("#bottomRow"),
        isWaitingForCards = true,
        lastOptionSeatNumber, currentState, visibleOption, insuranceButtons = [],
        chooseAheadOptions = {},
        recivedWagerResponse = false,
        lastGSM, initialDealFinished = false,
        currentSeat, currentOffer, hitWarningOpen = false,
        MAX_SEATS = 3,
        pendingChooseAhead = {},
        chooseAheadId = -1;
    ws.addEventListener(messages.OptionTakenNotification, onOptionTakenNotification);
    ws.addEventListener(_GSM, onGameStateMessage);
    ws.addEventListener(messages.OpenOffer, onOpenOffer);
    ws.addEventListener(messages.WagerResponse, onWagerResponse);
    ws.addEventListener(messages.InitialOptionTakenStatus, onInitialOptionTakenStatus);
    model.addEventListener(model.INITIAL_DEAL_FINISHED, onInitialDealFinished);
    model.addEventListener(model.GAME_STARTED, onGameStarted);
    model.addEventListener(model.OPTION_TIMER_FINISHED, onOptionTimerFinished);
    model.addEventListener(model.BLACK_JACK_EVENT, onHandFinishedEvent);
    model.addEventListener(model.BUST_EVENT, onHandFinishedEvent);
    optionButtons.on("click", onOptionButtonClick);
    $("#gameInProgressText").text(config.getLocale("gameInProgress", "GAME IN PROGRESS"));
    $("#insurancePanelText").text(config.getLocale("option_insurance", "Insurance?"));

    function onInitialDealFinished() {
        if (initialDealFinished) return;
        initialDealFinished = true;
        if (currentOffer && currentOffer.options[0] !== "Insurance") applyState("stateMyTurn");
        else if (currentSeat && !currentOffer) applyState("stateChooseAhead");
        else applyState("stateGameInProgress");
        $(".fsPlayerHand").not("#fsDealerHand").addClass("stack").off().on("click", function(e) {
            bringHandToFront(parseInt($(this).data("seatnum")))
        });
        if (!dealerCardHandler.isDealerTurn()) {
            applyAutoStand18orMore();
            applyAutoHit8orLess()
        }
        var seatsWithAutoChooseAhead = _.values(pendingChooseAhead);
        var seatsThatStillRequireChoice = _.xor(mySeats, seatsWithAutoChooseAhead);
        if (seatsThatStillRequireChoice.length > 0) bringHandToFront(seatsThatStillRequireChoice[0]);
        else if (mySeats.length > 0) bringHandToFront(mySeats[0])
    }

    function onWagerResponse(e) {
        recivedWagerResponse = true;
        ws.removeEventListener(messages.WagerResponse, onWagerResponse);
        var actualSeatsWithMoney = [];
        var seatNum;
        var wr = e.data.WagerResponse;
        _.forEach(wr.betAmounts, function(amount, i) {
            if (amount <= 0) {
                return true
            }
            seatNum = getSeatNumberFromBetId(wr.betTypes[i]);
            actualSeatsWithMoney.push(seatNum)
        });
        for (var i = mySeats.length - 1; i >= 0; i--) {
            seatNum = mySeats[i];
            if (actualSeatsWithMoney.indexOf(seatNum) !== -1) continue;
            removeHand(seatNum)
        }
        reorderHands();
        if (currentState === "stateChooseAhead" && !dealerCardHandler.isDealerTurn() && actualSeatsWithMoney.length === 0) applyState("stateGameInProgress");
        config.setTimeout(function() {
            _.forEach(actualSeatsWithMoney, function(s) {
                manageSplitDoubleChips(s)
            })
        }, .1)
    }

    function manageSplitDoubleChips(seatNumber) {
        var handler = cardHandlers[seatNumber];
        if (handler === undefined) return;
        var bt = betTypes["Win_H" + seatNumber];
        var mainBetAmount = model.getBetAmount(bt);
        var doubleResult = handler.isDoubledHand();
        var isSplitHand = handler.isSplitHand();
        frame.betArea.getSlot(bt.getId()).updateDoubleSplitChips(mainBetAmount, isSplitHand, doubleResult)
    }

    function applyState(state) {
        var s = state;
        if (isWaitingForCards) s = s + " waitingForCards";
        currentState = state;
        if (dealerCardHandler && dealerCardHandler.isDealerTurn()) {
            gameInProgressPanel.removeClass("insurance");
            $("#dealerHand").addClass("active")
        } else {
            if (state === "statePYB") gameInProgressPanel.removeClass("insurance");
            $("#dealerHand").removeClass("active")
        }
        bottomRow.removeClass("statePYB stateChooseAhead stateInitialDeal stateMyTurn stateGameInProgress waitingForCards").addClass(s);
        $(".fsPlayerHand").removeClass("statePYB stateChooseAhead stateInitialDeal stateMyTurn stateGameInProgress waitingForCards").addClass(s)
    }

    function onHandFinishedEvent(e) {
        var seatNum = e.data.seat;
        var isSurrender = e.data.isSurrender;
        var cardHandler = cardHandlers[seatNum];
        if (!cardHandler) return;
        if (!(cardHandler.isBJ() || cardHandler.isBust() || isSurrender)) return;
        config.setTimeout(function() {
            removeHand(seatNum);
            reorderHands();
            if (mySeats.length > 0) bringHandToFront(mySeats[0]);
            else if (!dealerCardHandler.isDealerTurn()) applyState("stateGameInProgress")
        }, 2)
    }

    function removeHand(seatNum) {
        var cardHandler = cardHandlers[seatNum];
        if (cardHandler) cardHandler.clearHand();
        delete cardHandlers[seatNum];
        var index = mySeats.indexOf(seatNum);
        if (index !== -1) mySeats.splice(index, 1);
        $("#playerHand" + seatNum).remove();
        if (currentSeat === seatNum) currentSeat = undefined
    }

    function applyAutoHit8orLess() {
        if (!model.getAutoHit8orLess()) return;
        if (!recivedWagerResponse) return;
        var applicableHands = _.filter(_.values(cardHandlers), function(h) {
            return h.is8orLess()
        });
        applicableHands = _.sortBy(applicableHands, function(h) {
            return h.getSeatNumber() * -1
        });
        _.forEach(applicableHands, function(hand) {
            autoApplyOption(hand.getSeatNumber(), "Hit")
        })
    }

    function applyAutoStand18orMore() {
        if (!model.getAutoStand18orMore()) return;
        if (!recivedWagerResponse) return;
        var applicableHands = _.filter(_.values(cardHandlers), function(h) {
            return h.is18orMore()
        });
        applicableHands = _.sortBy(applicableHands, function(h) {
            return h.getSeatNumber() * -1
        });
        _.forEach(applicableHands, function(hand) {
            autoApplyOption(hand.getSeatNumber(), "Stand")
        })
    }
    var lastOptionAutoOption;

    function autoApplyOption(seat, option) {
        if (seat === currentSeat && currentOffer) {
            if (currentOffer.offerId === lastOptionAutoOption) return;
            trackOptionsVisible(true);
            model.takeOffer(currentOffer.offerId, option, currentOffer.betTypeId, onOptionResponse);
            trackOptionsVisible(false, option);
            optionButtons.addClass("disabled");
            lastOptionAutoOption = currentOffer.offerId;
            return
        }
        var id = chooseAheadId--;
        pendingChooseAhead[id] = seat;
        model.takeOffer(id, option, betTypes["Win_H" + seat].getId(), onChooseaheadResponse)
    }

    function getSeatNumberFromBetId(betId) {
        var betName = betTypes.handBetsNamesbyId[betId + ""];
        var betType = betTypes[betName];
        return betType.getSeatNum()
    }
    var isFirstEvent = true;

    function onGameStarted(e) {
        if (isFirstEvent) {
            isFirstEvent = false;
            return
        }
        $(".insuraceButton").hide();
        $(".optionDisplay").remove();
        $(".optionSelected").remove();
        $(".fsPlayerHand").not("#fsDealerHand").remove();
        chooseAheadOptions = {};
        pendingChooseAhead = {};
        dealerCardHandler.clearHand();
        initialDealFinished = false;
        currentSeat = undefined;
        currentOffer = undefined;
        isWaitingForCards = true;
        lastOptionSeatNumber = undefined;
        applyState("statePYB")
    }

    function onGameStateMessage(e) {
        var gsm = e.data[_GSM];
        currentOffer = undefined;
        if (visibleOption) trackOptionsVisible(false, "");
        if (gsm.state === model.PYB || gsm.state === model.LB) {
            if (isFirstEvent) applyState("statePYB")
        } else if (gsm.state === model.NMB || gsm.state === model.D) {
            if (lastGSM === undefined || !(lastGSM.state === model.NMB || lastGSM.state === model.D)) {
                applyState("stateInitialDeal");
                mySeats = findMySeats();
                cardHandlers = {};
                var index = 0;
                _.forEach(mySeats, function(seatNum) {
                    var handHTML = PLAYER_HAND_HTML.replace(/SEAT#/g, seatNum).replace(/INDEX#/g, index);
                    videoElm.append(handHTML);
                    cardHandlers[seatNum] = new vivo.ui.HandRep($("#playerCards" + seatNum), false, $("#playerHandHeader" + seatNum), true);
                    index++
                })
            }
            var isInitialDeal = frame.actionPanel.isInitialDeal();
            if (!initialDealFinished && !isInitialDeal) onInitialDealFinished();
            _.forEach(mySeats, function(seatNum) {
                var hand = _.find(gsm.playerHands, {
                    seat: seatNum
                });
                var ch = cardHandlers[seatNum];
                if (ch) ch.updateHand(hand, seatNum)
            });
            if (isInitialDeal) applyState("stateInitialDeal");
            dealerCardHandler.updateHand(gsm.dealerHand);
            if (dealerCardHandler.isDealerTurn()) {
                isWaitingForCards = true;
                applyState("stateGameInProgress");
                $(".insuraceButton").hide()
            }
        }
        lastGSM = gsm
    }

    function findMySeats() {
        var seats = [];
        for (var s = 1; s < 8; s++) {
            var seat = frame.betArea.getSeat(s);
            var amount = model.getBetAmount(betTypes["Win_H" + s]) + model.getBetAmount(betTypes["Backbet_H" + s]);
            if (seat.isMe() && (amount > 0 || !recivedWagerResponse)) {
                seats.push(s)
            }
        }
        return seats
    }

    function hasEnoughMoneyForDouble(bal, betAmount, cardHandler) {
        var mainBetType = betTypes["Win_H" + currentSeat];
        var mainSlot = frame.betArea.getSlot(mainBetType.getId());
        var hasDoubledRight = mainSlot.hasDoubledRight();
        var hasSplit = cardHandler.isSplitHand();
        var doubleDisabled = bal < betAmount;
        if (hasSplit) {
            doubleDisabled = bal < betAmount / 2;
            if (hasDoubledRight) doubleDisabled = bal < betAmount / 3
        }
        return !doubleDisabled
    }

    function onOpenOffer(e) {
        var offer = e.data.OpenOffer;
        var seatNum = getSeatNumberFromBetId(offer.betTypeId);
        populateInsuranceButtons();
        if (visibleOption) trackOptionsVisible(false, "");
        currentOffer = undefined;
        gameInProgressPanel.removeClass("insurance");
        if (offer.options[0] === "Insurance") {
            isWaitingForCards = false;
            applyState("stateGameInProgress");
            currentOffer = offer;
            handleInsurance();
            return
        } else $(".insuraceButton").hide();
        if (!dealerCardHandler.isDealerTurn()) {
            model.setActiveSeat(seatNum);
            isWaitingForCards = false;
            applyState(currentState)
        }
        bringHandToFront(seatNum, offer);
        lastOptionSeatNumber = seatNum
    }

    function onOptionTimerFinished() {
        if (currentOffer) {
            optionButtons.addClass("disabled");
            $(".insuraceButton").hide();
            trackOptionsVisible(false, "")
        }
    }

    function trackOptionsVisible(isVisible, optionTaken) {
        if (isVisible) {
            visibleOption = currentOffer;
            ws.sendOptionTrackingMessage(currentOffer.offerId, currentOffer.betTypeId, "Open")
        } else if (visibleOption !== undefined) {
            ws.sendOptionTrackingMessage(visibleOption.offerId, visibleOption.betTypeId, "Close", optionTaken);
            visibleOption = undefined
        }
    }

    function showNextValidHand(optionSeat) {
        if (optionSeat === lastOptionSeatNumber) return;
        if (mySeats.length < 1 || dealerCardHandler.isDealerTurn()) {
            applyState("stateGameInProgress");
            return
        }
        if (optionSeat < currentSeat) return;
        var stillHaveAValidHand = false;
        _.forEach(mySeats, function(myseat) {
            if (myseat > optionSeat) {
                bringHandToFront(myseat);
                stillHaveAValidHand = true;
                return false
            }
        });
        if (!stillHaveAValidHand) applyState("stateGameInProgress")
    }

    function handleInsurance(duration) {
        var doDisplayInsuranceText = false;
        var bal = model.getCurrentBalance();
        _.forEach(betTypes.insuranceValidBets, function(betType) {
            if (!model.isSettled(betType) && model.getBetAmount(betType) > 0 && bal > model.getBetAmount(betType) / 2) {
                displayInsurance(betType);
                doDisplayInsuranceText = true
            }
        });
        if (doDisplayInsuranceText) {
            trackOptionsVisible(true);
            gameInProgressPanel.addClass("insurance")
        } else applyState("stateGameInProgress")
    }

    function populateInsuranceButtons() {
        if (insuranceButtons.length === 0) {
            insuranceButtons = [{
                fadeOut: function() {},
                off: function() {}
            }, $("#insuraceButton1"), $("#insuraceButton2"), $("#insuraceButton3"), $("#insuraceButton4"), $("#insuraceButton5"), $("#insuraceButton6"), $("#insuraceButton7")];
            $(".insuranceButtonText").text(config.getLocale("bjclassic_insurance_yes", "Yes"))
        } else {
            _.forEach(insuranceButtons, function(b) {
                b.off()
            })
        }
    }

    function displayInsurance(betType) {
        var seatNumber = betType.getSeatNum(),
            $insuraceButton = insuranceButtons[seatNumber];
        $insuraceButton.one("click", function() {
            onInsuranceClicked($insuraceButton, betType, seatNumber)
        });
        $insuraceButton.show()
    }

    function onInsuranceClicked($button, betType, seatNumber) {
        $button.off();
        $button.fadeOut();
        var betAmount = model.getBetAmount(betType) / 2;
        var insuranceBetType = betTypes["Dealer_BJ_I" + seatNumber];
        model.placeBet(insuranceBetType, betAmount, frame.betArea.getSlot(insuranceBetType.getId()).betConfirmedCallBack)
    }

    function reorderHands() {
        for (var i = 0; i < mySeats.length; i++) $("#playerHand" + mySeats[i]).removeClass("phFixedLoc0 phFixedLoc1 phFixedLoc2").addClass("phFixedLoc" + i)
    }

    function bringHandToFront(seatNum, offer) {
        var activeSeat = model.getActiveSeat();
        var handIndex = mySeats.indexOf(seatNum);
        if (handIndex === -1) {
            showNextValidHand(seatNum);
            return
        }
        if (dealerCardHandler.isDealerTurn() || currentOffer && offer === undefined || offer === undefined && activeSeat > seatNum) {
            return
        }
        for (var i = 0; i < mySeats.length; i++) {
            var newIndex = i - handIndex;
            if (newIndex < 0) newIndex = newIndex + mySeats.length;
            $("#playerHand" + mySeats[i]).removeClass("phFixedLoc0 phFixedLoc1 phFixedLoc2").addClass("phFixedLoc" + newIndex)
        }
        currentSeat = seatNum;
        currentOffer = offer;
        config.closeAlert();
        if (autoTakeOption()) return;
        if (!initialDealFinished && offer === undefined) return;
        enableOptionButtons(seatNum, offer)
    }

    function autoTakeOption() {
        var autoOptionTaken = false;
        if (!currentOffer) return autoOptionTaken;
        var cardHandler = cardHandlers[currentSeat];
        if (model.getAutoHit8orLess() && cardHandler.is8orLess()) {
            autoApplyOption(currentSeat, "Hit");
            autoOptionTaken = true
        } else if (model.getAutoStand18orMore() && cardHandler.is18orMore()) {
            autoApplyOption(currentSeat, "Stand");
            autoOptionTaken = true
        }
        return autoOptionTaken
    }

    function enableOptionButtons(seatNum, offer) {
        if (offer === undefined) applyState("stateChooseAhead");
        else {
            trackOptionsVisible(true);
            applyState("stateMyTurn")
        }
        var cardHandler = cardHandlers[seatNum];
        var mainBetType = betTypes["Win_H" + seatNum];
        var bal = model.getCurrentBalance();
        var tipBetType = betTypes["Tip_H" + seatNum];
        $("#chooseAheadSeatNumberText").html(config.getLocale("chooseAheadText", "Choose ahead Seat") + seatNum + "&nbsp;&nbsp;&nbsp;" + cardHandler.getHandScoreText());
        var amount = model.getBetAmount(mainBetType);
        optionButtons.removeClass("pressed");
        if (offer === undefined && chooseAheadOptions[seatNum]) $("#optionButton" + chooseAheadOptions[seatNum]).addClass("pressed");
        if (cardHandler.isBJ()) optionButtons.addClass("disabled");
        else optionButtons.removeClass("disabled");
        if (!cardHandler.isPair() || bal < amount) optionButtonSplit.addClass("disabled");
        if (cardHandler.getCards().length !== 2) optionButtonSurrender.addClass("disabled");
        if (!cardHandler.isDoubleValid() || !hasEnoughMoneyForDouble(bal, amount, cardHandler)) optionButtonDouble.addClass("disabled")
    }

    function onOptionButtonClick(clickEven) {
        if (currentSeat === undefined) return;
        var buttonClicked = $(this);
        if (buttonClicked.hasClass("disabled")) return;
        var score = cardHandlers[currentSeat].getNumericScore();
        var option = buttonClicked.get(0).id.replace("optionButton", "");
        var optionText = config.getLocale("option_" + option.toLowerCase(), option.toLowerCase());
        if (score === 14 && (option === "Split" || option === "Stand" || option === "Surrender") && frame.cardHandler.is777Active(currentSeat)) {
            config.displayAlert(config.getLocale("client_alert_title_info", "Info:"), config.getLocale("777Jackpot_stand_warning"), optionText, function() {
                optionClickInner(option);
                config.closeAlert();
                hitWarningOpen = false
            }, config.getLocale("cancel", "Cancel"), function() {
                config.closeAlert();
                hitWarningOpen = false
            });
            hitWarningOpen = true;
            return
        }
        if (score <= 11 && option === "Stand" && cardHandlers[currentSeat].getScore().indexOf("/") === -1) {
            config.displayAlert(config.getLocale("client_alert_title_info", "Info:"), config.getLocale("bjc_hit_warning", "Are you sure you want to {0} on {1}?").replace("{0}", optionText).replace("{1}", score), optionText, function() {
                optionClickInner(option);
                config.closeAlert();
                hitWarningOpen = false
            }, config.getLocale("cancel", "Cancel"), function() {
                config.closeAlert();
                hitWarningOpen = false
            });
            hitWarningOpen = true;
            return
        }
        if (score >= 17 && (option === "Hit" || option === "Double")) {
            config.displayAlert(config.getLocale("client_alert_title_info", "Info:"), config.getLocale("bjc_hit_warning").replace("{0}", optionText).replace("{1}", score), optionText, function() {
                optionClickInner(option);
                config.closeAlert();
                hitWarningOpen = false
            }, config.getLocale("option_stand", "Stand"), function() {
                optionClickInner("Stand");
                config.closeAlert();
                hitWarningOpen = false
            });
            hitWarningOpen = true;
            return
        }
        optionClickInner(option)
    }

    function optionClickInner(option) {
        optionButtons.removeClass("pressed");
        $("#optionButton" + option).addClass("pressed");
        if (currentOffer !== undefined) {
            model.takeOffer(currentOffer.offerId, option, currentOffer.betTypeId, onOptionResponse);
            trackOptionsVisible(false, option);
            optionButtons.addClass("disabled")
        } else {
            var id = chooseAheadId--;
            pendingChooseAhead[id] = currentSeat;
            model.takeOffer(id, option, betTypes["Win_H" + currentSeat].getId(), onChooseaheadResponse);
            if (mySeats.length > 1) {
                var currentIndex = mySeats.indexOf(currentSeat);
                var nextIndex = (currentIndex + 1) % mySeats.length;
                bringHandToFront(mySeats[nextIndex])
            }
        }
    }

    function onOptionResponse(status, offerId, confirmedOption, errorMsg) {
        if (status === 0) {
            config.closeAlert()
        } else {
            console.error("Error option didn't work allow them to try again..");
            enableOptionButtons(currentSeat, currentOffer)
        }
    }

    function onChooseaheadResponse(status, offerId, confirmedOption, errorMsg) {
        var lastSeatForOption = pendingChooseAhead[offerId];
        delete pendingChooseAhead[offerId];
        chooseAheadOptions[lastSeatForOption] = confirmedOption;
        createOptionElem(lastSeatForOption, true, confirmedOption);
        if (lastSeatForOption === currentSeat) {
            optionButtons.removeClass("pressed");
            $("#optionButton" + confirmedOption).addClass("pressed")
        }
    }

    function onInitialOptionTakenStatus(e) {
        var ots = e.data.InitialOptionTakenStatus;
        _.forEach(ots, function(value, seatId) {
            var s = parseInt(seatId.slice(-1), 10);
            var isMySeat = mySeats.indexOf(s) !== -1;
            if (!isMySeat) return;
            if (!value.chooseAhead && currentSeat === s) {
                optionButtons.addClass("disabled");
                optionButtons.removeClass("pressed");
                $("#optionButton" + value.option).addClass("pressed");
                currentState = "stateMyTurn";
                currentOffer = {}
            } else {
                chooseAheadOptions[s] = value.option;
                if (s === currentSeat) {
                    optionButtons.removeClass("pressed");
                    $("#optionButton" + value.option).addClass("pressed")
                }
            }
            createOptionElem(s, value.chooseAhead, value.option)
        })
    }

    function onOptionTakenNotification(e) {
        var dn = e.data.OptionTakenNotification;
        if (dn.chooseAhead) return;
        createOptionElem(dn.seat, false, dn.option);
        config.closeAlert();
        model.setActiveSeat(dn.seat);
        isWaitingForCards = true;
        if (dn.seat !== currentSeat) {
            currentOffer = undefined;
            bringHandToFront(dn.seat)
        }
        var isMySeat = mySeats.indexOf(dn.seat) !== -1;
        if (!isMySeat && currentState === "stateMyTurn") currentState = "stateGameInProgress";
        else if (isMySeat) {
            optionButtons.addClass("disabled");
            optionButtons.removeClass("pressed");
            $("#optionButton" + dn.option).addClass("pressed");
            currentState = "stateMyTurn";
            currentOffer = {}
        }
        applyState(currentState);
        frame.gameState.startTimer(0, 0, function() {});
        if (!(dn.timedout && isMySeat)) frame.gameState.updateClasses($("#gameState"), "PYBStatus", "PYB", "");
        if (dn.option === "Surrender") {
            var e2 = config.newEvent(model.SURRENDER_EVENT);
            e2.data = {
                seat: dn.seat
            };
            model.dispatchEvent(e2);
            onHandFinishedEvent({
                data: {
                    seat: dn.seat,
                    isSurrender: true
                }
            })
        }
    }

    function createOptionElem(seatNum, isChoseahead, option) {
        var _activeHand = model.getActiveHand(),
            $seat = $("#seat" + seatNum),
            splitHand = "";
        if (!isChoseahead && _activeHand !== undefined) splitHand = splitHand + _activeHand;
        $seat.find(".optionDisplay").remove();
        $seat.append('<div class="optionDisplay ' + splitHand + " vigIcon horizontal option" + option + ' pressed"></div>');
        if (!isChoseahead) {
            var $option = $("#seat" + seatNum).find(".optionDisplay");
            $option.css("text-indent");
            $option.addClass("fadeOption")
        }
    }
};